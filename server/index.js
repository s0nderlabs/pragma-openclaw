#!/usr/bin/env node
import { createRequire } from 'module'; const require = createRequire(import.meta.url);
var xde=Object.create;var lv=Object.defineProperty;var wde=Object.getOwnPropertyDescriptor;var vde=Object.getOwnPropertyNames;var Tde=Object.getPrototypeOf,Sde=Object.prototype.hasOwnProperty;var Uy=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var I=(e,t)=>()=>(e&&(t=e(e=0)),t);var L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ni=(e,t)=>{for(var n in t)lv(e,n,{get:t[n],enumerable:!0})},Ade=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of vde(t))!Sde.call(e,a)&&a!==n&&lv(e,a,{get:()=>t[a],enumerable:!(r=wde(t,a))||r.enumerable});return e};var Hy=(e,t,n)=>(n=e!=null?xde(Tde(e)):{},Ade(t||!e||!e.__esModule?lv(n,"default",{value:e,enumerable:!0}):n,e));var mm=L(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.regexpCode=ln.getEsmExportName=ln.getProperty=ln.safeStringify=ln.stringify=ln.strConcat=ln.addCodeArg=ln.str=ln._=ln.nil=ln._Code=ln.Name=ln.IDENTIFIER=ln._CodeOrName=void 0;var lm=class{};ln._CodeOrName=lm;ln.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var $u=class extends lm{constructor(t){if(super(),!ln.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ln.Name=$u;var js=class extends lm{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((n,r)=>`${n}${r}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((n,r)=>(r instanceof $u&&(n[r.str]=(n[r.str]||0)+1),n),{})}};ln._Code=js;ln.nil=new js("");function XL(e,...t){let n=[e[0]],r=0;for(;r<t.length;)XS(n,t[r]),n.push(e[++r]);return new js(n)}ln._=XL;var KS=new js("+");function JL(e,...t){let n=[pm(e[0])],r=0;for(;r<t.length;)n.push(KS),XS(n,t[r]),n.push(KS,pm(e[++r]));return vbe(n),new js(n)}ln.str=JL;function XS(e,t){t instanceof js?e.push(...t._items):t instanceof $u?e.push(t):e.push(Abe(t))}ln.addCodeArg=XS;function vbe(e){let t=1;for(;t<e.length-1;){if(e[t]===KS){let n=Tbe(e[t-1],e[t+1]);if(n!==void 0){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}function Tbe(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof $u||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof $u))return`"${e}${t.slice(1)}`}function Sbe(e,t){return t.emptyStr()?e:e.emptyStr()?t:JL`${e}${t}`}ln.strConcat=Sbe;function Abe(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:pm(Array.isArray(e)?e.join(","):e)}function _be(e){return new js(pm(e))}ln.stringify=_be;function pm(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ln.safeStringify=pm;function Ebe(e){return typeof e=="string"&&ln.IDENTIFIER.test(e)?new js(`.${e}`):XL`[${e}]`}ln.getProperty=Ebe;function kbe(e){if(typeof e=="string"&&ln.IDENTIFIER.test(e))return new js(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}ln.getEsmExportName=kbe;function Ibe(e){return new js(e.toString())}ln.regexpCode=Ibe});var YS=L(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.ValueScope=Ha.ValueScopeName=Ha.Scope=Ha.varKinds=Ha.UsedValueState=void 0;var Ua=mm(),JS=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},zg;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(zg||(Ha.UsedValueState=zg={}));Ha.varKinds={const:new Ua.Name("const"),let:new Ua.Name("let"),var:new Ua.Name("var")};var jg=class{constructor({prefixes:t,parent:n}={}){this._names={},this._prefixes=t,this._parent=n}toName(t){return t instanceof Ua.Name?t:this.name(t)}name(t){return new Ua.Name(this._newName(t))}_newName(t){let n=this._names[t]||this._nameGroup(t);return`${t}${n.index++}`}_nameGroup(t){var n,r;if(!((r=(n=this._parent)===null||n===void 0?void 0:n._prefixes)===null||r===void 0)&&r.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Ha.Scope=jg;var qg=class extends Ua.Name{constructor(t,n){super(n),this.prefix=t}setValue(t,{property:n,itemIndex:r}){this.value=t,this.scopePath=(0,Ua._)`.${new Ua.Name(n)}[${r}]`}};Ha.ValueScopeName=qg;var Cbe=(0,Ua._)`\n`,QS=class extends jg{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Cbe:Ua.nil}}get(){return this._scope}name(t){return new qg(t,this._newName(t))}value(t,n){var r;if(n.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let a=this.toName(t),{prefix:s}=a,o=(r=n.key)!==null&&r!==void 0?r:n.ref,i=this._values[s];if(i){let l=i.get(o);if(l)return l}else i=this._values[s]=new Map;i.set(o,a);let u=this._scope[s]||(this._scope[s]=[]),d=u.length;return u[d]=n.ref,a.setValue(n,{property:s,itemIndex:d}),a}getValue(t,n){let r=this._values[t];if(r)return r.get(n)}scopeRefs(t,n=this._values){return this._reduceValues(n,r=>{if(r.scopePath===void 0)throw new Error(`CodeGen: name "${r}" has no value`);return(0,Ua._)`${t}${r.scopePath}`})}scopeCode(t=this._values,n,r){return this._reduceValues(t,a=>{if(a.value===void 0)throw new Error(`CodeGen: name "${a}" has no value`);return a.value.code},n,r)}_reduceValues(t,n,r={},a){let s=Ua.nil;for(let o in t){let i=t[o];if(!i)continue;let u=r[o]=r[o]||new Map;i.forEach(d=>{if(u.has(d))return;u.set(d,zg.Started);let l=n(d);if(l){let p=this.opts.es5?Ha.varKinds.var:Ha.varKinds.const;s=(0,Ua._)`${s}${p} ${d} = ${l};${this.opts._n}`}else if(l=a?.(d))s=(0,Ua._)`${s}${l}${this.opts._n}`;else throw new JS(d);u.set(d,zg.Completed)})}return s}};Ha.ValueScope=QS});var Dt=L(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.or=Ut.and=Ut.not=Ut.CodeGen=Ut.operators=Ut.varKinds=Ut.ValueScopeName=Ut.ValueScope=Ut.Scope=Ut.Name=Ut.regexpCode=Ut.stringify=Ut.getProperty=Ut.nil=Ut.strConcat=Ut.str=Ut._=void 0;var en=mm(),Eo=YS(),Cc=mm();Object.defineProperty(Ut,"_",{enumerable:!0,get:function(){return Cc._}});Object.defineProperty(Ut,"str",{enumerable:!0,get:function(){return Cc.str}});Object.defineProperty(Ut,"strConcat",{enumerable:!0,get:function(){return Cc.strConcat}});Object.defineProperty(Ut,"nil",{enumerable:!0,get:function(){return Cc.nil}});Object.defineProperty(Ut,"getProperty",{enumerable:!0,get:function(){return Cc.getProperty}});Object.defineProperty(Ut,"stringify",{enumerable:!0,get:function(){return Cc.stringify}});Object.defineProperty(Ut,"regexpCode",{enumerable:!0,get:function(){return Cc.regexpCode}});Object.defineProperty(Ut,"Name",{enumerable:!0,get:function(){return Cc.Name}});var Zg=YS();Object.defineProperty(Ut,"Scope",{enumerable:!0,get:function(){return Zg.Scope}});Object.defineProperty(Ut,"ValueScope",{enumerable:!0,get:function(){return Zg.ValueScope}});Object.defineProperty(Ut,"ValueScopeName",{enumerable:!0,get:function(){return Zg.ValueScopeName}});Object.defineProperty(Ut,"varKinds",{enumerable:!0,get:function(){return Zg.varKinds}});Ut.operators={GT:new en._Code(">"),GTE:new en._Code(">="),LT:new en._Code("<"),LTE:new en._Code("<="),EQ:new en._Code("==="),NEQ:new en._Code("!=="),NOT:new en._Code("!"),OR:new en._Code("||"),AND:new en._Code("&&"),ADD:new en._Code("+")};var u1=class{optimizeNodes(){return this}optimizeNames(t,n){return this}},eA=class extends u1{constructor(t,n,r){super(),this.varKind=t,this.name=n,this.rhs=r}render({es5:t,_n:n}){let r=t?Eo.varKinds.var:this.varKind,a=this.rhs===void 0?"":` = ${this.rhs}`;return`${r} ${this.name}${a};`+n}optimizeNames(t,n){if(t[this.name.str])return this.rhs&&(this.rhs=Rd(this.rhs,t,n)),this}get names(){return this.rhs instanceof en._CodeOrName?this.rhs.names:{}}},Gg=class extends u1{constructor(t,n,r){super(),this.lhs=t,this.rhs=n,this.sideEffects=r}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,n){if(!(this.lhs instanceof en.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Rd(this.rhs,t,n),this}get names(){let t=this.lhs instanceof en.Name?{}:{...this.lhs.names};return Wg(t,this.rhs)}},tA=class extends Gg{constructor(t,n,r,a){super(t,r,a),this.op=n}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},nA=class extends u1{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},rA=class extends u1{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},aA=class extends u1{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},sA=class extends u1{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,n){return this.code=Rd(this.code,t,n),this}get names(){return this.code instanceof en._CodeOrName?this.code.names:{}}},bm=class extends u1{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((n,r)=>n+r.render(t),"")}optimizeNodes(){let{nodes:t}=this,n=t.length;for(;n--;){let r=t[n].optimizeNodes();Array.isArray(r)?t.splice(n,1,...r):r?t[n]=r:t.splice(n,1)}return t.length>0?this:void 0}optimizeNames(t,n){let{nodes:r}=this,a=r.length;for(;a--;){let s=r[a];s.optimizeNames(t,n)||(Pbe(t,s.names),r.splice(a,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((t,n)=>Ou(t,n.names),{})}},d1=class extends bm{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},oA=class extends bm{},Pd=class extends d1{};Pd.kind="else";var Du=class e extends d1{constructor(t,n){super(n),this.condition=t}render(t){let n=`if(${this.condition})`+super.render(t);return this.else&&(n+="else "+this.else.render(t)),n}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let n=this.else;if(n){let r=n.optimizeNodes();n=this.else=Array.isArray(r)?new Pd(r):r}if(n)return t===!1?n instanceof e?n:n.nodes:this.nodes.length?this:new e(QL(t),n instanceof e?[n]:n.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,n){var r;if(this.else=(r=this.else)===null||r===void 0?void 0:r.optimizeNames(t,n),!!(super.optimizeNames(t,n)||this.else))return this.condition=Rd(this.condition,t,n),this}get names(){let t=super.names;return Wg(t,this.condition),this.else&&Ou(t,this.else.names),t}};Du.kind="if";var Mu=class extends d1{};Mu.kind="for";var iA=class extends Mu{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iteration=Rd(this.iteration,t,n),this}get names(){return Ou(super.names,this.iteration.names)}},cA=class extends Mu{constructor(t,n,r,a){super(),this.varKind=t,this.name=n,this.from=r,this.to=a}render(t){let n=t.es5?Eo.varKinds.var:this.varKind,{name:r,from:a,to:s}=this;return`for(${n} ${r}=${a}; ${r}<${s}; ${r}++)`+super.render(t)}get names(){let t=Wg(super.names,this.from);return Wg(t,this.to)}},Vg=class extends Mu{constructor(t,n,r,a){super(),this.loop=t,this.varKind=n,this.name=r,this.iterable=a}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iterable=Rd(this.iterable,t,n),this}get names(){return Ou(super.names,this.iterable.names)}},ym=class extends d1{constructor(t,n,r){super(),this.name=t,this.args=n,this.async=r}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};ym.kind="func";var gm=class extends bm{render(t){return"return "+super.render(t)}};gm.kind="return";var uA=class extends d1{render(t){let n="try"+super.render(t);return this.catch&&(n+=this.catch.render(t)),this.finally&&(n+=this.finally.render(t)),n}optimizeNodes(){var t,n;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(n=this.finally)===null||n===void 0||n.optimizeNodes(),this}optimizeNames(t,n){var r,a;return super.optimizeNames(t,n),(r=this.catch)===null||r===void 0||r.optimizeNames(t,n),(a=this.finally)===null||a===void 0||a.optimizeNames(t,n),this}get names(){let t=super.names;return this.catch&&Ou(t,this.catch.names),this.finally&&Ou(t,this.finally.names),t}},hm=class extends d1{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};hm.kind="catch";var xm=class extends d1{render(t){return"finally"+super.render(t)}};xm.kind="finally";var dA=class{constructor(t,n={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...n,_n:n.lines?`
`:""},this._extScope=t,this._scope=new Eo.Scope({parent:t}),this._nodes=[new oA]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,n){let r=this._extScope.value(t,n);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(t,n){return this._extScope.getValue(t,n)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,n,r,a){let s=this._scope.toName(n);return r!==void 0&&a&&(this._constants[s.str]=r),this._leafNode(new eA(t,s,r)),s}const(t,n,r){return this._def(Eo.varKinds.const,t,n,r)}let(t,n,r){return this._def(Eo.varKinds.let,t,n,r)}var(t,n,r){return this._def(Eo.varKinds.var,t,n,r)}assign(t,n,r){return this._leafNode(new Gg(t,n,r))}add(t,n){return this._leafNode(new tA(t,Ut.operators.ADD,n))}code(t){return typeof t=="function"?t():t!==en.nil&&this._leafNode(new sA(t)),this}object(...t){let n=["{"];for(let[r,a]of t)n.length>1&&n.push(","),n.push(r),(r!==a||this.opts.es5)&&(n.push(":"),(0,en.addCodeArg)(n,a));return n.push("}"),new en._Code(n)}if(t,n,r){if(this._blockNode(new Du(t)),n&&r)this.code(n).else().code(r).endIf();else if(n)this.code(n).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Du(t))}else(){return this._elseNode(new Pd)}endIf(){return this._endBlockNode(Du,Pd)}_for(t,n){return this._blockNode(t),n&&this.code(n).endFor(),this}for(t,n){return this._for(new iA(t),n)}forRange(t,n,r,a,s=this.opts.es5?Eo.varKinds.var:Eo.varKinds.let){let o=this._scope.toName(t);return this._for(new cA(s,o,n,r),()=>a(o))}forOf(t,n,r,a=Eo.varKinds.const){let s=this._scope.toName(t);if(this.opts.es5){let o=n instanceof en.Name?n:this.var("_arr",n);return this.forRange("_i",0,(0,en._)`${o}.length`,i=>{this.var(s,(0,en._)`${o}[${i}]`),r(s)})}return this._for(new Vg("of",a,s,n),()=>r(s))}forIn(t,n,r,a=this.opts.es5?Eo.varKinds.var:Eo.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,en._)`Object.keys(${n})`,r);let s=this._scope.toName(t);return this._for(new Vg("in",a,s,n),()=>r(s))}endFor(){return this._endBlockNode(Mu)}label(t){return this._leafNode(new nA(t))}break(t){return this._leafNode(new rA(t))}return(t){let n=new gm;if(this._blockNode(n),this.code(t),n.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(gm)}try(t,n,r){if(!n&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');let a=new uA;if(this._blockNode(a),this.code(t),n){let s=this.name("e");this._currNode=a.catch=new hm(s),n(s)}return r&&(this._currNode=a.finally=new xm,this.code(r)),this._endBlockNode(hm,xm)}throw(t){return this._leafNode(new aA(t))}block(t,n){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(n),this}endBlock(t){let n=this._blockStarts.pop();if(n===void 0)throw new Error("CodeGen: not in self-balancing block");let r=this._nodes.length-n;if(r<0||t!==void 0&&r!==t)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${t} expected`);return this._nodes.length=n,this}func(t,n=en.nil,r,a){return this._blockNode(new ym(t,n,r)),a&&this.code(a).endFunc(),this}endFunc(){return this._endBlockNode(ym)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,n){let r=this._currNode;if(r instanceof t||n&&r instanceof n)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${n?`${t.kind}/${n.kind}`:t.kind}"`)}_elseNode(t){let n=this._currNode;if(!(n instanceof Du))throw new Error('CodeGen: "else" without "if"');return this._currNode=n.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let n=this._nodes;n[n.length-1]=t}};Ut.CodeGen=dA;function Ou(e,t){for(let n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function Wg(e,t){return t instanceof en._CodeOrName?Ou(e,t.names):e}function Rd(e,t,n){if(e instanceof en.Name)return r(e);if(!a(e))return e;return new en._Code(e._items.reduce((s,o)=>(o instanceof en.Name&&(o=r(o)),o instanceof en._Code?s.push(...o._items):s.push(o),s),[]));function r(s){let o=n[s.str];return o===void 0||t[s.str]!==1?s:(delete t[s.str],o)}function a(s){return s instanceof en._Code&&s._items.some(o=>o instanceof en.Name&&t[o.str]===1&&n[o.str]!==void 0)}}function Pbe(e,t){for(let n in t)e[n]=(e[n]||0)-(t[n]||0)}function QL(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,en._)`!${fA(e)}`}Ut.not=QL;var Rbe=YL(Ut.operators.AND);function $be(...e){return e.reduce(Rbe)}Ut.and=$be;var Dbe=YL(Ut.operators.OR);function Mbe(...e){return e.reduce(Dbe)}Ut.or=Mbe;function YL(e){return(t,n)=>t===en.nil?n:n===en.nil?t:(0,en._)`${fA(t)} ${e} ${fA(n)}`}function fA(e){return e instanceof en.Name?e:(0,en._)`(${e})`}});var pn=L(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.checkStrictMode=Ht.getErrorPath=Ht.Type=Ht.useFunc=Ht.setEvaluated=Ht.evaluatedPropsToName=Ht.mergeEvaluated=Ht.eachItem=Ht.unescapeJsonPointer=Ht.escapeJsonPointer=Ht.escapeFragment=Ht.unescapeFragment=Ht.schemaRefOrVal=Ht.schemaHasRulesButRef=Ht.schemaHasRules=Ht.checkUnknownRules=Ht.alwaysValidSchema=Ht.toHash=void 0;var $n=Dt(),Obe=mm();function Nbe(e){let t={};for(let n of e)t[n]=!0;return t}Ht.toHash=Nbe;function Lbe(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(nB(e,t),!rB(t,e.self.RULES.all))}Ht.alwaysValidSchema=Lbe;function nB(e,t=e.schema){let{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;let a=r.RULES.keywords;for(let s in t)a[s]||oB(e,`unknown keyword: "${s}"`)}Ht.checkUnknownRules=nB;function rB(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(t[n])return!0;return!1}Ht.schemaHasRules=rB;function Bbe(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Ht.schemaHasRulesButRef=Bbe;function Ube({topSchemaRef:e,schemaPath:t},n,r,a){if(!a){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,$n._)`${n}`}return(0,$n._)`${e}${t}${(0,$n.getProperty)(r)}`}Ht.schemaRefOrVal=Ube;function Hbe(e){return aB(decodeURIComponent(e))}Ht.unescapeFragment=Hbe;function Fbe(e){return encodeURIComponent(pA(e))}Ht.escapeFragment=Fbe;function pA(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Ht.escapeJsonPointer=pA;function aB(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Ht.unescapeJsonPointer=aB;function zbe(e,t){if(Array.isArray(e))for(let n of e)t(n);else t(e)}Ht.eachItem=zbe;function eB({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(a,s,o,i)=>{let u=o===void 0?s:o instanceof $n.Name?(s instanceof $n.Name?e(a,s,o):t(a,s,o),o):s instanceof $n.Name?(t(a,o,s),s):n(s,o);return i===$n.Name&&!(u instanceof $n.Name)?r(a,u):u}}Ht.mergeEvaluated={props:eB({mergeNames:(e,t,n)=>e.if((0,$n._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,$n._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,$n._)`${n} || {}`).code((0,$n._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,$n._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,$n._)`${n} || {}`),mA(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:sB}),items:eB({mergeNames:(e,t,n)=>e.if((0,$n._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,$n._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,$n._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,$n._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function sB(e,t){if(t===!0)return e.var("props",!0);let n=e.var("props",(0,$n._)`{}`);return t!==void 0&&mA(e,n,t),n}Ht.evaluatedPropsToName=sB;function mA(e,t,n){Object.keys(n).forEach(r=>e.assign((0,$n._)`${t}${(0,$n.getProperty)(r)}`,!0))}Ht.setEvaluated=mA;var tB={};function jbe(e,t){return e.scopeValue("func",{ref:t,code:tB[t.code]||(tB[t.code]=new Obe._Code(t.code))})}Ht.useFunc=jbe;var lA;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(lA||(Ht.Type=lA={}));function qbe(e,t,n){if(e instanceof $n.Name){let r=t===lA.Num;return n?r?(0,$n._)`"[" + ${e} + "]"`:(0,$n._)`"['" + ${e} + "']"`:r?(0,$n._)`"/" + ${e}`:(0,$n._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,$n.getProperty)(e).toString():"/"+pA(e)}Ht.getErrorPath=qbe;function oB(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Ht.checkStrictMode=oB});var f1=L(bA=>{"use strict";Object.defineProperty(bA,"__esModule",{value:!0});var Cr=Dt(),Gbe={data:new Cr.Name("data"),valCxt:new Cr.Name("valCxt"),instancePath:new Cr.Name("instancePath"),parentData:new Cr.Name("parentData"),parentDataProperty:new Cr.Name("parentDataProperty"),rootData:new Cr.Name("rootData"),dynamicAnchors:new Cr.Name("dynamicAnchors"),vErrors:new Cr.Name("vErrors"),errors:new Cr.Name("errors"),this:new Cr.Name("this"),self:new Cr.Name("self"),scope:new Cr.Name("scope"),json:new Cr.Name("json"),jsonPos:new Cr.Name("jsonPos"),jsonLen:new Cr.Name("jsonLen"),jsonPart:new Cr.Name("jsonPart")};bA.default=Gbe});var wm=L(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.extendErrors=Pr.resetErrorsCount=Pr.reportExtraError=Pr.reportError=Pr.keyword$DataError=Pr.keywordError=void 0;var an=Dt(),Kg=pn(),sa=f1();Pr.keywordError={message:({keyword:e})=>(0,an.str)`must pass "${e}" keyword validation`};Pr.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,an.str)`"${e}" keyword must be ${t} ($data)`:(0,an.str)`"${e}" keyword is invalid ($data)`};function Vbe(e,t=Pr.keywordError,n,r){let{it:a}=e,{gen:s,compositeRule:o,allErrors:i}=a,u=uB(e,t,n);r??(o||i)?iB(s,u):cB(a,(0,an._)`[${u}]`)}Pr.reportError=Vbe;function Wbe(e,t=Pr.keywordError,n){let{it:r}=e,{gen:a,compositeRule:s,allErrors:o}=r,i=uB(e,t,n);iB(a,i),s||o||cB(r,sa.default.vErrors)}Pr.reportExtraError=Wbe;function Zbe(e,t){e.assign(sa.default.errors,t),e.if((0,an._)`${sa.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,an._)`${sa.default.vErrors}.length`,t),()=>e.assign(sa.default.vErrors,null)))}Pr.resetErrorsCount=Zbe;function Kbe({gen:e,keyword:t,schemaValue:n,data:r,errsCount:a,it:s}){if(a===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",a,sa.default.errors,i=>{e.const(o,(0,an._)`${sa.default.vErrors}[${i}]`),e.if((0,an._)`${o}.instancePath === undefined`,()=>e.assign((0,an._)`${o}.instancePath`,(0,an.strConcat)(sa.default.instancePath,s.errorPath))),e.assign((0,an._)`${o}.schemaPath`,(0,an.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,an._)`${o}.schema`,n),e.assign((0,an._)`${o}.data`,r))})}Pr.extendErrors=Kbe;function iB(e,t){let n=e.const("err",t);e.if((0,an._)`${sa.default.vErrors} === null`,()=>e.assign(sa.default.vErrors,(0,an._)`[${n}]`),(0,an._)`${sa.default.vErrors}.push(${n})`),e.code((0,an._)`${sa.default.errors}++`)}function cB(e,t){let{gen:n,validateName:r,schemaEnv:a}=e;a.$async?n.throw((0,an._)`new ${e.ValidationError}(${t})`):(n.assign((0,an._)`${r}.errors`,t),n.return(!1))}var Nu={keyword:new an.Name("keyword"),schemaPath:new an.Name("schemaPath"),params:new an.Name("params"),propertyName:new an.Name("propertyName"),message:new an.Name("message"),schema:new an.Name("schema"),parentSchema:new an.Name("parentSchema")};function uB(e,t,n){let{createErrors:r}=e.it;return r===!1?(0,an._)`{}`:Xbe(e,t,n)}function Xbe(e,t,n={}){let{gen:r,it:a}=e,s=[Jbe(a,n),Qbe(e,n)];return Ybe(e,t,s),r.object(...s)}function Jbe({errorPath:e},{instancePath:t}){let n=t?(0,an.str)`${e}${(0,Kg.getErrorPath)(t,Kg.Type.Str)}`:e;return[sa.default.instancePath,(0,an.strConcat)(sa.default.instancePath,n)]}function Qbe({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:r}){let a=r?t:(0,an.str)`${t}/${e}`;return n&&(a=(0,an.str)`${a}${(0,Kg.getErrorPath)(n,Kg.Type.Str)}`),[Nu.schemaPath,a]}function Ybe(e,{params:t,message:n},r){let{keyword:a,data:s,schemaValue:o,it:i}=e,{opts:u,propertyName:d,topSchemaRef:l,schemaPath:p}=i;r.push([Nu.keyword,a],[Nu.params,typeof t=="function"?t(e):t||(0,an._)`{}`]),u.messages&&r.push([Nu.message,typeof n=="function"?n(e):n]),u.verbose&&r.push([Nu.schema,o],[Nu.parentSchema,(0,an._)`${l}${p}`],[sa.default.data,s]),d&&r.push([Nu.propertyName,d])}});var fB=L($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.boolOrEmptySchema=$d.topBoolOrEmptySchema=void 0;var e8e=wm(),t8e=Dt(),n8e=f1(),r8e={message:"boolean schema is false"};function a8e(e){let{gen:t,schema:n,validateName:r}=e;n===!1?dB(e,!1):typeof n=="object"&&n.$async===!0?t.return(n8e.default.data):(t.assign((0,t8e._)`${r}.errors`,null),t.return(!0))}$d.topBoolOrEmptySchema=a8e;function s8e(e,t){let{gen:n,schema:r}=e;r===!1?(n.var(t,!1),dB(e)):n.var(t,!0)}$d.boolOrEmptySchema=s8e;function dB(e,t){let{gen:n,data:r}=e,a={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,e8e.reportError)(a,r8e,void 0,t)}});var yA=L(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.getRules=Dd.isJSONType=void 0;var o8e=["string","number","integer","boolean","null","object","array"],i8e=new Set(o8e);function c8e(e){return typeof e=="string"&&i8e.has(e)}Dd.isJSONType=c8e;function u8e(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Dd.getRules=u8e});var gA=L(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.shouldUseRule=Pc.shouldUseGroup=Pc.schemaHasRulesForType=void 0;function d8e({schema:e,self:t},n){let r=t.RULES.types[n];return r&&r!==!0&&lB(e,r)}Pc.schemaHasRulesForType=d8e;function lB(e,t){return t.rules.some(n=>pB(e,n))}Pc.shouldUseGroup=lB;function pB(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Pc.shouldUseRule=pB});var vm=L(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.reportTypeError=Rr.checkDataTypes=Rr.checkDataType=Rr.coerceAndCheckDataType=Rr.getJSONTypes=Rr.getSchemaTypes=Rr.DataType=void 0;var f8e=yA(),l8e=gA(),p8e=wm(),kt=Dt(),mB=pn(),Md;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Md||(Rr.DataType=Md={}));function m8e(e){let t=bB(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Rr.getSchemaTypes=m8e;function bB(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(f8e.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Rr.getJSONTypes=bB;function b8e(e,t){let{gen:n,data:r,opts:a}=e,s=y8e(t,a.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,l8e.schemaHasRulesForType)(e,t[0]));if(o){let i=xA(t,r,a.strictNumbers,Md.Wrong);n.if(i,()=>{s.length?g8e(e,t,s):wA(e)})}return o}Rr.coerceAndCheckDataType=b8e;var yB=new Set(["string","number","integer","boolean","null"]);function y8e(e,t){return t?e.filter(n=>yB.has(n)||t==="array"&&n==="array"):[]}function g8e(e,t,n){let{gen:r,data:a,opts:s}=e,o=r.let("dataType",(0,kt._)`typeof ${a}`),i=r.let("coerced",(0,kt._)`undefined`);s.coerceTypes==="array"&&r.if((0,kt._)`${o} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>r.assign(a,(0,kt._)`${a}[0]`).assign(o,(0,kt._)`typeof ${a}`).if(xA(t,a,s.strictNumbers),()=>r.assign(i,a))),r.if((0,kt._)`${i} !== undefined`);for(let d of n)(yB.has(d)||d==="array"&&s.coerceTypes==="array")&&u(d);r.else(),wA(e),r.endIf(),r.if((0,kt._)`${i} !== undefined`,()=>{r.assign(a,i),h8e(e,i)});function u(d){switch(d){case"string":r.elseIf((0,kt._)`${o} == "number" || ${o} == "boolean"`).assign(i,(0,kt._)`"" + ${a}`).elseIf((0,kt._)`${a} === null`).assign(i,(0,kt._)`""`);return;case"number":r.elseIf((0,kt._)`${o} == "boolean" || ${a} === null
              || (${o} == "string" && ${a} && ${a} == +${a})`).assign(i,(0,kt._)`+${a}`);return;case"integer":r.elseIf((0,kt._)`${o} === "boolean" || ${a} === null
              || (${o} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(i,(0,kt._)`+${a}`);return;case"boolean":r.elseIf((0,kt._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(i,!1).elseIf((0,kt._)`${a} === "true" || ${a} === 1`).assign(i,!0);return;case"null":r.elseIf((0,kt._)`${a} === "" || ${a} === 0 || ${a} === false`),r.assign(i,null);return;case"array":r.elseIf((0,kt._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${a} === null`).assign(i,(0,kt._)`[${a}]`)}}}function h8e({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,kt._)`${t} !== undefined`,()=>e.assign((0,kt._)`${t}[${n}]`,r))}function hA(e,t,n,r=Md.Correct){let a=r===Md.Correct?kt.operators.EQ:kt.operators.NEQ,s;switch(e){case"null":return(0,kt._)`${t} ${a} null`;case"array":s=(0,kt._)`Array.isArray(${t})`;break;case"object":s=(0,kt._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,kt._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,kt._)`typeof ${t} ${a} ${e}`}return r===Md.Correct?s:(0,kt.not)(s);function o(i=kt.nil){return(0,kt.and)((0,kt._)`typeof ${t} == "number"`,i,n?(0,kt._)`isFinite(${t})`:kt.nil)}}Rr.checkDataType=hA;function xA(e,t,n,r){if(e.length===1)return hA(e[0],t,n,r);let a,s=(0,mB.toHash)(e);if(s.array&&s.object){let o=(0,kt._)`typeof ${t} != "object"`;a=s.null?o:(0,kt._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else a=kt.nil;s.number&&delete s.integer;for(let o in s)a=(0,kt.and)(a,hA(o,t,n,r));return a}Rr.checkDataTypes=xA;var x8e={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,kt._)`{type: ${e}}`:(0,kt._)`{type: ${t}}`};function wA(e){let t=w8e(e);(0,p8e.reportError)(t,x8e)}Rr.reportTypeError=wA;function w8e(e){let{gen:t,data:n,schema:r}=e,a=(0,mB.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:a,schemaValue:a,parentSchema:r,params:{},it:e}}});var hB=L(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.assignDefaults=void 0;var Od=Dt(),v8e=pn();function T8e(e,t){let{properties:n,items:r}=e.schema;if(t==="object"&&n)for(let a in n)gB(e,a,n[a].default);else t==="array"&&Array.isArray(r)&&r.forEach((a,s)=>gB(e,s,a.default))}Xg.assignDefaults=T8e;function gB(e,t,n){let{gen:r,compositeRule:a,data:s,opts:o}=e;if(n===void 0)return;let i=(0,Od._)`${s}${(0,Od.getProperty)(t)}`;if(a){(0,v8e.checkStrictMode)(e,`default is ignored for: ${i}`);return}let u=(0,Od._)`${i} === undefined`;o.useDefaults==="empty"&&(u=(0,Od._)`${u} || ${i} === null || ${i} === ""`),r.if(u,(0,Od._)`${i} = ${(0,Od.stringify)(n)}`)}});var qs=L(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;var qn=Dt(),vA=pn(),Rc=f1(),S8e=pn();function A8e(e,t){let{gen:n,data:r,it:a}=e;n.if(SA(n,r,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,qn._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=A8e;function _8e({gen:e,data:t,it:{opts:n}},r,a){return(0,qn.or)(...r.map(s=>(0,qn.and)(SA(e,t,s,n.ownProperties),(0,qn._)`${a} = ${s}`)))}kn.checkMissingProp=_8e;function E8e(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=E8e;function xB(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,qn._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=xB;function TA(e,t,n){return(0,qn._)`${xB(e)}.call(${t}, ${n})`}kn.isOwnProperty=TA;function k8e(e,t,n,r){let a=(0,qn._)`${t}${(0,qn.getProperty)(n)} !== undefined`;return r?(0,qn._)`${a} && ${TA(e,t,n)}`:a}kn.propertyInData=k8e;function SA(e,t,n,r){let a=(0,qn._)`${t}${(0,qn.getProperty)(n)} === undefined`;return r?(0,qn.or)(a,(0,qn.not)(TA(e,t,n))):a}kn.noPropertyInData=SA;function wB(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=wB;function I8e(e,t){return wB(t).filter(n=>!(0,vA.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=I8e;function C8e({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:a,errorPath:s},it:o},i,u,d){let l=d?(0,qn._)`${e}, ${t}, ${r}${a}`:t,p=[[Rc.default.instancePath,(0,qn.strConcat)(Rc.default.instancePath,s)],[Rc.default.parentData,o.parentData],[Rc.default.parentDataProperty,o.parentDataProperty],[Rc.default.rootData,Rc.default.rootData]];o.opts.dynamicRef&&p.push([Rc.default.dynamicAnchors,Rc.default.dynamicAnchors]);let y=(0,qn._)`${l}, ${n.object(...p)}`;return u!==qn.nil?(0,qn._)`${i}.call(${u}, ${y})`:(0,qn._)`${i}(${y})`}kn.callValidateCode=C8e;var P8e=(0,qn._)`new RegExp`;function R8e({gen:e,it:{opts:t}},n){let r=t.unicodeRegExp?"u":"",{regExp:a}=t.code,s=a(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,qn._)`${a.code==="new RegExp"?P8e:(0,S8e.useFunc)(e,a)}(${n}, ${r})`})}kn.usePattern=R8e;function $8e(e){let{gen:t,data:n,keyword:r,it:a}=e,s=t.name("valid");if(a.allErrors){let i=t.let("valid",!0);return o(()=>t.assign(i,!1)),i}return t.var(s,!0),o(()=>t.break()),s;function o(i){let u=t.const("len",(0,qn._)`${n}.length`);t.forRange("i",0,u,d=>{e.subschema({keyword:r,dataProp:d,dataPropType:vA.Type.Num},s),t.if((0,qn.not)(s),i)})}}kn.validateArray=$8e;function D8e(e){let{gen:t,schema:n,keyword:r,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,vA.alwaysValidSchema)(a,u))&&!a.opts.unevaluated)return;let o=t.let("valid",!1),i=t.name("_valid");t.block(()=>n.forEach((u,d)=>{let l=e.subschema({keyword:r,schemaProp:d,compositeRule:!0},i);t.assign(o,(0,qn._)`${o} || ${i}`),e.mergeValidEvaluated(l,i)||t.if((0,qn.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=D8e});var SB=L(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.validateKeywordUsage=ii.validSchemaType=ii.funcKeywordCode=ii.macroKeywordCode=void 0;var oa=Dt(),Lu=f1(),M8e=qs(),O8e=wm();function N8e(e,t){let{gen:n,keyword:r,schema:a,parentSchema:s,it:o}=e,i=t.macro.call(o.self,a,s,o),u=TB(n,r,i);o.opts.validateSchema!==!1&&o.self.validateSchema(i,!0);let d=n.name("valid");e.subschema({schema:i,schemaPath:oa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}ii.macroKeywordCode=N8e;function L8e(e,t){var n;let{gen:r,keyword:a,schema:s,parentSchema:o,$data:i,it:u}=e;U8e(u,t);let d=!i&&t.compile?t.compile.call(u.self,s,o,u):t.validate,l=TB(r,a,d),p=r.let("valid");e.block$data(p,y),e.ok((n=t.valid)!==null&&n!==void 0?n:p);function y(){if(t.errors===!1)h(),t.modifying&&vB(e),w(()=>e.error());else{let v=t.async?m():g();t.modifying&&vB(e),w(()=>B8e(e,v))}}function m(){let v=r.let("ruleErrs",null);return r.try(()=>h((0,oa._)`await `),T=>r.assign(p,!1).if((0,oa._)`${T} instanceof ${u.ValidationError}`,()=>r.assign(v,(0,oa._)`${T}.errors`),()=>r.throw(T))),v}function g(){let v=(0,oa._)`${l}.errors`;return r.assign(v,null),h(oa.nil),v}function h(v=t.async?(0,oa._)`await `:oa.nil){let T=u.opts.passContext?Lu.default.this:Lu.default.self,A=!("compile"in t&&!i||t.schema===!1);r.assign(p,(0,oa._)`${v}${(0,M8e.callValidateCode)(e,l,T,A)}`,t.modifying)}function w(v){var T;r.if((0,oa.not)((T=t.valid)!==null&&T!==void 0?T:p),v)}}ii.funcKeywordCode=L8e;function vB(e){let{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,oa._)`${r.parentData}[${r.parentDataProperty}]`))}function B8e(e,t){let{gen:n}=e;n.if((0,oa._)`Array.isArray(${t})`,()=>{n.assign(Lu.default.vErrors,(0,oa._)`${Lu.default.vErrors} === null ? ${t} : ${Lu.default.vErrors}.concat(${t})`).assign(Lu.default.errors,(0,oa._)`${Lu.default.vErrors}.length`),(0,O8e.extendErrors)(e)},()=>e.error())}function U8e({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function TB(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,oa.stringify)(n)})}function H8e(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}ii.validSchemaType=H8e;function F8e({schema:e,opts:t,self:n,errSchemaPath:r},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");let o=a.dependencies;if(o?.some(i=>!Object.prototype.hasOwnProperty.call(e,i)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[s])){let u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}ii.validateKeywordUsage=F8e});var _B=L($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.extendSubschemaMode=$c.extendSubschemaData=$c.getSubschema=void 0;var ci=Dt(),AB=pn();function z8e(e,{keyword:t,schemaProp:n,schema:r,schemaPath:a,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let i=e.schema[t];return n===void 0?{schema:i,schemaPath:(0,ci._)`${e.schemaPath}${(0,ci.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:(0,ci._)`${e.schemaPath}${(0,ci.getProperty)(t)}${(0,ci.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,AB.escapeFragment)(n)}`}}if(r!==void 0){if(a===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:a,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}$c.getSubschema=z8e;function j8e(e,t,{dataProp:n,dataPropType:r,data:a,dataTypes:s,propertyName:o}){if(a!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:i}=t;if(n!==void 0){let{errorPath:d,dataPathArr:l,opts:p}=t,y=i.let("data",(0,ci._)`${t.data}${(0,ci.getProperty)(n)}`,!0);u(y),e.errorPath=(0,ci.str)`${d}${(0,AB.getErrorPath)(n,r,p.jsPropertySyntax)}`,e.parentDataProperty=(0,ci._)`${n}`,e.dataPathArr=[...l,e.parentDataProperty]}if(a!==void 0){let d=a instanceof ci.Name?a:i.let("data",a,!0);u(d),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}$c.extendSubschemaData=j8e;function q8e(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:a,allErrors:s}){r!==void 0&&(e.compositeRule=r),a!==void 0&&(e.createErrors=a),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}$c.extendSubschemaMode=q8e});var AA=L((IXe,EB)=>{"use strict";EB.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,a,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=r;a--!==0;){var o=s[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}});var IB=L((CXe,kB)=>{"use strict";var Dc=kB.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},a=n.post||function(){};Jg(t,r,a,e,"",e)};Dc.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Dc.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Dc.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Dc.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Jg(e,t,n,r,a,s,o,i,u,d){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,a,s,o,i,u,d);for(var l in r){var p=r[l];if(Array.isArray(p)){if(l in Dc.arrayKeywords)for(var y=0;y<p.length;y++)Jg(e,t,n,p[y],a+"/"+l+"/"+y,s,a,l,r,y)}else if(l in Dc.propsKeywords){if(p&&typeof p=="object")for(var m in p)Jg(e,t,n,p[m],a+"/"+l+"/"+G8e(m),s,a,l,r,m)}else(l in Dc.keywords||e.allKeys&&!(l in Dc.skipKeywords))&&Jg(e,t,n,p,a+"/"+l,s,a,l,r)}n(r,a,s,o,i,u,d)}}function G8e(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Tm=L(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.getSchemaRefs=Fa.resolveUrl=Fa.normalizeId=Fa._getFullPath=Fa.getFullPath=Fa.inlineRef=void 0;var V8e=pn(),W8e=AA(),Z8e=IB(),K8e=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function X8e(e,t=!0){return typeof e=="boolean"?!0:t===!0?!_A(e):t?CB(e)<=t:!1}Fa.inlineRef=X8e;var J8e=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _A(e){for(let t in e){if(J8e.has(t))return!0;let n=e[t];if(Array.isArray(n)&&n.some(_A)||typeof n=="object"&&_A(n))return!0}return!1}function CB(e){let t=0;for(let n in e){if(n==="$ref")return 1/0;if(t++,!K8e.has(n)&&(typeof e[n]=="object"&&(0,V8e.eachItem)(e[n],r=>t+=CB(r)),t===1/0))return 1/0}return t}function PB(e,t="",n){n!==!1&&(t=Nd(t));let r=e.parse(t);return RB(e,r)}Fa.getFullPath=PB;function RB(e,t){return e.serialize(t).split("#")[0]+"#"}Fa._getFullPath=RB;var Q8e=/#\/?$/;function Nd(e){return e?e.replace(Q8e,""):""}Fa.normalizeId=Nd;function Y8e(e,t,n){return n=Nd(n),e.resolve(t,n)}Fa.resolveUrl=Y8e;var e2e=/^[a-z_][-a-z0-9._]*$/i;function t2e(e,t){if(typeof e=="boolean")return{};let{schemaId:n,uriResolver:r}=this.opts,a=Nd(e[n]||t),s={"":a},o=PB(r,a,!1),i={},u=new Set;return Z8e(e,{allKeys:!0},(p,y,m,g)=>{if(g===void 0)return;let h=o+y,w=s[g];typeof p[n]=="string"&&(w=v.call(this,p[n])),T.call(this,p.$anchor),T.call(this,p.$dynamicAnchor),s[y]=w;function v(A){let _=this.opts.uriResolver.resolve;if(A=Nd(w?_(w,A):A),u.has(A))throw l(A);u.add(A);let E=this.refs[A];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?d(p,E.schema,A):A!==Nd(h)&&(A[0]==="#"?(d(p,i[A],A),i[A]=p):this.refs[A]=h),A}function T(A){if(typeof A=="string"){if(!e2e.test(A))throw new Error(`invalid anchor "${A}"`);v.call(this,`#${A}`)}}}),i;function d(p,y,m){if(y!==void 0&&!W8e(p,y))throw l(m)}function l(p){return new Error(`reference "${p}" resolves to more than one schema`)}}Fa.getSchemaRefs=t2e});var _m=L(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.getData=Mc.KeywordCxt=Mc.validateFunctionCode=void 0;var NB=fB(),$B=vm(),kA=gA(),Qg=vm(),n2e=hB(),Am=SB(),EA=_B(),qe=Dt(),lt=f1(),r2e=Tm(),l1=pn(),Sm=wm();function a2e(e){if(UB(e)&&(HB(e),BB(e))){i2e(e);return}LB(e,()=>(0,NB.topBoolOrEmptySchema)(e))}Mc.validateFunctionCode=a2e;function LB({gen:e,validateName:t,schema:n,schemaEnv:r,opts:a},s){a.code.es5?e.func(t,(0,qe._)`${lt.default.data}, ${lt.default.valCxt}`,r.$async,()=>{e.code((0,qe._)`"use strict"; ${DB(n,a)}`),o2e(e,a),e.code(s)}):e.func(t,(0,qe._)`${lt.default.data}, ${s2e(a)}`,r.$async,()=>e.code(DB(n,a)).code(s))}function s2e(e){return(0,qe._)`{${lt.default.instancePath}="", ${lt.default.parentData}, ${lt.default.parentDataProperty}, ${lt.default.rootData}=${lt.default.data}${e.dynamicRef?(0,qe._)`, ${lt.default.dynamicAnchors}={}`:qe.nil}}={}`}function o2e(e,t){e.if(lt.default.valCxt,()=>{e.var(lt.default.instancePath,(0,qe._)`${lt.default.valCxt}.${lt.default.instancePath}`),e.var(lt.default.parentData,(0,qe._)`${lt.default.valCxt}.${lt.default.parentData}`),e.var(lt.default.parentDataProperty,(0,qe._)`${lt.default.valCxt}.${lt.default.parentDataProperty}`),e.var(lt.default.rootData,(0,qe._)`${lt.default.valCxt}.${lt.default.rootData}`),t.dynamicRef&&e.var(lt.default.dynamicAnchors,(0,qe._)`${lt.default.valCxt}.${lt.default.dynamicAnchors}`)},()=>{e.var(lt.default.instancePath,(0,qe._)`""`),e.var(lt.default.parentData,(0,qe._)`undefined`),e.var(lt.default.parentDataProperty,(0,qe._)`undefined`),e.var(lt.default.rootData,lt.default.data),t.dynamicRef&&e.var(lt.default.dynamicAnchors,(0,qe._)`{}`)})}function i2e(e){let{schema:t,opts:n,gen:r}=e;LB(e,()=>{n.$comment&&t.$comment&&zB(e),l2e(e),r.let(lt.default.vErrors,null),r.let(lt.default.errors,0),n.unevaluated&&c2e(e),FB(e),b2e(e)})}function c2e(e){let{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,qe._)`${n}.evaluated`),t.if((0,qe._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,qe._)`${e.evaluated}.props`,(0,qe._)`undefined`)),t.if((0,qe._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,qe._)`${e.evaluated}.items`,(0,qe._)`undefined`))}function DB(e,t){let n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,qe._)`/*# sourceURL=${n} */`:qe.nil}function u2e(e,t){if(UB(e)&&(HB(e),BB(e))){d2e(e,t);return}(0,NB.boolOrEmptySchema)(e,t)}function BB({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let n in e)if(t.RULES.all[n])return!0;return!1}function UB(e){return typeof e.schema!="boolean"}function d2e(e,t){let{schema:n,gen:r,opts:a}=e;a.$comment&&n.$comment&&zB(e),p2e(e),m2e(e);let s=r.const("_errs",lt.default.errors);FB(e,s),r.var(t,(0,qe._)`${s} === ${lt.default.errors}`)}function HB(e){(0,l1.checkUnknownRules)(e),f2e(e)}function FB(e,t){if(e.opts.jtd)return MB(e,[],!1,t);let n=(0,$B.getSchemaTypes)(e.schema),r=(0,$B.coerceAndCheckDataType)(e,n);MB(e,n,!r,t)}function f2e(e){let{schema:t,errSchemaPath:n,opts:r,self:a}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,l1.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function l2e(e){let{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,l1.checkStrictMode)(e,"default is ignored in the schema root")}function p2e(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,r2e.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function m2e(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function zB({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:a}){let s=n.$comment;if(a.$comment===!0)e.code((0,qe._)`${lt.default.self}.logger.log(${s})`);else if(typeof a.$comment=="function"){let o=(0,qe.str)`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code((0,qe._)`${lt.default.self}.opts.$comment(${s}, ${o}, ${i}.schema)`)}}function b2e(e){let{gen:t,schemaEnv:n,validateName:r,ValidationError:a,opts:s}=e;n.$async?t.if((0,qe._)`${lt.default.errors} === 0`,()=>t.return(lt.default.data),()=>t.throw((0,qe._)`new ${a}(${lt.default.vErrors})`)):(t.assign((0,qe._)`${r}.errors`,lt.default.vErrors),s.unevaluated&&y2e(e),t.return((0,qe._)`${lt.default.errors} === 0`))}function y2e({gen:e,evaluated:t,props:n,items:r}){n instanceof qe.Name&&e.assign((0,qe._)`${t}.props`,n),r instanceof qe.Name&&e.assign((0,qe._)`${t}.items`,r)}function MB(e,t,n,r){let{gen:a,schema:s,data:o,allErrors:i,opts:u,self:d}=e,{RULES:l}=d;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,l1.schemaHasRulesButRef)(s,l))){a.block(()=>qB(e,"$ref",l.all.$ref.definition));return}u.jtd||g2e(e,t),a.block(()=>{for(let y of l.rules)p(y);p(l.post)});function p(y){(0,kA.shouldUseGroup)(s,y)&&(y.type?(a.if((0,Qg.checkDataType)(y.type,o,u.strictNumbers)),OB(e,y),t.length===1&&t[0]===y.type&&n&&(a.else(),(0,Qg.reportTypeError)(e)),a.endIf()):OB(e,y),i||a.if((0,qe._)`${lt.default.errors} === ${r||0}`))}}function OB(e,t){let{gen:n,schema:r,opts:{useDefaults:a}}=e;a&&(0,n2e.assignDefaults)(e,t.type),n.block(()=>{for(let s of t.rules)(0,kA.shouldUseRule)(r,s)&&qB(e,s.keyword,s.definition,t.type)})}function g2e(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(h2e(e,t),e.opts.allowUnionTypes||x2e(e,t),w2e(e,e.dataTypes))}function h2e(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{jB(e.dataTypes,n)||IA(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),T2e(e,t)}}function x2e(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&IA(e,"use allowUnionTypes to allow union type keyword")}function w2e(e,t){let n=e.self.RULES.all;for(let r in n){let a=n[r];if(typeof a=="object"&&(0,kA.shouldUseRule)(e.schema,a)){let{type:s}=a.definition;s.length&&!s.some(o=>v2e(t,o))&&IA(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function v2e(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function jB(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function T2e(e,t){let n=[];for(let r of e.dataTypes)jB(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function IA(e,t){let n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,l1.checkStrictMode)(e,t,e.opts.strictTypes)}var Yg=class{constructor(t,n,r){if((0,Am.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,l1.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",GB(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Am.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",lt.default.errors))}result(t,n,r){this.failResult((0,qe.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,qe.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:n}=this;this.fail((0,qe._)`${n} !== undefined && (${(0,qe.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?Sm.reportExtraError:Sm.reportError)(this,this.def.error,n)}$dataError(){(0,Sm.reportError)(this,this.def.$dataError||Sm.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Sm.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=qe.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=qe.nil,n=qe.nil){if(!this.$data)return;let{gen:r,schemaCode:a,schemaType:s,def:o}=this;r.if((0,qe.or)((0,qe._)`${a} === undefined`,n)),t!==qe.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==qe.nil&&r.assign(t,!1)),r.else()}invalid$data(){let{gen:t,schemaCode:n,schemaType:r,def:a,it:s}=this;return(0,qe.or)(o(),i());function o(){if(r.length){if(!(n instanceof qe.Name))throw new Error("ajv implementation error");let u=Array.isArray(r)?r:[r];return(0,qe._)`${(0,Qg.checkDataTypes)(u,n,s.opts.strictNumbers,Qg.DataType.Wrong)}`}return qe.nil}function i(){if(a.validateSchema){let u=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,qe._)`!${u}(${n})`}return qe.nil}}subschema(t,n){let r=(0,EA.getSubschema)(this.it,t);(0,EA.extendSubschemaData)(r,this.it,t),(0,EA.extendSubschemaMode)(r,t);let a={...this.it,...r,items:void 0,props:void 0};return u2e(a,n),a}mergeEvaluated(t,n){let{it:r,gen:a}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=l1.mergeEvaluated.props(a,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=l1.mergeEvaluated.items(a,t.items,r.items,n)))}mergeValidEvaluated(t,n){let{it:r,gen:a}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return a.if(n,()=>this.mergeEvaluated(t,qe.Name)),!0}};Mc.KeywordCxt=Yg;function qB(e,t,n,r){let a=new Yg(e,n,t);"code"in n?n.code(a,r):a.$data&&n.validate?(0,Am.funcKeywordCode)(a,n):"macro"in n?(0,Am.macroKeywordCode)(a,n):(n.compile||n.validate)&&(0,Am.funcKeywordCode)(a,n)}var S2e=/^\/(?:[^~]|~0|~1)*$/,A2e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function GB(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let a,s;if(e==="")return lt.default.rootData;if(e[0]==="/"){if(!S2e.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,s=lt.default.rootData}else{let d=A2e.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+d[1];if(a=d[2],a==="#"){if(l>=t)throw new Error(u("property/index",l));return r[t-l]}if(l>t)throw new Error(u("data",l));if(s=n[t-l],!a)return s}let o=s,i=a.split("/");for(let d of i)d&&(s=(0,qe._)`${s}${(0,qe.getProperty)((0,l1.unescapeJsonPointer)(d))}`,o=(0,qe._)`${o} && ${s}`);return o;function u(d,l){return`Cannot access ${d} ${l} levels up, current level is ${t}`}}Mc.getData=GB});var e3=L(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});var CA=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};PA.default=CA});var Em=L(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});var RA=Tm(),$A=class extends Error{constructor(t,n,r,a){super(a||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,RA.resolveUrl)(t,n,r),this.missingSchema=(0,RA.normalizeId)((0,RA.getFullPath)(t,this.missingRef))}};DA.default=$A});var n3=L(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.resolveSchema=Gs.getCompilingSchema=Gs.resolveRef=Gs.compileSchema=Gs.SchemaEnv=void 0;var ko=Dt(),_2e=e3(),Bu=f1(),Io=Tm(),VB=pn(),E2e=_m(),Ld=class{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Io.normalizeId)(r?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r?.$async,this.refs={}}};Gs.SchemaEnv=Ld;function OA(e){let t=WB.call(this,e);if(t)return t;let n=(0,Io.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:a}=this.opts.code,{ownProperties:s}=this.opts,o=new ko.CodeGen(this.scope,{es5:r,lines:a,ownProperties:s}),i;e.$async&&(i=o.scopeValue("Error",{ref:_2e.default,code:(0,ko._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");e.validateName=u;let d={gen:o,allErrors:this.opts.allErrors,data:Bu.default.data,parentData:Bu.default.parentData,parentDataProperty:Bu.default.parentDataProperty,dataNames:[Bu.default.data],dataPathArr:[ko.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ko.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ko.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ko._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,E2e.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);let p=o.toString();l=`${o.scopeRefs(Bu.default.scope)}return ${p}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let m=new Function(`${Bu.default.self}`,`${Bu.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:m}),m.errors=null,m.schema=e.schema,m.schemaEnv=e,e.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:u,validateCode:p,scopeValues:o._values}),this.opts.unevaluated){let{props:g,items:h}=d;m.evaluated={props:g instanceof ko.Name?void 0:g,items:h instanceof ko.Name?void 0:h,dynamicProps:g instanceof ko.Name,dynamicItems:h instanceof ko.Name},m.source&&(m.source.evaluated=(0,ko.stringify)(m.evaluated))}return e.validate=m,e}catch(p){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),p}finally{this._compilations.delete(e)}}Gs.compileSchema=OA;function k2e(e,t,n){var r;n=(0,Io.resolveUrl)(this.opts.uriResolver,t,n);let a=e.refs[n];if(a)return a;let s=P2e.call(this,e,n);if(s===void 0){let o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:i}=this.opts;o&&(s=new Ld({schema:o,schemaId:i,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=I2e.call(this,s)}Gs.resolveRef=k2e;function I2e(e){return(0,Io.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:OA.call(this,e)}function WB(e){for(let t of this._compilations)if(C2e(t,e))return t}Gs.getCompilingSchema=WB;function C2e(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function P2e(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||t3.call(this,e,t)}function t3(e,t){let n=this.opts.uriResolver.parse(t),r=(0,Io._getFullPath)(this.opts.uriResolver,n),a=(0,Io.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===a)return MA.call(this,n,e);let s=(0,Io.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let i=t3.call(this,e,o);return typeof i?.schema!="object"?void 0:MA.call(this,n,i)}if(typeof o?.schema=="object"){if(o.validate||OA.call(this,o),s===(0,Io.normalizeId)(t)){let{schema:i}=o,{schemaId:u}=this.opts,d=i[u];return d&&(a=(0,Io.resolveUrl)(this.opts.uriResolver,a,d)),new Ld({schema:i,schemaId:u,root:e,baseId:a})}return MA.call(this,n,o)}}Gs.resolveSchema=t3;var R2e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function MA(e,{baseId:t,schema:n,root:r}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(let i of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;let u=n[(0,VB.unescapeFragment)(i)];if(u===void 0)return;n=u;let d=typeof n=="object"&&n[this.opts.schemaId];!R2e.has(i)&&d&&(t=(0,Io.resolveUrl)(this.opts.uriResolver,t,d))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,VB.schemaHasRulesButRef)(n,this.RULES)){let i=(0,Io.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=t3.call(this,r,i)}let{schemaId:o}=this.opts;if(s=s||new Ld({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}});var ZB=L((OXe,$2e)=>{$2e.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var LA=L((NXe,QB)=>{"use strict";var D2e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),XB=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function NA(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}var M2e=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function KB(e){return e.length=0,!0}function O2e(e,t,n){if(e.length){let r=NA(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function N2e(e){let t=0,n={error:!1,address:"",zone:""},r=[],a=[],s=!1,o=!1,i=O2e;for(let u=0;u<e.length;u++){let d=e[u];if(!(d==="["||d==="]"))if(d===":"){if(s===!0&&(o=!0),!i(a,r,n))break;if(++t>7){n.error=!0;break}u>0&&e[u-1]===":"&&(s=!0),r.push(":");continue}else if(d==="%"){if(!i(a,r,n))break;i=KB}else{a.push(d);continue}}return a.length&&(i===KB?n.zone=a.join(""):o?r.push(a.join("")):r.push(NA(a))),n.address=r.join(""),n}function JB(e){if(L2e(e,":")<2)return{host:e,isIPV6:!1};let t=N2e(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function L2e(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function B2e(e){let t=e,n=[],r=-1,a=0;for(;a=t.length;){if(a===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(a===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(a===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function U2e(e,t){let n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function H2e(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!XB(n)){let r=JB(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}QB.exports={nonSimpleDomain:M2e,recomposeAuthority:H2e,normalizeComponentEncoding:U2e,removeDotSegments:B2e,isIPv4:XB,isUUID:D2e,normalizeIPv6:JB,stringArrayToHexStripped:NA}});var rU=L((LXe,nU)=>{"use strict";var{isUUID:F2e}=LA(),z2e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,j2e=["http","https","ws","wss","urn","urn:uuid"];function q2e(e){return j2e.indexOf(e)!==-1}function BA(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function YB(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function eU(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function G2e(e){return e.secure=BA(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function V2e(e){if((e.port===(BA(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function W2e(e,t){if(!e.path)return e.error="URN can not be parsed",e;let n=e.path.match(z2e);if(n){let r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];let a=`${r}:${t.nid||e.nid}`,s=UA(a);e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Z2e(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");let n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),a=`${n}:${t.nid||r}`,s=UA(a);s&&(e=s.serialize(e,t));let o=e,i=e.nss;return o.path=`${r||t.nid}:${i}`,t.skipEscape=!0,o}function K2e(e,t){let n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!F2e(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function X2e(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var tU={scheme:"http",domainHost:!0,parse:YB,serialize:eU},J2e={scheme:"https",domainHost:tU.domainHost,parse:YB,serialize:eU},r3={scheme:"ws",domainHost:!0,parse:G2e,serialize:V2e},Q2e={scheme:"wss",domainHost:r3.domainHost,parse:r3.parse,serialize:r3.serialize},Y2e={scheme:"urn",parse:W2e,serialize:Z2e,skipNormalize:!0},eye={scheme:"urn:uuid",parse:K2e,serialize:X2e,skipNormalize:!0},a3={http:tU,https:J2e,ws:r3,wss:Q2e,urn:Y2e,"urn:uuid":eye};Object.setPrototypeOf(a3,null);function UA(e){return e&&(a3[e]||a3[e.toLowerCase()])||void 0}nU.exports={wsIsSecure:BA,SCHEMES:a3,isValidSchemeName:q2e,getSchemeHandler:UA}});var oU=L((BXe,o3)=>{"use strict";var{normalizeIPv6:tye,removeDotSegments:km,recomposeAuthority:nye,normalizeComponentEncoding:s3,isIPv4:rye,nonSimpleDomain:aye}=LA(),{SCHEMES:sye,getSchemeHandler:aU}=rU();function oye(e,t){return typeof e=="string"?e=ui(p1(e,t),t):typeof e=="object"&&(e=p1(ui(e,t),t)),e}function iye(e,t,n){let r=n?Object.assign({scheme:"null"},n):{scheme:"null"},a=sU(p1(e,r),p1(t,r),r,!0);return r.skipEscape=!0,ui(a,r)}function sU(e,t,n,r){let a={};return r||(e=p1(ui(e,n),n),t=p1(ui(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=km(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=km(t.path||""),a.query=t.query):(t.path?(t.path[0]==="/"?a.path=km(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=km(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function cye(e,t,n){return typeof e=="string"?(e=unescape(e),e=ui(s3(p1(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=ui(s3(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=ui(s3(p1(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=ui(s3(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function ui(e,t){let n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),a=[],s=aU(r.scheme||n.scheme);s&&s.serialize&&s.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&a.push(n.scheme,":");let o=nye(n);if(o!==void 0&&(r.reference!=="suffix"&&a.push("//"),a.push(o),n.path&&n.path[0]!=="/"&&a.push("/")),n.path!==void 0){let i=n.path;!r.absolutePath&&(!s||!s.absolutePath)&&(i=km(i)),o===void 0&&i[0]==="/"&&i[1]==="/"&&(i="/%2F"+i.slice(2)),a.push(i)}return n.query!==void 0&&a.push("?",n.query),n.fragment!==void 0&&a.push("#",n.fragment),a.join("")}var uye=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p1(e,t){let n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);let s=e.match(uye);if(s){if(r.scheme=s[1],r.userinfo=s[3],r.host=s[4],r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=s[7],r.fragment=s[8],isNaN(r.port)&&(r.port=s[5]),r.host)if(rye(r.host)===!1){let u=tye(r.host);r.host=u.host.toLowerCase(),a=u.isIPV6}else a=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");let o=aU(n.scheme||r.scheme);if(!n.unicodeSupport&&(!o||!o.unicodeSupport)&&r.host&&(n.domainHost||o&&o.domainHost)&&a===!1&&aye(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(i){r.error=r.error||"Host's domain name can not be converted to ASCII: "+i}(!o||o&&!o.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),o&&o.parse&&o.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}var HA={SCHEMES:sye,normalize:oye,resolve:iye,resolveComponent:sU,equal:cye,serialize:ui,parse:p1};o3.exports=HA;o3.exports.default=HA;o3.exports.fastUri=HA});var cU=L(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});var iU=oU();iU.code='require("ajv/dist/runtime/uri").default';FA.default=iU});var yU=L(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.CodeGen=wr.Name=wr.nil=wr.stringify=wr.str=wr._=wr.KeywordCxt=void 0;var dye=_m();Object.defineProperty(wr,"KeywordCxt",{enumerable:!0,get:function(){return dye.KeywordCxt}});var Bd=Dt();Object.defineProperty(wr,"_",{enumerable:!0,get:function(){return Bd._}});Object.defineProperty(wr,"str",{enumerable:!0,get:function(){return Bd.str}});Object.defineProperty(wr,"stringify",{enumerable:!0,get:function(){return Bd.stringify}});Object.defineProperty(wr,"nil",{enumerable:!0,get:function(){return Bd.nil}});Object.defineProperty(wr,"Name",{enumerable:!0,get:function(){return Bd.Name}});Object.defineProperty(wr,"CodeGen",{enumerable:!0,get:function(){return Bd.CodeGen}});var fye=e3(),pU=Em(),lye=yA(),Im=n3(),pye=Dt(),Cm=Tm(),i3=vm(),jA=pn(),uU=ZB(),mye=cU(),mU=(e,t)=>new RegExp(e,t);mU.code="new RegExp";var bye=["removeAdditional","useDefaults","coerceTypes"],yye=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),gye={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hye={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},dU=200;function xye(e){var t,n,r,a,s,o,i,u,d,l,p,y,m,g,h,w,v,T,A,_,E,O,$,B,V;let D=e.strict,G=(t=e.code)===null||t===void 0?void 0:t.optimize,N=G===!0||G===void 0?1:G||0,W=(r=(n=e.code)===null||n===void 0?void 0:n.regExp)!==null&&r!==void 0?r:mU,me=(a=e.uriResolver)!==null&&a!==void 0?a:mye.default;return{strictSchema:(o=(s=e.strictSchema)!==null&&s!==void 0?s:D)!==null&&o!==void 0?o:!0,strictNumbers:(u=(i=e.strictNumbers)!==null&&i!==void 0?i:D)!==null&&u!==void 0?u:!0,strictTypes:(l=(d=e.strictTypes)!==null&&d!==void 0?d:D)!==null&&l!==void 0?l:"log",strictTuples:(y=(p=e.strictTuples)!==null&&p!==void 0?p:D)!==null&&y!==void 0?y:"log",strictRequired:(g=(m=e.strictRequired)!==null&&m!==void 0?m:D)!==null&&g!==void 0?g:!1,code:e.code?{...e.code,optimize:N,regExp:W}:{optimize:N,regExp:W},loopRequired:(h=e.loopRequired)!==null&&h!==void 0?h:dU,loopEnum:(w=e.loopEnum)!==null&&w!==void 0?w:dU,meta:(v=e.meta)!==null&&v!==void 0?v:!0,messages:(T=e.messages)!==null&&T!==void 0?T:!0,inlineRefs:(A=e.inlineRefs)!==null&&A!==void 0?A:!0,schemaId:(_=e.schemaId)!==null&&_!==void 0?_:"$id",addUsedSchema:(E=e.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(O=e.validateSchema)!==null&&O!==void 0?O:!0,validateFormats:($=e.validateFormats)!==null&&$!==void 0?$:!0,unicodeRegExp:(B=e.unicodeRegExp)!==null&&B!==void 0?B:!0,int32range:(V=e.int32range)!==null&&V!==void 0?V:!0,uriResolver:me}}var Pm=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...xye(t)};let{es5:n,lines:r}=this.opts.code;this.scope=new pye.ValueScope({scope:{},prefixes:yye,es5:n,lines:r}),this.logger=_ye(t.logger);let a=t.validateFormats;t.validateFormats=!1,this.RULES=(0,lye.getRules)(),fU.call(this,gye,t,"NOT SUPPORTED"),fU.call(this,hye,t,"DEPRECATED","warn"),this._metaOpts=Sye.call(this),t.formats&&vye.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Tye.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),wye.call(this),t.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:n,schemaId:r}=this.opts,a=uU;r==="id"&&(a={...uU},a.id=a.$id,delete a.$id),n&&t&&this.addMetaSchema(a,a[r],!1)}defaultMeta(){let{meta:t,schemaId:n}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[n]||t:void 0}validate(t,n){let r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error(`no schema with key or ref "${t}"`)}else r=this.compile(t);let a=r(n);return"$async"in r||(this.errors=r.errors),a}compile(t,n){let r=this._addSchema(t,n);return r.validate||this._compileSchemaEnv(r)}compileAsync(t,n){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return a.call(this,t,n);async function a(l,p){await s.call(this,l.$schema);let y=this._addSchema(l,p);return y.validate||o.call(this,y)}async function s(l){l&&!this.getSchema(l)&&await a.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(p){if(!(p instanceof pU.default))throw p;return i.call(this,p),await u.call(this,p.missingSchema),o.call(this,l)}}function i({missingSchema:l,missingRef:p}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${p} cannot be resolved`)}async function u(l){let p=await d.call(this,l);this.refs[l]||await s.call(this,p.$schema),this.refs[l]||this.addSchema(p,l,n)}async function d(l){let p=this._loading[l];if(p)return p;try{return await(this._loading[l]=r(l))}finally{delete this._loading[l]}}}addSchema(t,n,r,a=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,r,a);return this}let s;if(typeof t=="object"){let{schemaId:o}=this.opts;if(s=t[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return n=(0,Cm.normalizeId)(n||s),this._checkUnique(n),this.schemas[n]=this._addSchema(t,r,n,a,!0),this}addMetaSchema(t,n,r=this.opts.validateSchema){return this.addSchema(t,n,!0,r),this}validateSchema(t,n){if(typeof t=="boolean")return!0;let r;if(r=t.$schema,r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let a=this.validate(r,t);if(!a&&n){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return a}getSchema(t){let n;for(;typeof(n=lU.call(this,t))=="string";)t=n;if(n===void 0){let{schemaId:r}=this.opts,a=new Im.SchemaEnv({schema:{},schemaId:r});if(n=Im.resolveSchema.call(this,a,t),!n)return;this.refs[t]=n}return n.validate||this._compileSchemaEnv(n)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let n=lU.call(this,t);return typeof n=="object"&&this._cache.delete(n.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let n=t;this._cache.delete(n);let r=t[this.opts.schemaId];return r&&(r=(0,Cm.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let n of t)this.addKeyword(n);return this}addKeyword(t,n){let r;if(typeof t=="string")r=t,typeof n=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),n.keyword=r);else if(typeof t=="object"&&n===void 0){if(n=t,r=n.keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(kye.call(this,r,n),!n)return(0,jA.eachItem)(r,s=>zA.call(this,s)),this;Cye.call(this,n);let a={...n,type:(0,i3.getJSONTypes)(n.type),schemaType:(0,i3.getJSONTypes)(n.schemaType)};return(0,jA.eachItem)(r,a.type.length===0?s=>zA.call(this,s,a):s=>a.type.forEach(o=>zA.call(this,s,a,o))),this}getKeyword(t){let n=this.RULES.all[t];return typeof n=="object"?n.definition:!!n}removeKeyword(t){let{RULES:n}=this;delete n.keywords[t],delete n.all[t];for(let r of n.rules){let a=r.rules.findIndex(s=>s.keyword===t);a>=0&&r.rules.splice(a,1)}return this}addFormat(t,n){return typeof n=="string"&&(n=new RegExp(n)),this.formats[t]=n,this}errorsText(t=this.errors,{separator:n=", ",dataVar:r="data"}={}){return!t||t.length===0?"No errors":t.map(a=>`${r}${a.instancePath} ${a.message}`).reduce((a,s)=>a+n+s)}$dataMetaSchema(t,n){let r=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let a of n){let s=a.split("/").slice(1),o=t;for(let i of s)o=o[i];for(let i in r){let u=r[i];if(typeof u!="object")continue;let{$data:d}=u.definition,l=o[i];d&&l&&(o[i]=bU(l))}}return t}_removeAllSchemas(t,n){for(let r in t){let a=t[r];(!n||n.test(r))&&(typeof a=="string"?delete t[r]:a&&!a.meta&&(this._cache.delete(a.schema),delete t[r]))}}_addSchema(t,n,r,a=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:i}=this.opts;if(typeof t=="object")o=t[i];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(t);if(u!==void 0)return u;r=(0,Cm.normalizeId)(o||r);let d=Cm.getSchemaRefs.call(this,t,r);return u=new Im.SchemaEnv({schema:t,schemaId:i,meta:n,baseId:r,localRefs:d}),this._cache.set(u.schema,u),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=u),a&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Im.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let n=this.opts;this.opts=this._metaOpts;try{Im.compileSchema.call(this,t)}finally{this.opts=n}}};Pm.ValidationError=fye.default;Pm.MissingRefError=pU.default;wr.default=Pm;function fU(e,t,n,r="error"){for(let a in e){let s=a;s in t&&this.logger[r](`${n}: option ${a}. ${e[s]}`)}}function lU(e){return e=(0,Cm.normalizeId)(e),this.schemas[e]||this.refs[e]}function wye(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function vye(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function Tye(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function Sye(){let e={...this.opts};for(let t of bye)delete e[t];return e}var Aye={log(){},warn(){},error(){}};function _ye(e){if(e===!1)return Aye;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var Eye=/^[a-z_$][a-z0-9_$:-]*$/i;function kye(e,t){let{RULES:n}=this;if((0,jA.eachItem)(e,r=>{if(n.keywords[r])throw new Error(`Keyword ${r} is already defined`);if(!Eye.test(r))throw new Error(`Keyword ${r} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function zA(e,t,n){var r;let a=t?.post;if(n&&a)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=a?s.post:s.rules.find(({type:u})=>u===n);if(o||(o={type:n,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;let i={keyword:e,definition:{...t,type:(0,i3.getJSONTypes)(t.type),schemaType:(0,i3.getJSONTypes)(t.schemaType)}};t.before?Iye.call(this,o,i,t.before):o.rules.push(i),s.all[e]=i,(r=t.implements)===null||r===void 0||r.forEach(u=>this.addKeyword(u))}function Iye(e,t,n){let r=e.rules.findIndex(a=>a.keyword===n);r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function Cye(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=bU(t)),e.validateSchema=this.compile(t,!0))}var Pye={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function bU(e){return{anyOf:[e,Pye]}}});var gU=L(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});var Rye={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};qA.default=Rye});var vU=L(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.callRef=Uu.getValidate=void 0;var $ye=Em(),hU=qs(),za=Dt(),Ud=f1(),xU=n3(),c3=pn(),Dye={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:n,it:r}=e,{baseId:a,schemaEnv:s,validateName:o,opts:i,self:u}=r,{root:d}=s;if((n==="#"||n==="#/")&&a===d.baseId)return p();let l=xU.resolveRef.call(u,d,a,n);if(l===void 0)throw new $ye.default(r.opts.uriResolver,a,n);if(l instanceof xU.SchemaEnv)return y(l);return m(l);function p(){if(s===d)return u3(e,o,s,s.$async);let g=t.scopeValue("root",{ref:d});return u3(e,(0,za._)`${g}.validate`,d,d.$async)}function y(g){let h=wU(e,g);u3(e,h,g,g.$async)}function m(g){let h=t.scopeValue("schema",i.code.source===!0?{ref:g,code:(0,za.stringify)(g)}:{ref:g}),w=t.name("valid"),v=e.subschema({schema:g,dataTypes:[],schemaPath:za.nil,topSchemaRef:h,errSchemaPath:n},w);e.mergeEvaluated(v),e.ok(w)}}};function wU(e,t){let{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,za._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Uu.getValidate=wU;function u3(e,t,n,r){let{gen:a,it:s}=e,{allErrors:o,schemaEnv:i,opts:u}=s,d=u.passContext?Ud.default.this:za.nil;r?l():p();function l(){if(!i.$async)throw new Error("async schema referenced by sync schema");let g=a.let("valid");a.try(()=>{a.code((0,za._)`await ${(0,hU.callValidateCode)(e,t,d)}`),m(t),o||a.assign(g,!0)},h=>{a.if((0,za._)`!(${h} instanceof ${s.ValidationError})`,()=>a.throw(h)),y(h),o||a.assign(g,!1)}),e.ok(g)}function p(){e.result((0,hU.callValidateCode)(e,t,d),()=>m(t),()=>y(t))}function y(g){let h=(0,za._)`${g}.errors`;a.assign(Ud.default.vErrors,(0,za._)`${Ud.default.vErrors} === null ? ${h} : ${Ud.default.vErrors}.concat(${h})`),a.assign(Ud.default.errors,(0,za._)`${Ud.default.vErrors}.length`)}function m(g){var h;if(!s.opts.unevaluated)return;let w=(h=n?.validate)===null||h===void 0?void 0:h.evaluated;if(s.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(s.props=c3.mergeEvaluated.props(a,w.props,s.props));else{let v=a.var("props",(0,za._)`${g}.evaluated.props`);s.props=c3.mergeEvaluated.props(a,v,s.props,za.Name)}if(s.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(s.items=c3.mergeEvaluated.items(a,w.items,s.items));else{let v=a.var("items",(0,za._)`${g}.evaluated.items`);s.items=c3.mergeEvaluated.items(a,v,s.items,za.Name)}}}Uu.callRef=u3;Uu.default=Dye});var TU=L(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0});var Mye=gU(),Oye=vU(),Nye=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Mye.default,Oye.default];GA.default=Nye});var SU=L(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});var d3=Dt(),Oc=d3.operators,f3={maximum:{okStr:"<=",ok:Oc.LTE,fail:Oc.GT},minimum:{okStr:">=",ok:Oc.GTE,fail:Oc.LT},exclusiveMaximum:{okStr:"<",ok:Oc.LT,fail:Oc.GTE},exclusiveMinimum:{okStr:">",ok:Oc.GT,fail:Oc.LTE}},Lye={message:({keyword:e,schemaCode:t})=>(0,d3.str)`must be ${f3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,d3._)`{comparison: ${f3[e].okStr}, limit: ${t}}`},Bye={keyword:Object.keys(f3),type:"number",schemaType:"number",$data:!0,error:Lye,code(e){let{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,d3._)`${n} ${f3[t].fail} ${r} || isNaN(${n})`)}};VA.default=Bye});var AU=L(WA=>{"use strict";Object.defineProperty(WA,"__esModule",{value:!0});var Rm=Dt(),Uye={message:({schemaCode:e})=>(0,Rm.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Rm._)`{multipleOf: ${e}}`},Hye={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Uye,code(e){let{gen:t,data:n,schemaCode:r,it:a}=e,s=a.opts.multipleOfPrecision,o=t.let("res"),i=s?(0,Rm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Rm._)`${o} !== parseInt(${o})`;e.fail$data((0,Rm._)`(${r} === 0 || (${o} = ${n}/${r}, ${i}))`)}};WA.default=Hye});var EU=L(ZA=>{"use strict";Object.defineProperty(ZA,"__esModule",{value:!0});function _U(e){let t=e.length,n=0,r=0,a;for(;r<t;)n++,a=e.charCodeAt(r++),a>=55296&&a<=56319&&r<t&&(a=e.charCodeAt(r),(a&64512)===56320&&r++);return n}ZA.default=_U;_U.code='require("ajv/dist/runtime/ucs2length").default'});var kU=L(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0});var Hu=Dt(),Fye=pn(),zye=EU(),jye={message({keyword:e,schemaCode:t}){let n=e==="maxLength"?"more":"fewer";return(0,Hu.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Hu._)`{limit: ${e}}`},qye={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:jye,code(e){let{keyword:t,data:n,schemaCode:r,it:a}=e,s=t==="maxLength"?Hu.operators.GT:Hu.operators.LT,o=a.opts.unicode===!1?(0,Hu._)`${n}.length`:(0,Hu._)`${(0,Fye.useFunc)(e.gen,zye.default)}(${n})`;e.fail$data((0,Hu._)`${o} ${s} ${r}`)}};KA.default=qye});var IU=L(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});var Gye=qs(),l3=Dt(),Vye={message:({schemaCode:e})=>(0,l3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,l3._)`{pattern: ${e}}`},Wye={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Vye,code(e){let{data:t,$data:n,schema:r,schemaCode:a,it:s}=e,o=s.opts.unicodeRegExp?"u":"",i=n?(0,l3._)`(new RegExp(${a}, ${o}))`:(0,Gye.usePattern)(e,r);e.fail$data((0,l3._)`!${i}.test(${t})`)}};XA.default=Wye});var CU=L(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0});var $m=Dt(),Zye={message({keyword:e,schemaCode:t}){let n=e==="maxProperties"?"more":"fewer";return(0,$m.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,$m._)`{limit: ${e}}`},Kye={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Zye,code(e){let{keyword:t,data:n,schemaCode:r}=e,a=t==="maxProperties"?$m.operators.GT:$m.operators.LT;e.fail$data((0,$m._)`Object.keys(${n}).length ${a} ${r}`)}};JA.default=Kye});var PU=L(QA=>{"use strict";Object.defineProperty(QA,"__esModule",{value:!0});var Dm=qs(),Mm=Dt(),Xye=pn(),Jye={message:({params:{missingProperty:e}})=>(0,Mm.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Mm._)`{missingProperty: ${e}}`},Qye={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Jye,code(e){let{gen:t,schema:n,schemaCode:r,data:a,$data:s,it:o}=e,{opts:i}=o;if(!s&&n.length===0)return;let u=n.length>=i.loopRequired;if(o.allErrors?d():l(),i.strictRequired){let m=e.parentSchema.properties,{definedProperties:g}=e.it;for(let h of n)if(m?.[h]===void 0&&!g.has(h)){let w=o.schemaEnv.baseId+o.errSchemaPath,v=`required property "${h}" is not defined at "${w}" (strictRequired)`;(0,Xye.checkStrictMode)(o,v,o.opts.strictRequired)}}function d(){if(u||s)e.block$data(Mm.nil,p);else for(let m of n)(0,Dm.checkReportMissingProp)(e,m)}function l(){let m=t.let("missing");if(u||s){let g=t.let("valid",!0);e.block$data(g,()=>y(m,g)),e.ok(g)}else t.if((0,Dm.checkMissingProp)(e,n,m)),(0,Dm.reportMissingProp)(e,m),t.else()}function p(){t.forOf("prop",r,m=>{e.setParams({missingProperty:m}),t.if((0,Dm.noPropertyInData)(t,a,m,i.ownProperties),()=>e.error())})}function y(m,g){e.setParams({missingProperty:m}),t.forOf(m,r,()=>{t.assign(g,(0,Dm.propertyInData)(t,a,m,i.ownProperties)),t.if((0,Mm.not)(g),()=>{e.error(),t.break()})},Mm.nil)}}};QA.default=Qye});var RU=L(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});var Om=Dt(),Yye={message({keyword:e,schemaCode:t}){let n=e==="maxItems"?"more":"fewer";return(0,Om.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Om._)`{limit: ${e}}`},ege={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Yye,code(e){let{keyword:t,data:n,schemaCode:r}=e,a=t==="maxItems"?Om.operators.GT:Om.operators.LT;e.fail$data((0,Om._)`${n}.length ${a} ${r}`)}};YA.default=ege});var p3=L(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});var $U=AA();$U.code='require("ajv/dist/runtime/equal").default';e_.default=$U});var DU=L(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});var t_=vm(),vr=Dt(),tge=pn(),nge=p3(),rge={message:({params:{i:e,j:t}})=>(0,vr.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,vr._)`{i: ${e}, j: ${t}}`},age={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:rge,code(e){let{gen:t,data:n,$data:r,schema:a,parentSchema:s,schemaCode:o,it:i}=e;if(!r&&!a)return;let u=t.let("valid"),d=s.items?(0,t_.getSchemaTypes)(s.items):[];e.block$data(u,l,(0,vr._)`${o} === false`),e.ok(u);function l(){let g=t.let("i",(0,vr._)`${n}.length`),h=t.let("j");e.setParams({i:g,j:h}),t.assign(u,!0),t.if((0,vr._)`${g} > 1`,()=>(p()?y:m)(g,h))}function p(){return d.length>0&&!d.some(g=>g==="object"||g==="array")}function y(g,h){let w=t.name("item"),v=(0,t_.checkDataTypes)(d,w,i.opts.strictNumbers,t_.DataType.Wrong),T=t.const("indices",(0,vr._)`{}`);t.for((0,vr._)`;${g}--;`,()=>{t.let(w,(0,vr._)`${n}[${g}]`),t.if(v,(0,vr._)`continue`),d.length>1&&t.if((0,vr._)`typeof ${w} == "string"`,(0,vr._)`${w} += "_"`),t.if((0,vr._)`typeof ${T}[${w}] == "number"`,()=>{t.assign(h,(0,vr._)`${T}[${w}]`),e.error(),t.assign(u,!1).break()}).code((0,vr._)`${T}[${w}] = ${g}`)})}function m(g,h){let w=(0,tge.useFunc)(t,nge.default),v=t.name("outer");t.label(v).for((0,vr._)`;${g}--;`,()=>t.for((0,vr._)`${h} = ${g}; ${h}--;`,()=>t.if((0,vr._)`${w}(${n}[${g}], ${n}[${h}])`,()=>{e.error(),t.assign(u,!1).break(v)})))}}};n_.default=age});var MU=L(a_=>{"use strict";Object.defineProperty(a_,"__esModule",{value:!0});var r_=Dt(),sge=pn(),oge=p3(),ige={message:"must be equal to constant",params:({schemaCode:e})=>(0,r_._)`{allowedValue: ${e}}`},cge={keyword:"const",$data:!0,error:ige,code(e){let{gen:t,data:n,$data:r,schemaCode:a,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,r_._)`!${(0,sge.useFunc)(t,oge.default)}(${n}, ${a})`):e.fail((0,r_._)`${s} !== ${n}`)}};a_.default=cge});var OU=L(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});var Nm=Dt(),uge=pn(),dge=p3(),fge={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Nm._)`{allowedValues: ${e}}`},lge={keyword:"enum",schemaType:"array",$data:!0,error:fge,code(e){let{gen:t,data:n,$data:r,schema:a,schemaCode:s,it:o}=e;if(!r&&a.length===0)throw new Error("enum must have non-empty array");let i=a.length>=o.opts.loopEnum,u,d=()=>u??(u=(0,uge.useFunc)(t,dge.default)),l;if(i||r)l=t.let("valid"),e.block$data(l,p);else{if(!Array.isArray(a))throw new Error("ajv implementation error");let m=t.const("vSchema",s);l=(0,Nm.or)(...a.map((g,h)=>y(m,h)))}e.pass(l);function p(){t.assign(l,!1),t.forOf("v",s,m=>t.if((0,Nm._)`${d()}(${n}, ${m})`,()=>t.assign(l,!0).break()))}function y(m,g){let h=a[g];return typeof h=="object"&&h!==null?(0,Nm._)`${d()}(${n}, ${m}[${g}])`:(0,Nm._)`${n} === ${h}`}}};s_.default=lge});var NU=L(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});var pge=SU(),mge=AU(),bge=kU(),yge=IU(),gge=CU(),hge=PU(),xge=RU(),wge=DU(),vge=MU(),Tge=OU(),Sge=[pge.default,mge.default,bge.default,yge.default,gge.default,hge.default,xge.default,wge.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},vge.default,Tge.default];o_.default=Sge});var c_=L(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.validateAdditionalItems=void 0;var Fu=Dt(),i_=pn(),Age={message:({params:{len:e}})=>(0,Fu.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Fu._)`{limit: ${e}}`},_ge={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Age,code(e){let{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,i_.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}LU(e,r)}};function LU(e,t){let{gen:n,schema:r,data:a,keyword:s,it:o}=e;o.items=!0;let i=n.const("len",(0,Fu._)`${a}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Fu._)`${i} <= ${t.length}`);else if(typeof r=="object"&&!(0,i_.alwaysValidSchema)(o,r)){let d=n.var("valid",(0,Fu._)`${i} <= ${t.length}`);n.if((0,Fu.not)(d),()=>u(d)),e.ok(d)}function u(d){n.forRange("i",t.length,i,l=>{e.subschema({keyword:s,dataProp:l,dataPropType:i_.Type.Num},d),o.allErrors||n.if((0,Fu.not)(d),()=>n.break())})}}Lm.validateAdditionalItems=LU;Lm.default=_ge});var u_=L(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.validateTuple=void 0;var BU=Dt(),m3=pn(),Ege=qs(),kge={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:n}=e;if(Array.isArray(t))return UU(e,"additionalItems",t);n.items=!0,!(0,m3.alwaysValidSchema)(n,t)&&e.ok((0,Ege.validateArray)(e))}};function UU(e,t,n=e.schema){let{gen:r,parentSchema:a,data:s,keyword:o,it:i}=e;l(a),i.opts.unevaluated&&n.length&&i.items!==!0&&(i.items=m3.mergeEvaluated.items(r,n.length,i.items));let u=r.name("valid"),d=r.const("len",(0,BU._)`${s}.length`);n.forEach((p,y)=>{(0,m3.alwaysValidSchema)(i,p)||(r.if((0,BU._)`${d} > ${y}`,()=>e.subschema({keyword:o,schemaProp:y,dataProp:y},u)),e.ok(u))});function l(p){let{opts:y,errSchemaPath:m}=i,g=n.length,h=g===p.minItems&&(g===p.maxItems||p[t]===!1);if(y.strictTuples&&!h){let w=`"${o}" is ${g}-tuple, but minItems or maxItems/${t} are not specified or different at path "${m}"`;(0,m3.checkStrictMode)(i,w,y.strictTuples)}}}Bm.validateTuple=UU;Bm.default=kge});var HU=L(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});var Ige=u_(),Cge={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ige.validateTuple)(e,"items")};d_.default=Cge});var zU=L(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});var FU=Dt(),Pge=pn(),Rge=qs(),$ge=c_(),Dge={message:({params:{len:e}})=>(0,FU.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,FU._)`{limit: ${e}}`},Mge={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Dge,code(e){let{schema:t,parentSchema:n,it:r}=e,{prefixItems:a}=n;r.items=!0,!(0,Pge.alwaysValidSchema)(r,t)&&(a?(0,$ge.validateAdditionalItems)(e,a):e.ok((0,Rge.validateArray)(e)))}};f_.default=Mge});var jU=L(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});var Vs=Dt(),b3=pn(),Oge={message:({params:{min:e,max:t}})=>t===void 0?(0,Vs.str)`must contain at least ${e} valid item(s)`:(0,Vs.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Vs._)`{minContains: ${e}}`:(0,Vs._)`{minContains: ${e}, maxContains: ${t}}`},Nge={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Oge,code(e){let{gen:t,schema:n,parentSchema:r,data:a,it:s}=e,o,i,{minContains:u,maxContains:d}=r;s.opts.next?(o=u===void 0?1:u,i=d):o=1;let l=t.const("len",(0,Vs._)`${a}.length`);if(e.setParams({min:o,max:i}),i===void 0&&o===0){(0,b3.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(i!==void 0&&o>i){(0,b3.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,b3.alwaysValidSchema)(s,n)){let h=(0,Vs._)`${l} >= ${o}`;i!==void 0&&(h=(0,Vs._)`${h} && ${l} <= ${i}`),e.pass(h);return}s.items=!0;let p=t.name("valid");i===void 0&&o===1?m(p,()=>t.if(p,()=>t.break())):o===0?(t.let(p,!0),i!==void 0&&t.if((0,Vs._)`${a}.length > 0`,y)):(t.let(p,!1),y()),e.result(p,()=>e.reset());function y(){let h=t.name("_valid"),w=t.let("count",0);m(h,()=>t.if(h,()=>g(w)))}function m(h,w){t.forRange("i",0,l,v=>{e.subschema({keyword:"contains",dataProp:v,dataPropType:b3.Type.Num,compositeRule:!0},h),w()})}function g(h){t.code((0,Vs._)`${h}++`),i===void 0?t.if((0,Vs._)`${h} >= ${o}`,()=>t.assign(p,!0).break()):(t.if((0,Vs._)`${h} > ${i}`,()=>t.assign(p,!1).break()),o===1?t.assign(p,!0):t.if((0,Vs._)`${h} >= ${o}`,()=>t.assign(p,!0)))}}};l_.default=Nge});var VU=L(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.validateSchemaDeps=di.validatePropertyDeps=di.error=void 0;var p_=Dt(),Lge=pn(),Um=qs();di.error={message:({params:{property:e,depsCount:t,deps:n}})=>{let r=t===1?"property":"properties";return(0,p_.str)`must have ${r} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:r}})=>(0,p_._)`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${n}}`};var Bge={keyword:"dependencies",type:"object",schemaType:"object",error:di.error,code(e){let[t,n]=Uge(e);qU(e,t),GU(e,n)}};function Uge({schema:e}){let t={},n={};for(let r in e){if(r==="__proto__")continue;let a=Array.isArray(e[r])?t:n;a[r]=e[r]}return[t,n]}function qU(e,t=e.schema){let{gen:n,data:r,it:a}=e;if(Object.keys(t).length===0)return;let s=n.let("missing");for(let o in t){let i=t[o];if(i.length===0)continue;let u=(0,Um.propertyInData)(n,r,o,a.opts.ownProperties);e.setParams({property:o,depsCount:i.length,deps:i.join(", ")}),a.allErrors?n.if(u,()=>{for(let d of i)(0,Um.checkReportMissingProp)(e,d)}):(n.if((0,p_._)`${u} && (${(0,Um.checkMissingProp)(e,i,s)})`),(0,Um.reportMissingProp)(e,s),n.else())}}di.validatePropertyDeps=qU;function GU(e,t=e.schema){let{gen:n,data:r,keyword:a,it:s}=e,o=n.name("valid");for(let i in t)(0,Lge.alwaysValidSchema)(s,t[i])||(n.if((0,Um.propertyInData)(n,r,i,s.opts.ownProperties),()=>{let u=e.subschema({keyword:a,schemaProp:i},o);e.mergeValidEvaluated(u,o)},()=>n.var(o,!0)),e.ok(o))}di.validateSchemaDeps=GU;di.default=Bge});var ZU=L(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});var WU=Dt(),Hge=pn(),Fge={message:"property name must be valid",params:({params:e})=>(0,WU._)`{propertyName: ${e.propertyName}}`},zge={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Fge,code(e){let{gen:t,schema:n,data:r,it:a}=e;if((0,Hge.alwaysValidSchema)(a,n))return;let s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,WU.not)(s),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(s)}};m_.default=zge});var y_=L(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});var y3=qs(),Co=Dt(),jge=f1(),g3=pn(),qge={message:"must NOT have additional properties",params:({params:e})=>(0,Co._)`{additionalProperty: ${e.additionalProperty}}`},Gge={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:qge,code(e){let{gen:t,schema:n,parentSchema:r,data:a,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");let{allErrors:i,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,g3.alwaysValidSchema)(o,n))return;let d=(0,y3.allSchemaProperties)(r.properties),l=(0,y3.allSchemaProperties)(r.patternProperties);p(),e.ok((0,Co._)`${s} === ${jge.default.errors}`);function p(){t.forIn("key",a,w=>{!d.length&&!l.length?g(w):t.if(y(w),()=>g(w))})}function y(w){let v;if(d.length>8){let T=(0,g3.schemaRefOrVal)(o,r.properties,"properties");v=(0,y3.isOwnProperty)(t,T,w)}else d.length?v=(0,Co.or)(...d.map(T=>(0,Co._)`${w} === ${T}`)):v=Co.nil;return l.length&&(v=(0,Co.or)(v,...l.map(T=>(0,Co._)`${(0,y3.usePattern)(e,T)}.test(${w})`))),(0,Co.not)(v)}function m(w){t.code((0,Co._)`delete ${a}[${w}]`)}function g(w){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){m(w);return}if(n===!1){e.setParams({additionalProperty:w}),e.error(),i||t.break();return}if(typeof n=="object"&&!(0,g3.alwaysValidSchema)(o,n)){let v=t.name("valid");u.removeAdditional==="failing"?(h(w,v,!1),t.if((0,Co.not)(v),()=>{e.reset(),m(w)})):(h(w,v),i||t.if((0,Co.not)(v),()=>t.break()))}}function h(w,v,T){let A={keyword:"additionalProperties",dataProp:w,dataPropType:g3.Type.Str};T===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(A,v)}}};b_.default=Gge});var JU=L(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});var Vge=_m(),KU=qs(),g_=pn(),XU=y_(),Wge={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,parentSchema:r,data:a,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&XU.default.code(new Vge.KeywordCxt(s,XU.default,"additionalProperties"));let o=(0,KU.allSchemaProperties)(n);for(let p of o)s.definedProperties.add(p);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=g_.mergeEvaluated.props(t,(0,g_.toHash)(o),s.props));let i=o.filter(p=>!(0,g_.alwaysValidSchema)(s,n[p]));if(i.length===0)return;let u=t.name("valid");for(let p of i)d(p)?l(p):(t.if((0,KU.propertyInData)(t,a,p,s.opts.ownProperties)),l(p),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(p),e.ok(u);function d(p){return s.opts.useDefaults&&!s.compositeRule&&n[p].default!==void 0}function l(p){e.subschema({keyword:"properties",schemaProp:p,dataProp:p},u)}}};h_.default=Wge});var tH=L(x_=>{"use strict";Object.defineProperty(x_,"__esModule",{value:!0});var QU=qs(),h3=Dt(),YU=pn(),eH=pn(),Zge={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,data:r,parentSchema:a,it:s}=e,{opts:o}=s,i=(0,QU.allSchemaProperties)(n),u=i.filter(h=>(0,YU.alwaysValidSchema)(s,n[h]));if(i.length===0||u.length===i.length&&(!s.opts.unevaluated||s.props===!0))return;let d=o.strictSchema&&!o.allowMatchingProperties&&a.properties,l=t.name("valid");s.props!==!0&&!(s.props instanceof h3.Name)&&(s.props=(0,eH.evaluatedPropsToName)(t,s.props));let{props:p}=s;y();function y(){for(let h of i)d&&m(h),s.allErrors?g(h):(t.var(l,!0),g(h),t.if(l))}function m(h){for(let w in d)new RegExp(h).test(w)&&(0,YU.checkStrictMode)(s,`property ${w} matches pattern ${h} (use allowMatchingProperties)`)}function g(h){t.forIn("key",r,w=>{t.if((0,h3._)`${(0,QU.usePattern)(e,h)}.test(${w})`,()=>{let v=u.includes(h);v||e.subschema({keyword:"patternProperties",schemaProp:h,dataProp:w,dataPropType:eH.Type.Str},l),s.opts.unevaluated&&p!==!0?t.assign((0,h3._)`${p}[${w}]`,!0):!v&&!s.allErrors&&t.if((0,h3.not)(l),()=>t.break())})})}}};x_.default=Zge});var nH=L(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});var Kge=pn(),Xge={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:n,it:r}=e;if((0,Kge.alwaysValidSchema)(r,n)){e.fail();return}let a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};w_.default=Xge});var rH=L(v_=>{"use strict";Object.defineProperty(v_,"__esModule",{value:!0});var Jge=qs(),Qge={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Jge.validateUnion,error:{message:"must match a schema in anyOf"}};v_.default=Qge});var aH=L(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});var x3=Dt(),Yge=pn(),e3e={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,x3._)`{passingSchemas: ${e.passing}}`},t3e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:e3e,code(e){let{gen:t,schema:n,parentSchema:r,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&r.discriminator)return;let s=n,o=t.let("valid",!1),i=t.let("passing",null),u=t.name("_valid");e.setParams({passing:i}),t.block(d),e.result(o,()=>e.reset(),()=>e.error(!0));function d(){s.forEach((l,p)=>{let y;(0,Yge.alwaysValidSchema)(a,l)?t.var(u,!0):y=e.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},u),p>0&&t.if((0,x3._)`${u} && ${o}`).assign(o,!1).assign(i,(0,x3._)`[${i}, ${p}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(i,p),y&&e.mergeEvaluated(y,x3.Name)})})}}};T_.default=t3e});var sH=L(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});var n3e=pn(),r3e={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");let a=t.name("valid");n.forEach((s,o)=>{if((0,n3e.alwaysValidSchema)(r,s))return;let i=e.subschema({keyword:"allOf",schemaProp:o},a);e.ok(a),e.mergeEvaluated(i)})}};S_.default=r3e});var cH=L(A_=>{"use strict";Object.defineProperty(A_,"__esModule",{value:!0});var w3=Dt(),iH=pn(),a3e={message:({params:e})=>(0,w3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,w3._)`{failingKeyword: ${e.ifClause}}`},s3e={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:a3e,code(e){let{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,iH.checkStrictMode)(r,'"if" without "then" and "else" is ignored');let a=oH(r,"then"),s=oH(r,"else");if(!a&&!s)return;let o=t.let("valid",!0),i=t.name("_valid");if(u(),e.reset(),a&&s){let l=t.let("ifClause");e.setParams({ifClause:l}),t.if(i,d("then",l),d("else",l))}else a?t.if(i,d("then")):t.if((0,w3.not)(i),d("else"));e.pass(o,()=>e.error(!0));function u(){let l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(l)}function d(l,p){return()=>{let y=e.subschema({keyword:l},i);t.assign(o,i),e.mergeValidEvaluated(y,o),p?t.assign(p,(0,w3._)`${l}`):e.setParams({ifClause:l})}}}};function oH(e,t){let n=e.schema[t];return n!==void 0&&!(0,iH.alwaysValidSchema)(e,n)}A_.default=s3e});var uH=L(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});var o3e=pn(),i3e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,o3e.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};__.default=i3e});var dH=L(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});var c3e=c_(),u3e=HU(),d3e=u_(),f3e=zU(),l3e=jU(),p3e=VU(),m3e=ZU(),b3e=y_(),y3e=JU(),g3e=tH(),h3e=nH(),x3e=rH(),w3e=aH(),v3e=sH(),T3e=cH(),S3e=uH();function A3e(e=!1){let t=[h3e.default,x3e.default,w3e.default,v3e.default,T3e.default,S3e.default,m3e.default,b3e.default,p3e.default,y3e.default,g3e.default];return e?t.push(u3e.default,f3e.default):t.push(c3e.default,d3e.default),t.push(l3e.default),t}E_.default=A3e});var fH=L(k_=>{"use strict";Object.defineProperty(k_,"__esModule",{value:!0});var P0=Dt(),_3e={message:({schemaCode:e})=>(0,P0.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,P0._)`{format: ${e}}`},E3e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:_3e,code(e,t){let{gen:n,data:r,$data:a,schema:s,schemaCode:o,it:i}=e,{opts:u,errSchemaPath:d,schemaEnv:l,self:p}=i;if(!u.validateFormats)return;a?y():m();function y(){let g=n.scopeValue("formats",{ref:p.formats,code:u.code.formats}),h=n.const("fDef",(0,P0._)`${g}[${o}]`),w=n.let("fType"),v=n.let("format");n.if((0,P0._)`typeof ${h} == "object" && !(${h} instanceof RegExp)`,()=>n.assign(w,(0,P0._)`${h}.type || "string"`).assign(v,(0,P0._)`${h}.validate`),()=>n.assign(w,(0,P0._)`"string"`).assign(v,h)),e.fail$data((0,P0.or)(T(),A()));function T(){return u.strictSchema===!1?P0.nil:(0,P0._)`${o} && !${v}`}function A(){let _=l.$async?(0,P0._)`(${h}.async ? await ${v}(${r}) : ${v}(${r}))`:(0,P0._)`${v}(${r})`,E=(0,P0._)`(typeof ${v} == "function" ? ${_} : ${v}.test(${r}))`;return(0,P0._)`${v} && ${v} !== true && ${w} === ${t} && !${E}`}}function m(){let g=p.formats[s];if(!g){T();return}if(g===!0)return;let[h,w,v]=A(g);h===t&&e.pass(_());function T(){if(u.strictSchema===!1){p.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${d}"`}}function A(E){let O=E instanceof RegExp?(0,P0.regexpCode)(E):u.code.formats?(0,P0._)`${u.code.formats}${(0,P0.getProperty)(s)}`:void 0,$=n.scopeValue("formats",{key:s,ref:E,code:O});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,P0._)`${$}.validate`]:["string",E,$]}function _(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!l.$async)throw new Error("async format in sync schema");return(0,P0._)`await ${v}(${r})`}return typeof w=="function"?(0,P0._)`${v}(${r})`:(0,P0._)`${v}.test(${r})`}}}};k_.default=E3e});var lH=L(I_=>{"use strict";Object.defineProperty(I_,"__esModule",{value:!0});var k3e=fH(),I3e=[k3e.default];I_.default=I3e});var pH=L(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.contentVocabulary=Hd.metadataVocabulary=void 0;Hd.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Hd.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var bH=L(C_=>{"use strict";Object.defineProperty(C_,"__esModule",{value:!0});var C3e=TU(),P3e=NU(),R3e=dH(),$3e=lH(),mH=pH(),D3e=[C3e.default,P3e.default,(0,R3e.default)(),$3e.default,mH.metadataVocabulary,mH.contentVocabulary];C_.default=D3e});var gH=L(v3=>{"use strict";Object.defineProperty(v3,"__esModule",{value:!0});v3.DiscrError=void 0;var yH;(function(e){e.Tag="tag",e.Mapping="mapping"})(yH||(v3.DiscrError=yH={}))});var xH=L(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0});var Fd=Dt(),P_=gH(),hH=n3(),M3e=Em(),O3e=pn(),N3e={message:({params:{discrError:e,tagName:t}})=>e===P_.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Fd._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},L3e={keyword:"discriminator",type:"object",schemaType:"object",error:N3e,code(e){let{gen:t,data:n,schema:r,parentSchema:a,it:s}=e,{oneOf:o}=a;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let i=r.propertyName;if(typeof i!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=t.let("valid",!1),d=t.const("tag",(0,Fd._)`${n}${(0,Fd.getProperty)(i)}`);t.if((0,Fd._)`typeof ${d} == "string"`,()=>l(),()=>e.error(!1,{discrError:P_.DiscrError.Tag,tag:d,tagName:i})),e.ok(u);function l(){let m=y();t.if(!1);for(let g in m)t.elseIf((0,Fd._)`${d} === ${g}`),t.assign(u,p(m[g]));t.else(),e.error(!1,{discrError:P_.DiscrError.Mapping,tag:d,tagName:i}),t.endIf()}function p(m){let g=t.name("valid"),h=e.subschema({keyword:"oneOf",schemaProp:m},g);return e.mergeEvaluated(h,Fd.Name),g}function y(){var m;let g={},h=v(a),w=!0;for(let _=0;_<o.length;_++){let E=o[_];if(E?.$ref&&!(0,O3e.schemaHasRulesButRef)(E,s.self.RULES)){let $=E.$ref;if(E=hH.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,$),E instanceof hH.SchemaEnv&&(E=E.schema),E===void 0)throw new M3e.default(s.opts.uriResolver,s.baseId,$)}let O=(m=E?.properties)===null||m===void 0?void 0:m[i];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);w=w&&(h||v(E)),T(O,_)}if(!w)throw new Error(`discriminator: "${i}" must be required`);return g;function v({required:_}){return Array.isArray(_)&&_.includes(i)}function T(_,E){if(_.const)A(_.const,E);else if(_.enum)for(let O of _.enum)A(O,E);else throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`)}function A(_,E){if(typeof _!="string"||_ in g)throw new Error(`discriminator: "${i}" values must be unique strings`);g[_]=E}}}};R_.default=L3e});var wH=L((EJe,B3e)=>{B3e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var D_=L((Gn,$_)=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.MissingRefError=Gn.ValidationError=Gn.CodeGen=Gn.Name=Gn.nil=Gn.stringify=Gn.str=Gn._=Gn.KeywordCxt=Gn.Ajv=void 0;var U3e=yU(),H3e=bH(),F3e=xH(),vH=wH(),z3e=["/properties"],T3="http://json-schema.org/draft-07/schema",zd=class extends U3e.default{_addVocabularies(){super._addVocabularies(),H3e.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(F3e.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(vH,z3e):vH;this.addMetaSchema(t,T3,!1),this.refs["http://json-schema.org/schema"]=T3}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(T3)?T3:void 0)}};Gn.Ajv=zd;$_.exports=Gn=zd;$_.exports.Ajv=zd;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.default=zd;var j3e=_m();Object.defineProperty(Gn,"KeywordCxt",{enumerable:!0,get:function(){return j3e.KeywordCxt}});var jd=Dt();Object.defineProperty(Gn,"_",{enumerable:!0,get:function(){return jd._}});Object.defineProperty(Gn,"str",{enumerable:!0,get:function(){return jd.str}});Object.defineProperty(Gn,"stringify",{enumerable:!0,get:function(){return jd.stringify}});Object.defineProperty(Gn,"nil",{enumerable:!0,get:function(){return jd.nil}});Object.defineProperty(Gn,"Name",{enumerable:!0,get:function(){return jd.Name}});Object.defineProperty(Gn,"CodeGen",{enumerable:!0,get:function(){return jd.CodeGen}});var q3e=e3();Object.defineProperty(Gn,"ValidationError",{enumerable:!0,get:function(){return q3e.default}});var G3e=Em();Object.defineProperty(Gn,"MissingRefError",{enumerable:!0,get:function(){return G3e.default}})});var CH=L(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.formatNames=li.fastFormats=li.fullFormats=void 0;function fi(e,t){return{validate:e,compare:t}}li.fullFormats={date:fi(_H,L_),time:fi(O_(!0),B_),"date-time":fi(TH(!0),kH),"iso-time":fi(O_(),EH),"iso-date-time":fi(TH(),IH),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:J3e,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:a9e,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Q3e,int32:{type:"number",validate:t9e},int64:{type:"number",validate:n9e},float:{type:"number",validate:AH},double:{type:"number",validate:AH},password:!0,binary:!0};li.fastFormats={...li.fullFormats,date:fi(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,L_),time:fi(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,B_),"date-time":fi(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,kH),"iso-time":fi(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,EH),"iso-date-time":fi(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,IH),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};li.formatNames=Object.keys(li.fullFormats);function V3e(e){return e%4===0&&(e%100!==0||e%400===0)}var W3e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Z3e=[0,31,28,31,30,31,30,31,31,30,31,30,31];function _H(e){let t=W3e.exec(e);if(!t)return!1;let n=+t[1],r=+t[2],a=+t[3];return r>=1&&r<=12&&a>=1&&a<=(r===2&&V3e(n)?29:Z3e[r])}function L_(e,t){if(e&&t)return e>t?1:e<t?-1:0}var M_=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function O_(e){return function(n){let r=M_.exec(n);if(!r)return!1;let a=+r[1],s=+r[2],o=+r[3],i=r[4],u=r[5]==="-"?-1:1,d=+(r[6]||0),l=+(r[7]||0);if(d>23||l>59||e&&!i)return!1;if(a<=23&&s<=59&&o<60)return!0;let p=s-l*u,y=a-d*u-(p<0?1:0);return(y===23||y===-1)&&(p===59||p===-1)&&o<61}}function B_(e,t){if(!(e&&t))return;let n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();if(n&&r)return n-r}function EH(e,t){if(!(e&&t))return;let n=M_.exec(e),r=M_.exec(t);if(n&&r)return e=n[1]+n[2]+n[3],t=r[1]+r[2]+r[3],e>t?1:e<t?-1:0}var N_=/t|\s/i;function TH(e){let t=O_(e);return function(r){let a=r.split(N_);return a.length===2&&_H(a[0])&&t(a[1])}}function kH(e,t){if(!(e&&t))return;let n=new Date(e).valueOf(),r=new Date(t).valueOf();if(n&&r)return n-r}function IH(e,t){if(!(e&&t))return;let[n,r]=e.split(N_),[a,s]=t.split(N_),o=L_(n,a);if(o!==void 0)return o||B_(r,s)}var K3e=/\/|:/,X3e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function J3e(e){return K3e.test(e)&&X3e.test(e)}var SH=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Q3e(e){return SH.lastIndex=0,SH.test(e)}var Y3e=-(2**31),e9e=2**31-1;function t9e(e){return Number.isInteger(e)&&e<=e9e&&e>=Y3e}function n9e(e){return Number.isInteger(e)}function AH(){return!0}var r9e=/[^\\]\\Z/;function a9e(e){if(r9e.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var PH=L(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.formatLimitDefinition=void 0;var s9e=D_(),Po=Dt(),Nc=Po.operators,S3={formatMaximum:{okStr:"<=",ok:Nc.LTE,fail:Nc.GT},formatMinimum:{okStr:">=",ok:Nc.GTE,fail:Nc.LT},formatExclusiveMaximum:{okStr:"<",ok:Nc.LT,fail:Nc.GTE},formatExclusiveMinimum:{okStr:">",ok:Nc.GT,fail:Nc.LTE}},o9e={message:({keyword:e,schemaCode:t})=>(0,Po.str)`should be ${S3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Po._)`{comparison: ${S3[e].okStr}, limit: ${t}}`};qd.formatLimitDefinition={keyword:Object.keys(S3),type:"string",schemaType:"string",$data:!0,error:o9e,code(e){let{gen:t,data:n,schemaCode:r,keyword:a,it:s}=e,{opts:o,self:i}=s;if(!o.validateFormats)return;let u=new s9e.KeywordCxt(s,i.RULES.all.format.definition,"format");u.$data?d():l();function d(){let y=t.scopeValue("formats",{ref:i.formats,code:o.code.formats}),m=t.const("fmt",(0,Po._)`${y}[${u.schemaCode}]`);e.fail$data((0,Po.or)((0,Po._)`typeof ${m} != "object"`,(0,Po._)`${m} instanceof RegExp`,(0,Po._)`typeof ${m}.compare != "function"`,p(m)))}function l(){let y=u.schema,m=i.formats[y];if(!m||m===!0)return;if(typeof m!="object"||m instanceof RegExp||typeof m.compare!="function")throw new Error(`"${a}": format "${y}" does not define "compare" function`);let g=t.scopeValue("formats",{key:y,ref:m,code:o.code.formats?(0,Po._)`${o.code.formats}${(0,Po.getProperty)(y)}`:void 0});e.fail$data(p(g))}function p(y){return(0,Po._)`${y}.compare(${n}, ${r}) ${S3[a].fail} 0`}},dependencies:["format"]};var i9e=e=>(e.addKeyword(qd.formatLimitDefinition),e);qd.default=i9e});var MH=L((Hm,DH)=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});var Gd=CH(),c9e=PH(),U_=Dt(),RH=new U_.Name("fullFormats"),u9e=new U_.Name("fastFormats"),H_=(e,t={keywords:!0})=>{if(Array.isArray(t))return $H(e,t,Gd.fullFormats,RH),e;let[n,r]=t.mode==="fast"?[Gd.fastFormats,u9e]:[Gd.fullFormats,RH],a=t.formats||Gd.formatNames;return $H(e,a,n,r),t.keywords&&(0,c9e.default)(e),e};H_.get=(e,t="full")=>{let r=(t==="fast"?Gd.fastFormats:Gd.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r};function $H(e,t,n,r){var a,s;(a=(s=e.opts.code).formats)!==null&&a!==void 0||(s.formats=(0,U_._)`require("ajv-formats/dist/formats").${r}`);for(let o of t)e.addFormat(o,n[o])}DH.exports=Hm=H_;Object.defineProperty(Hm,"__esModule",{value:!0});Hm.default=H_});var Gm={};ni(Gm,{createPasskey:()=>Z_,deletePasskey:()=>F9e,deleteProvider:()=>V9e,deleteSessionKeyFromKeychain:()=>JH,deleteSubagentKeyFromKeychain:()=>QH,deriveAddressFromP256:()=>j9e,getPasskeyPrivateKey:()=>z9e,getPasskeyPublicKey:()=>Uc,getProvider:()=>G9e,getSessionKeyFromKeychain:()=>X_,getSubagentKeyFromKeychain:()=>Y_,hasPasskey:()=>qm,hasProvider:()=>J_,hasSessionKey:()=>D3,hasSubagentKey:()=>YH,isFileMode:()=>_t,listProviders:()=>W9e,listSubagentKeysFromKeychain:()=>eF,parseP256PublicKey:()=>Vd,signWithPasskey:()=>$3,storeProvider:()=>q9e,storeSessionKeyInKeychain:()=>K_,storeSubagentKeyInKeychain:()=>Q_});import{spawn as h9e}from"node:child_process";import{existsSync as Bc,mkdirSync as x9e,readFileSync as w9e,writeFileSync as v9e,readdirSync as T9e,unlinkSync as WH}from"node:fs";import{homedir as ZH}from"node:os";import*as U0 from"node:path";import{fileURLToPath as S9e}from"node:url";function _t(){return process.env.PRAGMA_SIGNER_TYPE==="file"}function G_(){let e=process.env.PRAGMA_SESSION_KEY_PATH;return e?U0.dirname(e):U0.join(ZH(),".pragma")}function _9e(e){Bc(e)||x9e(e,{recursive:!0})}function V_(e){return Bc(e)?JSON.parse(w9e(e,"utf-8")):null}function W_(e,t){_9e(U0.dirname(e)),v9e(e,JSON.stringify(t,null,2),{mode:384})}function R3(){return process.env.PRAGMA_SESSION_KEY_PATH??U0.join(G_(),"session-key.json")}function E9e(e){W_(R3(),{privateKey:e,storedAt:Date.now()})}function k9e(){let e=V_(R3());return e?.privateKey?e.privateKey:null}function I9e(){let e=R3();Bc(e)&&WH(e)}function C9e(){return Bc(R3())}function zm(){return process.env.PRAGMA_SUBAGENT_KEYS_DIR??U0.join(G_(),"subagent-keys")}function P9e(e,t){let n=zm();W_(U0.join(n,`${e}.json`),{privateKey:t,storedAt:Date.now()})}function R9e(e){let t=V_(U0.join(zm(),`${e}.json`));return t?.privateKey?t.privateKey:null}function $9e(e){let t=U0.join(zm(),`${e}.json`);Bc(t)&&WH(t)}function D9e(e){return Bc(U0.join(zm(),`${e}.json`))}function M9e(){let e=zm();return Bc(e)?T9e(e).filter(t=>t.endsWith(".json")).map(t=>t.replace(".json","")):[]}function KH(){return process.env.PRAGMA_PROVIDERS_PATH??U0.join(G_(),"providers.json")}function jm(){return V_(KH())??{}}function XH(e){W_(KH(),e)}function O9e(e,t){let n=jm();n[e]=t,XH(n)}function N9e(e){return jm()[e]??null}function L9e(e){let t=jm();delete t[e],XH(t)}function B9e(e){return e in jm()}function U9e(){return Object.keys(jm())}function H9e(){if(process.env.PRAGMA_SIGNER_PATH)return process.env.PRAGMA_SIGNER_PATH;let e=ZH(),t=[U0.join(e,".pragma","bin","pragma-signer"),U0.resolve(q_,"../../../bin/pragma-signer"),U0.resolve(q_,"../../../../../swift/.build/release/pragma-signer"),U0.resolve(q_,"../../../../../swift/.build/arm64-apple-macosx/release/pragma-signer"),U0.join(e,"Library/Developer/Xcode/DerivedData/PragmaSigner-*/Build/Products/Debug/pragma-signer"),U0.join(e,"Library/Developer/Xcode/DerivedData/PragmaSigner-*/Build/Products/Release/pragma-signer")];for(let n of t)if(!n.includes("*")&&Bc(n))return n;return"pragma-signer"}async function J0(e){let t=H9e();return new Promise((n,r)=>{let a=h9e(t,e,{stdio:["inherit","pipe","pipe"]}),s="",o="";a.stdout?.on("data",i=>{s+=i.toString()}),a.stderr?.on("data",i=>{o+=i.toString()}),a.on("close",i=>{if(i!==0&&!s){r(new Error(`pragma-signer exited with code ${i}: ${o}`));return}try{let u=JSON.parse(s.trim());n(u)}catch{r(new Error(`Failed to parse signer response: ${s}`))}}),a.on("error",i=>{r(new Error(`Failed to execute pragma-signer: ${i.message}`))})})}function Q0(e,t){if(!e.success)throw new Error(e.error||"Unknown signer error");if(t&&e.data){for(let n of t)if(!(n in e.data))throw new Error(`Missing expected key in response: ${String(n)}`)}return e.data||{}}async function Z_(e){let t=["create-passkey"];e&&t.push("-m",e);let n=await J0(t);return Q0(n,["publicKey"]).publicKey}async function $3(e,t){let n=["sign",e];t&&n.push("-m",t);let r=await J0(n);return Q0(r,["signature"]).signature}async function Uc(){try{let e=await J0(["get-pubkey"]);return Q0(e,["publicKey"]).publicKey}catch(e){if(e instanceof Error&&e.message.includes("not found"))return null;throw e}}async function qm(){let e=await J0(["has-passkey"]);return Q0(e,["exists"]).exists==="true"}async function F9e(e){let t=["delete-passkey"];e&&t.push("-m",e);let n=await J0(t);Q0(n)}async function z9e(e){throw new Error("DEPRECATED: getPasskeyPrivateKey is disabled for security. Use signWithPasskey() for P-256 signing.")}async function K_(e){if(_t()){E9e(e);return}let t=await J0(["store-session",e]);Q0(t)}async function X_(){if(_t())return k9e();try{let e=await J0(["get-session"]);return Q0(e,["privateKey"]).privateKey}catch(e){if(e instanceof Error&&e.message.includes("not found"))return null;throw e}}async function JH(){if(_t()){I9e();return}let e=await J0(["delete-session"]);Q0(e)}async function D3(){if(_t())return C9e();let e=await J0(["has-session"]);return Q0(e,["exists"]).exists==="true"}function Vd(e){let t=e.slice(2);if(t.length!==130)throw new Error(`Invalid public key length: expected 130 hex chars (65 bytes), got ${t.length}`);if(!t.startsWith("04"))throw new Error("Invalid public key format: expected uncompressed (0x04...)");let n=t.slice(2,66),r=t.slice(66,130);return{x:BigInt("0x"+n),y:BigInt("0x"+r)}}function j9e(e){throw new Error("Address derivation for P-256 passkeys is done through the smart account SDK")}async function q9e(e,t){if(_t()){O9e(e,t);return}let n=await J0(["store-provider",e,t]);Q0(n)}async function G9e(e){if(_t())return N9e(e);try{let t=await J0(["get-provider",e]);return Q0(t,["value"]).value}catch(t){if(t instanceof Error&&t.message.includes("not found")||t instanceof Error&&t.message.includes("Keychain error"))return null;throw t}}async function V9e(e){if(_t()){L9e(e);return}let t=await J0(["delete-provider",e]);Q0(t)}async function J_(e){if(_t())return B9e(e);let t=await J0(["has-provider",e]);return Q0(t,["exists"]).exists==="true"}async function W9e(){if(_t())return U9e();let e=await J0(["list-providers"]),t=Q0(e,["providers"]);return!t.providers||t.providers===""?[]:t.providers.split(",")}async function Q_(e,t){if(_t()){P9e(e,t);return}let n=await J0(["store-subagent",e,t]);Q0(n)}async function Y_(e){if(_t())return R9e(e);try{let t=await J0(["get-subagent",e]);return Q0(t,["privateKey"]).privateKey}catch(t){if(t instanceof Error&&t.message.includes("not found"))return null;throw t}}async function QH(e){if(_t()){$9e(e);return}let t=await J0(["delete-subagent",e]);Q0(t)}async function YH(e){if(_t())return D9e(e);let t=await J0(["has-subagent",e]);return Q0(t,["exists"]).exists==="true"}async function eF(){if(_t())return M9e();let e=await J0(["list-subagents"]),t=Q0(e,["subagents"]);return!t.subagents||t.subagents===""?[]:t.subagents.split(",")}var A9e,q_,t0=I(()=>{"use strict";A9e=S9e(import.meta.url),q_=U0.dirname(A9e)});var rF,aF=I(()=>{rF="1.2.3"});var R0,Wd=I(()=>{aF();R0=class e extends Error{constructor(t,n={}){let r=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${rF}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.shortMessage=t}}});function vs(e,t){return e.exec(t)?.groups}var tE,nE,M3,Vm=I(()=>{tE=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nE=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,M3=/^\(.+?\).*?$/});function O3(e){let t=e.type;if(sF.test(e.type)&&"components"in e){t="(";let n=e.components.length;for(let a=0;a<n;a++){let s=e.components[a];t+=O3(s),a<n-1&&(t+=", ")}let r=vs(sF,e.type);return t+=`)${r?.array||""}`,O3({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}var sF,oF=I(()=>{Vm();sF=/^tuple(?<array>(\[(\d*)\])*)$/});function m1(e){let t="",n=e.length;for(let r=0;r<n;r++){let a=e[r];t+=O3(a),r!==n-1&&(t+=", ")}return t}var rE=I(()=>{oF()});function zu(e){return e.type==="function"?`function ${e.name}(${m1(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${m1(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${m1(e.inputs)})`:e.type==="error"?`error ${e.name}(${m1(e.inputs)})`:e.type==="constructor"?`constructor(${m1(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var iF=I(()=>{rE()});function uF(e){return cF.test(e)}function dF(e){return vs(cF,e)}function lF(e){return fF.test(e)}function pF(e){return vs(fF,e)}function bF(e){return mF.test(e)}function yF(e){return vs(mF,e)}function Hc(e){return gF.test(e)}function hF(e){return vs(gF,e)}function wF(e){return xF.test(e)}function vF(e){return vs(xF,e)}function SF(e){return TF.test(e)}function AF(e){return vs(TF,e)}function _F(e){return Q9e.test(e)}var cF,fF,mF,gF,xF,TF,Q9e,aE,EF,N3,Zd=I(()=>{Vm();cF=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;fF=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;mF=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;gF=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;xF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;TF=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;Q9e=/^receive\(\) external payable$/;aE=new Set(["memory","indexed","storage","calldata"]),EF=new Set(["indexed"]),N3=new Set(["calldata","memory","storage"])});var Wm,Zm,L3,B3=I(()=>{Wd();Wm=class extends R0{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},Zm=class extends R0{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},L3=class extends R0{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Km,Xm,Jm,Qm,Ym,eb,U3=I(()=>{Wd();Km=class extends R0{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}},Xm=class extends R0{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Jm=class extends R0{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Qm=class extends R0{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Ym=class extends R0{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},eb=class extends R0{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Ro,tb,nb,sE=I(()=>{Wd();Ro=class extends R0{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},tb=class extends R0{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},nb=class extends R0{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var rb,kF=I(()=>{Wd();rb=class extends R0{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var ab,IF=I(()=>{Wd();ab=class extends R0{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function CF(e,t,n){let r="";if(n)for(let a of Object.entries(n)){if(!a)continue;let s="";for(let o of a[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${a[0]}{${s}})`}return t?`${t}:${e}${r}`:`${e}${r}`}var H3,PF=I(()=>{H3=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function sb(e,t={}){if(bF(e))return Y9e(e,t);if(lF(e))return ehe(e,t);if(uF(e))return the(e,t);if(wF(e))return nhe(e,t);if(SF(e))return rhe(e);if(_F(e))return{type:"receive",stateMutability:"payable"};throw new tb({signature:e})}function Y9e(e,t={}){let n=yF(e);if(!n)throw new Ro({signature:e,type:"function"});let r=ja(n.parameters),a=[],s=r.length;for(let i=0;i<s;i++)a.push($o(r[i],{modifiers:N3,structs:t,type:"function"}));let o=[];if(n.returns){let i=ja(n.returns),u=i.length;for(let d=0;d<u;d++)o.push($o(i[d],{modifiers:N3,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:a,outputs:o}}function ehe(e,t={}){let n=pF(e);if(!n)throw new Ro({signature:e,type:"event"});let r=ja(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push($o(r[o],{modifiers:EF,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:a}}function the(e,t={}){let n=dF(e);if(!n)throw new Ro({signature:e,type:"error"});let r=ja(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push($o(r[o],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:a}}function nhe(e,t={}){let n=vF(e);if(!n)throw new Ro({signature:e,type:"constructor"});let r=ja(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push($o(r[o],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:a}}function rhe(e){let t=AF(e);if(!t)throw new Ro({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}function $o(e,t){let n=CF(e,t?.type,t?.structs);if(H3.has(n))return H3.get(n);let r=M3.test(e),a=vs(r?she:ahe,e);if(!a)throw new Xm({param:e});if(a.name&&che(a.name))throw new Jm({param:e,name:a.name});let s=a.name?{name:a.name}:{},o=a.modifier==="indexed"?{indexed:!0}:{},i=t?.structs??{},u,d={};if(r){u="tuple";let p=ja(a.type),y=[],m=p.length;for(let g=0;g<m;g++)y.push($o(p[g],{structs:i}));d={components:y}}else if(a.type in i)u="tuple",d={components:i[a.type]};else if(ohe.test(a.type))u=`${a.type}256`;else if(a.type==="address payable")u="address";else if(u=a.type,t?.type!=="struct"&&!oE(u))throw new L3({type:u});if(a.modifier){if(!t?.modifiers?.has?.(a.modifier))throw new Qm({param:e,type:t?.type,modifier:a.modifier});if(N3.has(a.modifier)&&!uhe(u,!!a.array))throw new Ym({param:e,type:t?.type,modifier:a.modifier})}let l={type:`${u}${a.array??""}`,...s,...o,...d};return H3.set(n,l),l}function ja(e,t=[],n="",r=0){let a=e.trim().length;for(let s=0;s<a;s++){let o=e[s],i=e.slice(s+1);switch(o){case",":return r===0?ja(i,[...t,n.trim()]):ja(i,t,`${n}${o}`,r);case"(":return ja(i,t,`${n}${o}`,r+1);case")":return ja(i,t,`${n}${o}`,r-1);default:return ja(i,t,`${n}${o}`,r)}}if(n==="")return t;if(r!==0)throw new ab({current:n,depth:r});return t.push(n.trim()),t}function oE(e){return e==="address"||e==="bool"||e==="function"||e==="string"||tE.test(e)||nE.test(e)}function che(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||tE.test(e)||nE.test(e)||ihe.test(e)}function uhe(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}var ahe,she,ohe,ihe,Kd=I(()=>{Vm();B3();U3();sE();IF();PF();Zd();ahe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,she=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ohe=/^u?int$/;ihe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Xd(e){let t={},n=e.length;for(let o=0;o<n;o++){let i=e[o];if(!Hc(i))continue;let u=hF(i);if(!u)throw new Ro({signature:i,type:"struct"});let d=u.properties.split(";"),l=[],p=d.length;for(let y=0;y<p;y++){let g=d[y].trim();if(!g)continue;let h=$o(g,{type:"struct"});l.push(h)}if(!l.length)throw new nb({signature:i});t[u.name]=l}let r={},a=Object.entries(t),s=a.length;for(let o=0;o<s;o++){let[i,u]=a[o];r[i]=RF(u,t)}return r}function RF(e=[],t={},n=new Set){let r=[],a=e.length;for(let s=0;s<a;s++){let o=e[s];if(M3.test(o.type))r.push(o);else{let u=vs(dhe,o.type);if(!u?.type)throw new eb({abiParameter:o});let{array:d,type:l}=u;if(l in t){if(n.has(l))throw new rb({type:l});r.push({...o,type:`tuple${d??""}`,components:RF(t[l],t,new Set([...n,l]))})}else if(oE(l))r.push(o);else throw new Zm({type:l})}}return r}var dhe,F3=I(()=>{Vm();B3();U3();sE();kF();Zd();Kd();dhe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function ju(e){let t=Xd(e),n=[],r=e.length;for(let a=0;a<r;a++){let s=e[a];Hc(s)||n.push(sb(s,t))}return n}var $F=I(()=>{Zd();F3();Kd()});function qu(e){let t;if(typeof e=="string")t=sb(e);else{let n=Xd(e),r=e.length;for(let a=0;a<r;a++){let s=e[a];if(!Hc(s)){t=sb(s,n);break}}}if(!t)throw new Wm({signature:e});return t}var DF=I(()=>{B3();Zd();F3();Kd()});function b1(e){let t=[];if(typeof e=="string"){let n=ja(e),r=n.length;for(let a=0;a<r;a++)t.push($o(n[a],{modifiers:aE}))}else{let n=Xd(e),r=e.length;for(let a=0;a<r;a++){let s=e[a];if(Hc(s))continue;let o=ja(s),i=o.length;for(let u=0;u<i;u++)t.push($o(o[u],{modifiers:aE,structs:n}))}}if(t.length===0)throw new Km({params:e});return t}var MF=I(()=>{U3();Zd();F3();Kd();Kd()});var Gu=I(()=>{iF();rE();$F();DF();MF()});function ce(e,t,n){let r=e[t.name];if(typeof r=="function")return r;let a=e[n];return typeof a=="function"?a:s=>t(e,s)}var sn=I(()=>{});function Y0(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new z3(e.type);return`${e.name}(${ob(e.inputs,{includeName:t})})`}function ob(e,{includeName:t=!1}={}){return e?e.map(n=>fhe(n,{includeName:t})).join(t?", ":","):""}function fhe(e,{includeName:t}){return e.type.startsWith("tuple")?`(${ob(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}var y1=I(()=>{w0()});function mn(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}var Ts=I(()=>{});function Wt(e){return mn(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}var Ss=I(()=>{Ts()});var iE,NF=I(()=>{iE="2.44.0"});function LF(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?LF(e.cause,t):t?null:e}var cE,z,yt=I(()=>{NF();cE={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${iE}`},z=class e extends Error{constructor(t,n={}){let r=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=cE.getDocsUrl?.({...n,docsPath:a}),o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...cE.version?[`Version: ${cE.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=iE}walk(t){return LF(this,t)}}});var j3,ib,Jd,Ws,q3,G3,Qd,V3,cb,Yd,W3,Z3,ub,Do,ef,K3,X3,tf,g1,Fc,J3,Q3,nf,z3,Y3,w0=I(()=>{y1();Ss();yt();j3=class extends z{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}},ib=class extends z{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}},Jd=class extends z{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${ob(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}},Ws=class extends z{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},q3=class extends z{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},G3=class extends z{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Wt(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},Qd=class extends z{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},V3=class extends z{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}},cb=class extends z{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}},Yd=class extends z{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}},W3=class extends z{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}},Z3=class extends z{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}},ub=class extends z{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}},Do=class extends z{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}},ef=class extends z{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}},K3=class extends z{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}},X3=class extends z{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Y0(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Y0(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},tf=class extends z{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}},g1=class extends z{constructor({abiItem:t,data:n,params:r,size:a}){super([`Data size of ${a} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${ob(r,{includeName:!0})})`,`Data:   ${n} (${a} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=a}},Fc=class extends z{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Y0(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}},J3=class extends z{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}},Q3=class extends z{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}},nf=class extends z{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},z3=class extends z{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}},Y3=class extends z{constructor(t){super(`Type "${t}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}});var e9,BF=I(()=>{yt();e9=class extends z{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}});var db,fb,lb,t9=I(()=>{yt();db=class extends z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},fb=class extends z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}},lb=class extends z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}});function It(e,{dir:t,size:n=32}={}){return typeof e=="string"?Mo(e,{dir:t,size:n}):uE(e,{dir:t,size:n})}function Mo(e,{dir:t,size:n=32}={}){if(n===null)return e;let r=e.replace("0x","");if(r.length>n*2)throw new fb({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function uE(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new fb({size:e.length,targetSize:n,type:"bytes"});let r=new Uint8Array(n);for(let a=0;a<n;a++){let s=t==="right";r[s?a:n-a-1]=e[s?a:e.length-a-1]}return r}var h1=I(()=>{t9()});var rf,n9,r9,a9,pb=I(()=>{yt();rf=class extends z{constructor({max:t,min:n,signed:r,size:a,value:s}){super(`Number "${s}" is not in safe ${a?`${a*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},n9=class extends z{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},r9=class extends z{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},a9=class extends z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}});function er(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let a=0;a<n.length-1&&n[t==="left"?a:n.length-a-1].toString()==="0";a++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}var Vu=I(()=>{});function ia(e,{size:t}){if(Wt(e)>t)throw new a9({givenSize:Wt(e),maxSize:t})}function s9(e,t){let n=typeof t=="string"?{to:t}:t,r=n.to;return r==="number"?Vn(e,n):r==="bigint"?n0(e,n):r==="string"?dE(e,n):r==="boolean"?mb(e,n):bn(e,n)}function n0(e,t={}){let{signed:n}=t;t.size&&ia(e,{size:t.size});let r=BigInt(e);if(!n)return r;let a=(e.length-2)/2,s=(1n<<BigInt(a)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(a*2,"f")}`)-1n}function mb(e,t={}){let n=e;if(t.size&&(ia(n,{size:t.size}),n=er(n)),er(n)==="0x00")return!1;if(er(n)==="0x01")return!0;throw new r9(n)}function Vn(e,t={}){return Number(n0(e,t))}function dE(e,t={}){let n=bn(e);return t.size&&(ia(n,{size:t.size}),n=er(n,{dir:"right"})),new TextDecoder().decode(n)}var tr=I(()=>{pb();Ss();Vu();v0()});function ge(e,t={}){return typeof e=="number"||typeof e=="bigint"?F(e,t):typeof e=="string"?qa(e,t):typeof e=="boolean"?Wu(e,t):tn(e,t)}function Wu(e,t={}){let n=`0x${Number(e)}`;return typeof t.size=="number"?(ia(n,{size:t.size}),It(n,{size:t.size})):n}function tn(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=lhe[e[a]];let r=`0x${n}`;return typeof t.size=="number"?(ia(r,{size:t.size}),It(r,{dir:"right",size:t.size})):r}function F(e,t={}){let{signed:n,size:r}=t,a=BigInt(e),s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let o=typeof s=="bigint"&&n?-s-1n:0;if(s&&a>s||a<o){let u=typeof e=="bigint"?"n":"";throw new rf({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}let i=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?It(i,{size:r}):i}function qa(e,t={}){let n=phe.encode(e);return tn(n,t)}var lhe,phe,Ve=I(()=>{pb();h1();tr();lhe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));phe=new TextEncoder});function H0(e,t={}){return typeof e=="number"||typeof e=="bigint"?FF(e,t):typeof e=="boolean"?HF(e,t):mn(e)?bn(e,t):Zs(e,t)}function HF(e,t={}){let n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(ia(n,{size:t.size}),It(n,{size:t.size})):n}function UF(e){if(e>=x1.zero&&e<=x1.nine)return e-x1.zero;if(e>=x1.A&&e<=x1.F)return e-(x1.A-10);if(e>=x1.a&&e<=x1.f)return e-(x1.a-10)}function bn(e,t={}){let n=e;t.size&&(ia(n,{size:t.size}),n=It(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);let a=r.length/2,s=new Uint8Array(a);for(let o=0,i=0;o<a;o++){let u=UF(r.charCodeAt(i++)),d=UF(r.charCodeAt(i++));if(u===void 0||d===void 0)throw new z(`Invalid byte sequence ("${r[i-2]}${r[i-1]}" in "${r}").`);s[o]=u*16+d}return s}function FF(e,t){let n=F(e,t);return bn(n)}function Zs(e,t={}){let n=mhe.encode(e);return typeof t.size=="number"?(ia(n,{size:t.size}),It(n,{dir:"right",size:t.size})):n}var mhe,x1,v0=I(()=>{yt();Ts();h1();tr();Ve();mhe=new TextEncoder;x1={zero:48,nine:57,A:65,F:70,a:97,f:102}});function bhe(e,t=!1){return t?{h:Number(e&o9),l:Number(e>>zF&o9)}:{h:Number(e>>zF&o9)|0,l:Number(e&o9)|0}}function jF(e,t=!1){let n=e.length,r=new Uint32Array(n),a=new Uint32Array(n);for(let s=0;s<n;s++){let{h:o,l:i}=bhe(e[s],t);[r[s],a[s]]=[o,i]}return[r,a]}var o9,zF,qF,GF,VF,WF,ZF=I(()=>{o9=BigInt(4294967295),zF=BigInt(32);qF=(e,t,n)=>e<<n|t>>>32-n,GF=(e,t,n)=>t<<n|e>>>32-n,VF=(e,t,n)=>t<<n-32|e>>>64-n,WF=(e,t,n)=>e<<n-32|t>>>64-n});import*as w1 from"node:crypto";var Zu,KF=I(()=>{Zu=w1&&typeof w1=="object"&&"webcrypto"in w1?w1.webcrypto:w1&&typeof w1=="object"&&"randomBytes"in w1?w1:void 0});function yhe(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ku(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Oo(e,...t){if(!yhe(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function JF(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ku(e.outputLen),Ku(e.blockLen)}function T1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function i9(e,t){Oo(e);let n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function QF(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function pi(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function c9(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function No(e,t){return e<<32-t|e>>>t}function hhe(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function xhe(e){for(let t=0;t<e.length;t++)e[t]=hhe(e[t]);return e}function ez(e){if(Oo(e),YF)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=whe[e[n]];return t}function XF(e){if(e>=v1._0&&e<=v1._9)return e-v1._0;if(e>=v1.A&&e<=v1.F)return e-(v1.A-10);if(e>=v1.a&&e<=v1.f)return e-(v1.a-10)}function tz(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(YF)return Uint8Array.fromHex(e);let t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let a=0,s=0;a<n;a++,s+=2){let o=XF(e.charCodeAt(s)),i=XF(e.charCodeAt(s+1));if(o===void 0||i===void 0){let u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[a]=o*16+i}return r}function vhe(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Xu(e){return typeof e=="string"&&(e=vhe(e)),Oo(e),e}function nz(...e){let t=0;for(let r=0;r<e.length;r++){let a=e[r];Oo(a),t+=a.length}let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let s=e[r];n.set(s,a),a+=s.length}return n}function u9(e){let t=r=>e().update(Xu(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function d9(e=32){if(Zu&&typeof Zu.getRandomValues=="function")return Zu.getRandomValues(new Uint8Array(e));if(Zu&&typeof Zu.randomBytes=="function")return Uint8Array.from(Zu.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}var ghe,fE,YF,whe,v1,zc,S1=I(()=>{KF();ghe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;fE=ghe?e=>e:xhe,YF=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",whe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));v1={_0:48,_9:57,A:65,F:70,a:97,f:102};zc=class{}});function Che(e,t=24){let n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){let i=(o+8)%10,u=(o+2)%10,d=n[u],l=n[u+1],p=rz(d,l,1)^n[i],y=az(d,l,1)^n[i+1];for(let m=0;m<50;m+=10)e[o+m]^=p,e[o+m+1]^=y}let a=e[2],s=e[3];for(let o=0;o<24;o++){let i=oz[o],u=rz(a,s,i),d=az(a,s,i),l=sz[o];a=e[l],s=e[l+1],e[l]=u,e[l+1]=d}for(let o=0;o<50;o+=10){for(let i=0;i<10;i++)n[i]=e[o+i];for(let i=0;i<10;i++)e[o+i]^=~n[(i+2)%10]&n[(i+4)%10]}e[0]^=khe[r],e[1]^=Ihe[r]}pi(n)}var The,bb,She,Ahe,_he,Ehe,sz,oz,iz,cz,khe,Ihe,rz,az,lE,Phe,Lo,yb=I(()=>{ZF();S1();The=BigInt(0),bb=BigInt(1),She=BigInt(2),Ahe=BigInt(7),_he=BigInt(256),Ehe=BigInt(113),sz=[],oz=[],iz=[];for(let e=0,t=bb,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],sz.push(2*(5*r+n)),oz.push((e+1)*(e+2)/2%64);let a=The;for(let s=0;s<7;s++)t=(t<<bb^(t>>Ahe)*Ehe)%_he,t&She&&(a^=bb<<(bb<<BigInt(s))-bb);iz.push(a)}cz=jF(iz,!0),khe=cz[0],Ihe=cz[1],rz=(e,t,n)=>n>32?VF(e,t,n):qF(e,t,n),az=(e,t,n)=>n>32?WF(e,t,n):GF(e,t,n);lE=class e extends zc{constructor(t,n,r,a=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=a,this.rounds=s,Ku(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=QF(this.state)}clone(){return this._cloneInto()}keccak(){fE(this.state32),Che(this.state32,this.rounds),fE(this.state32),this.posOut=0,this.pos=0}update(t){T1(this),t=Xu(t),Oo(t);let{blockLen:n,state:r}=this,a=t.length;for(let s=0;s<a;){let o=Math.min(n-this.pos,a-s);for(let i=0;i<o;i++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:n,pos:r,blockLen:a}=this;t[r]^=n,(n&128)!==0&&r===a-1&&this.keccak(),t[a-1]^=128,this.keccak()}writeInto(t){T1(this,!1),Oo(t),this.finish();let n=this.state,{blockLen:r}=this;for(let a=0,s=t.length;a<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-a);t.set(n.subarray(this.posOut,this.posOut+o),a),this.posOut+=o,a+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ku(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(i9(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,pi(this.state)}_cloneInto(t){let{blockLen:n,suffix:r,outputLen:a,rounds:s,enableXOF:o}=this;return t||(t=new e(n,r,a,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=a,t.enableXOF=o,t.destroyed=this.destroyed,t}},Phe=(e,t,n)=>u9(()=>new lE(t,e,n)),Lo=Phe(1,136,256/8)});function Ke(e,t){let n=t||"hex",r=Lo(mn(e,{strict:!1})?H0(e):e);return n==="bytes"?r:ge(r)}var Ga=I(()=>{yb();Ts();v0();Ve()});function uz(e){return Rhe(e)}var Rhe,dz=I(()=>{v0();Ga();Rhe=e=>Ke(H0(e))});function fz(e){let t=!0,n="",r=0,a="",s=!1;for(let o=0;o<e.length;o++){let i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(a))a="";else if(a+=i,i===")"){s=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}a+=i,n+=i}}if(!s)throw new z("Unable to normalize signature.");return a}var lz=I(()=>{yt()});var pz,mz=I(()=>{Gu();lz();pz=e=>{let t=typeof e=="string"?e:zu(e);return fz(t)}});function f9(e){return uz(pz(e))}var pE=I(()=>{dz();mz()});var jc,gb=I(()=>{pE();jc=f9});var In,Bo=I(()=>{yt();In=class extends z{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var $r,qc=I(()=>{$r=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});function mi(e,t){if(mE.has(`${e}.${t}`))return mE.get(`${e}.${t}`);let n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=Ke(Zs(n),"bytes"),a=(t?n.substring(`${t}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&a[o]&&(a[o]=a[o].toUpperCase()),(r[o>>1]&15)>=8&&a[o+1]&&(a[o+1]=a[o+1].toUpperCase());let s=`0x${a.join("")}`;return mE.set(`${e}.${t}`,s),s}function xe(e,t){if(!Se(e,{strict:!1}))throw new In({address:e});return mi(e,t)}var mE,bi=I(()=>{Bo();v0();Ga();qc();Va();mE=new $r(8192)});function Se(e,t){let{strict:n=!0}=t??{},r=`${e}.${n}`;if(bE.has(r))return bE.get(r);let a=$he.test(e)?e.toLowerCase()===e?!0:n?mi(e)===e:!0:!1;return bE.set(r,a),a}var $he,bE,Va=I(()=>{qc();bi();$he=/^0x[a-fA-F0-9]{40}$/,bE=new $r(8192)});function Ae(e){return typeof e[0]=="string"?T0(e):bz(e)}function bz(e){let t=0;for(let a of e)t+=a.length;let n=new Uint8Array(t),r=0;for(let a of e)n.set(a,r),r+=a.length;return n}function T0(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}var F0=I(()=>{});function Wa(e,t,n,{strict:r}={}){return mn(e,{strict:!1})?l9(e,t,n,{strict:r}):yE(e,t,n,{strict:r})}function yz(e,t){if(typeof t=="number"&&t>0&&t>Wt(e)-1)throw new db({offset:t,position:"start",size:Wt(e)})}function gz(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Wt(e)!==n-t)throw new db({offset:n,position:"end",size:Wt(e)})}function yE(e,t,n,{strict:r}={}){yz(e,t);let a=e.slice(t,n);return r&&gz(a,t,n),a}function l9(e,t,n,{strict:r}={}){yz(e,t);let a=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&gz(a,t,n),a}var A1=I(()=>{t9();Ts();Ss()});var hz,p9,af,m9=I(()=>{hz=/^(.*)\[([0-9]*)\]$/,p9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,af=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function Zt(e,t){if(e.length!==t.length)throw new Qd({expectedLength:e.length,givenLength:t.length});let n=Dhe({params:e,values:t}),r=hE(n);return r.length===0?"0x":r}function Dhe({params:e,values:t}){let n=[];for(let r=0;r<e.length;r++)n.push(gE({param:e[r],value:t[r]}));return n}function gE({param:e,value:t}){let n=b9(e.type);if(n){let[r,a]=n;return Ohe(t,{length:r,param:{...e,type:a}})}if(e.type==="tuple")return Hhe(t,{param:e});if(e.type==="address")return Mhe(t);if(e.type==="bool")return Lhe(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){let r=e.type.startsWith("int"),[,,a="256"]=af.exec(e.type)??[];return Bhe(t,{signed:r,size:Number(a)})}if(e.type.startsWith("bytes"))return Nhe(t,{param:e});if(e.type==="string")return Uhe(t);throw new J3(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function hE(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:o,encoded:i}=e[s];o?t+=32:t+=Wt(i)}let n=[],r=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:o,encoded:i}=e[s];o?(n.push(F(t+a,{size:32})),r.push(i),a+=Wt(i)):n.push(i)}return Ae([...n,...r])}function Mhe(e){if(!Se(e))throw new In({address:e});return{dynamic:!1,encoded:Mo(e.toLowerCase())}}function Ohe(e,{length:t,param:n}){let r=t===null;if(!Array.isArray(e))throw new nf(e);if(!r&&e.length!==t)throw new q3({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let a=!1,s=[];for(let o=0;o<e.length;o++){let i=gE({param:n,value:e[o]});i.dynamic&&(a=!0),s.push(i)}if(r||a){let o=hE(s);if(r){let i=F(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Ae([i,o]):i}}if(a)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ae(s.map(({encoded:o})=>o))}}function Nhe(e,{param:t}){let[,n]=t.type.split("bytes"),r=Wt(e);if(!n){let a=e;return r%32!==0&&(a=Mo(a,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Ae([Mo(F(r,{size:32})),a])}}if(r!==Number.parseInt(n,10))throw new G3({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:Mo(e,{dir:"right"})}}function Lhe(e){if(typeof e!="boolean")throw new z(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Mo(Wu(e))}}function Bhe(e,{signed:t,size:n=256}){if(typeof n=="number"){let r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new rf({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:F(e,{size:32,signed:t})}}function Uhe(e){let t=qa(e),n=Math.ceil(Wt(t)/32),r=[];for(let a=0;a<n;a++)r.push(Mo(Wa(t,a*32,(a+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ae([Mo(F(Wt(t),{size:32})),...r])}}function Hhe(e,{param:t}){let n=!1,r=[];for(let a=0;a<t.components.length;a++){let s=t.components[a],o=Array.isArray(e)?a:s.name,i=gE({param:s,value:e[o]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?hE(r):Ae(r.map(({encoded:a})=>a))}}function b9(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}var Uo=I(()=>{w0();Bo();yt();pb();Va();F0();h1();Ss();A1();Ve();m9()});var Za,Ju=I(()=>{A1();pE();Za=e=>Wa(f9(e),0,4)});function Ka(e){let{abi:t,args:n=[],name:r}=e,a=mn(r,{strict:!1}),s=t.filter(i=>a?i.type==="function"?Za(i)===r:i.type==="event"?jc(i)===r:!1:"name"in i&&i.name===r);if(s.length===0)return;if(s.length===1)return s[0];let o;for(let i of s){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((d,l)=>{let p="inputs"in i&&i.inputs[l];return p?xE(d,p):!1})){if(o&&"inputs"in o&&o.inputs){let d=xz(i.inputs,o.inputs,n);if(d)throw new X3({abiItem:i,type:d[0]},{abiItem:o,type:d[1]})}o=i}}return o||s[0]}function xE(e,t){let n=typeof e,r=t.type;switch(r){case"address":return Se(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((a,s)=>n==="object"&&xE(Object.values(e)[s],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(a=>xE(a,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function xz(e,t,n){for(let r in e){let a=e[r],s=t[r];if(a.type==="tuple"&&s.type==="tuple"&&"components"in a&&"components"in s)return xz(a.components,s.components,n[r]);let o=[a.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Se(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Se(n[r],{strict:!1}):!1)return o}}var Gc=I(()=>{w0();Ts();Va();gb();Ju()});function yi(e){let{abi:t,eventName:n,args:r}=e,a=t[0];if(n){let u=Ka({abi:t,name:n});if(!u)throw new ub(n,{docsPath:wz});a=u}if(a.type!=="event")throw new ub(void 0,{docsPath:wz});let s=Y0(a),o=jc(s),i=[];if(r&&"inputs"in a){let u=a.inputs?.filter(l=>"indexed"in l&&l.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?u?.map(l=>r[l.name])??[]:[];d.length>0&&(i=u?.map((l,p)=>Array.isArray(d[p])?d[p].map((y,m)=>vz({param:l,value:d[p][m]})):typeof d[p]<"u"&&d[p]!==null?vz({param:l,value:d[p]}):null)??[])}return[o,...i]}function vz({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ke(H0(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new e9(e.type);return Zt([e],[t])}var wz,sf=I(()=>{w0();BF();v0();Ga();gb();Uo();y1();Gc();wz="/docs/contract/encodeEventTopics"});function Vc(e,{method:t}){let n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:a,status:s,transport:o})=>{s==="success"&&t===r&&(n[a]=o.request)}),(r=>n[r]||e.request)}var hb=I(()=>{});async function of(e,t){let{address:n,abi:r,args:a,eventName:s,fromBlock:o,strict:i,toBlock:u}=t,d=Vc(e,{method:"eth_newFilter"}),l=s?yi({abi:r,args:a,eventName:s}):void 0,p=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?F(o):o,toBlock:typeof u=="bigint"?F(u):u,topics:l}]});return{abi:r,args:a,eventName:s,id:p,request:d(p),strict:!!i,type:"event"}}var y9=I(()=>{sf();Ve();hb()});function at(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}var r0=I(()=>{});function Sz(e){let{abi:t,args:n,functionName:r}=e,a=t[0];if(r){let s=Ka({abi:t,args:n,name:r});if(!s)throw new Do(r,{docsPath:Tz});a=s}if(a.type!=="function")throw new Do(void 0,{docsPath:Tz});return{abi:[a],functionName:Za(Y0(a))}}var Tz,Az=I(()=>{w0();Ju();y1();Gc();Tz="/docs/contract/encodeFunctionData"});function X(e){let{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:Sz(e),a=n[0],s=r,o="inputs"in a&&a.inputs?Zt(a.inputs,t??[]):void 0;return T0([s,o??"0x"])}var Xa=I(()=>{F0();Uo();Az()});var _z,g9,Ez,h9=I(()=>{_z={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},g9={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Ez={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var xb,cf,x9,wE=I(()=>{yt();xb=class extends z{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},cf=class extends z{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},x9=class extends z{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function uf(e,{recursiveReadLimit:t=8192}={}){let n=Object.create(Fhe);return n.bytes=e,n.dataView=new DataView(e.buffer??e,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}var Fhe,w9=I(()=>{wE();Fhe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new x9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new cf({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new xb({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new xb({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}}});function kz(e,t={}){typeof t.size<"u"&&ia(e,{size:t.size});let n=tn(e,t);return n0(n,t)}function Iz(e,t={}){let n=e;if(typeof t.size<"u"&&(ia(n,{size:t.size}),n=er(n)),n.length>1||n[0]>1)throw new n9(n);return!!n[0]}function gi(e,t={}){typeof t.size<"u"&&ia(e,{size:t.size});let n=tn(e,t);return Vn(n,t)}function Cz(e,t={}){let n=e;return typeof t.size<"u"&&(ia(n,{size:t.size}),n=er(n,{dir:"right"})),new TextDecoder().decode(n)}var Pz=I(()=>{pb();Vu();tr();Ve()});function ca(e,t){let n=typeof t=="string"?bn(t):t,r=uf(n);if(Wt(n)===0&&e.length>0)throw new Ws;if(Wt(t)&&Wt(t)<32)throw new Jd({data:typeof t=="string"?t:tn(t),params:e,size:Wt(t)});let a=0,s=[];for(let o=0;o<e.length;++o){let i=e[o];r.setPosition(a);let[u,d]=df(r,i,{staticPosition:0});a+=d,s.push(u)}return s}function df(e,t,{staticPosition:n}){let r=b9(t.type);if(r){let[a,s]=r;return jhe(e,{...t,type:s},{length:a,staticPosition:n})}if(t.type==="tuple")return Whe(e,t,{staticPosition:n});if(t.type==="address")return zhe(e);if(t.type==="bool")return qhe(e);if(t.type.startsWith("bytes"))return Ghe(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Vhe(e,t);if(t.type==="string")return Zhe(e,{staticPosition:n});throw new Q3(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function zhe(e){let t=e.readBytes(32);return[mi(tn(yE(t,-20))),32]}function jhe(e,t,{length:n,staticPosition:r}){if(!n){let o=gi(e.readBytes(vE)),i=r+o,u=i+Rz;e.setPosition(i);let d=gi(e.readBytes(Rz)),l=wb(t),p=0,y=[];for(let m=0;m<d;++m){e.setPosition(u+(l?m*32:p));let[g,h]=df(e,t,{staticPosition:u});p+=h,y.push(g)}return e.setPosition(r+32),[y,32]}if(wb(t)){let o=gi(e.readBytes(vE)),i=r+o,u=[];for(let d=0;d<n;++d){e.setPosition(i+d*32);let[l]=df(e,t,{staticPosition:i});u.push(l)}return e.setPosition(r+32),[u,32]}let a=0,s=[];for(let o=0;o<n;++o){let[i,u]=df(e,t,{staticPosition:r+a});a+=u,s.push(i)}return[s,a]}function qhe(e){return[Iz(e.readBytes(32),{size:32}),32]}function Ghe(e,t,{staticPosition:n}){let[r,a]=t.type.split("bytes");if(!a){let o=gi(e.readBytes(32));e.setPosition(n+o);let i=gi(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];let u=e.readBytes(i);return e.setPosition(n+32),[tn(u),32]}return[tn(e.readBytes(Number.parseInt(a,10),32)),32]}function Vhe(e,t){let n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),a=e.readBytes(32);return[r>48?kz(a,{signed:n}):gi(a,{signed:n}),32]}function Whe(e,t,{staticPosition:n}){let r=t.components.length===0||t.components.some(({name:o})=>!o),a=r?[]:{},s=0;if(wb(t)){let o=gi(e.readBytes(vE)),i=n+o;for(let u=0;u<t.components.length;++u){let d=t.components[u];e.setPosition(i+s);let[l,p]=df(e,d,{staticPosition:i});s+=p,a[r?u:d?.name]=l}return e.setPosition(n+32),[a,32]}for(let o=0;o<t.components.length;++o){let i=t.components[o],[u,d]=df(e,i,{staticPosition:n});a[r?o:i?.name]=u,s+=d}return[a,s]}function Zhe(e,{staticPosition:t}){let n=gi(e.readBytes(32)),r=t+n;e.setPosition(r);let a=gi(e.readBytes(32));if(a===0)return e.setPosition(t+32),["",32];let s=e.readBytes(a,32),o=Cz(er(s));return e.setPosition(t+32),[o,32]}function wb(e){let{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(wb);let n=b9(e.type);return!!(n&&wb({...e,type:n[1]}))}var Rz,vE,ff=I(()=>{w0();bi();w9();Ss();A1();Vu();Pz();v0();Ve();Uo();Rz=32,vE=32});function v9(e){let{abi:t,data:n}=e,r=Wa(n,0,4);if(r==="0x")throw new Ws;let s=[...t||[],g9,Ez].find(o=>o.type==="error"&&r===Za(Y0(o)));if(!s)throw new Yd(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?ca(s.inputs,Wa(n,4)):void 0,errorName:s.name}}var TE=I(()=>{h9();w0();A1();Ju();ff();y1()});var Kt,Dr=I(()=>{Kt=(e,t,n)=>JSON.stringify(e,(r,a)=>{let s=typeof a=="bigint"?a.toString():a;return typeof t=="function"?t(r,s):s},n)});function SE({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((a,s)=>`${r&&a.name?`${a.name}: `:""}${typeof t[s]=="object"?Kt(t[s]):t[s]}`).join(", ")})`}var $z=I(()=>{Dr()});var T9,Dz,S9=I(()=>{T9={gwei:9,wei:18},Dz={ether:-9,wei:9}});function le(e,t){let n=e.toString(),r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[a,s]=[n.slice(0,n.length-t),n.slice(n.length-t)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${a||"0"}${s?`.${s}`:""}`}var A9=I(()=>{});function Ge(e,t="wei"){return le(e,T9[t])}var vb=I(()=>{S9();A9()});function S0(e,t="wei"){return le(e,Dz[t])}var Qu=I(()=>{S9();A9()});function Mz(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Oz(e){return e.reduce((t,{address:n,...r})=>{let a=`${t}    ${n}:
`;return r.nonce&&(a+=`      nonce: ${r.nonce}
`),r.balance&&(a+=`      balance: ${r.balance}
`),r.code&&(a+=`      code: ${r.code}
`),r.state&&(a+=`      state:
`,a+=Mz(r.state)),r.stateDiff&&(a+=`      stateDiff:
`,a+=Mz(r.stateDiff)),a},`  State Override:
`).slice(0,-1)}var _9,E9,AE=I(()=>{yt();_9=class extends z{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}},E9=class extends z{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Yu(e){let t=Object.entries(e).map(([r,a])=>a===void 0||a===!1?null:[r,a]).filter(Boolean),n=t.reduce((r,[a])=>Math.max(r,a.length),0);return t.map(([r,a])=>`  ${`${r}:`.padEnd(n+1)}  ${a}`).join(`
`)}var k9,I9,C9,P9,lf,pf,mf,R9,Ks=I(()=>{vb();Qu();yt();k9=class extends z{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},I9=class extends z{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Yu(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},C9=class extends z{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},P9=class extends z{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:l,to:p,value:y}){let m=Yu({chain:a&&`${a?.name} (id: ${a?.id})`,from:n?.address,to:p,value:typeof y<"u"&&`${Ge(y)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof i<"u"&&`${S0(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${S0(u)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${S0(d)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",m].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},lf=class extends z{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:a,index:s}){let o="Transaction";r&&s!==void 0&&(o=`Transaction at block time "${r}" at index "${s}"`),t&&s!==void 0&&(o=`Transaction at block hash "${t}" at index "${s}"`),n&&s!==void 0&&(o=`Transaction at block number "${n}" at index "${s}"`),a&&(o=`Transaction with hash "${a}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}},pf=class extends z{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},mf=class extends z{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}},R9=class extends z{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var Nz,e5,$9=I(()=>{Nz=e=>e,e5=e=>e});var bf,yf,t5,D9,M9,hi,Wc=I(()=>{r0();h9();TE();y1();$z();Gc();vb();Qu();w0();yt();AE();Ks();$9();bf=class extends z{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:l,to:p,value:y,stateOverride:m}){let g=n?at(n):void 0,h=Yu({from:g?.address,to:p,value:typeof y<"u"&&`${Ge(y)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof i<"u"&&`${S0(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${S0(u)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${S0(d)} gwei`,nonce:l});m&&(h+=`
${Oz(m)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",h].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},yf=class extends z{constructor(t,{abi:n,args:r,contractAddress:a,docsPath:s,functionName:o,sender:i}){let u=Ka({abi:n,args:r,name:o}),d=u?SE({abiItem:u,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=u?Y0(u,{includeName:!0}):void 0,p=Yu({address:a&&Nz(a),function:l,args:d&&d!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${d}`,sender:i});super(t.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],p&&"Contract Call:",p].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=a,this.functionName=o,this.sender=i}},t5=class extends z{constructor({abi:t,data:n,functionName:r,message:a}){let s,o,i,u;if(n&&n!=="0x")try{o=v9({abi:t,data:n});let{abiItem:l,errorName:p,args:y}=o;if(p==="Error")u=y[0];else if(p==="Panic"){let[m]=y;u=_z[m]}else{let m=l?Y0(l,{includeName:!0}):void 0,g=l&&y?SE({abiItem:l,args:y,includeFunctionName:!1,includeName:!1}):void 0;i=[m?`Error: ${m}`:"",g&&g!=="()"?`       ${[...Array(p?.length??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(l){s=l}else a&&(u=a);let d;s instanceof Yd&&(d=s.signature,i=[`Unable to decode signature "${d}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${d}.`]),super(u&&u!=="execution reverted"||d?[`The contract function "${r}" reverted with the following ${d?"signature":"reason"}:`,u||d].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=u,this.signature=d}},D9=class extends z{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},M9=class extends z{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},hi=class extends z{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}});var Xs,Zc,Tb,n5=I(()=>{Dr();yt();$9();Xs=class extends z{constructor({body:t,cause:n,details:r,headers:a,status:s,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${e5(o)}`,t&&`Request body: ${Kt(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=a,this.status=s,this.url=o}},Zc=class extends z{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${e5(r)}`,`Request body: ${Kt(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}},Tb=class extends z{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${e5(n)}`,`Request body: ${Kt(t)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}});var Khe,Mr,ua,gf,hf,xf,wf,_1,Js,vf,Tf,Sf,Kc,r5,Af,a5,_f,Ef,kf,If,Cf,Xc,Pf,Rf,$f,Df,Mf,Jc,O9,Of=I(()=>{yt();n5();Khe=-1,Mr=class extends z{constructor(t,{code:n,docsPath:r,metaMessages:a,name:s,shortMessage:o}){super(o,{cause:t,docsPath:r,metaMessages:a||t?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||t.name,this.code=t instanceof Zc?t.code:n??Khe}},ua=class extends Mr{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}},gf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(gf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});hf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(hf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});xf=class e extends Mr{constructor(t,{method:n}={}){super(t,{code:e.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}};Object.defineProperty(xf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});wf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(wf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});_1=class e extends Mr{constructor(t){super(t,{code:e.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(_1,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});Js=class e extends Mr{constructor(t){super(t,{code:e.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Js,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});vf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(vf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});Tf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(Tf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});Sf=class e extends Mr{constructor(t){super(t,{code:e.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(Sf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});Kc=class e extends Mr{constructor(t,{method:n}={}){super(t,{code:e.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}};Object.defineProperty(Kc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});r5=class e extends Mr{constructor(t){super(t,{code:e.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(r5,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});Af=class e extends Mr{constructor(t){super(t,{code:e.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(Af,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});a5=class e extends ua{constructor(t){super(t,{code:e.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(a5,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});_f=class e extends ua{constructor(t){super(t,{code:e.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(_f,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});Ef=class e extends ua{constructor(t,{method:n}={}){super(t,{code:e.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}};Object.defineProperty(Ef,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});kf=class e extends ua{constructor(t){super(t,{code:e.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});If=class e extends ua{constructor(t){super(t,{code:e.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(If,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});Cf=class e extends ua{constructor(t){super(t,{code:e.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Cf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});Xc=class e extends ua{constructor(t){super(t,{code:e.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}};Object.defineProperty(Xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});Pf=class e extends ua{constructor(t){super(t,{code:e.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}};Object.defineProperty(Pf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});Rf=class e extends ua{constructor(t){super(t,{code:e.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}};Object.defineProperty(Rf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});$f=class e extends ua{constructor(t){super(t,{code:e.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}};Object.defineProperty($f,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});Df=class e extends ua{constructor(t){super(t,{code:e.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}};Object.defineProperty(Df,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});Mf=class e extends ua{constructor(t){super(t,{code:e.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}};Object.defineProperty(Mf,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});Jc=class e extends ua{constructor(t){super(t,{code:e.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}};Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});O9=class extends Mr{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function As(e,{abi:t,address:n,args:r,docsPath:a,functionName:s,sender:o}){let i=e instanceof hi?e:e instanceof z?e.walk(g=>"data"in g)||e.walk():{},{code:u,data:d,details:l,message:p,shortMessage:y}=i,m=e instanceof Ws?new D9({functionName:s}):[Xhe,_1.code].includes(u)&&(d||l||p||y)||u===Js.code&&l==="execution reverted"&&d?new t5({abi:t,data:typeof d=="object"?d.data:d,functionName:s,message:i instanceof Zc?l:y??p}):e;return new yf(m,{abi:t,args:r,contractAddress:n,docsPath:a,functionName:s,sender:o})}var Xhe,s5=I(()=>{w0();yt();Wc();n5();Of();Xhe=3});function N9(e){let t=Ke(`0x${e.substring(4)}`).substring(26);return mi(`0x${t}`)}var _E=I(()=>{bi();Ga()});function Jhe(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let a=BigInt(32),s=BigInt(4294967295),o=Number(n>>a&s),i=Number(n&s),u=r?4:0,d=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+d,i,r)}function Lz(e,t,n){return e&t^~e&n}function Bz(e,t,n){return e&t^e&n^t&n}var L9,E1,Uz=I(()=>{S1();L9=class extends zc{constructor(t,n,r,a){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=a,this.buffer=new Uint8Array(t),this.view=c9(this.buffer)}update(t){T1(this),t=Xu(t),Oo(t);let{view:n,buffer:r,blockLen:a}=this,s=t.length;for(let o=0;o<s;){let i=Math.min(a-this.pos,s-o);if(i===a){let u=c9(t);for(;a<=s-o;o+=a)this.process(u,o);continue}r.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===a&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){T1(this),i9(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:a,isLE:s}=this,{pos:o}=this;n[o++]=128,pi(this.buffer.subarray(o)),this.padOffset>a-o&&(this.process(r,0),o=0);for(let p=o;p<a;p++)n[p]=0;Jhe(r,a-8,BigInt(this.length*8),s),this.process(r,0);let i=c9(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<d;p++)i.setUint32(4*p,l[p],s)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:a,finished:s,destroyed:o,pos:i}=this;return t.destroyed=o,t.finished=s,t.length=a,t.pos=i,a%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}},E1=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var Qhe,Qc,B9,o5,EE=I(()=>{Uz();S1();Qhe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qc=new Uint32Array(64),B9=class extends L9{constructor(t=32){super(64,t,8,!1),this.A=E1[0]|0,this.B=E1[1]|0,this.C=E1[2]|0,this.D=E1[3]|0,this.E=E1[4]|0,this.F=E1[5]|0,this.G=E1[6]|0,this.H=E1[7]|0}get(){let{A:t,B:n,C:r,D:a,E:s,F:o,G:i,H:u}=this;return[t,n,r,a,s,o,i,u]}set(t,n,r,a,s,o,i,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=a|0,this.E=s|0,this.F=o|0,this.G=i|0,this.H=u|0}process(t,n){for(let p=0;p<16;p++,n+=4)Qc[p]=t.getUint32(n,!1);for(let p=16;p<64;p++){let y=Qc[p-15],m=Qc[p-2],g=No(y,7)^No(y,18)^y>>>3,h=No(m,17)^No(m,19)^m>>>10;Qc[p]=h+Qc[p-7]+g+Qc[p-16]|0}let{A:r,B:a,C:s,D:o,E:i,F:u,G:d,H:l}=this;for(let p=0;p<64;p++){let y=No(i,6)^No(i,11)^No(i,25),m=l+y+Lz(i,u,d)+Qhe[p]+Qc[p]|0,h=(No(r,2)^No(r,13)^No(r,22))+Bz(r,a,s)|0;l=d,d=u,u=i,i=o+m|0,o=s,s=a,a=r,r=m+h|0}r=r+this.A|0,a=a+this.B|0,s=s+this.C|0,o=o+this.D|0,i=i+this.E|0,u=u+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,a,s,o,i,u,d,l)}roundClean(){pi(Qc)}destroy(){this.set(0,0,0,0,0,0,0,0),pi(this.buffer)}},o5=u9(()=>new B9)});var U9,kE,Hz=I(()=>{S1();U9=class extends zc{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,JF(t);let r=Xu(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let a=this.blockLen,s=new Uint8Array(a);s.set(r.length>a?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),pi(s)}update(t){return T1(this),this.iHash.update(t),this}digestInto(t){T1(this),Oo(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:a,destroyed:s,blockLen:o,outputLen:i}=this;return t=t,t.finished=a,t.destroyed=s,t.blockLen=o,t.outputLen=i,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},kE=(e,t,n)=>new U9(e,t).update(n).digest();kE.create=(e,t)=>new U9(e,t)});function Nf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function I1(e){if(!Nf(e))throw new Error("Uint8Array expected")}function Lf(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Sb(e){let t=e.toString(16);return t.length&1?"0"+t:t}function jz(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?RE:BigInt("0x"+e)}function Bf(e){if(I1(e),qz)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Yhe[e[n]];return t}function Fz(e){if(e>=k1._0&&e<=k1._9)return e-k1._0;if(e>=k1.A&&e<=k1.F)return e-(k1.A-10);if(e>=k1.a&&e<=k1.f)return e-(k1.a-10)}function Ab(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(qz)return Uint8Array.fromHex(e);let t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let a=0,s=0;a<n;a++,s+=2){let o=Fz(e.charCodeAt(s)),i=Fz(e.charCodeAt(s+1));if(o===void 0||i===void 0){let u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[a]=o*16+i}return r}function Ja(e){return jz(Bf(e))}function $E(e){return I1(e),jz(Bf(Uint8Array.from(e).reverse()))}function xi(e,t){return Ab(e.toString(16).padStart(t*2,"0"))}function DE(e,t){return xi(e,t).reverse()}function z0(e,t,n){let r;if(typeof t=="string")try{r=Ab(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Nf(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");let a=r.length;if(typeof n=="number"&&a!==n)throw new Error(e+" of length "+n+" expected, got "+a);return r}function da(...e){let t=0;for(let r=0;r<e.length;r++){let a=e[r];I1(a),t+=a.length}let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let s=e[r];n.set(s,a),a+=s.length}return n}function H9(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function i5(e,t,n){return IE(e)&&IE(t)&&IE(n)&&t<=e&&e<n}function C1(e,t,n,r){if(!i5(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Gz(e){let t;for(t=0;e>RE;e>>=PE,t+=1);return t}function Vz(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=CE(e),a=CE(e),s=0,o=()=>{r.fill(1),a.fill(0),s=0},i=(...p)=>n(a,r,...p),u=(p=CE(0))=>{a=i(zz([0]),p),r=i(),p.length!==0&&(a=i(zz([1]),p),r=i())},d=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let p=0,y=[];for(;p<t;){r=i();let m=r.slice();y.push(m),p+=r.length}return da(...y)};return(p,y)=>{o(),u(p);let m;for(;!(m=y(d()));)u();return o(),m}}function P1(e,t,n={}){let r=(a,s,o)=>{let i=e4e[s];if(typeof i!="function")throw new Error("invalid validator function");let u=e[a];if(!(o&&u===void 0)&&!i(u,e))throw new Error("param "+String(a)+" is invalid. Expected "+s+", got "+u)};for(let[a,s]of Object.entries(t))r(a,s,!1);for(let[a,s]of Object.entries(n))r(a,s,!0);return e}function ME(e){let t=new WeakMap;return(n,...r)=>{let a=t.get(n);if(a!==void 0)return a;let s=e(n,...r);return t.set(n,s),s}}var RE,PE,qz,Yhe,k1,IE,c5,CE,zz,e4e,Uf=I(()=>{RE=BigInt(0),PE=BigInt(1);qz=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Yhe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));k1={_0:48,_9:57,A:65,F:70,a:97,f:102};IE=e=>typeof e=="bigint"&&RE<=e;c5=e=>(PE<<BigInt(e))-PE,CE=e=>new Uint8Array(e),zz=e=>Uint8Array.from(e);e4e={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Nf(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)}});function $0(e,t){let n=e%t;return n>=fa?n:t+n}function _s(e,t,n){let r=e;for(;t-- >fa;)r*=r,r%=n;return r}function F9(e,t){if(e===fa)throw new Error("invert: expected non-zero number");if(t<=fa)throw new Error("invert: expected positive modulus, got "+t);let n=$0(e,t),r=t,a=fa,s=Or,o=Or,i=fa;for(;n!==fa;){let d=r/n,l=r%n,p=a-o*d,y=s-i*d;r=n,n=l,a=o,s=i,o=p,i=y}if(r!==Or)throw new Error("invert: does not exist");return $0(a,t)}function Jz(e,t){let n=(e.ORDER+Or)/Zz,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function n4e(e,t){let n=(e.ORDER-Kz)/Xz,r=e.mul(t,u5),a=e.pow(r,n),s=e.mul(t,a),o=e.mul(e.mul(s,u5),a),i=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(i),t))throw new Error("Cannot find square root");return i}function r4e(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Or,n=0;for(;t%u5===fa;)t/=u5,n++;let r=u5,a=_b(e);for(;Wz(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Jz;let s=a.pow(r,t),o=(t+Or)/u5;return function(u,d){if(u.is0(d))return d;if(Wz(u,d)!==1)throw new Error("Cannot find square root");let l=n,p=u.mul(u.ONE,s),y=u.pow(d,t),m=u.pow(d,o);for(;!u.eql(y,u.ONE);){if(u.is0(y))return u.ZERO;let g=1,h=u.sqr(y);for(;!u.eql(h,u.ONE);)if(g++,h=u.sqr(h),g===l)throw new Error("Cannot find square root");let w=Or<<BigInt(l-g-1),v=u.pow(p,w);l=g,p=u.sqr(v),y=u.mul(y,p),m=u.mul(m,v)}return m}}function a4e(e){return e%Zz===t4e?Jz:e%Xz===Kz?n4e:r4e(e)}function z9(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=s4e.reduce((r,a)=>(r[a]="function",r),t);return P1(e,n)}function o4e(e,t,n){if(n<fa)throw new Error("invalid exponent, negatives unsupported");if(n===fa)return e.ONE;if(n===Or)return t;let r=e.ONE,a=t;for(;n>fa;)n&Or&&(r=e.mul(r,a)),a=e.sqr(a),n>>=Or;return r}function Hf(e,t,n=!1){let r=new Array(t.length).fill(n?e.ZERO:void 0),a=t.reduce((o,i,u)=>e.is0(i)?o:(r[u]=o,e.mul(o,i)),e.ONE),s=e.inv(a);return t.reduceRight((o,i,u)=>e.is0(i)?o:(r[u]=e.mul(o,r[u]),e.mul(o,i)),s),r}function Wz(e,t){let n=(e.ORDER-Or)/u5,r=e.pow(t,n),a=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!a&&!s&&!o)throw new Error("invalid Legendre symbol result");return a?1:s?0:-1}function OE(e,t){t!==void 0&&Ku(t);let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _b(e,t,n=!1,r={}){if(e<=fa)throw new Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:a,nByteLength:s}=OE(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,i=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:s,MASK:c5(a),ZERO:fa,ONE:Or,create:u=>$0(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return fa<=u&&u<e},is0:u=>u===fa,isOdd:u=>(u&Or)===Or,neg:u=>$0(-u,e),eql:(u,d)=>u===d,sqr:u=>$0(u*u,e),add:(u,d)=>$0(u+d,e),sub:(u,d)=>$0(u-d,e),mul:(u,d)=>$0(u*d,e),pow:(u,d)=>o4e(i,u,d),div:(u,d)=>$0(u*F9(d,e),e),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>F9(u,e),sqrt:r.sqrt||(u=>(o||(o=a4e(e)),o(i,u))),toBytes:u=>n?DE(u,s):xi(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return n?$E(u):Ja(u)},invertBatch:u=>Hf(i,u),cmov:(u,d,l)=>l?d:u});return Object.freeze(i)}function Qz(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function NE(e){let t=Qz(e);return t+Math.ceil(t/2)}function Yz(e,t,n=!1){let r=e.length,a=Qz(t),s=NE(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);let o=n?$E(e):Ja(e),i=$0(o,t-Or)+Or;return n?DE(i,a):xi(i,a)}var fa,Or,u5,t4e,Zz,Kz,Xz,s4e,Eb=I(()=>{S1();Uf();fa=BigInt(0),Or=BigInt(1),u5=BigInt(2),t4e=BigInt(3),Zz=BigInt(4),Kz=BigInt(5),Xz=BigInt(8);s4e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function LE(e,t){let n=t.negate();return e?n:t}function nj(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function BE(e,t){nj(e,t);let n=Math.ceil(t/e)+1,r=2**(e-1),a=2**e,s=c5(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:a,shiftBy:o}}function tj(e,t,n){let{windowSize:r,mask:a,maxNumber:s,shiftBy:o}=n,i=Number(e&a),u=e>>o;i>r&&(i-=s,u+=FE);let d=t*r,l=d+Math.abs(i)-1,p=i===0,y=i<0,m=t%2!==0;return{nextN:u,offset:l,isZero:p,isNeg:y,isNegF:m,offsetF:d}}function i4e(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function c4e(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}function HE(e){return rj.get(e)||1}function aj(e,t){return{constTimeNegate:LE,hasPrecomputes(n){return HE(n)!==1},unsafeLadder(n,r,a=e.ZERO){let s=n;for(;r>ej;)r&FE&&(a=a.add(s)),s=s.double(),r>>=FE;return a},precomputeWindow(n,r){let{windows:a,windowSize:s}=BE(r,t),o=[],i=n,u=i;for(let d=0;d<a;d++){u=i,o.push(u);for(let l=1;l<s;l++)u=u.add(i),o.push(u);i=u.double()}return o},wNAF(n,r,a){let s=e.ZERO,o=e.BASE,i=BE(n,t);for(let u=0;u<i.windows;u++){let{nextN:d,offset:l,isZero:p,isNeg:y,isNegF:m,offsetF:g}=tj(a,u,i);a=d,p?o=o.add(LE(m,r[g])):s=s.add(LE(y,r[l]))}return{p:s,f:o}},wNAFUnsafe(n,r,a,s=e.ZERO){let o=BE(n,t);for(let i=0;i<o.windows&&a!==ej;i++){let{nextN:u,offset:d,isZero:l,isNeg:p}=tj(a,i,o);if(a=u,!l){let y=r[d];s=s.add(p?y.negate():y)}}return s},getPrecomputes(n,r,a){let s=UE.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&UE.set(r,a(s))),s},wNAFCached(n,r,a){let s=HE(n);return this.wNAF(s,this.getPrecomputes(s,n,a),r)},wNAFCachedUnsafe(n,r,a,s){let o=HE(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,a),r,s)},setWindowSize(n,r){nj(r,t),rj.set(n,r),UE.delete(n)}}}function sj(e,t,n,r){i4e(n,e),c4e(r,t);let a=n.length,s=r.length;if(a!==s)throw new Error("arrays of points and scalars must have equal length");let o=e.ZERO,i=Gz(BigInt(a)),u=1;i>12?u=i-3:i>4?u=i-2:i>0&&(u=2);let d=c5(u),l=new Array(Number(d)+1).fill(o),p=Math.floor((t.BITS-1)/u)*u,y=o;for(let m=p;m>=0;m-=u){l.fill(o);for(let h=0;h<s;h++){let w=r[h],v=Number(w>>BigInt(m)&d);l[v]=l[v].add(n[h])}let g=o;for(let h=l.length-1,w=o;h>0;h--)w=w.add(l[h]),g=g.add(w);if(y=y.add(g),m!==0)for(let h=0;h<u;h++)y=y.double()}return y}function zE(e){return z9(e.Fp),P1(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...OE(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var ej,FE,UE,rj,oj=I(()=>{Eb();Uf();ej=BigInt(0),FE=BigInt(1);UE=new WeakMap,rj=new WeakMap});function ij(e){e.lowS!==void 0&&Lf("lowS",e.lowS),e.prehash!==void 0&&Lf("prehash",e.prehash)}function u4e(e){let t=zE(e);P1(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:n,Fp:r,a}=t;if(n){if(!r.eql(a,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}function jE(e,t){return Bf(xi(e,t))}function d4e(e){let t=u4e(e),{Fp:n}=t,r=_b(t.n,t.nBitLength),a=t.toBytes||((A,_,E)=>{let O=_.toAffine();return da(Uint8Array.from([4]),n.toBytes(O.x),n.toBytes(O.y))}),s=t.fromBytes||(A=>{let _=A.subarray(1),E=n.fromBytes(_.subarray(0,n.BYTES)),O=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x:E,y:O}});function o(A){let{a:_,b:E}=t,O=n.sqr(A),$=n.mul(O,A);return n.add(n.add($,n.mul(A,_)),E)}function i(A,_){let E=n.sqr(_),O=o(A);return n.eql(E,O)}if(!i(t.Gx,t.Gy))throw new Error("bad curve params: generator point");let u=n.mul(n.pow(t.a,kb),GE),d=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(u,d)))throw new Error("bad curve params: a or b");function l(A){return i5(A,Cn,t.n)}function p(A){let{allowedPrivateKeyLengths:_,nByteLength:E,wrapPrivateKey:O,n:$}=t;if(_&&typeof A!="bigint"){if(Nf(A)&&(A=Bf(A)),typeof A!="string"||!_.includes(A.length))throw new Error("invalid private key");A=A.padStart(E*2,"0")}let B;try{B=typeof A=="bigint"?A:Ja(z0("private key",A,E))}catch{throw new Error("invalid private key, expected hex or "+E+" bytes, got "+typeof A)}return O&&(B=$0(B,$)),C1("private key",B,Cn,$),B}function y(A){if(!(A instanceof h))throw new Error("ProjectivePoint expected")}let m=ME((A,_)=>{let{px:E,py:O,pz:$}=A;if(n.eql($,n.ONE))return{x:E,y:O};let B=A.is0();_==null&&(_=B?n.ONE:n.inv($));let V=n.mul(E,_),D=n.mul(O,_),G=n.mul($,_);if(B)return{x:n.ZERO,y:n.ZERO};if(!n.eql(G,n.ONE))throw new Error("invZ was invalid");return{x:V,y:D}}),g=ME(A=>{if(A.is0()){if(t.allowInfinityPoint&&!n.is0(A.py))return;throw new Error("bad point: ZERO")}let{x:_,y:E}=A.toAffine();if(!n.isValid(_)||!n.isValid(E))throw new Error("bad point: x or y not FE");if(!i(_,E))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(_,E,O){if(_==null||!n.isValid(_))throw new Error("x required");if(E==null||!n.isValid(E)||n.is0(E))throw new Error("y required");if(O==null||!n.isValid(O))throw new Error("z required");this.px=_,this.py=E,this.pz=O,Object.freeze(this)}static fromAffine(_){let{x:E,y:O}=_||{};if(!_||!n.isValid(E)||!n.isValid(O))throw new Error("invalid affine point");if(_ instanceof h)throw new Error("projective point not allowed");let $=B=>n.eql(B,n.ZERO);return $(E)&&$(O)?h.ZERO:new h(E,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let E=Hf(n,_.map(O=>O.pz));return _.map((O,$)=>O.toAffine(E[$])).map(h.fromAffine)}static fromHex(_){let E=h.fromAffine(s(z0("pointHex",_)));return E.assertValidity(),E}static fromPrivateKey(_){return h.BASE.multiply(p(_))}static msm(_,E){return sj(h,r,_,E)}_setWindowSize(_){T.setWindowSize(this,_)}assertValidity(){g(this)}hasEvenY(){let{y:_}=this.toAffine();if(n.isOdd)return!n.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){y(_);let{px:E,py:O,pz:$}=this,{px:B,py:V,pz:D}=_,G=n.eql(n.mul(E,D),n.mul(B,$)),N=n.eql(n.mul(O,D),n.mul(V,$));return G&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){let{a:_,b:E}=t,O=n.mul(E,kb),{px:$,py:B,pz:V}=this,D=n.ZERO,G=n.ZERO,N=n.ZERO,W=n.mul($,$),me=n.mul(B,B),j=n.mul(V,V),Z=n.mul($,B);return Z=n.add(Z,Z),N=n.mul($,V),N=n.add(N,N),D=n.mul(_,N),G=n.mul(O,j),G=n.add(D,G),D=n.sub(me,G),G=n.add(me,G),G=n.mul(D,G),D=n.mul(Z,D),N=n.mul(O,N),j=n.mul(_,j),Z=n.sub(W,j),Z=n.mul(_,Z),Z=n.add(Z,N),N=n.add(W,W),W=n.add(N,W),W=n.add(W,j),W=n.mul(W,Z),G=n.add(G,W),j=n.mul(B,V),j=n.add(j,j),W=n.mul(j,Z),D=n.sub(D,W),N=n.mul(j,me),N=n.add(N,N),N=n.add(N,N),new h(D,G,N)}add(_){y(_);let{px:E,py:O,pz:$}=this,{px:B,py:V,pz:D}=_,G=n.ZERO,N=n.ZERO,W=n.ZERO,me=t.a,j=n.mul(t.b,kb),Z=n.mul(E,B),de=n.mul(O,V),ne=n.mul($,D),be=n.add(E,O),ze=n.add(B,V);be=n.mul(be,ze),ze=n.add(Z,de),be=n.sub(be,ze),ze=n.add(E,$);let pt=n.add(B,D);return ze=n.mul(ze,pt),pt=n.add(Z,ne),ze=n.sub(ze,pt),pt=n.add(O,$),G=n.add(V,D),pt=n.mul(pt,G),G=n.add(de,ne),pt=n.sub(pt,G),W=n.mul(me,ze),G=n.mul(j,ne),W=n.add(G,W),G=n.sub(de,W),W=n.add(de,W),N=n.mul(G,W),de=n.add(Z,Z),de=n.add(de,Z),ne=n.mul(me,ne),ze=n.mul(j,ze),de=n.add(de,ne),ne=n.sub(Z,ne),ne=n.mul(me,ne),ze=n.add(ze,ne),Z=n.mul(de,ze),N=n.add(N,Z),Z=n.mul(pt,ze),G=n.mul(be,G),G=n.sub(G,Z),Z=n.mul(be,de),W=n.mul(pt,W),W=n.add(W,Z),new h(G,N,W)}subtract(_){return this.add(_.negate())}is0(){return this.equals(h.ZERO)}wNAF(_){return T.wNAFCached(this,_,h.normalizeZ)}multiplyUnsafe(_){let{endo:E,n:O}=t;C1("scalar",_,Ho,O);let $=h.ZERO;if(_===Ho)return $;if(this.is0()||_===Cn)return this;if(!E||T.hasPrecomputes(this))return T.wNAFCachedUnsafe(this,_,h.normalizeZ);let{k1neg:B,k1:V,k2neg:D,k2:G}=E.splitScalar(_),N=$,W=$,me=this;for(;V>Ho||G>Ho;)V&Cn&&(N=N.add(me)),G&Cn&&(W=W.add(me)),me=me.double(),V>>=Cn,G>>=Cn;return B&&(N=N.negate()),D&&(W=W.negate()),W=new h(n.mul(W.px,E.beta),W.py,W.pz),N.add(W)}multiply(_){let{endo:E,n:O}=t;C1("scalar",_,Cn,O);let $,B;if(E){let{k1neg:V,k1:D,k2neg:G,k2:N}=E.splitScalar(_),{p:W,f:me}=this.wNAF(D),{p:j,f:Z}=this.wNAF(N);W=T.constTimeNegate(V,W),j=T.constTimeNegate(G,j),j=new h(n.mul(j.px,E.beta),j.py,j.pz),$=W.add(j),B=me.add(Z)}else{let{p:V,f:D}=this.wNAF(_);$=V,B=D}return h.normalizeZ([$,B])[0]}multiplyAndAddUnsafe(_,E,O){let $=h.BASE,B=(D,G)=>G===Ho||G===Cn||!D.equals($)?D.multiplyUnsafe(G):D.multiply(G),V=B(this,E).add(B(_,O));return V.is0()?void 0:V}toAffine(_){return m(this,_)}isTorsionFree(){let{h:_,isTorsionFree:E}=t;if(_===Cn)return!0;if(E)return E(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:E}=t;return _===Cn?this:E?E(h,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return Lf("isCompressed",_),this.assertValidity(),a(h,this,_)}toHex(_=!0){return Lf("isCompressed",_),Bf(this.toRawBytes(_))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);let{endo:w,nBitLength:v}=t,T=aj(h,w?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:p,weierstrassEquation:o,isWithinCurveOrder:l}}function f4e(e){let t=zE(e);return P1(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function cj(e){let t=f4e(e),{Fp:n,n:r,nByteLength:a,nBitLength:s}=t,o=n.BYTES+1,i=2*n.BYTES+1;function u(j){return $0(j,r)}function d(j){return F9(j,r)}let{ProjectivePoint:l,normPrivateKeyToScalar:p,weierstrassEquation:y,isWithinCurveOrder:m}=d4e({...t,toBytes(j,Z,de){let ne=Z.toAffine(),be=n.toBytes(ne.x),ze=da;return Lf("isCompressed",de),de?ze(Uint8Array.from([Z.hasEvenY()?2:3]),be):ze(Uint8Array.from([4]),be,n.toBytes(ne.y))},fromBytes(j){let Z=j.length,de=j[0],ne=j.subarray(1);if(Z===o&&(de===2||de===3)){let be=Ja(ne);if(!i5(be,Cn,n.ORDER))throw new Error("Point is not on curve");let ze=y(be),pt;try{pt=n.sqrt(ze)}catch(ct){let fn=ct instanceof Error?": "+ct.message:"";throw new Error("Point is not on curve"+fn)}let rn=(pt&Cn)===Cn;return(de&1)===1!==rn&&(pt=n.neg(pt)),{x:be,y:pt}}else if(Z===i&&de===4){let be=n.fromBytes(ne.subarray(0,n.BYTES)),ze=n.fromBytes(ne.subarray(n.BYTES,2*n.BYTES));return{x:be,y:ze}}else{let be=o,ze=i;throw new Error("invalid Point, expected length of "+be+", or uncompressed "+ze+", got "+Z)}}});function g(j){let Z=r>>Cn;return j>Z}function h(j){return g(j)?u(-j):j}let w=(j,Z,de)=>Ja(j.slice(Z,de));class v{constructor(Z,de,ne){C1("r",Z,Cn,r),C1("s",de,Cn,r),this.r=Z,this.s=de,ne!=null&&(this.recovery=ne),Object.freeze(this)}static fromCompact(Z){let de=a;return Z=z0("compactSignature",Z,de*2),new v(w(Z,0,de),w(Z,de,2*de))}static fromDER(Z){let{r:de,s:ne}=R1.toSig(z0("DER",Z));return new v(de,ne)}assertValidity(){}addRecoveryBit(Z){return new v(this.r,this.s,Z)}recoverPublicKey(Z){let{r:de,s:ne,recovery:be}=this,ze=$(z0("msgHash",Z));if(be==null||![0,1,2,3].includes(be))throw new Error("recovery id invalid");let pt=be===2||be===3?de+t.n:de;if(pt>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let rn=(be&1)===0?"02":"03",zt=l.fromHex(rn+jE(pt,n.BYTES)),ct=d(pt),fn=u(-ze*ct),Pn=u(ne*ct),W0=l.BASE.multiplyAndAddUnsafe(zt,fn,Pn);if(!W0)throw new Error("point at infinify");return W0.assertValidity(),W0}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Ab(this.toDERHex())}toDERHex(){return R1.hexFromSig(this)}toCompactRawBytes(){return Ab(this.toCompactHex())}toCompactHex(){let Z=a;return jE(this.r,Z)+jE(this.s,Z)}}let T={isValidPrivateKey(j){try{return p(j),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let j=NE(t.n);return Yz(t.randomBytes(j),t.n)},precompute(j=8,Z=l.BASE){return Z._setWindowSize(j),Z.multiply(BigInt(3)),Z}};function A(j,Z=!0){return l.fromPrivateKey(j).toRawBytes(Z)}function _(j){if(typeof j=="bigint")return!1;if(j instanceof l)return!0;let de=z0("key",j).length,ne=n.BYTES,be=ne+1,ze=2*ne+1;if(!(t.allowedPrivateKeyLengths||a===be))return de===be||de===ze}function E(j,Z,de=!0){if(_(j)===!0)throw new Error("first arg must be private key");if(_(Z)===!1)throw new Error("second arg must be public key");return l.fromHex(Z).multiply(p(j)).toRawBytes(de)}let O=t.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");let Z=Ja(j),de=j.length*8-s;return de>0?Z>>BigInt(de):Z},$=t.bits2int_modN||function(j){return u(O(j))},B=c5(s);function V(j){return C1("num < 2^"+s,j,Ho,B),xi(j,a)}function D(j,Z,de=G){if(["recovered","canonical"].some(Yr=>Yr in de))throw new Error("sign() legacy options not supported");let{hash:ne,randomBytes:be}=t,{lowS:ze,prehash:pt,extraEntropy:rn}=de;ze==null&&(ze=!0),j=z0("msgHash",j),ij(de),pt&&(j=z0("prehashed msgHash",ne(j)));let zt=$(j),ct=p(Z),fn=[V(ct),V(zt)];if(rn!=null&&rn!==!1){let Yr=rn===!0?be(n.BYTES):rn;fn.push(z0("extraEntropy",Yr))}let Pn=da(...fn),W0=zt;function Zi(Yr){let yo=O(Yr);if(!m(yo))return;let Y5=d(yo),pr=l.BASE.multiply(yo).toAffine(),fs=u(pr.x);if(fs===Ho)return;let Y6=u(Y5*u(W0+fs*ct));if(Y6===Ho)return;let _r=(pr.x===fs?0:2)|Number(pr.y&Cn),xp=Y6;return ze&&g(Y6)&&(xp=h(Y6),_r^=1),new v(fs,xp,_r)}return{seed:Pn,k2sig:Zi}}let G={lowS:t.lowS,prehash:!1},N={lowS:t.lowS,prehash:!1};function W(j,Z,de=G){let{seed:ne,k2sig:be}=D(j,Z,de),ze=t;return Vz(ze.hash.outputLen,ze.nByteLength,ze.hmac)(ne,be)}l.BASE._setWindowSize(8);function me(j,Z,de,ne=N){let be=j;Z=z0("msgHash",Z),de=z0("publicKey",de);let{lowS:ze,prehash:pt,format:rn}=ne;if(ij(ne),"strict"in ne)throw new Error("options.strict was renamed to lowS");if(rn!==void 0&&rn!=="compact"&&rn!=="der")throw new Error("format must be compact or der");let zt=typeof be=="string"||Nf(be),ct=!zt&&!rn&&typeof be=="object"&&be!==null&&typeof be.r=="bigint"&&typeof be.s=="bigint";if(!zt&&!ct)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let fn,Pn;try{if(ct&&(fn=new v(be.r,be.s)),zt){try{rn!=="compact"&&(fn=v.fromDER(be))}catch(_r){if(!(_r instanceof R1.Err))throw _r}!fn&&rn!=="der"&&(fn=v.fromCompact(be))}Pn=l.fromHex(de)}catch{return!1}if(!fn||ze&&fn.hasHighS())return!1;pt&&(Z=t.hash(Z));let{r:W0,s:Zi}=fn,Yr=$(Z),yo=d(Zi),Y5=u(Yr*yo),pr=u(W0*yo),fs=l.BASE.multiplyAndAddUnsafe(Pn,Y5,pr)?.toAffine();return fs?u(fs.x)===W0:!1}return{CURVE:t,getPublicKey:A,getSharedSecret:E,sign:W,verify:me,ProjectivePoint:l,Signature:v,utils:T}}function l4e(e,t){let n=e.ORDER,r=Ho;for(let g=n-Cn;g%Yc===Ho;g/=Yc)r+=Cn;let a=r,s=Yc<<a-Cn-Cn,o=s*Yc,i=(n-Cn)/o,u=(i-Cn)/Yc,d=o-Cn,l=s,p=e.pow(t,i),y=e.pow(t,(i+Cn)/Yc),m=(g,h)=>{let w=p,v=e.pow(h,d),T=e.sqr(v);T=e.mul(T,h);let A=e.mul(g,T);A=e.pow(A,u),A=e.mul(A,v),v=e.mul(A,h),T=e.mul(A,g);let _=e.mul(T,v);A=e.pow(_,l);let E=e.eql(A,e.ONE);v=e.mul(T,y),A=e.mul(_,w),T=e.cmov(v,T,E),_=e.cmov(A,_,E);for(let O=a;O>Cn;O--){let $=O-Yc;$=Yc<<$-Cn;let B=e.pow(_,$),V=e.eql(B,e.ONE);v=e.mul(T,w),w=e.mul(w,w),B=e.mul(_,w),T=e.cmov(v,T,V),_=e.cmov(B,_,V)}return{isValid:E,value:T}};if(e.ORDER%GE===kb){let g=(e.ORDER-kb)/GE,h=e.sqrt(e.neg(t));m=(w,v)=>{let T=e.sqr(v),A=e.mul(w,v);T=e.mul(T,A);let _=e.pow(T,g);_=e.mul(_,A);let E=e.mul(_,h),O=e.mul(e.sqr(_),v),$=e.eql(O,w),B=e.cmov(E,_,$);return{isValid:$,value:B}}}return m}function uj(e,t){if(z9(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let n=l4e(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let a,s,o,i,u,d,l,p;a=e.sqr(r),a=e.mul(a,t.Z),s=e.sqr(a),s=e.add(s,a),o=e.add(s,e.ONE),o=e.mul(o,t.B),i=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),i=e.mul(i,t.A),s=e.sqr(o),d=e.sqr(i),u=e.mul(d,t.A),s=e.add(s,u),s=e.mul(s,o),d=e.mul(d,i),u=e.mul(d,t.B),s=e.add(s,u),l=e.mul(a,o);let{isValid:y,value:m}=n(s,d);p=e.mul(a,r),p=e.mul(p,m),l=e.cmov(l,o,y),p=e.cmov(p,m,y);let g=e.isOdd(r)===e.isOdd(p);p=e.cmov(e.neg(p),p,g);let h=Hf(e,[i],!0)[0];return l=e.mul(l,h),{x:l,y:p}}}var qE,R1,Ho,Cn,Yc,kb,GE,VE=I(()=>{oj();Eb();Uf();qE=class extends Error{constructor(t=""){super(t)}},R1={Err:qE,_tlv:{encode:(e,t)=>{let{Err:n}=R1;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");let r=t.length/2,a=Sb(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");let s=r>127?Sb(a.length/2|128):"";return Sb(e)+s+a+t},decode(e,t){let{Err:n}=R1,r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");let a=t[r++],s=!!(a&128),o=0;if(!s)o=a;else{let u=a&127;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");let d=t.subarray(r,r+u);if(d.length!==u)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(let l of d)o=o<<8|l;if(r+=u,o<128)throw new n("tlv.decode(long): not minimal encoding")}let i=t.subarray(r,r+o);if(i.length!==o)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(r+o)}}},_int:{encode(e){let{Err:t}=R1;if(e<Ho)throw new t("integer: negative integers are not allowed");let n=Sb(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=R1;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ja(e)}},toSig(e){let{Err:t,_int:n,_tlv:r}=R1,a=z0("signature",e),{v:s,l:o}=r.decode(48,a);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:i,l:u}=r.decode(2,s),{v:d,l}=r.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(i),s:n.decode(d)}},hexFromSig(e){let{_tlv:t,_int:n}=R1,r=t.encode(2,n.encode(e.r)),a=t.encode(2,n.encode(e.s)),s=r+a;return t.encode(48,s)}};Ho=BigInt(0),Cn=BigInt(1),Yc=BigInt(2),kb=BigInt(3),GE=BigInt(4)});function p4e(e){return{hash:e,hmac:(t,...n)=>kE(e,t,nz(...n)),randomBytes:d9}}function dj(e,t){let n=r=>cj({...e,...p4e(r)});return{...n(t),create:n}}var fj=I(()=>{Hz();S1();VE();});function e6(e,t){if(Ib(e),Ib(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);let n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function b4e(e,t){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Ib(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function y4e(e,t,n,r){I1(e),I1(t),Ib(n),t.length>255&&(t=r(da(H9("H2C-OVERSIZE-DST-"),t)));let{outputLen:a,blockLen:s}=r,o=Math.ceil(n/a);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");let i=da(t,e6(t.length,1)),u=e6(0,s),d=e6(n,2),l=new Array(o),p=r(da(u,e,d,e6(0,1),i));l[0]=r(da(p,e6(1,1),i));for(let m=1;m<=o;m++){let g=[b4e(p,l[m-1]),e6(m+1,1),i];l[m]=r(da(...g))}return da(...l).slice(0,n)}function g4e(e,t,n,r,a){if(I1(e),I1(t),Ib(n),t.length>255){let s=Math.ceil(2*r/8);t=a.create({dkLen:s}).update(H9("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(e).update(e6(n,2)).update(t).update(e6(t.length,1)).digest()}function lj(e,t,n){P1(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:a,m:s,hash:o,expand:i,DST:u}=n;I1(e),Ib(t);let d=typeof u=="string"?H9(u):u,l=r.toString(2).length,p=Math.ceil((l+a)/8),y=t*s*p,m;if(i==="xmd")m=y4e(e,d,y,o);else if(i==="xof")m=g4e(e,d,y,a,o);else if(i==="_internal_pass")m=e;else throw new Error('expand must be "xmd" or "xof"');let g=new Array(t);for(let h=0;h<t;h++){let w=new Array(s);for(let v=0;v<s;v++){let T=p*(v+h*s),A=m.subarray(T,T+p);w[v]=$0(m4e(A),r)}g[h]=w}return g}function pj(e,t){let n=t.map(r=>Array.from(r).reverse());return(r,a)=>{let[s,o,i,u]=n.map(p=>p.reduce((y,m)=>e.add(e.mul(y,r),m))),[d,l]=Hf(e,[o,u],!0);return r=e.mul(s,d),a=e.mul(a,e.mul(i,l)),{x:r,y:a}}}function mj(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(s){return e.fromAffine(t(s))}function a(s){let o=s.clearCofactor();return o.equals(e.ZERO)?e.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(s,o){let i=lj(s,2,{...n,DST:n.DST,...o}),u=r(i[0]),d=r(i[1]);return a(u.add(d))},encodeToCurve(s,o){let i=lj(s,1,{...n,DST:n.encodeDST,...o});return a(r(i[0]))},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(let o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return a(r(s))}}}var m4e,bj=I(()=>{Eb();Uf();m4e=Ja});var Tj={};ni(Tj,{encodeToCurve:()=>_4e,hashToCurve:()=>A4e,schnorr:()=>v4e,secp256k1:()=>la,secp256k1_hasher:()=>YE});function hj(e){let t=Rb,n=BigInt(3),r=BigInt(6),a=BigInt(11),s=BigInt(22),o=BigInt(23),i=BigInt(44),u=BigInt(88),d=e*e*e%t,l=d*d*e%t,p=_s(l,n,t)*l%t,y=_s(p,n,t)*l%t,m=_s(y,q9,t)*d%t,g=_s(m,a,t)*m%t,h=_s(g,s,t)*g%t,w=_s(h,i,t)*h%t,v=_s(w,u,t)*w%t,T=_s(v,i,t)*h%t,A=_s(T,n,t)*l%t,_=_s(A,o,t)*g%t,E=_s(_,r,t)*d%t,O=_s(E,q9,t);if(!t6.eql(t6.sqr(O),e))throw new Error("Cannot find square root");return O}function G9(e,...t){let n=gj[e];if(n===void 0){let r=o5(Uint8Array.from(e,a=>a.charCodeAt(0)));n=da(r,r),gj[e]=n}return o5(da(n,...t))}function KE(e){let t=la.utils.normPrivateKeyToScalar(e),n=QE.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Pb(-t),bytes:JE(n)}}function xj(e){C1("x",e,Cb,Rb);let t=WE(e*e),n=WE(t*e+BigInt(7)),r=hj(n);r%q9!==XE&&(r=WE(-r));let a=new QE(e,r,Cb);return a.assertValidity(),a}function wj(...e){return Pb(Ff(G9("BIP0340/challenge",...e)))}function x4e(e){return KE(e).bytes}function w4e(e,t,n=d9(32)){let r=z0("message",e),{bytes:a,scalar:s}=KE(t),o=z0("auxRand",n,32),i=ZE(s^Ff(G9("BIP0340/aux",o))),u=G9("BIP0340/nonce",i,a,r),d=Pb(Ff(u));if(d===XE)throw new Error("sign failed: k is zero");let{bytes:l,scalar:p}=KE(d),y=wj(l,a,r),m=new Uint8Array(64);if(m.set(l,0),m.set(ZE(Pb(p+y*s)),32),!vj(m,r,a))throw new Error("sign: Invalid signature produced");return m}function vj(e,t,n){let r=z0("signature",e,64),a=z0("message",t),s=z0("publicKey",n,32);try{let o=xj(Ff(s)),i=Ff(r.subarray(0,32));if(!i5(i,Cb,Rb))return!1;let u=Ff(r.subarray(32,64));if(!i5(u,Cb,j9))return!1;let d=wj(ZE(i),JE(o),a),l=h4e(o,u,Pb(-d));return!(!l||!l.hasEvenY()||l.toAffine().x!==i)}catch{return!1}}var Rb,j9,XE,Cb,q9,yj,t6,la,gj,JE,ZE,WE,Pb,QE,h4e,Ff,v4e,T4e,S4e,YE,A4e,_4e,d5=I(()=>{EE();S1();fj();bj();Eb();Uf();VE();Rb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),j9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),XE=BigInt(0),Cb=BigInt(1),q9=BigInt(2),yj=(e,t)=>(e+t/q9)/t;t6=_b(Rb,void 0,void 0,{sqrt:hj}),la=dj({a:XE,b:BigInt(7),Fp:t6,n:j9,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=j9,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Cb*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),i=yj(s*e,t),u=yj(-r*e,t),d=$0(e-i*n-u*a,t),l=$0(-i*r-u*s,t),p=d>o,y=l>o;if(p&&(d=t-d),y&&(l=t-l),d>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:d,k2neg:y,k2:l}}}},o5),gj={};JE=e=>e.toRawBytes(!0).slice(1),ZE=e=>xi(e,32),WE=e=>$0(e,Rb),Pb=e=>$0(e,j9),QE=la.ProjectivePoint,h4e=(e,t,n)=>QE.BASE.multiplyAndAddUnsafe(e,t,n);Ff=Ja;v4e={getPublicKey:x4e,sign:w4e,verify:vj,utils:{randomPrivateKey:la.utils.randomPrivateKey,lift_x:xj,pointToBytes:JE,numberToBytesBE:xi,bytesToNumberBE:Ja,taggedHash:G9,mod:$0}},T4e=pj(t6,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),S4e=uj(t6,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:t6.create(BigInt("-11"))}),YE=mj(la.ProjectivePoint,e=>{let{x:t,y:n}=S4e(t6.create(e[0]));return T4e(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:t6.ORDER,m:1,k:128,expand:"xmd",hash:o5}),A4e=YE.hashToCurve,_4e=YE.encodeToCurve});async function Aj({hash:e,signature:t}){let n=mn(e)?e:ge(e),{secp256k1:r}=await Promise.resolve().then(()=>(d5(),Tj));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:d,s:l,v:p,yParity:y}=t,m=Number(y??p),g=Sj(m);return new r.Signature(n0(d),n0(l)).addRecoveryBit(g)}let o=mn(t)?t:ge(t);if(Wt(o)!==65)throw new Error("invalid signature length");let i=Vn(`0x${o.slice(130)}`),u=Sj(i);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Sj(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}var _j=I(()=>{Ts();Ss();tr();Ve()});async function V9({hash:e,signature:t}){return N9(await Aj({hash:e,signature:t}))}var ek=I(()=>{_E();_j()});function Fo(e,t="hex"){let n=Ej(e),r=uf(new Uint8Array(n.length));return n.encode(r),t==="hex"?tn(r.bytes):r.bytes}function Ej(e){return Array.isArray(e)?E4e(e.map(t=>Ej(t))):k4e(e)}function E4e(e){let t=e.reduce((a,s)=>a+s.length,0),n=kj(t);return{length:t<=55?1+t:1+n+t,encode(a){t<=55?a.pushByte(192+t):(a.pushByte(247+n),n===1?a.pushUint8(t):n===2?a.pushUint16(t):n===3?a.pushUint24(t):a.pushUint32(t));for(let{encode:s}of e)s(a)}}}function k4e(e){let t=typeof e=="string"?bn(e):e,n=kj(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(a){t.length===1&&t[0]<128?a.pushBytes(t):t.length<=55?(a.pushByte(128+t.length),a.pushBytes(t)):(a.pushByte(183+n),n===1?a.pushUint8(t.length):n===2?a.pushUint16(t.length):n===3?a.pushUint24(t.length):a.pushUint32(t.length),a.pushBytes(t))}}}function kj(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new z("Length is too large.")}var W9=I(()=>{yt();w9();v0();Ve()});function Z9(e){let{chainId:t,nonce:n,to:r}=e,a=e.contractAddress??e.address,s=Ke(T0(["0x05",Fo([t?F(t):"0x",a,n?F(n):"0x"])]));return r==="bytes"?bn(s):s}var tk=I(()=>{F0();v0();Ve();W9();Ga()});async function n6(e){let{authorization:t,signature:n}=e;return V9({hash:Z9(t),signature:n??t})}var $b=I(()=>{ek();tk()});var K9,Ij=I(()=>{vb();Qu();yt();Ks();K9=class extends z{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:l,to:p,value:y}){let m=Yu({from:n?.address,to:p,value:typeof y<"u"&&`${Ge(y)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof i<"u"&&`${S0(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${S0(u)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${S0(d)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",m].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}});var $1,Qs,zf,jf,qf,Gf,Vf,Wf,Zf,Kf,wi,Ys,r6=I(()=>{Qu();yt();$1=class extends z{constructor({cause:t,message:n}={}){let r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}};Object.defineProperty($1,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty($1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});Qs=class extends z{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${S0(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}};Object.defineProperty(Qs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});zf=class extends z{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${S0(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}};Object.defineProperty(zf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});jf=class extends z{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}};Object.defineProperty(jf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});qf=class extends z{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}};Object.defineProperty(qf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});Gf=class extends z{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}};Object.defineProperty(Gf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});Vf=class extends z{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(Vf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});Wf=class extends z{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(Wf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});Zf=class extends z{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(Zf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});Kf=class extends z{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(Kf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});wi=class extends z{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${S0(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${S0(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}};Object.defineProperty(wi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});Ys=class extends z{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}});function a6(e,t){let n=(e.details||"").toLowerCase(),r=e instanceof z?e.walk(a=>a?.code===$1.code):e;return r instanceof z?new $1({cause:e,message:r.details}):$1.nodeMessage.test(n)?new $1({cause:e,message:e.details}):Qs.nodeMessage.test(n)?new Qs({cause:e,maxFeePerGas:t?.maxFeePerGas}):zf.nodeMessage.test(n)?new zf({cause:e,maxFeePerGas:t?.maxFeePerGas}):jf.nodeMessage.test(n)?new jf({cause:e,nonce:t?.nonce}):qf.nodeMessage.test(n)?new qf({cause:e,nonce:t?.nonce}):Gf.nodeMessage.test(n)?new Gf({cause:e,nonce:t?.nonce}):Vf.nodeMessage.test(n)?new Vf({cause:e}):Wf.nodeMessage.test(n)?new Wf({cause:e,gas:t?.gas}):Zf.nodeMessage.test(n)?new Zf({cause:e,gas:t?.gas}):Kf.nodeMessage.test(n)?new Kf({cause:e}):wi.nodeMessage.test(n)?new wi({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Ys({cause:e})}var Db=I(()=>{yt();r6()});function Cj(e,{docsPath:t,...n}){let r=(()=>{let a=a6(e,n);return a instanceof Ys?e:a})();return new K9(r,{docsPath:t,...n})}var Pj=I(()=>{Ij();r6();Db()});function eo(e,{format:t}){if(!t)return{};let n={};function r(s){let o=Object.keys(s);for(let i of o)i in e&&(n[i]=e[i]),s[i]&&typeof s[i]=="object"&&!Array.isArray(s[i])&&r(s[i])}let a=t(e||{});return r(a),n}var f5=I(()=>{});function Nr(e,t){let n={};return typeof e.authorizationList<"u"&&(n.authorizationList=C4e(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>tn(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=F(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=F(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=F(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=F(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=F(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=F(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=I4e[e.type]),typeof e.value<"u"&&(n.value=F(e.value)),n}function C4e(e){return e.map(t=>({address:t.address,r:t.r?F(BigInt(t.r)):t.r,s:t.s?F(BigInt(t.s)):t.s,chainId:F(t.chainId),nonce:F(t.nonce),...typeof t.yParity<"u"?{yParity:F(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:F(t.v)}:{}}))}var I4e,D1=I(()=>{Ve();I4e={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function Rj(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new lb({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new lb({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function P4e(e){let{balance:t,nonce:n,state:r,stateDiff:a,code:s}=e,o={};if(s!==void 0&&(o.code=s),t!==void 0&&(o.balance=F(t)),n!==void 0&&(o.nonce=F(n)),r!==void 0&&(o.state=Rj(r)),a!==void 0){if(o.state)throw new E9;o.stateDiff=Rj(a)}return o}function Xf(e){if(!e)return;let t={};for(let{address:n,...r}of e){if(!Se(n,{strict:!1}))throw new In({address:n});if(t[n])throw new _9({address:n});t[n]=P4e(r)}return t}var X9=I(()=>{Bo();t9();AE();Va();Ve()});var R4e,$4e,D4e,M4e,O4e,N4e,L4e,B4e,U4e,H4e,F4e,z4e,j4e,q4e,G4e,V4e,W4e,Z4e,K4e,X4e,J4e,Q4e,Y4e,exe,txe,nxe,rxe,axe,sxe,oxe,ixe,cxe,uxe,dxe,fxe,lxe,pxe,mxe,bxe,yxe,gxe,hxe,xxe,wxe,vxe,Txe,Sxe,Axe,_xe,Exe,kxe,Ixe,Cxe,Pxe,Rxe,$xe,Dxe,Mxe,Oxe,Nxe,Lxe,Bxe,Uxe,Hxe,Fxe,zxe,jxe,qxe,Gxe,Vxe,Wxe,Zxe,Kxe,Xxe,Jxe,Qxe,Yxe,e7e,t7e,n7e,r7e,a7e,s7e,o7e,i7e,c7e,u7e,d7e,f7e,l7e,p7e,m7e,b7e,y7e,g7e,M1,J9=I(()=>{R4e=2n**(8n-1n)-1n,$4e=2n**(16n-1n)-1n,D4e=2n**(24n-1n)-1n,M4e=2n**(32n-1n)-1n,O4e=2n**(40n-1n)-1n,N4e=2n**(48n-1n)-1n,L4e=2n**(56n-1n)-1n,B4e=2n**(64n-1n)-1n,U4e=2n**(72n-1n)-1n,H4e=2n**(80n-1n)-1n,F4e=2n**(88n-1n)-1n,z4e=2n**(96n-1n)-1n,j4e=2n**(104n-1n)-1n,q4e=2n**(112n-1n)-1n,G4e=2n**(120n-1n)-1n,V4e=2n**(128n-1n)-1n,W4e=2n**(136n-1n)-1n,Z4e=2n**(144n-1n)-1n,K4e=2n**(152n-1n)-1n,X4e=2n**(160n-1n)-1n,J4e=2n**(168n-1n)-1n,Q4e=2n**(176n-1n)-1n,Y4e=2n**(184n-1n)-1n,exe=2n**(192n-1n)-1n,txe=2n**(200n-1n)-1n,nxe=2n**(208n-1n)-1n,rxe=2n**(216n-1n)-1n,axe=2n**(224n-1n)-1n,sxe=2n**(232n-1n)-1n,oxe=2n**(240n-1n)-1n,ixe=2n**(248n-1n)-1n,cxe=2n**(256n-1n)-1n,uxe=-(2n**(8n-1n)),dxe=-(2n**(16n-1n)),fxe=-(2n**(24n-1n)),lxe=-(2n**(32n-1n)),pxe=-(2n**(40n-1n)),mxe=-(2n**(48n-1n)),bxe=-(2n**(56n-1n)),yxe=-(2n**(64n-1n)),gxe=-(2n**(72n-1n)),hxe=-(2n**(80n-1n)),xxe=-(2n**(88n-1n)),wxe=-(2n**(96n-1n)),vxe=-(2n**(104n-1n)),Txe=-(2n**(112n-1n)),Sxe=-(2n**(120n-1n)),Axe=-(2n**(128n-1n)),_xe=-(2n**(136n-1n)),Exe=-(2n**(144n-1n)),kxe=-(2n**(152n-1n)),Ixe=-(2n**(160n-1n)),Cxe=-(2n**(168n-1n)),Pxe=-(2n**(176n-1n)),Rxe=-(2n**(184n-1n)),$xe=-(2n**(192n-1n)),Dxe=-(2n**(200n-1n)),Mxe=-(2n**(208n-1n)),Oxe=-(2n**(216n-1n)),Nxe=-(2n**(224n-1n)),Lxe=-(2n**(232n-1n)),Bxe=-(2n**(240n-1n)),Uxe=-(2n**(248n-1n)),Hxe=-(2n**(256n-1n)),Fxe=2n**8n-1n,zxe=2n**16n-1n,jxe=2n**24n-1n,qxe=2n**32n-1n,Gxe=2n**40n-1n,Vxe=2n**48n-1n,Wxe=2n**56n-1n,Zxe=2n**64n-1n,Kxe=2n**72n-1n,Xxe=2n**80n-1n,Jxe=2n**88n-1n,Qxe=2n**96n-1n,Yxe=2n**104n-1n,e7e=2n**112n-1n,t7e=2n**120n-1n,n7e=2n**128n-1n,r7e=2n**136n-1n,a7e=2n**144n-1n,s7e=2n**152n-1n,o7e=2n**160n-1n,i7e=2n**168n-1n,c7e=2n**176n-1n,u7e=2n**184n-1n,d7e=2n**192n-1n,f7e=2n**200n-1n,l7e=2n**208n-1n,p7e=2n**216n-1n,m7e=2n**224n-1n,b7e=2n**232n-1n,y7e=2n**240n-1n,g7e=2n**248n-1n,M1=2n**256n-1n});function ir(e){let{account:t,maxFeePerGas:n,maxPriorityFeePerGas:r,to:a}=e,s=t?at(t):void 0;if(s&&!Se(s.address))throw new In({address:s.address});if(a&&!Se(a))throw new In({address:a});if(n&&n>M1)throw new Qs({maxFeePerGas:n});if(r&&n&&r>n)throw new wi({maxFeePerGas:n,maxPriorityFeePerGas:r})}var vi=I(()=>{r0();J9();Bo();r6();Va()});var Jf,s6,Q9,Mb=I(()=>{Qu();yt();Jf=class extends z{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},s6=class extends z{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},Q9=class extends z{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${S0(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}});var Qf,nk=I(()=>{yt();Qf=class extends z{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}});function Yf(e,t){let n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Vn(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Vn(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?rk[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=h7e(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function h7e(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}var rk,Ob=I(()=>{tr();rk={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"}});function Y9(e,t){let n=(e.transactions??[]).map(r=>typeof r=="string"?r:Yf(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}var ak=I(()=>{Ob()});async function l0(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:a}={}){let s=a??!1,o=n!==void 0?F(n):void 0,i=null;if(t?i=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):i=await e.request({method:"eth_getBlockByNumber",params:[o||r,s]},{dedupe:!!o}),!i)throw new Qf({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Y9)(i,"getBlock")}var O1=I(()=>{nk();Ve();ak()});async function el(e){let t=await e.request({method:"eth_gasPrice"});return BigInt(t)}var eh=I(()=>{});async function $j(e,t){return sk(e,t)}async function sk(e,t){let{block:n,chain:r=e.chain,request:a}=t||{};try{let s=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof s=="function"){let i=n||await ce(e,l0,"getBlock")({}),u=await s({block:i,client:e,request:a});if(u===null)throw new Error;return u}if(typeof s<"u")return s;let o=await e.request({method:"eth_maxPriorityFeePerGas"});return n0(o)}catch{let[s,o]=await Promise.all([n?Promise.resolve(n):ce(e,l0,"getBlock")({}),ce(e,el,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new s6;let i=o-s.baseFeePerGas;return i<0n?0n:i}}var ok=I(()=>{Mb();tr();sn();O1();eh()});async function Dj(e,t){return th(e,t)}async function th(e,t){let{block:n,chain:r=e.chain,request:a,type:s="eip1559"}=t||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:a}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new Jf;let u=10**(o.toString().split(".")[1]?.length??0),d=y=>y*BigInt(Math.ceil(o*u))/BigInt(u),l=n||await ce(e,l0,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){let y=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:d,request:a,type:s});if(y!==null)return y}if(s==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new s6;let y=typeof a?.maxPriorityFeePerGas=="bigint"?a.maxPriorityFeePerGas:await sk(e,{block:l,chain:r,request:a}),m=d(l.baseFeePerGas);return{maxFeePerGas:a?.maxFeePerGas??m+y,maxPriorityFeePerGas:y}}return{gasPrice:a?.gasPrice??d(await ce(e,el,"getGasPrice")({}))}}var ik=I(()=>{Mb();sn();ok();O1();eh()});async function o6(e,{address:t,blockTag:n="latest",blockNumber:r}){let a=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?F(r):n]},{dedupe:!!r});return Vn(a)}var Nb=I(()=>{tr();Ve()});function tl(e){let{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(s=>bn(s)):e.blobs,a=[];for(let s of r)a.push(Uint8Array.from(t.blobToKzgCommitment(s)));return n==="bytes"?a:a.map(s=>tn(s))}var nh=I(()=>{v0();Ve()});function nl(e){let{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>bn(o)):e.blobs,a=typeof e.commitments[0]=="string"?e.commitments.map(o=>bn(o)):e.commitments,s=[];for(let o=0;o<r.length;o++){let i=r[o],u=a[o];s.push(Uint8Array.from(t.computeBlobKzgProof(i,u)))}return n==="bytes"?s:s.map(o=>tn(o))}var rh=I(()=>{v0();Ve()});var Mj,Oj=I(()=>{EE();Mj=o5});function Nj(e,t){let n=t||"hex",r=Mj(mn(e,{strict:!1})?H0(e):e);return n==="bytes"?r:ge(r)}var Lj=I(()=>{Oj();Ts();v0();Ve()});function Bj(e){let{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),a=Nj(t,"bytes");return a.set([n],0),r==="bytes"?a:tn(a)}var Uj=I(()=>{Ve();Lj()});function ah(e){let{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),a=[];for(let s of t)a.push(Bj({commitment:s,to:r,version:n}));return a}var ck=I(()=>{Uj()});var sh,rl,oh,ih,uk=I(()=>{yt();sh=class extends z{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}},rl=class extends z{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},oh=class extends z{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}},ih=class extends z{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}});function Hj(e){let t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?bn(e.data):e.data,r=Wt(n);if(!r)throw new rl;if(r>761855)throw new sh({maxSize:761855,size:r});let a=[],s=!0,o=0;for(;s;){let i=uf(new Uint8Array(131072)),u=0;for(;u<4096;){let d=n.slice(o,o+31);if(i.pushByte(0),i.pushBytes(d),d.length<31){i.pushByte(128),s=!1;break}u++,o+=31}a.push(i)}return t==="bytes"?a.map(i=>i.bytes):a.map(i=>tn(i.bytes))}var Fj=I(()=>{uk();w9();Ss();v0();Ve()});function ch(e){let{data:t,kzg:n,to:r}=e,a=e.blobs??Hj({data:t,to:r}),s=e.commitments??tl({blobs:a,kzg:n,to:r}),o=e.proofs??nl({blobs:a,commitments:s,kzg:n,to:r}),i=[];for(let u=0;u<a.length;u++)i.push({blob:a[u],commitment:s[u],proof:o[u]});return i}var dk=I(()=>{nh();rh();Fj()});function uh(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new I9({transaction:e})}var fk=I(()=>{Ks()});function i6(e,{docsPath:t,...n}){let r=(()=>{let a=a6(e,n);return a instanceof Ys?e:a})();return new P9(r,{docsPath:t,...n})}var Lb=I(()=>{r6();Ks();Db()});async function Lr(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return Vn(t)}var N1=I(()=>{tr()});async function al(e,t){let{account:n=e.account,accessList:r,authorizationList:a,chain:s=e.chain,blobVersionedHashes:o,blobs:i,data:u,gas:d,gasPrice:l,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:m,nonce:g,nonceManager:h,to:w,type:v,value:T,...A}=t,_=await(async()=>{if(!n||!h||typeof g<"u")return g;let B=at(n),V=s?s.id:await ce(e,Lr,"getChainId")({});return await h.consume({address:B.address,chainId:V,client:e})})();ir(t);let E=s?.formatters?.transactionRequest?.format,$=(E||Nr)({...eo(A,{format:E}),account:n?at(n):void 0,accessList:r,authorizationList:a,blobs:i,blobVersionedHashes:o,data:u,gas:d,gasPrice:l,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:m,nonce:_,to:w,type:v,value:T},"fillTransaction");try{let B=await e.request({method:"eth_fillTransaction",params:[$]}),D=(s?.formatters?.transaction?.format||Yf)(B.tx);delete D.blockHash,delete D.blockNumber,delete D.r,delete D.s,delete D.transactionIndex,delete D.v,delete D.yParity,D.data=D.input,D.gas&&(D.gas=t.gas??D.gas),D.gasPrice&&(D.gasPrice=t.gasPrice??D.gasPrice),D.maxFeePerBlobGas&&(D.maxFeePerBlobGas=t.maxFeePerBlobGas??D.maxFeePerBlobGas),D.maxFeePerGas&&(D.maxFeePerGas=t.maxFeePerGas??D.maxFeePerGas),D.maxPriorityFeePerGas&&(D.maxPriorityFeePerGas=t.maxPriorityFeePerGas??D.maxPriorityFeePerGas),D.nonce&&(D.nonce=t.nonce??D.nonce);let G=await(async()=>{if(typeof s?.fees?.baseFeeMultiplier=="function"){let j=await ce(e,l0,"getBlock")({});return s.fees.baseFeeMultiplier({block:j,client:e,request:t})}return s?.fees?.baseFeeMultiplier??1.2})();if(G<1)throw new Jf;let W=10**(G.toString().split(".")[1]?.length??0),me=j=>j*BigInt(Math.ceil(G*W))/BigInt(W);return D.maxFeePerGas&&!t.maxFeePerGas&&(D.maxFeePerGas=me(D.maxFeePerGas)),D.gasPrice&&!t.gasPrice&&(D.gasPrice=me(D.gasPrice)),{raw:B.raw,transaction:{from:$.from,...D}}}catch(B){throw i6(B,{...t,chain:e.chain})}}var dh=I(()=>{r0();Mb();Lb();f5();Ob();D1();sn();vi();O1();N1()});async function Ti(e,t){let n=t;n.account??=e.account,n.parameters??=Bb;let{account:r,chain:a=e.chain,nonceManager:s,parameters:o}=n,i=(()=>{if(typeof a?.prepareTransactionRequest=="function")return{fn:a.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(a?.prepareTransactionRequest))return{fn:a.prepareTransactionRequest[0],runAt:a.prepareTransactionRequest[1].runAt}})(),u;async function d(){return u||(typeof n.chainId<"u"?n.chainId:a?a.id:(u=await ce(e,Lr,"getChainId")({}),u))}let l=r&&at(r),p=n.nonce;if(o.includes("nonce")&&typeof p>"u"&&l&&s){let _=await d();p=await s.consume({address:l.address,chainId:_,client:e})}i?.fn&&i.runAt?.includes("beforeFillTransaction")&&(n=await i.fn({...n,chain:a},{phase:"beforeFillTransaction"}),p??=n.nonce);let m=((o.includes("blobVersionedHashes")||o.includes("sidecars"))&&n.kzg&&n.blobs||lk.get(e.uid)===!1||!["fees","gas"].some(E=>o.includes(E))?!1:!!(o.includes("chainId")&&typeof n.chainId!="number"||o.includes("nonce")&&typeof p!="number"||o.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||o.includes("gas")&&typeof n.gas!="bigint"))?await ce(e,al,"fillTransaction")({...n,nonce:p}).then(_=>{let{chainId:E,from:O,gas:$,gasPrice:B,nonce:V,maxFeePerBlobGas:D,maxFeePerGas:G,maxPriorityFeePerGas:N,type:W,...me}=_.transaction;return lk.set(e.uid,!0),{...n,...O?{from:O}:{},...W?{type:W}:{},...typeof E<"u"?{chainId:E}:{},...typeof $<"u"?{gas:$}:{},...typeof B<"u"?{gasPrice:B}:{},...typeof V<"u"?{nonce:V}:{},...typeof D<"u"?{maxFeePerBlobGas:D}:{},...typeof G<"u"?{maxFeePerGas:G}:{},...typeof N<"u"?{maxPriorityFeePerGas:N}:{},..."nonceKey"in me&&typeof me.nonceKey<"u"?{nonceKey:me.nonceKey}:{}}}).catch(_=>{let E=_;return E.name!=="TransactionExecutionError"||E.walk?.($=>{let B=$;return B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError"})&&lk.set(e.uid,!1),n}):n;p??=m.nonce,n={...m,...l?{from:l?.address}:{},...p?{nonce:p}:{}};let{blobs:g,gas:h,kzg:w,type:v}=n;i?.fn&&i.runAt?.includes("beforeFillParameters")&&(n=await i.fn({...n,chain:a},{phase:"beforeFillParameters"}));let T;async function A(){return T||(T=await ce(e,l0,"getBlock")({blockTag:"latest"}),T)}if(o.includes("nonce")&&typeof p>"u"&&l&&!s&&(n.nonce=await ce(e,o6,"getTransactionCount")({address:l.address,blockTag:"pending"})),(o.includes("blobVersionedHashes")||o.includes("sidecars"))&&g&&w){let _=tl({blobs:g,kzg:w});if(o.includes("blobVersionedHashes")){let E=ah({commitments:_,to:"hex"});n.blobVersionedHashes=E}if(o.includes("sidecars")){let E=nl({blobs:g,commitments:_,kzg:w}),O=ch({blobs:g,commitments:_,proofs:E,to:"hex"});n.sidecars=O}}if(o.includes("chainId")&&(n.chainId=await d()),(o.includes("fees")||o.includes("type"))&&typeof v>"u")try{n.type=uh(n)}catch{let _=zj.get(e.uid);typeof _>"u"&&(_=typeof(await A())?.baseFeePerGas=="bigint",zj.set(e.uid,_)),n.type=_?"eip1559":"legacy"}if(o.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){let _=await A(),{maxFeePerGas:E,maxPriorityFeePerGas:O}=await th(e,{block:_,chain:a,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<O)throw new Q9({maxPriorityFeePerGas:O});n.maxPriorityFeePerGas=O,n.maxFeePerGas=E}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new s6;if(typeof n.gasPrice>"u"){let _=await A(),{gasPrice:E}=await th(e,{block:_,chain:a,request:n,type:"legacy"});n.gasPrice=E}}return o.includes("gas")&&typeof h>"u"&&(n.gas=await ce(e,ol,"estimateGas")({...n,account:l,prepare:l?.type==="local"?[]:["blobVersionedHashes"]})),i?.fn&&i.runAt?.includes("afterFillParameters")&&(n=await i.fn({...n,chain:a},{phase:"afterFillParameters"})),ir(n),delete n.parameters,n}var Bb,zj,lk,sl=I(()=>{r0();ik();fh();O1();Nb();Mb();nh();rh();ck();dk();sn();qc();vi();fk();dh();N1();Bb=["blobVersionedHashes","chainId","fees","gas","nonce","type"],zj=new Map,lk=new $r(128)});async function ol(e,t){let{account:n=e.account,prepare:r=!0}=t,a=n?at(n):void 0,s=(()=>{if(Array.isArray(r))return r;if(a?.type!=="local")return["blobVersionedHashes"]})();try{let o=await(async()=>{if(t.to)return t.to;if(t.authorizationList&&t.authorizationList.length>0)return await n6({authorization:t.authorizationList[0]}).catch(()=>{throw new z("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:i,authorizationList:u,blobs:d,blobVersionedHashes:l,blockNumber:p,blockTag:y,data:m,gas:g,gasPrice:h,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:A,value:_,stateOverride:E,...O}=r?await Ti(e,{...t,parameters:s,to:o}):t;if(g&&t.gas!==g)return g;let B=(typeof p=="bigint"?F(p):void 0)||y,V=Xf(E);ir(t);let D=e.chain?.formatters?.transactionRequest?.format,N=(D||Nr)({...eo(O,{format:D}),account:a,accessList:i,authorizationList:u,blobs:d,blobVersionedHashes:l,data:m,gasPrice:h,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:A,to:o,value:_},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:V?[N,B??e.experimental_blockTag??"latest",V]:B?[N,B]:[N]}))}catch(o){throw Cj(o,{...t,account:a,chain:e.chain})}}var fh=I(()=>{r0();yt();$b();Ve();Pj();f5();D1();X9();vi();sl()});async function lh(e,t){let{abi:n,address:r,args:a,functionName:s,dataSuffix:o,...i}=t,u=X({abi:n,args:a,functionName:s});try{return await ce(e,ol,"estimateGas")({data:`${u}${o?o.replace("0x",""):""}`,to:r,...i})}catch(d){let l=i.account?at(i.account):void 0;throw As(d,{abi:n,address:r,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:l?.address})}}var pk=I(()=>{r0();Xa();s5();sn();fh()});function Tr(e,t){if(!Se(e,{strict:!1}))throw new In({address:e});if(!Se(t,{strict:!1}))throw new In({address:t});return e.toLowerCase()===t.toLowerCase()}var c6=I(()=>{Bo();Va()});function l5(e){let{abi:t,data:n,strict:r,topics:a}=e,s=r??!0,[o,...i]=a;if(!o)throw new W3({docsPath:jj});let u=t.find(h=>h.type==="event"&&o===jc(Y0(h)));if(!(u&&"name"in u)||u.type!=="event")throw new Z3(o,{docsPath:jj});let{name:d,inputs:l}=u,p=l?.some(h=>!("name"in h&&h.name)),y=p?[]:{},m=l.map((h,w)=>[h,w]).filter(([h])=>"indexed"in h&&h.indexed);for(let h=0;h<m.length;h++){let[w,v]=m[h],T=i[h];if(!T)throw new Fc({abiItem:u,param:w});y[p?v:w.name||v]=v7e({param:w,value:T})}let g=l.filter(h=>!("indexed"in h&&h.indexed));if(g.length>0){if(n&&n!=="0x")try{let h=ca(g,n);if(h)if(p)for(let w=0;w<l.length;w++)y[w]=y[w]??h.shift();else for(let w=0;w<g.length;w++)y[g[w].name]=h[w]}catch(h){if(s)throw h instanceof Jd||h instanceof cf?new g1({abiItem:u,data:n,params:g,size:Wt(n)}):h}else if(s)throw new g1({abiItem:u,data:"0x",params:g,size:0})}return{eventName:d,args:Object.values(y).length>0?y:void 0}}function v7e({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(ca([e],t)||[])[0]}var jj,ph=I(()=>{w0();wE();Ss();gb();ff();y1();jj="/docs/contract/decodeEventLog"});function zo(e){let{abi:t,args:n,logs:r,strict:a=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(o=>{let i=t.filter(l=>l.type==="event"&&o.topics[0]===jc(l));if(i.length===0)return null;let u,d;for(let l of i)try{u=l5({...o,abi:[l],strict:!0}),d=l;break}catch{}if(!u&&!a){d=i[0];try{u=l5({...o,abi:[d],strict:!1})}catch{let l=d.inputs?.some(p=>!("name"in p&&p.name));return{...o,args:l?[]:{},eventName:d.name}}}return!u||!d||s&&!s.includes(u.eventName)||!T7e({args:u.args,inputs:d.inputs,matchArgs:n})?null:{...u,...o}}).filter(Boolean)}function T7e(e){let{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function a(s,o,i){try{return s.type==="address"?Tr(o,i):s.type==="string"||s.type==="bytes"?Ke(H0(o))===i:o===i}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((s,o)=>{if(s==null)return!0;let i=n[o];return i?(Array.isArray(s)?s:[s]).some(d=>a(i,d,t[o])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,o])=>{if(o==null)return!0;let i=n.find(d=>d.name===s);return i?(Array.isArray(o)?o:[o]).some(d=>a(i,d,t[s])):!1}):!1}var Ub=I(()=>{c6();v0();Ga();gb();ph()});function Br(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,blockTimestamp:e.blockTimestamp?BigInt(e.blockTimestamp):e.blockTimestamp===null?null:void 0,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}var u6=I(()=>{});async function il(e,{address:t,blockHash:n,fromBlock:r,toBlock:a,event:s,events:o,args:i,strict:u}={}){let d=u??!1,l=o??(s?[s]:void 0),p=[];l&&(p=[l.flatMap(h=>yi({abi:[h],eventName:h.name,args:o?void 0:i}))],s&&(p=p[0]));let y;n?y=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:n}]}):y=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:typeof r=="bigint"?F(r):r,toBlock:typeof a=="bigint"?F(a):a}]});let m=y.map(g=>Br(g));return l?zo({abi:l,args:i,logs:m,strict:d}):m}var mh=I(()=>{sf();Ub();Ve();u6()});async function cl(e,t){let{abi:n,address:r,args:a,blockHash:s,eventName:o,fromBlock:i,toBlock:u,strict:d}=t,l=o?Ka({abi:n,name:o}):void 0,p=l?void 0:n.filter(y=>y.type==="event");return ce(e,il,"getLogs")({address:r,args:a,blockHash:s,event:l,events:p,fromBlock:i,toBlock:u,strict:d})}var bh=I(()=>{Gc();sn();mh()});function Qa(e){let{abi:t,args:n,functionName:r,data:a}=e,s=t[0];if(r){let i=Ka({abi:t,args:n,name:r});if(!i)throw new Do(r,{docsPath:mk});s=i}if(s.type!=="function")throw new Do(void 0,{docsPath:mk});if(!s.outputs)throw new ef(s.name,{docsPath:mk});let o=ca(s.outputs,a);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}var mk,d6=I(()=>{w0();ff();Gc();mk="/docs/contract/decodeFunctionResult"});var qj,Gj=I(()=>{qj="0.1.1"});function Vj(){return qj}var Wj=I(()=>{Gj()});function Zj(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Zj(e.cause,t):t?null:e}var Le,Ya=I(()=>{Wj();Le=class e extends Error{static setStaticOptions(t){e.prototype.docsOrigin=t.docsOrigin,e.prototype.showVersion=t.showVersion,e.prototype.version=t.version}constructor(t,n={}){let r=(()=>{if(n.cause instanceof e){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=n.docsOrigin??e.prototype.docsOrigin,o=`${s}${a??""}`,i=!!(n.version??e.prototype.showVersion),u=n.version??e.prototype.version,d=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a||i?["",r?`Details: ${r}`:void 0,a?`See: ${o}`:void 0,i?`Version: ${u}`:void 0]:[]].filter(l=>typeof l=="string").join(`
`);super(d,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=o,this.docsOrigin=s,this.docsPath=a,this.shortMessage=t,this.showVersion=i,this.version=u}walk(t){return Zj(this,t)}};Object.defineProperty(Le,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${Vj()}`}});Le.setStaticOptions(Le.defaultStaticOptions)});function ul(e,t){if(to(e)>t)throw new yh({givenSize:to(e),maxSize:t})}function Kj(e,t){if(typeof t=="number"&&t>0&&t>to(e)-1)throw new Hb({offset:t,position:"start",size:to(e)})}function Xj(e,t,n){if(typeof t=="number"&&typeof n=="number"&&to(e)!==n-t)throw new Hb({offset:n,position:"end",size:to(e)})}function bk(e){if(e>=L1.zero&&e<=L1.nine)return e-L1.zero;if(e>=L1.A&&e<=L1.F)return e-(L1.A-10);if(e>=L1.a&&e<=L1.f)return e-(L1.a-10)}function Jj(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new gh({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let s=0;s<r;s++){let o=n==="right";a[o?s:r-s-1]=e[o?s:e.length-s-1]}return a}function yk(e,t={}){let{dir:n="left"}=t,r=e,a=0;for(let s=0;s<r.length-1&&r[n==="left"?s:r.length-s-1].toString()==="0";s++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r}var L1,Qj=I(()=>{f6();L1={zero:48,nine:57,A:65,F:70,a:97,f:102}});function dl(e,t){if(a0(e)>t)throw new hh({givenSize:a0(e),maxSize:t})}function Yj(e,t){if(typeof t=="number"&&t>0&&t>a0(e)-1)throw new Fb({offset:t,position:"start",size:a0(e)})}function eq(e,t,n){if(typeof t=="number"&&typeof n=="number"&&a0(e)!==n-t)throw new Fb({offset:n,position:"end",size:a0(e)})}function gk(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;let a=e.replace("0x","");if(a.length>r*2)throw new xh({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function tq(e,t={}){let{dir:n="left"}=t,r=e.replace("0x",""),a=0;for(let s=0;s<r.length-1&&r[n==="left"?s:r.length-s-1].toString()==="0";s++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r==="0"?"0x":n==="right"&&r.length%2===1?`0x${r}0`:`0x${r}`}var hk=I(()=>{cr()});function l6(e,t,n){return JSON.stringify(e,(r,a)=>typeof t=="function"?t(r,a):typeof a=="bigint"?a.toString()+A7e:a,n)}var A7e,zb=I(()=>{A7e="#__bigint"});function k7e(e){if(!(e instanceof Uint8Array)){if(!e)throw new fl(e);if(typeof e!="object")throw new fl(e);if(!("BYTES_PER_ELEMENT"in e))throw new fl(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new fl(e)}}function rq(e){return e instanceof Uint8Array?e:typeof e=="string"?ll(e):I7e(e)}function I7e(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ll(e,t={}){let{size:n}=t,r=e;n&&(dl(e,n),r=Ai(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let s=a.length/2,o=new Uint8Array(s);for(let i=0,u=0;i<s;i++){let d=bk(a.charCodeAt(u++)),l=bk(a.charCodeAt(u++));if(d===void 0||l===void 0)throw new Le(`Invalid byte sequence ("${a[u-2]}${a[u-1]}" in "${a}").`);o[i]=d<<4|l}return o}function aq(e,t={}){let{size:n}=t,r=E7e.encode(e);return typeof n=="number"?(ul(r,n),C7e(r,n)):r}function C7e(e,t){return Jj(e,{dir:"right",size:t})}function to(e){return e.length}function sq(e,t,n,r={}){let{strict:a}=r;Kj(e,t);let s=e.slice(t,n);return a&&Xj(s,t,n),s}function oq(e,t={}){let{size:n}=t;typeof n<"u"&&ul(e,n);let r=D0(e,t);return vk(r,t)}function iq(e,t={}){let{size:n}=t,r=e;if(typeof n<"u"&&(ul(r,n),r=wk(r)),r.length>1||r[0]>1)throw new xk(r);return!!r[0]}function Si(e,t={}){let{size:n}=t;typeof n<"u"&&ul(e,n);let r=D0(e,t);return vh(r,t)}function cq(e,t={}){let{size:n}=t,r=e;return typeof n<"u"&&(ul(r,n),r=P7e(r)),_7e.decode(r)}function wk(e){return yk(e,{dir:"left"})}function P7e(e){return yk(e,{dir:"right"})}function uq(e){try{return k7e(e),!0}catch{return!1}}var _7e,E7e,xk,fl,yh,Hb,gh,f6=I(()=>{Ya();cr();Qj();hk();zb();_7e=new TextDecoder,E7e=new TextEncoder;xk=class extends Le{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}},fl=class extends Le{constructor(t){super(`Value \`${typeof t=="object"?l6(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}},yh=class extends Le{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Hb=class extends Le{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},gh=class extends Le{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}});function D7e(e,t={}){let{strict:n=!1}=t;if(!e)throw new Th(e);if(typeof e!="string")throw new Th(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Sh(e);if(!e.startsWith("0x"))throw new Sh(e)}function p0(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function pl(e){return e instanceof Uint8Array?D0(e):Array.isArray(e)?D0(new Uint8Array(e)):e}function Ah(e,t={}){let n=`0x${Number(e)}`;return typeof t.size=="number"?(dl(n,t.size),B1(n,t.size)):n}function D0(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=$7e[e[a]];let r=`0x${n}`;return typeof t.size=="number"?(dl(r,t.size),Ai(r,t.size)):r}function yn(e,t={}){let{signed:n,size:r}=t,a=BigInt(e),s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let o=typeof s=="bigint"&&n?-s-1n:0;if(s&&a>s||a<o){let d=typeof e=="bigint"?"n":"";throw new jb({max:s?`${s}${d}`:void 0,min:`${o}${d}`,signed:n,size:r,value:`${e}${d}`})}let u=`0x${(n&&a<0?BigInt.asUintN(r*8,BigInt(a)):a).toString(16)}`;return r?B1(u,r):u}function ml(e,t={}){return D0(R7e.encode(e),t)}function B1(e,t){return gk(e,{dir:"left",size:t})}function Ai(e,t){return gk(e,{dir:"right",size:t})}function s0(e,t,n,r={}){let{strict:a}=r;Yj(e,t);let s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&eq(s,t,n),s}function a0(e){return Math.ceil((e.length-2)/2)}function Tk(e){return tq(e,{dir:"left"})}function vk(e,t={}){let{signed:n}=t;t.size&&dl(e,t.size);let r=BigInt(e);if(!n)return r;let a=(e.length-2)/2,s=(1n<<BigInt(a)*8n)-1n,o=s>>1n;return r<=o?r:r-s-1n}function vh(e,t={}){let{signed:n,size:r}=t;return Number(!n&&!r?e:vk(e,t))}function qb(e,t={}){let{strict:n=!1}=t;try{return D7e(e,{strict:n}),!0}catch{return!1}}var R7e,$7e,jb,Th,Sh,hh,Fb,xh,cr=I(()=>{Ya();hk();zb();R7e=new TextEncoder,$7e=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));jb=class extends Le{constructor({max:t,min:n,signed:r,size:a,value:s}){super(`Number \`${s}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Th=class extends Le{constructor(t){super(`Value \`${typeof t=="object"?l6(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Sh=class extends Le{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},hh=class extends Le{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},Fb=class extends Le{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},xh=class extends Le{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}});function dq(e){return{address:e.address,amount:yn(e.amount),index:yn(e.index),validatorIndex:yn(e.validatorIndex)}}var fq=I(()=>{cr()});function _h(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:yn(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:yn(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:yn(e.gasLimit)},...typeof e.number=="bigint"&&{number:yn(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:yn(e.prevRandao)},...typeof e.time=="bigint"&&{time:yn(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(dq)}}}var Sk=I(()=>{cr();fq()});var p6,Eh,pq,kh,mq,Ak,_k,Ek,Gb,Xe,U1=I(()=>{p6=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Eh=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],pq=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],kh=[...pq,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],mq=[...pq,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],Ak=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],_k=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Ek=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],Gb=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Xe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}]});var bq,yq=I(()=>{bq="0x82ad56cb"});var Ih,gq,hq,bl,Vb=I(()=>{Ih="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",gq="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",hq="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",bl="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033"});var m5,Ch,Ph,Wb,b5,Zb=I(()=>{yt();m5=class extends z{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Ch=class extends z{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} \u2013 ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} \u2013 ${t.name}`],name:"ChainMismatchError"})}},Ph=class extends z{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},Wb=class extends z{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},b5=class extends z{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function _i(e){let{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;let a=t.find(o=>"type"in o&&o.type==="constructor");if(!a)throw new j3({docsPath:kk});if(!("inputs"in a))throw new ib({docsPath:kk});if(!a.inputs||a.inputs.length===0)throw new ib({docsPath:kk});let s=Zt(a.inputs,n);return T0([r,s])}var kk,Kb=I(()=>{w0();F0();Uo();kk="/docs/contract/encodeDeployData"});function no({blockNumber:e,chain:t,contract:n}){let r=t?.contracts?.[n];if(!r)throw new m5({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new m5({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}var y5=I(()=>{Zb()});function Rh(e,{docsPath:t,...n}){let r=(()=>{let a=a6(e,n);return a instanceof Ys?e:a})();return new bf(r,{docsPath:t,...n})}var Ik=I(()=>{Wc();r6();Db()});function yl(){let e=()=>{},t=()=>{};return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}var $h=I(()=>{});function Dh({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:a}){let s=async()=>{let l=u();o();let p=l.map(({args:y})=>y);p.length!==0&&e(p).then(y=>{a&&Array.isArray(y)&&y.sort(a);for(let m=0;m<l.length;m++){let{resolve:g}=l[m];g?.([y[m],y])}}).catch(y=>{for(let m=0;m<l.length;m++){let{reject:g}=l[m];g?.(y)}})},o=()=>Ck.delete(t),i=()=>u().map(({args:l})=>l),u=()=>Ck.get(t)||[],d=l=>Ck.set(t,[...u(),l]);return{flush:o,async schedule(l){let{promise:p,resolve:y,reject:m}=yl();return n?.([...i(),l])&&s(),u().length>0?(d({args:l,resolve:y,reject:m}),p):(d({args:l,resolve:y,reject:m}),setTimeout(s,r),p)}}}var Ck,Pk=I(()=>{$h();Ck=new Map});var Mh,Oh,Nh,xq=I(()=>{Dr();yt();$9();Mh=class extends z{constructor({callbackSelector:t,cause:n,data:r,extraData:a,sender:s,urls:o}){super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],n.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(i=>`    ${e5(i)}`)],`  Sender: ${s}`,`  Data: ${r}`,`  Callback selector: ${t}`,`  Extra data: ${a}`].flat(),name:"OffchainLookupError"})}},Oh=class extends z{constructor({result:t,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${e5(n)}`,`Response: ${Kt(t)}`],name:"OffchainLookupResponseMalformedError"})}},Nh=class extends z{constructor({sender:t,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}});function wq(e){let{abi:t,data:n}=e,r=Wa(n,0,4),a=t.find(s=>s.type==="function"&&r===Za(Y0(s)));if(!a)throw new K3(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?ca(a.inputs,Wa(n,4)):void 0}}var vq=I(()=>{w0();A1();Ju();ff();y1()});function $k(e){let{abi:t,errorName:n,args:r}=e,a=t[0];if(n){let u=Ka({abi:t,args:r,name:n});if(!u)throw new cb(n,{docsPath:Rk});a=u}if(a.type!=="error")throw new cb(void 0,{docsPath:Rk});let s=Y0(a),o=Za(s),i="0x";if(r&&r.length>0){if(!a.inputs)throw new V3(a.name,{docsPath:Rk});i=Zt(a.inputs,r)}return T0([o,i])}var Rk,Tq=I(()=>{w0();F0();Ju();Uo();y1();Gc();Rk="/docs/contract/encodeErrorResult"});function Sq(e){let{abi:t,functionName:n,result:r}=e,a=t[0];if(n){let o=Ka({abi:t,name:n});if(!o)throw new Do(n,{docsPath:Dk});a=o}if(a.type!=="function")throw new Do(void 0,{docsPath:Dk});if(!a.outputs)throw new ef(a.name,{docsPath:Dk});let s=(()=>{if(a.outputs.length===0)return[];if(a.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new nf(r)})();return Zt(a.outputs,s)}var Dk,Aq=I(()=>{w0();Uo();Gc();Dk="/docs/contract/encodeFunctionResult"});async function Mk(e){let{data:t,ccipRequest:n}=e,{args:[r]}=wq({abi:Eh,data:t}),a=[],s=[];return await Promise.all(r.map(async(o,i)=>{try{s[i]=o.urls.includes(H1)?await Mk({data:o.data,ccipRequest:n}):await n(o),a[i]=!1}catch(u){a[i]=!0,s[i]=O7e(u)}})),Sq({abi:Eh,functionName:"query",result:[a,s]})}function O7e(e){return e.name==="HttpRequestError"&&e.status?$k({abi:Eh,errorName:"HttpError",args:[e.status,e.shortMessage]}):$k({abi:[g9],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}var H1,Xb=I(()=>{U1();h9();vq();Tq();Aq();H1="x-batch-gateway:true"});var kq={};ni(kq,{ccipRequest:()=>Eq,offchainLookup:()=>L7e,offchainLookupAbiItem:()=>_q,offchainLookupSignature:()=>N7e});async function L7e(e,{blockNumber:t,blockTag:n,data:r,to:a}){let{args:s}=v9({data:r,abi:[_q]}),[o,i,u,d,l]=s,{ccipRead:p}=e,y=p&&typeof p?.request=="function"?p.request:Eq;try{if(!Tr(a,o))throw new Nh({sender:o,to:a});let m=i.includes(H1)?await Mk({data:u,ccipRequest:y}):await y({data:u,sender:o,urls:i}),{data:g}=await Ei(e,{blockNumber:t,blockTag:n,data:Ae([d,Zt([{type:"bytes"},{type:"bytes"}],[m,l])]),to:a});return g}catch(m){throw new Mh({callbackSelector:d,cause:m,data:r,extraData:l,sender:o,urls:i})}}async function Eq({data:e,sender:t,urls:n}){let r=new Error("An unknown error occurred.");for(let a=0;a<n.length;a++){let s=n[a],o=s.includes("{data}")?"GET":"POST",i=o==="POST"?{data:e,sender:t}:void 0,u=o==="POST"?{"Content-Type":"application/json"}:{};try{let d=await fetch(s.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(i),headers:u,method:o}),l;if(d.headers.get("Content-Type")?.startsWith("application/json")?l=(await d.json()).data:l=await d.text(),!d.ok){r=new Xs({body:i,details:l?.error?Kt(l.error):d.statusText,headers:d.headers,status:d.status,url:s});continue}if(!mn(l)){r=new Oh({result:l,url:s});continue}return l}catch(d){r=new Xs({body:i,details:d.message,url:s})}}throw r}var N7e,_q,Iq=I(()=>{gl();xq();n5();TE();Uo();c6();F0();Ts();Xb();Dr();N7e="0x556f1830",_q={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function Ei(e,t){let{account:n=e.account,authorizationList:r,batch:a=!!e.batch?.multicall,blockNumber:s,blockTag:o=e.experimental_blockTag??"latest",accessList:i,blobs:u,blockOverrides:d,code:l,data:p,factory:y,factoryData:m,gas:g,gasPrice:h,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:A,to:_,value:E,stateOverride:O,...$}=t,B=n?at(n):void 0;if(l&&(y||m))throw new z("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&_)throw new z("Cannot provide both `code` & `to` as parameters.");let V=l&&p,D=y&&m&&_&&p,G=V||D,N=V?Cq({code:l,data:p}):D?H7e({data:p,factory:y,factoryData:m,to:_}):p;try{ir(t);let me=(typeof s=="bigint"?F(s):void 0)||o,j=d?_h(d):void 0,Z=Xf(O),de=e.chain?.formatters?.transactionRequest?.format,be=(de||Nr)({...eo($,{format:de}),accessList:i,account:B,authorizationList:r,blobs:u,data:N,gas:g,gasPrice:h,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:A,to:G?void 0:_,value:E},"call");if(a&&B7e({request:be})&&!Z&&!j)try{return await U7e(e,{...be,blockNumber:s,blockTag:o})}catch(rn){if(!(rn instanceof Wb)&&!(rn instanceof m5))throw rn}let ze=(()=>{let rn=[be,me];return Z&&j?[...rn,Z,j]:Z?[...rn,Z]:j?[...rn,{},j]:rn})(),pt=await e.request({method:"eth_call",params:ze});return pt==="0x"?{data:void 0}:{data:pt}}catch(W){let me=F7e(W),{offchainLookup:j,offchainLookupSignature:Z}=await Promise.resolve().then(()=>(Iq(),kq));if(e.ccipRead!==!1&&me?.slice(0,10)===Z&&_)return{data:await j(e,{data:me,to:_})};throw G&&me?.slice(0,10)==="0x101bb98d"?new M9({factory:y}):Rh(W,{...t,account:B,chain:e.chain})}}function B7e({request:e}){let{data:t,to:n,...r}=e;return!(!t||t.startsWith(bq)||!n||Object.values(r).filter(a=>typeof a<"u").length>0)}async function U7e(e,t){let{batchSize:n=1024,deployless:r=!1,wait:a=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o=e.experimental_blockTag??"latest",data:i,to:u}=t,d=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return no({blockNumber:s,chain:e.chain,contract:"multicall3"});throw new Wb})(),p=(typeof s=="bigint"?F(s):void 0)||o,{schedule:y}=Dh({id:`${e.uid}.${p}`,wait:a,shouldSplitBatch(h){return h.reduce((v,{data:T})=>v+(T.length-2),0)>n*2},fn:async h=>{let w=h.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),v=X({abi:p6,args:[w],functionName:"aggregate3"}),T=await e.request({method:"eth_call",params:[{...d===null?{data:Cq({code:bl,data:v})}:{to:d,data:v}},p]});return Qa({abi:p6,args:[w],functionName:"aggregate3",data:T||"0x"})}}),[{returnData:m,success:g}]=await y({data:i,to:u});if(!g)throw new hi({data:m});return m==="0x"?{data:void 0}:{data:m}}function Cq(e){let{code:t,data:n}=e;return _i({abi:ju(["constructor(bytes, bytes)"]),bytecode:Ih,args:[t,n]})}function H7e(e){let{data:t,factory:n,factoryData:r,to:a}=e;return _i({abi:ju(["constructor(address, bytes, address, bytes)"]),bytecode:gq,args:[a,t,n,r]})}function F7e(e){if(!(e instanceof z))return;let t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}var gl=I(()=>{Gu();Sk();r0();U1();yq();Vb();yt();Zb();Wc();d6();Kb();Xa();y5();Ve();Ik();f5();D1();Pk();X9();vi()});async function se(e,t){let{abi:n,address:r,args:a,functionName:s,...o}=t,i=X({abi:n,args:a,functionName:s});try{let{data:u}=await ce(e,Ei,"call")({...o,data:i,to:r});return Qa({abi:n,args:a,functionName:s,data:u||"0x"})}catch(u){throw As(u,{abi:n,address:r,args:a,docsPath:"/docs/contract/readContract",functionName:s})}}var ks=I(()=>{d6();Xa();s5();sn();gl()});async function Fe(e,t){let{abi:n,address:r,args:a,dataSuffix:s,functionName:o,...i}=t,u=i.account?at(i.account):e.account,d=X({abi:n,args:a,functionName:o});try{let{data:l}=await ce(e,Ei,"call")({batch:!1,data:`${d}${s?s.replace("0x",""):""}`,to:r,...i,account:u}),p=Qa({abi:n,args:a,functionName:o,data:l||"0x"}),y=n.filter(m=>"name"in m&&m.name===t.functionName);return{result:p,request:{abi:y,address:r,args:a,dataSuffix:s,functionName:o,...i,account:u}}}catch(l){throw As(l,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:o,sender:u?.address})}}var Lh=I(()=>{r0();d6();Xa();s5();sn();gl()});function Ur(e,t,n){let r=++z7e,a=()=>Ok.get(e)||[],s=()=>{let l=a();Ok.set(e,l.filter(p=>p.id!==r))},o=()=>{let l=a();if(!l.some(y=>y.id===r))return;let p=Pq.get(e);if(l.length===1&&p){let y=p();y instanceof Promise&&y.catch(()=>{})}s()},i=a();if(Ok.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return o;let u={};for(let l in t)u[l]=((...p)=>{let y=a();if(y.length!==0)for(let m of y)m.fns[l]?.(...p)});let d=n(u);return typeof d=="function"&&Pq.set(e,d),o}var Ok,Pq,z7e,m6=I(()=>{Ok=new Map,Pq=new Map,z7e=0});async function Jb(e){return new Promise(t=>setTimeout(t,e))}var Nk=I(()=>{});function ro(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let a=!0,s=()=>a=!1;return(async()=>{let i;t&&(i=await e({unpoll:s}));let u=await n?.(i)??r;await Jb(u);let d=async()=>{a&&(await e({unpoll:s}),await Jb(r),d())};d()})(),s}var g5=I(()=>{Nk()});function Rq(e){let t=(a,s)=>({clear:()=>s.delete(a),get:()=>s.get(a),set:o=>s.set(a,o)}),n=t(e,j7e),r=t(e,q7e);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function $q(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){let r=Rq(t),a=r.response.get();if(a&&n>0&&Date.now()-a.created.getTime()<n)return a.data;let s=r.promise.get();s||(s=e(),r.promise.set(s));try{let o=await s;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}var j7e,q7e,Dq=I(()=>{j7e=new Map,q7e=new Map});async function ki(e,{cacheTime:t=e.cacheTime}={}){let n=await $q(()=>e.request({method:"eth_blockNumber"}),{cacheKey:G7e(e.uid),cacheTime:t});return BigInt(n)}var G7e,hl=I(()=>{Dq();G7e=e=>`blockNumber.${e}`});async function b6(e,{filter:t}){let n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;let a=r.map(s=>Br(s));return!("abi"in t)||!t.abi?a:zo({abi:t.abi,logs:a,strict:n})}var Qb=I(()=>{Ub();u6()});async function y6(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}var Yb=I(()=>{});function Bh(e,t){let{abi:n,address:r,args:a,batch:s=!0,eventName:o,fromBlock:i,onError:u,onLogs:d,poll:l,pollingInterval:p=e.pollingInterval,strict:y}=t;return(typeof l<"u"?l:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{let w=y??!1,v=Kt(["watchContractEvent",r,a,s,e.uid,o,p,w,i]);return Ur(v,{onLogs:d,onError:u},T=>{let A;i!==void 0&&(A=i-1n);let _,E=!1,O=ro(async()=>{if(!E){try{_=await ce(e,of,"createContractEventFilter")({abi:n,address:r,args:a,eventName:o,strict:w,fromBlock:i})}catch{}E=!0;return}try{let $;if(_)$=await ce(e,b6,"getFilterChanges")({filter:_});else{let B=await ce(e,ki,"getBlockNumber")({});A&&A<B?$=await ce(e,cl,"getContractEvents")({abi:n,address:r,args:a,eventName:o,fromBlock:A+1n,toBlock:B,strict:w}):$=[],A=B}if($.length===0)return;if(s)T.onLogs($);else for(let B of $)T.onLogs([B])}catch($){_&&$ instanceof Js&&(E=!1),T.onError?.($)}},{emitOnBegin:!0,interval:p});return async()=>{_&&await ce(e,y6,"uninstallFilter")({filter:_}),O()}})})():(()=>{let w=y??!1,v=Kt(["watchContractEvent",r,a,s,e.uid,o,p,w]),T=!0,A=()=>T=!1;return Ur(v,{onLogs:d,onError:u},_=>((async()=>{try{let E=(()=>{if(e.transport.type==="fallback"){let B=e.transport.transports.find(V=>V.config.type==="webSocket"||V.config.type==="ipc");return B?B.value:e.transport}return e.transport})(),O=o?yi({abi:n,eventName:o,args:a}):[],{unsubscribe:$}=await E.subscribe({params:["logs",{address:r,topics:O}],onData(B){if(!T)return;let V=B.result;try{let{eventName:D,args:G}=l5({abi:n,data:V.data,topics:V.topics,strict:y}),N=Br(V,{args:G,eventName:D});_.onLogs([N])}catch(D){let G,N;if(D instanceof g1||D instanceof Fc){if(y)return;G=D.abiItem.name,N=D.abiItem.inputs?.some(me=>!("name"in me&&me.name))}let W=Br(V,{args:N?[]:{},eventName:G});_.onLogs([W])}},onError(B){_.onError?.(B)}});A=$,T||A()}catch(E){u?.(E)}})(),()=>A()))})()}var Lk=I(()=>{w0();Of();ph();sf();u6();sn();m6();g5();Dr();y9();hl();bh();Qb();Yb()});var ur,ao,F1=I(()=>{yt();ur=class extends z{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},ao=class extends z{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}});function xl({chain:e,currentChainId:t}){if(!e)throw new Ph;if(t!==e.id)throw new Ch({chain:e,currentChainId:t})}var Uh=I(()=>{Zb()});async function wl(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var Hh=I(()=>{});async function g6(e,t){let{account:n=e.account,chain:r=e.chain,accessList:a,authorizationList:s,blobs:o,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,type:g,value:h,...w}=t;if(typeof n>"u")throw new ur({docsPath:"/docs/actions/wallet/sendTransaction"});let v=n?at(n):null;try{ir(t);let T=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await n6({authorization:s[0]}).catch(()=>{throw new z("`to` is required. Could not infer from `authorizationList`.")})})();if(v?.type==="json-rpc"||v===null){let A;r!==null&&(A=await ce(e,Lr,"getChainId")({}),xl({currentChainId:A,chain:r}));let _=e.chain?.formatters?.transactionRequest?.format,O=(_||Nr)({...eo(w,{format:_}),accessList:a,account:v,authorizationList:s,blobs:o,chainId:A,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,to:T,type:g,value:h},"sendTransaction"),$=Bk.get(e.uid),B=$?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:B,params:[O]},{retryCount:0})}catch(V){if($===!1)throw V;let D=V;if(D.name==="InvalidInputRpcError"||D.name==="InvalidParamsRpcError"||D.name==="MethodNotFoundRpcError"||D.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(G=>(Bk.set(e.uid,!0),G)).catch(G=>{let N=G;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(Bk.set(e.uid,!1),D):N});throw D}}if(v?.type==="local"){let A=await ce(e,Ti,"prepareTransactionRequest")({account:v,accessList:a,authorizationList:s,blobs:o,chain:r,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,nonceManager:v.nonceManager,parameters:[...Bb,"sidecars"],type:g,value:h,...w,to:T}),_=r?.serializers?.transaction,E=await v.signTransaction(A,{serializer:_});return await ce(e,wl,"sendRawTransaction")({serializedTransaction:E})}throw v?.type==="smart"?new ao({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ao({docsPath:"/docs/actions/wallet/sendTransaction",type:v?.type})}catch(T){throw T instanceof ao?T:i6(T,{...t,account:v,chain:t.chain||void 0})}}var Bk,e8=I(()=>{r0();F1();yt();$b();Uh();Lb();f5();D1();sn();qc();vi();N1();sl();Hh();Bk=new $r(128)});async function Mt(e,t){return Mt.internal(e,g6,"sendTransaction",t)}var t8=I(()=>{r0();F1();Xa();s5();sn();e8();(function(e){async function t(n,r,a,s){let{abi:o,account:i=n.account,address:u,args:d,dataSuffix:l,functionName:p,...y}=s;if(typeof i>"u")throw new ur({docsPath:"/docs/contract/writeContract"});let m=i?at(i):null,g=X({abi:o,args:d,functionName:p});try{return await ce(n,r,a)({data:`${g}${l?l.replace("0x",""):""}`,to:u,account:m,...y})}catch(h){throw As(h,{abi:o,address:u,args:d,docsPath:"/docs/contract/writeContract",functionName:p,sender:m?.address})}}e.internal=t})(Mt||(Mt={}))});function h5({abi:e,address:t,client:n}){let r=n,[a,s]=r?"public"in r&&"wallet"in r?[r.public,r.wallet]:"public"in r?[r.public,void 0]:"wallet"in r?[void 0,r.wallet]:[r,r]:[void 0,void 0],o=a!=null,i=s!=null,u={},d=!1,l=!1,p=!1;for(let y of e)if(y.type==="function"?y.stateMutability==="view"||y.stateMutability==="pure"?d=!0:l=!0:y.type==="event"&&(p=!0),d&&l&&p)break;return o&&(d&&(u.read=new Proxy({},{get(y,m){return(...g)=>{let{args:h,options:w}=Fh(g);return ce(a,se,"readContract")({abi:e,address:t,functionName:m,args:h,...w})}}})),l&&(u.simulate=new Proxy({},{get(y,m){return(...g)=>{let{args:h,options:w}=Fh(g);return ce(a,Fe,"simulateContract")({abi:e,address:t,functionName:m,args:h,...w})}}})),p&&(u.createEventFilter=new Proxy({},{get(y,m){return(...g)=>{let h=e.find(T=>T.type==="event"&&T.name===m),{args:w,options:v}=Uk(g,h);return ce(a,of,"createContractEventFilter")({abi:e,address:t,eventName:m,args:w,...v})}}}),u.getEvents=new Proxy({},{get(y,m){return(...g)=>{let h=e.find(T=>T.type==="event"&&T.name===m),{args:w,options:v}=Uk(g,h);return ce(a,cl,"getContractEvents")({abi:e,address:t,eventName:m,args:w,...v})}}}),u.watchEvent=new Proxy({},{get(y,m){return(...g)=>{let h=e.find(T=>T.type==="event"&&T.name===m),{args:w,options:v}=Uk(g,h);return ce(a,Bh,"watchContractEvent")({abi:e,address:t,eventName:m,args:w,...v})}}}))),i&&l&&(u.write=new Proxy({},{get(y,m){return(...g)=>{let{args:h,options:w}=Fh(g);return ce(s,Mt,"writeContract")({abi:e,address:t,functionName:m,args:h,...w})}}})),(o||i)&&l&&(u.estimateGas=new Proxy({},{get(y,m){return(...g)=>{let{args:h,options:w}=Fh(g);return ce(a??s,lh,"estimateContractGas")({abi:e,address:t,functionName:m,args:h,...w,account:w.account??s.account})}}})),u.address=t,u.abi=e,u}function Fh(e){let t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],r=(t?e[1]:e[0])??{};return{args:n,options:r}}function Uk(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(s=>s.indexed):e.length===2&&(n=!0);let r=n?e[0]:void 0,a=(n?e[1]:e[0])??{};return{args:r,options:a}}var Mq=I(()=>{sn();y9();pk();bh();ks();Lh();Lk();t8()});var zh,Oq=I(()=>{yt();zh=class extends z{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}});function x5(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((a,s)=>{let o=async({count:i=0}={})=>{let u=async({error:d})=>{let l=typeof t=="function"?t({count:i,error:d}):t;l&&await Jb(l),o({count:i+1})};try{let d=await e();a(d)}catch(d){if(i<n&&await r({count:i,error:d}))return u({error:d});s(d)}};o()})}var jh=I(()=>{Nk()});function qh(e,t){let n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Br(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Vn(e.transactionIndex):null,status:e.status?Hk[e.status]:null,type:e.type?rk[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}var Hk,Gh=I(()=>{tr();u6();Ob();Hk={"0x0":"reverted","0x1":"success"}});async function Vh(e,t){let{account:n=e.account,capabilities:r,chain:a=e.chain,experimental_fallback:s,experimental_fallbackDelay:o=32,forceAtomic:i=!1,id:u,version:d="2.0.0"}=t,l=n?at(n):null,p=t.calls.map(y=>{let m=y,g=m.abi?X({abi:m.abi,functionName:m.functionName,args:m.args}):m.data;return{data:m.dataSuffix&&g?Ae([g,m.dataSuffix]):g,to:m.to,value:m.value?F(m.value):void 0}});try{let y=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:i,calls:p,capabilities:r,chainId:F(a.id),from:l?.address,id:u,version:d}]},{retryCount:0});return typeof y=="string"?{id:y}:y}catch(y){let m=y;if(s&&(m.name==="MethodNotFoundRpcError"||m.name==="MethodNotSupportedRpcError"||m.name==="UnknownRpcError"||m.details.toLowerCase().includes("does not exist / is not available")||m.details.toLowerCase().includes("missing or invalid. request()")||m.details.toLowerCase().includes("did not match any variant of untagged enum")||m.details.toLowerCase().includes("account upgraded to unsupported contract")||m.details.toLowerCase().includes("eip-7702 not supported")||m.details.toLowerCase().includes("unsupported wc_ method")||m.details.toLowerCase().includes("feature toggled misconfigured")||m.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(r&&Object.values(r).some(T=>!T.optional)){let T="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Xc(new z(T,{details:T}))}if(i&&p.length>1){let v="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Jc(new z(v,{details:v}))}let g=[];for(let v of p){let T=g6(e,{account:l,chain:a,data:v.data,to:v.to,value:v.value?n0(v.value):void 0});g.push(T),o>0&&await new Promise(A=>setTimeout(A,o))}let h=await Promise.allSettled(g);if(h.every(v=>v.status==="rejected"))throw h[0].reason;let w=h.map(v=>v.status==="fulfilled"?v.value:zk);return{id:Ae([...w,F(a.id,{size:32}),Fk])}}throw i6(y,{...t,account:l,chain:t.chain})}}var Fk,zk,Wh=I(()=>{r0();yt();Of();Xa();F0();tr();Ve();Lb();e8();Fk="0x5792579257925792579257925792579257925792579257925792579257925792",zk=F(0,{size:32})});async function Zh(e,t){async function n(l){if(l.endsWith(Fk.slice(2))){let y=er(l9(l,-64,-32)),m=l9(l,0,-64).slice(2).match(/.{1,64}/g),g=await Promise.all(m.map(w=>zk.slice(2)!==w?e.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),h=g.some(w=>w===null)?100:g.every(w=>w?.status==="0x1")?200:g.every(w=>w?.status==="0x0")?500:600;return{atomic:!1,chainId:Vn(y),receipts:g.filter(Boolean),status:h,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[l]})}let{atomic:r=!1,chainId:a,receipts:s,version:o="2.0.0",...i}=await n(t.id),[u,d]=(()=>{let l=i.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...i,atomic:r,chainId:a?Vn(a):void 0,receipts:s?.map(l=>({...l,blockNumber:n0(l.blockNumber),gasUsed:n0(l.gasUsed),status:Hk[l.status]}))??[],statusCode:d,status:u,version:o}}var jk=I(()=>{A1();Vu();tr();Gh();Wh()});async function Kh(e,t){let{id:n,pollingInterval:r=e.pollingInterval,status:a=({statusCode:h})=>h===200||h>=300,retryCount:s=4,retryDelay:o=({count:h})=>~~(1<<h)*200,timeout:i=6e4,throwOnFailure:u=!1}=t,d=Kt(["waitForCallsStatus",e.uid,n]),{promise:l,resolve:p,reject:y}=yl(),m,g=Ur(d,{resolve:p,reject:y},h=>{let w=ro(async()=>{let v=T=>{clearTimeout(m),w(),T(),g()};try{let T=await x5(async()=>{let A=await ce(e,Zh,"getCallsStatus")({id:n});if(u&&A.status==="failure")throw new zh(A);return A},{retryCount:s,delay:o});if(!a(T))return;v(()=>h.resolve(T))}catch(T){v(()=>h.reject(T))}},{interval:r,emitOnBegin:!0});return w});return m=i?setTimeout(()=>{g(),clearTimeout(m),y(new qk({id:n}))},i):void 0,await l}var qk,Gk=I(()=>{yt();Oq();sn();m6();g5();$h();jh();Dr();jk();qk=class extends z{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}});function Qh(e=11){if(!Jh||Xh+e>256*2){Jh="",Xh=0;for(let t=0;t<256;t++)Jh+=(256+Math.random()*256|0).toString(16).substring(1)}return Jh.substring(Xh,Xh+++e)}var Xh,Jh,Vk=I(()=>{Xh=256});function Yh(e){let{batch:t,chain:n,ccipRead:r,key:a="base",name:s="Base Client",type:o="base"}=e,i=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),u=n?.blockTime??12e3,d=Math.min(Math.max(Math.floor(u/2),500),4e3),l=e.pollingInterval??d,p=e.cacheTime??l,y=e.account?at(e.account):void 0,{config:m,request:g,value:h}=e.transport({account:y,chain:n,pollingInterval:l}),w={...m,...h},v={account:y,batch:t,cacheTime:p,ccipRead:r,chain:n,key:a,name:s,pollingInterval:l,request:g,transport:w,type:o,uid:Qh(),...i?{experimental_blockTag:i}:{}};function T(A){return _=>{let E=_(A);for(let $ in v)delete E[$];let O={...A,...E};return Object.assign(O,{extend:T(O)})}}return Object.assign(v,{extend:T(v)})}var Wk=I(()=>{r0();Vk()});function vl(e){if(!(e instanceof z))return!1;let t=e.walk(n=>n instanceof t5);return t instanceof t5?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}var e4=I(()=>{yt();Wc()});function t4(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;let t=`0x${e.slice(1,65)}`;return mn(t)?t:null}var Zk=I(()=>{Ts()});function n8(e){let t=new Uint8Array(32).fill(0);if(!e)return tn(t);let n=e.split(".");for(let r=n.length-1;r>=0;r-=1){let a=t4(n[r]),s=a?H0(a):Ke(Zs(n[r]),"bytes");t=Ke(Ae([t,s]),"bytes")}return tn(t)}var Kk=I(()=>{F0();v0();Ve();Ga();Zk()});function Nq(e){return`[${e.slice(2)}]`}var Lq=I(()=>{});function Bq(e){let t=new Uint8Array(32).fill(0);return e?t4(e)||Ke(Zs(e)):tn(t)}var Uq=I(()=>{v0();Ve();Ga();Zk()});function Tl(e){let t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let n=new Uint8Array(Zs(t).byteLength+2),r=0,a=t.split(".");for(let s=0;s<a.length;s++){let o=Zs(a[s]);o.byteLength>255&&(o=Zs(Nq(Bq(a[s])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}var n4=I(()=>{v0();Lq();Uq()});async function Hq(e,t){let{blockNumber:n,blockTag:r,coinType:a,name:s,gatewayUrls:o,strict:i}=t,{chain:u}=e,d=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return no({blockNumber:n,chain:u,contract:"ensUniversalResolver"})})(),l=u?.ensTlds;if(l&&!l.some(y=>s.endsWith(y)))return null;let p=a!=null?[n8(s),BigInt(a)]:[n8(s)];try{let y=X({abi:_k,functionName:"addr",args:p}),m={address:d,abi:kh,functionName:"resolveWithGateways",args:[ge(Tl(s)),y,o??[H1]],blockNumber:n,blockTag:r},h=await ce(e,se,"readContract")(m);if(h[0]==="0x")return null;let w=Qa({abi:_k,args:p,functionName:"addr",data:h[0]});return w==="0x"||er(w)==="0x00"?null:w}catch(y){if(i)throw y;if(vl(y))return null;throw y}}var Fq=I(()=>{U1();d6();Xa();y5();Vu();Ve();e4();Xb();Kk();n4();sn();ks()});var r4,h6,Sl,a4,zq=I(()=>{yt();r4=class extends z{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},h6=class extends z{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},Sl=class extends z{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},a4=class extends z{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}});async function X7e(e){try{let t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{let r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function jq(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Xk({uri:e,gatewayUrls:t}){let n=Z7e.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};let r=jq(t?.ipfs,"https://ipfs.io"),a=jq(t?.arweave,"https://arweave.net"),s=e.match(V7e),{protocol:o,subpath:i,target:u,subtarget:d=""}=s?.groups||{},l=o==="ipns:/"||i==="ipns/",p=o==="ipfs:/"||i==="ipfs/"||W7e.test(e);if(e.startsWith("http")&&!l&&!p){let m=e;return t?.arweave&&(m=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:m,isOnChain:!1,isEncoded:!1}}if((l||p)&&u)return{uri:`${r}/${l?"ipns":"ipfs"}/${u}${d}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&u)return{uri:`${a}/${u}${d||""}`,isOnChain:!1,isEncoded:!1};let y=e.replace(K7e,"");if(y.startsWith("<svg")&&(y=`data:image/svg+xml;base64,${btoa(y)}`),y.startsWith("data:")||y.startsWith("{"))return{uri:y,isOnChain:!0,isEncoded:!1};throw new Sl({uri:e})}function Jk(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new r4({data:e});return e.image||e.image_url||e.image_data}async function qq({gatewayUrls:e,uri:t}){try{let n=await fetch(t).then(a=>a.json());return await s4({gatewayUrls:e,uri:Jk(n)})}catch{throw new Sl({uri:t})}}async function s4({gatewayUrls:e,uri:t}){let{uri:n,isOnChain:r}=Xk({uri:t,gatewayUrls:e});if(r||await X7e(n))return n;throw new Sl({uri:t})}function Gq(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[n,r,a]=t.split("/"),[s,o]=n.split(":"),[i,u]=r.split(":");if(!s||s.toLowerCase()!=="eip155")throw new h6({reason:"Only EIP-155 supported"});if(!o)throw new h6({reason:"Chain ID not found"});if(!u)throw new h6({reason:"Contract address not found"});if(!a)throw new h6({reason:"Token ID not found"});if(!i)throw new h6({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:i.toLowerCase(),contractAddress:u,tokenID:a}}async function Vq(e,{nft:t}){if(t.namespace==="erc721")return se(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return se(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new a4({namespace:t.namespace})}var V7e,W7e,Z7e,K7e,Wq=I(()=>{ks();zq();V7e=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,W7e=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Z7e=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,K7e=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/});async function Zq(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?J7e(e,{gatewayUrls:t,record:n}):s4({uri:n,gatewayUrls:t})}async function J7e(e,{gatewayUrls:t,record:n}){let r=Gq(n),a=await Vq(e,{nft:r}),{uri:s,isOnChain:o,isEncoded:i}=Xk({uri:a,gatewayUrls:t});if(o&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let d=i?atob(s.replace("data:application/json;base64,","")):s,l=JSON.parse(d);return s4({uri:Jk(l),gatewayUrls:t})}let u=r.tokenID;return r.namespace==="erc1155"&&(u=u.replace("0x","").padStart(64,"0")),qq({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,u)})}var Kq=I(()=>{Wq()});async function o4(e,t){let{blockNumber:n,blockTag:r,key:a,name:s,gatewayUrls:o,strict:i}=t,{chain:u}=e,d=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return no({blockNumber:n,chain:u,contract:"ensUniversalResolver"})})(),l=u?.ensTlds;if(l&&!l.some(p=>s.endsWith(p)))return null;try{let p={address:d,abi:kh,args:[ge(Tl(s)),X({abi:Ak,functionName:"text",args:[n8(s),a]}),o??[H1]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},m=await ce(e,se,"readContract")(p);if(m[0]==="0x")return null;let g=Qa({abi:Ak,functionName:"text",data:m[0]});return g===""?null:g}catch(p){if(i)throw p;if(vl(p))return null;throw p}}var Qk=I(()=>{U1();d6();Xa();y5();Ve();e4();Xb();Kk();n4();sn();ks()});async function Xq(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:a,gatewayUrls:s,strict:o,universalResolverAddress:i}){let u=await ce(e,o4,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:a,universalResolverAddress:i,gatewayUrls:s,strict:o});if(!u)return null;try{return await Zq(e,{record:u,gatewayUrls:r})}catch{return null}}var Jq=I(()=>{Kq();sn();Qk()});async function Qq(e,t){let{address:n,blockNumber:r,blockTag:a,coinType:s=60n,gatewayUrls:o,strict:i}=t,{chain:u}=e,d=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return no({blockNumber:r,chain:u,contract:"ensUniversalResolver"})})();try{let l={address:d,abi:mq,args:[n,s,o??[H1]],functionName:"reverseWithGateways",blockNumber:r,blockTag:a},p=ce(e,se,"readContract"),[y]=await p(l);return y||null}catch(l){if(i)throw l;if(vl(l))return null;throw l}}var Yq=I(()=>{U1();y5();e4();Xb();sn();ks()});async function eG(e,t){let{blockNumber:n,blockTag:r,name:a}=t,{chain:s}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return no({blockNumber:n,chain:s,contract:"ensUniversalResolver"})})(),i=s?.ensTlds;if(i&&!i.some(d=>a.endsWith(d)))throw new Error(`${a} is not a valid ENS TLD (${i?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[u]=await ce(e,se,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[ge(Tl(a))],blockNumber:n,blockTag:r});return u}var tG=I(()=>{y5();Ve();n4();sn();ks()});async function i4(e,t){let{account:n=e.account,blockNumber:r,blockTag:a="latest",blobs:s,data:o,gas:i,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:p,to:y,value:m,...g}=t,h=n?at(n):void 0;try{ir(t);let v=(typeof r=="bigint"?F(r):void 0)||a,T=e.chain?.formatters?.transactionRequest?.format,_=(T||Nr)({...eo(g,{format:T}),account:h,blobs:s,data:o,gas:i,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:p,to:y,value:m},"createAccessList"),E=await e.request({method:"eth_createAccessList",params:[_,v]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(w){throw Rh(w,{...t,account:h,chain:e.chain})}}var Yk=I(()=>{r0();Ve();Ik();f5();D1();vi()});async function nG(e){let t=Vc(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}var rG=I(()=>{hb()});async function c4(e,{address:t,args:n,event:r,events:a,fromBlock:s,strict:o,toBlock:i}={}){let u=a??(r?[r]:void 0),d=Vc(e,{method:"eth_newFilter"}),l=[];u&&(l=[u.flatMap(m=>yi({abi:[m],eventName:m.name,args:n}))],r&&(l=l[0]));let p=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?F(s):s,toBlock:typeof i=="bigint"?F(i):i,...l.length?{topics:l}:{}}]});return{abi:u,args:n,eventName:r?r.name:void 0,fromBlock:s,id:p,request:d(p),strict:!!o,toBlock:i,type:"event"}}var eI=I(()=>{sf();Ve();hb()});async function u4(e){let t=Vc(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}var tI=I(()=>{hb()});async function aG(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){let a=typeof n=="bigint"?F(n):void 0,s=await e.request({method:"eth_getBalance",params:[t,a||r]});return BigInt(s)}var sG=I(()=>{Ve()});async function oG(e){let t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}var iG=I(()=>{});async function cG(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){let a=n!==void 0?F(n):void 0,s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[a||r]},{dedupe:!!a}),Vn(s)}var uG=I(()=>{tr();Ve()});async function Is(e,{address:t,blockNumber:n,blockTag:r="latest"}){let a=n!==void 0?F(n):void 0,s=await e.request({method:"eth_getCode",params:[t,a||r]},{dedupe:!!a});if(s!=="0x")return s}var r8=I(()=>{Ve()});var d4,dG=I(()=>{yt();d4=class extends z{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}});async function fG(e,t){let{address:n,factory:r,factoryData:a}=t;try{let[s,o,i,u,d,l,p]=await ce(e,se,"readContract")({abi:Q7e,address:n,functionName:"eip712Domain",factory:r,factoryData:a});return{domain:{name:o,version:i,chainId:Number(u),verifyingContract:d,salt:l},extensions:p,fields:s}}catch(s){let o=s;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new d4({address:n}):o}}var Q7e,lG=I(()=>{dG();sn();ks();Q7e=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}]});function pG(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}var mG=I(()=>{});async function bG(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:a}){let s=typeof n=="bigint"?F(n):void 0,o=await e.request({method:"eth_feeHistory",params:[F(t),s||r,a]},{dedupe:!!s});return pG(o)}var yG=I(()=>{Ve();mG()});async function gG(e,{filter:t}){let n=t.strict??!1,a=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>Br(s));return t.abi?zo({abi:t.abi,logs:a,strict:n}):a}var hG=I(()=>{Ub();u6()});function A0(e,t){if(e.length!==t.length)throw new Qd({expectedLength:e.length,givenLength:t.length});let n=[];for(let r=0;r<e.length;r++){let a=e[r],s=t[r];n.push(xG(a,s))}return T0(n)}function xG(e,t,n=!1){if(e==="address"){let o=t;if(!Se(o))throw new In({address:o});return It(o.toLowerCase(),{size:n?32:null})}if(e==="string")return qa(t);if(e==="bytes")return t;if(e==="bool")return It(Wu(t),{size:n?32:1});let r=e.match(af);if(r){let[o,i,u="256"]=r,d=Number.parseInt(u,10)/8;return F(t,{size:n?32:d,signed:i==="int"})}let a=e.match(p9);if(a){let[o,i]=a;if(Number.parseInt(i,10)!==(t.length-2)/2)throw new tf({expectedSize:Number.parseInt(i,10),givenSize:(t.length-2)/2});return It(t,{dir:"right",size:n?32:null})}let s=e.match(hz);if(s&&Array.isArray(t)){let[o,i]=s,u=[];for(let d=0;d<t.length;d++)u.push(xG(i,t[d],!0));return u.length===0?"0x":T0(u)}throw new Y3(e)}var wG=I(()=>{w0();Bo();Va();F0();h1();Ve();m9()});function nI(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}var vG=I(()=>{});function rI(e){return e.opcode==="CREATE2"?SG(e):TG(e)}function TG(e){let t=H0(xe(e.from)),n=H0(e.nonce);return n[0]===0&&(n=new Uint8Array([])),xe(`0x${Ke(Fo([t,n],"bytes")).slice(26)}`)}function SG(e){let t=H0(xe(e.from)),n=It(nI(e.salt)?e.salt:H0(e.salt),{size:32}),r="bytecodeHash"in e?nI(e.bytecodeHash)?e.bytecodeHash:H0(e.bytecodeHash):Ke(e.bytecode,"bytes");return xe(Wa(Ke(Ae([H0("0xff"),t,n,r])),12))}var AG=I(()=>{F0();vG();h1();A1();v0();W9();Ga();bi()});function _G(e){let{authorizationList:t}=e;if(t)for(let n of t){let{chainId:r}=n,a=n.address;if(!Se(a))throw new In({address:a});if(r<0)throw new b5({chainId:r})}f4(e)}function EG(e){let{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new rl;for(let n of t){let r=Wt(n),a=Vn(Wa(n,0,1));if(r!==32)throw new oh({hash:n,size:r});if(a!==1)throw new ih({hash:n,version:a})}}f4(e)}function f4(e){let{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:a}=e;if(t<=0)throw new b5({chainId:t});if(a&&!Se(a))throw new In({address:a});if(r&&r>M1)throw new Qs({maxFeePerGas:r});if(n&&r&&n>r)throw new wi({maxFeePerGas:r,maxPriorityFeePerGas:n})}function kG(e){let{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:a,to:s}=e;if(t<=0)throw new b5({chainId:t});if(s&&!Se(s))throw new In({address:s});if(n||a)throw new z("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>M1)throw new Qs({maxFeePerGas:r})}function IG(e){let{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:a,to:s}=e;if(s&&!Se(s))throw new In({address:s});if(typeof t<"u"&&t<=0)throw new b5({chainId:t});if(n||a)throw new z("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>M1)throw new Qs({maxFeePerGas:r})}var CG=I(()=>{J9();Bo();yt();uk();Zb();r6();Va();Ss();A1();tr()});function a8(e){if(!e||e.length===0)return[];let t=[];for(let n=0;n<e.length;n++){let{address:r,storageKeys:a}=e[n];for(let s=0;s<a.length;s++)if(a[s].length-2!==64)throw new C9({storageKey:a[s]});if(!Se(r,{strict:!1}))throw new In({address:r});t.push([r,a])}return t}var PG=I(()=>{Bo();Ks();Va()});function RG(e,t){let n=uh(e);return n==="eip1559"?twe(e,t):n==="eip2930"?nwe(e,t):n==="eip4844"?ewe(e,t):n==="eip7702"?Y7e(e,t):rwe(e,t)}function Y7e(e,t){let{authorizationList:n,chainId:r,gas:a,nonce:s,to:o,value:i,maxFeePerGas:u,maxPriorityFeePerGas:d,accessList:l,data:p}=e;_G(e);let y=a8(l),m=$G(n);return T0(["0x04",Fo([F(r),s?F(s):"0x",d?F(d):"0x",u?F(u):"0x",a?F(a):"0x",o??"0x",i?F(i):"0x",p??"0x",y,m,...Al(e,t)])])}function ewe(e,t){let{chainId:n,gas:r,nonce:a,to:s,value:o,maxFeePerBlobGas:i,maxFeePerGas:u,maxPriorityFeePerGas:d,accessList:l,data:p}=e;EG(e);let y=e.blobVersionedHashes,m=e.sidecars;if(e.blobs&&(typeof y>"u"||typeof m>"u")){let A=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(O=>tn(O)),_=e.kzg,E=tl({blobs:A,kzg:_});if(typeof y>"u"&&(y=ah({commitments:E})),typeof m>"u"){let O=nl({blobs:A,commitments:E,kzg:_});m=ch({blobs:A,commitments:E,proofs:O})}}let g=a8(l),h=[F(n),a?F(a):"0x",d?F(d):"0x",u?F(u):"0x",r?F(r):"0x",s??"0x",o?F(o):"0x",p??"0x",g,i?F(i):"0x",y??[],...Al(e,t)],w=[],v=[],T=[];if(m)for(let A=0;A<m.length;A++){let{blob:_,commitment:E,proof:O}=m[A];w.push(_),v.push(E),T.push(O)}return T0(["0x03",m?Fo([h,w,v,T]):Fo(h)])}function twe(e,t){let{chainId:n,gas:r,nonce:a,to:s,value:o,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:d,data:l}=e;f4(e);let p=a8(d),y=[F(n),a?F(a):"0x",u?F(u):"0x",i?F(i):"0x",r?F(r):"0x",s??"0x",o?F(o):"0x",l??"0x",p,...Al(e,t)];return T0(["0x02",Fo(y)])}function nwe(e,t){let{chainId:n,gas:r,data:a,nonce:s,to:o,value:i,accessList:u,gasPrice:d}=e;kG(e);let l=a8(u),p=[F(n),s?F(s):"0x",d?F(d):"0x",r?F(r):"0x",o??"0x",i?F(i):"0x",a??"0x",l,...Al(e,t)];return T0(["0x01",Fo(p)])}function rwe(e,t){let{chainId:n=0,gas:r,data:a,nonce:s,to:o,value:i,gasPrice:u}=e;IG(e);let d=[s?F(s):"0x",u?F(u):"0x",r?F(r):"0x",o??"0x",i?F(i):"0x",a??"0x"];if(t){let l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);let m=27n+(t.v===27n?0n:1n);if(t.v!==m)throw new k9({v:t.v});return m})(),p=er(t.r),y=er(t.s);d=[...d,F(l),p==="0x00"?"0x":p,y==="0x00"?"0x":y]}else n>0&&(d=[...d,F(n),"0x","0x"]);return Fo(d)}function Al(e,t){let n=t??e,{v:r,yParity:a}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof a>"u")return[];let s=er(n.r),o=er(n.s);return[typeof a=="number"?a?F(1):"0x":r===0n?"0x":r===1n?F(1):r===27n?"0x":F(1),s==="0x00"?"0x":s,o==="0x00"?"0x":o]}var aI=I(()=>{Ks();DG();nh();rh();ck();dk();F0();Vu();Ve();W9();CG();fk();PG()});function $G(e){if(!e||e.length===0)return[];let t=[];for(let n of e){let{chainId:r,nonce:a,...s}=n,o=n.address;t.push([r?ge(r):"0x",o,a?ge(a):"0x",...Al({},s)])}return t}var DG=I(()=>{Ve();aI()});async function MG({address:e,authorization:t,signature:n}){return Tr(xe(e),await n6({authorization:t,signature:n}))}var OG=I(()=>{bi();c6();$b()});function NG(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(l4.get(n))return l4.get(n);let r=e().finally(()=>l4.delete(n));return l4.set(n,r),r}var l4,LG=I(()=>{qc();l4=new $r(8192)});function BG(e,t={}){return async(n,r={})=>{let{dedupe:a=!1,methods:s,retryDelay:o=150,retryCount:i=3,uid:u}={...t,...r},{method:d}=n;if(s?.exclude?.includes(d))throw new Kc(new Error("method not supported"),{method:d});if(s?.include&&!s.include.includes(d))throw new Kc(new Error("method not supported"),{method:d});let l=a?qa(`${u}.${Kt(n)}`):void 0;return NG(()=>x5(async()=>{try{return await e(n)}catch(p){let y=p;switch(y.code){case gf.code:throw new gf(y);case hf.code:throw new hf(y);case xf.code:throw new xf(y,{method:n.method});case wf.code:throw new wf(y);case _1.code:throw new _1(y);case Js.code:throw new Js(y);case vf.code:throw new vf(y);case Tf.code:throw new Tf(y);case Sf.code:throw new Sf(y);case Kc.code:throw new Kc(y,{method:n.method});case r5.code:throw new r5(y);case Af.code:throw new Af(y);case a5.code:throw new a5(y);case _f.code:throw new _f(y);case Ef.code:throw new Ef(y);case kf.code:throw new kf(y);case If.code:throw new If(y);case Cf.code:throw new Cf(y);case Xc.code:throw new Xc(y);case Pf.code:throw new Pf(y);case Rf.code:throw new Rf(y);case $f.code:throw new $f(y);case Df.code:throw new Df(y);case Mf.code:throw new Mf(y);case Jc.code:throw new Jc(y);case 5e3:throw new a5(y);default:throw p instanceof z?p:new O9(y)}}},{delay:({count:p,error:y})=>{if(y&&y instanceof Xs){let m=y?.headers?.get("Retry-After");if(m?.match(/\d/))return Number.parseInt(m,10)*1e3}return~~(1<<p)*o},retryCount:i,shouldRetry:({error:p})=>awe(p)}),{enabled:a,id:l})}}function awe(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===r5.code||e.code===_1.code:e instanceof Xs&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}var UG=I(()=>{yt();n5();Of();Ve();LG();jh();Dr()});function sI(e){let t={formatters:void 0,fees:void 0,serializers:void 0,...e};function n(r){return a=>{let s=typeof a=="function"?a(r):a,o={...r,...s};return Object.assign(o,{extend:n(o)})}}return Object.assign(t,{extend:n(t)})}var HG=I(()=>{});function oI(e){let{source:t}=e,n=new Map,r=new $r(8192),a=new Map,s=({address:o,chainId:i})=>`${o}.${i}`;return{async consume({address:o,chainId:i,client:u}){let d=s({address:o,chainId:i}),l=this.get({address:o,chainId:i,client:u});this.increment({address:o,chainId:i});let p=await l;return await t.set({address:o,chainId:i},p),r.set(d,p),p},async increment({address:o,chainId:i}){let u=s({address:o,chainId:i}),d=n.get(u)??0;n.set(u,d+1)},async get({address:o,chainId:i,client:u}){let d=s({address:o,chainId:i}),l=a.get(d);return l||(l=(async()=>{try{let y=await t.get({address:o,chainId:i,client:u}),m=r.get(d)??0;return m>0&&y<=m?m+1:(r.delete(d),y)}finally{this.reset({address:o,chainId:i})}})(),a.set(d,l)),(n.get(d)??0)+await l},reset({address:o,chainId:i}){let u=s({address:o,chainId:i});n.delete(u),a.delete(u)}}}function swe(){return{async get(e){let{address:t,client:n}=e;return o6(n,{address:t,blockTag:"pending"})},set(){}}}var ydt,FG=I(()=>{Nb();qc();ydt=oI({source:swe()})});function zG(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((a,s)=>{(async()=>{let o;try{let i=new AbortController;n>0&&(o=setTimeout(()=>{r?i.abort():s(t)},n)),a(await e({signal:i?.signal||null}))}catch(i){i?.name==="AbortError"&&s(t),s(i)}finally{clearTimeout(o)}})()})}var jG=I(()=>{});function owe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var iI,qG=I(()=>{iI=owe()});function GG(e,t={}){return{async request(n){let{body:r,fetchFn:a=t.fetchFn??fetch,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:i=t.timeout??1e4}=n,u={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:d,method:l,signal:p}=u;try{let y=await zG(async({signal:g})=>{let h={...u,body:Array.isArray(r)?Kt(r.map(A=>({jsonrpc:"2.0",id:A.id??iI.take(),...A}))):Kt({jsonrpc:"2.0",id:r.id??iI.take(),...r}),headers:{"Content-Type":"application/json",...d},method:l||"POST",signal:p||(i>0?g:null)},w=new Request(e,h),v=await s?.(w,h)??{...h,url:e};return await a(v.url??e,v)},{errorInstance:new Tb({body:r,url:e}),timeout:i,signal:!0});o&&await o(y);let m;if(y.headers.get("Content-Type")?.startsWith("application/json"))m=await y.json();else{m=await y.text();try{m=JSON.parse(m||"{}")}catch(g){if(y.ok)throw g;m={error:m}}}if(!y.ok)throw new Xs({body:r,details:Kt(m.error)||y.statusText,headers:y.headers,status:y.status,url:e});return m}catch(y){throw y instanceof Xs||y instanceof Tb?y:new Xs({body:r,cause:y,url:e})}}}}var VG=I(()=>{n5();jG();Dr();qG()});var WG,ZG=I(()=>{WG=`Ethereum Signed Message:
`});function KG(e){let t=typeof e=="string"?qa(e):typeof e.raw=="string"?e.raw:tn(e.raw),n=qa(`${WG}${Wt(t)}`);return Ae([n,t])}var XG=I(()=>{ZG();F0();Ss();Ve()});function jo(e,t){return Ke(KG(e),t)}var s8=I(()=>{Ga();XG()});var p4,m4,b4,JG=I(()=>{Dr();yt();p4=class extends z{constructor({domain:t}){super(`Invalid domain "${Kt(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},m4=class extends z{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},b4=class extends z{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}});function QG(e){let{domain:t,message:n,primaryType:r,types:a}=e,s=(u,d)=>{let l={...d};for(let p of u){let{name:y,type:m}=p;m==="address"&&(l[y]=l[y].toLowerCase())}return l},o=a.EIP712Domain?t?s(a.EIP712Domain,t):{}:{},i=(()=>{if(r!=="EIP712Domain")return s(a[r],n)})();return Kt({domain:o,message:i,primaryType:r,types:a})}function y4(e){let{domain:t,message:n,primaryType:r,types:a}=e,s=(o,i)=>{for(let u of o){let{name:d,type:l}=u,p=i[d],y=l.match(af);if(y&&(typeof p=="number"||typeof p=="bigint")){let[h,w,v]=y;F(p,{signed:w==="int",size:Number.parseInt(v,10)/8})}if(l==="address"&&typeof p=="string"&&!Se(p))throw new In({address:p});let m=l.match(p9);if(m){let[h,w]=m;if(w&&Wt(p)!==Number.parseInt(w,10))throw new tf({expectedSize:Number.parseInt(w,10),givenSize:Wt(p)})}let g=a[l];g&&(iwe(l),s(g,p))}};if(a.EIP712Domain&&t){if(typeof t!="object")throw new p4({domain:t});s(a.EIP712Domain,t)}if(r!=="EIP712Domain")if(a[r])s(a[r],n);else throw new m4({primaryType:r,types:a})}function g4({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function iwe(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new b4({type:e})}var cI=I(()=>{w0();Bo();JG();Va();Ss();Ve();m9();Dr()});function z1(e){let{domain:t={},message:n,primaryType:r}=e,a={EIP712Domain:g4({domain:t}),...e.types};y4({domain:t,message:n,primaryType:r,types:a});let s=["0x1901"];return t&&s.push(YG({domain:t,types:a})),r!=="EIP712Domain"&&s.push(uI({data:n,primaryType:r,types:a})),Ke(Ae(s))}function YG({domain:e,types:t}){return uI({data:e,primaryType:"EIP712Domain",types:t})}function uI({data:e,primaryType:t,types:n}){let r=eV({data:e,primaryType:t,types:n});return Ke(r)}function eV({data:e,primaryType:t,types:n}){let r=[{type:"bytes32"}],a=[cwe({primaryType:t,types:n})];for(let s of n[t]){let[o,i]=nV({types:n,name:s.name,type:s.type,value:e[s.name]});r.push(o),a.push(i)}return Zt(r,a)}function cwe({primaryType:e,types:t}){let n=ge(uwe({primaryType:e,types:t}));return Ke(n)}function uwe({primaryType:e,types:t}){let n="",r=tV({primaryType:e,types:t});r.delete(e);let a=[e,...Array.from(r).sort()];for(let s of a)n+=`${s}(${t[s].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return n}function tV({primaryType:e,types:t},n=new Set){let a=e.match(/^\w*/u)?.[0];if(n.has(a)||t[a]===void 0)return n;n.add(a);for(let s of t[a])tV({primaryType:s.type,types:t},n);return n}function nV({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},Ke(eV({data:r,primaryType:n,types:e}))];if(n==="bytes")return[{type:"bytes32"},Ke(r)];if(n==="string")return[{type:"bytes32"},Ke(ge(r))];if(n.lastIndexOf("]")===n.length-1){let a=n.slice(0,n.lastIndexOf("[")),s=r.map(o=>nV({name:t,type:a,types:e,value:o}));return[{type:"bytes32"},Ke(Zt(s.map(([o])=>o),s.map(([,o])=>o)))]}return[{type:n},r]}var h4=I(()=>{Uo();F0();Ve();Ga();cI()});var rV,aV=I(()=>{rV="0x6492649264926492649264926492649264926492649264926492649264926492"});var x4,sV=I(()=>{x4=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});var dwe,w4,oV=I(()=>{sV();dwe={checksum:new x4(8192)},w4=dwe.checksum});function w5(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Lo(rq(e));return n==="Bytes"?r:D0(r)}var v4=I(()=>{yb();f6();cr()});function iV(e,t={}){let{compressed:n}=t,{prefix:r,x:a,y:s}=e;if(n===!1||typeof a=="bigint"&&typeof s=="bigint"){if(r!==4)throw new T4({prefix:r,cause:new pI});return}if(n===!0||typeof a=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new T4({prefix:r,cause:new lI});return}throw new fI({publicKey:e})}function cV(e){let t=(()=>{if(qb(e))return uV(e);if(uq(e))return lwe(e);let{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return iV(t),t}function lwe(e){return uV(D0(e))}function uV(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new mI({publicKey:e});if(e.length===130){let r=BigInt(s0(e,0,32)),a=BigInt(s0(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){let r=Number(s0(e,0,1)),a=BigInt(s0(e,1,33)),s=BigInt(s0(e,33,65));return{prefix:r,x:a,y:s}}let t=Number(s0(e,0,1)),n=BigInt(s0(e,1,33));return{prefix:t,x:n}}function bI(e,t={}){iV(e);let{prefix:n,x:r,y:a}=e,{includePrefix:s=!0}=t;return p0(s?yn(n,{size:1}):"0x",yn(r,{size:32}),typeof a=="bigint"?yn(a,{size:32}):"0x")}var fI,T4,lI,pI,mI,yI=I(()=>{f6();Ya();cr();zb();fI=class extends Le{constructor({publicKey:t}){super(`Value \`${l6(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},T4=class extends Le{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},lI=class extends Le{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},pI=class extends Le{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},mI=class extends Le{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${a0(pl(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}});function v5(e,t={}){let{strict:n=!0}=t;if(!pwe.test(e))throw new S4({address:e,cause:new gI});if(n){if(e.toLowerCase()===e)return;if(A4(e)!==e)throw new S4({address:e,cause:new hI})}}function A4(e){if(w4.has(e))return w4.get(e);v5(e,{strict:!1});let t=e.substring(2).toLowerCase(),n=w5(aq(t),{as:"Bytes"}),r=t.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());let a=`0x${r.join("")}`;return w4.set(e,a),a}function mwe(e,t={}){let{checksum:n=!1}=t;return v5(e),n?A4(e):e}function fV(e,t={}){let n=w5(`0x${bI(e).slice(4)}`).substring(26);return mwe(`0x${n}`,t)}function _4(e,t={}){let{strict:n=!0}=t??{};try{return v5(e,{strict:n}),!0}catch{return!1}}var pwe,S4,gI,hI,o8=I(()=>{f6();oV();Ya();v4();yI();pwe=/^0x[a-fA-F0-9]{40}$/;S4=class extends Le{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},gI=class extends Le{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},hI=class extends Le{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}});var lV,pV,k4,nft,rft,aft,sft,oft,ift,cft,uft,dft,fft,lft,pft,mft,bft,yft,gft,hft,xft,wft,vft,Tft,Sft,Aft,_ft,Eft,kft,Ift,Cft,Pft,Rft,$ft,Dft,Mft,Oft,Nft,Lft,Bft,Uft,Hft,Fft,zft,jft,qft,Gft,Vft,Wft,Zft,Kft,Xft,Jft,Qft,Yft,elt,tlt,nlt,rlt,alt,slt,olt,ilt,clt,ult,dlt,flt,llt,plt,mlt,blt,ylt,glt,hlt,xlt,wlt,vlt,Tlt,Slt,Alt,_lt,Elt,klt,Ilt,Clt,Plt,Rlt,$lt,Dlt,Mlt,Olt,Nlt,Llt,Blt,Ult,Hlt,Flt,zlt,xI,I4=I(()=>{lV=/^(.*)\[([0-9]*)\]$/,pV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,k4=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,nft=2n**(8n-1n)-1n,rft=2n**(16n-1n)-1n,aft=2n**(24n-1n)-1n,sft=2n**(32n-1n)-1n,oft=2n**(40n-1n)-1n,ift=2n**(48n-1n)-1n,cft=2n**(56n-1n)-1n,uft=2n**(64n-1n)-1n,dft=2n**(72n-1n)-1n,fft=2n**(80n-1n)-1n,lft=2n**(88n-1n)-1n,pft=2n**(96n-1n)-1n,mft=2n**(104n-1n)-1n,bft=2n**(112n-1n)-1n,yft=2n**(120n-1n)-1n,gft=2n**(128n-1n)-1n,hft=2n**(136n-1n)-1n,xft=2n**(144n-1n)-1n,wft=2n**(152n-1n)-1n,vft=2n**(160n-1n)-1n,Tft=2n**(168n-1n)-1n,Sft=2n**(176n-1n)-1n,Aft=2n**(184n-1n)-1n,_ft=2n**(192n-1n)-1n,Eft=2n**(200n-1n)-1n,kft=2n**(208n-1n)-1n,Ift=2n**(216n-1n)-1n,Cft=2n**(224n-1n)-1n,Pft=2n**(232n-1n)-1n,Rft=2n**(240n-1n)-1n,$ft=2n**(248n-1n)-1n,Dft=2n**(256n-1n)-1n,Mft=-(2n**(8n-1n)),Oft=-(2n**(16n-1n)),Nft=-(2n**(24n-1n)),Lft=-(2n**(32n-1n)),Bft=-(2n**(40n-1n)),Uft=-(2n**(48n-1n)),Hft=-(2n**(56n-1n)),Fft=-(2n**(64n-1n)),zft=-(2n**(72n-1n)),jft=-(2n**(80n-1n)),qft=-(2n**(88n-1n)),Gft=-(2n**(96n-1n)),Vft=-(2n**(104n-1n)),Wft=-(2n**(112n-1n)),Zft=-(2n**(120n-1n)),Kft=-(2n**(128n-1n)),Xft=-(2n**(136n-1n)),Jft=-(2n**(144n-1n)),Qft=-(2n**(152n-1n)),Yft=-(2n**(160n-1n)),elt=-(2n**(168n-1n)),tlt=-(2n**(176n-1n)),nlt=-(2n**(184n-1n)),rlt=-(2n**(192n-1n)),alt=-(2n**(200n-1n)),slt=-(2n**(208n-1n)),olt=-(2n**(216n-1n)),ilt=-(2n**(224n-1n)),clt=-(2n**(232n-1n)),ult=-(2n**(240n-1n)),dlt=-(2n**(248n-1n)),flt=-(2n**(256n-1n)),llt=2n**8n-1n,plt=2n**16n-1n,mlt=2n**24n-1n,blt=2n**32n-1n,ylt=2n**40n-1n,glt=2n**48n-1n,hlt=2n**56n-1n,xlt=2n**64n-1n,wlt=2n**72n-1n,vlt=2n**80n-1n,Tlt=2n**88n-1n,Slt=2n**96n-1n,Alt=2n**104n-1n,_lt=2n**112n-1n,Elt=2n**120n-1n,klt=2n**128n-1n,Ilt=2n**136n-1n,Clt=2n**144n-1n,Plt=2n**152n-1n,Rlt=2n**160n-1n,$lt=2n**168n-1n,Dlt=2n**176n-1n,Mlt=2n**184n-1n,Olt=2n**192n-1n,Nlt=2n**200n-1n,Llt=2n**208n-1n,Blt=2n**216n-1n,Ult=2n**224n-1n,Hlt=2n**232n-1n,Flt=2n**240n-1n,zlt=2n**248n-1n,xI=2n**256n-1n});function T5(e,t,n){let{checksumAddress:r,staticPosition:a}=n,s=TI(t.type);if(s){let[o,i]=s;return ywe(e,{...t,type:i},{checksumAddress:r,length:o,staticPosition:a})}if(t.type==="tuple")return wwe(e,t,{checksumAddress:r,staticPosition:a});if(t.type==="address")return bwe(e,{checksum:r});if(t.type==="bool")return gwe(e);if(t.type.startsWith("bytes"))return hwe(e,t,{staticPosition:a});if(t.type.startsWith("uint")||t.type.startsWith("int"))return xwe(e,t);if(t.type==="string")return vwe(e,{staticPosition:a});throw new _l(t.type)}function bwe(e,t={}){let{checksum:n=!1}=t,r=e.readBytes(32);return[(s=>n?A4(s):s)(D0(sq(r,-20))),32]}function ywe(e,t,n){let{checksumAddress:r,length:a,staticPosition:s}=n;if(!a){let u=Si(e.readBytes(wI)),d=s+u,l=d+bV;e.setPosition(d);let p=Si(e.readBytes(bV)),y=i8(t),m=0,g=[];for(let h=0;h<p;++h){e.setPosition(l+(y?h*32:m));let[w,v]=T5(e,t,{checksumAddress:r,staticPosition:l});m+=v,g.push(w)}return e.setPosition(s+32),[g,32]}if(i8(t)){let u=Si(e.readBytes(wI)),d=s+u,l=[];for(let p=0;p<a;++p){e.setPosition(d+p*32);let[y]=T5(e,t,{checksumAddress:r,staticPosition:d});l.push(y)}return e.setPosition(s+32),[l,32]}let o=0,i=[];for(let u=0;u<a;++u){let[d,l]=T5(e,t,{checksumAddress:r,staticPosition:s+o});o+=l,i.push(d)}return[i,o]}function gwe(e){return[iq(e.readBytes(32),{size:32}),32]}function hwe(e,t,{staticPosition:n}){let[r,a]=t.type.split("bytes");if(!a){let o=Si(e.readBytes(32));e.setPosition(n+o);let i=Si(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];let u=e.readBytes(i);return e.setPosition(n+32),[D0(u),32]}return[D0(e.readBytes(Number.parseInt(a,10),32)),32]}function xwe(e,t){let n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),a=e.readBytes(32);return[r>48?oq(a,{signed:n}):Si(a,{signed:n}),32]}function wwe(e,t,n){let{checksumAddress:r,staticPosition:a}=n,s=t.components.length===0||t.components.some(({name:u})=>!u),o=s?[]:{},i=0;if(i8(t)){let u=Si(e.readBytes(wI)),d=a+u;for(let l=0;l<t.components.length;++l){let p=t.components[l];e.setPosition(d+i);let[y,m]=T5(e,p,{checksumAddress:r,staticPosition:d});i+=m,o[s?l:p?.name]=y}return e.setPosition(a+32),[o,32]}for(let u=0;u<t.components.length;++u){let d=t.components[u],[l,p]=T5(e,d,{checksumAddress:r,staticPosition:a});o[s?u:d?.name]=l,i+=p}return[o,i]}function vwe(e,{staticPosition:t}){let n=Si(e.readBytes(32)),r=t+n;e.setPosition(r);let a=Si(e.readBytes(32));if(a===0)return e.setPosition(t+32),["",32];let s=e.readBytes(a,32),o=cq(wk(s));return e.setPosition(t+32),[o,32]}function yV({checksumAddress:e,parameters:t,values:n}){let r=[];for(let a=0;a<t.length;a++)r.push(vI({checksumAddress:e,parameter:t[a],value:n[a]}));return r}function vI({checksumAddress:e=!1,parameter:t,value:n}){let r=t,a=TI(r.type);if(a){let[s,o]=a;return Swe(n,{checksumAddress:e,length:s,parameter:{...r,type:o}})}if(r.type==="tuple")return Iwe(n,{checksumAddress:e,parameter:r});if(r.type==="address")return Twe(n,{checksum:e});if(r.type==="bool")return _we(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){let s=r.type.startsWith("int"),[,,o="256"]=k4.exec(r.type)??[];return Ewe(n,{signed:s,size:Number(o)})}if(r.type.startsWith("bytes"))return Awe(n,{type:r.type});if(r.type==="string")return kwe(n);throw new _l(r.type)}function C4(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:o,encoded:i}=e[s];o?t+=32:t+=a0(i)}let n=[],r=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:o,encoded:i}=e[s];o?(n.push(yn(t+a,{size:32})),r.push(i),a+=a0(i)):n.push(i)}return p0(...n,...r)}function Twe(e,t){let{checksum:n=!1}=t;return v5(e,{strict:n}),{dynamic:!1,encoded:B1(e.toLowerCase())}}function Swe(e,t){let{checksumAddress:n,length:r,parameter:a}=t,s=r===null;if(!Array.isArray(e))throw new R4(e);if(!s&&e.length!==r)throw new P4({expectedLength:r,givenLength:e.length,type:`${a.type}[${r}]`});let o=!1,i=[];for(let u=0;u<e.length;u++){let d=vI({checksumAddress:n,parameter:a,value:e[u]});d.dynamic&&(o=!0),i.push(d)}if(s||o){let u=C4(i);if(s){let d=yn(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?p0(d,u):d}}if(o)return{dynamic:!0,encoded:u}}return{dynamic:!1,encoded:p0(...i.map(({encoded:u})=>u))}}function Awe(e,{type:t}){let[,n]=t.split("bytes"),r=a0(e);if(!n){let a=e;return r%32!==0&&(a=Ai(a,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:p0(B1(yn(r,{size:32})),a)}}if(r!==Number.parseInt(n,10))throw new c8({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:Ai(e)}}function _we(e){if(typeof e!="boolean")throw new Le(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:B1(Ah(e))}}function Ewe(e,{signed:t,size:n}){if(typeof n=="number"){let r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new jb({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:yn(e,{size:32,signed:t})}}function kwe(e){let t=ml(e),n=Math.ceil(a0(t)/32),r=[];for(let a=0;a<n;a++)r.push(Ai(s0(t,a*32,(a+1)*32)));return{dynamic:!0,encoded:p0(Ai(yn(a0(t),{size:32})),...r)}}function Iwe(e,t){let{checksumAddress:n,parameter:r}=t,a=!1,s=[];for(let o=0;o<r.components.length;o++){let i=r.components[o],u=Array.isArray(e)?o:i.name,d=vI({checksumAddress:n,parameter:i,value:e[u]});s.push(d),d.dynamic&&(a=!0)}return{dynamic:a,encoded:a?C4(s):p0(...s.map(({encoded:o})=>o))}}function TI(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function i8(e){let{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(i8);let n=TI(e.type);return!!(n&&i8({...e,type:n[1]}))}var bV,wI,gV=I(()=>{El();o8();f6();Ya();cr();I4();bV=32,wI=32});function D4(e,{recursiveReadLimit:t=8192}={}){let n=Object.create(Pwe);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}var Pwe,$4,SI,AI,_I=I(()=>{Ya();Pwe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new AI({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new SI({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new $4({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new $4({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};$4=class extends Le{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},SI=class extends Le{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},AI=class extends Le{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}});function kl(e,t,n={}){let{as:r="Array",checksumAddress:a=!1}=n,s=typeof t=="string"?ll(t):t,o=D4(s);if(to(s)===0&&e.length>0)throw new II;if(to(s)&&to(s)<32)throw new kI({data:typeof t=="string"?t:D0(t),parameters:e,size:to(s)});let i=0,u=r==="Array"?[]:{};for(let d=0;d<e.length;++d){let l=e[d];o.setPosition(i);let[p,y]=T5(o,l,{checksumAddress:a,staticPosition:0});i+=y,r==="Array"?u.push(p):u[l.name??d]=p}return u}function x6(e,t,n){let{checksumAddress:r=!1}=n??{};if(e.length!==t.length)throw new M4({expectedLength:e.length,givenLength:t.length});let a=yV({checksumAddress:r,parameters:e,values:t}),s=C4(a);return s.length===0?"0x":s}function EI(e,t){if(e.length!==t.length)throw new M4({expectedLength:e.length,givenLength:t.length});let n=[];for(let r=0;r<e.length;r++){let a=e[r],s=t[r];n.push(EI.encode(a,s))}return p0(...n)}function d8(e){return Array.isArray(e)&&typeof e[0]=="string"?b1(e):typeof e=="string"?b1(e):e}var kI,II,P4,c8,M4,R4,_l,El=I(()=>{Gu();o8();f6();Ya();cr();gV();_I();I4();(function(e){function t(n,r,a=!1){if(n==="address"){let u=r;return v5(u),B1(u.toLowerCase(),a?32:0)}if(n==="string")return ml(r);if(n==="bytes")return r;if(n==="bool")return B1(Ah(r),a?32:1);let s=n.match(k4);if(s){let[u,d,l="256"]=s,p=Number.parseInt(l,10)/8;return yn(r,{size:a?32:p,signed:d==="int"})}let o=n.match(pV);if(o){let[u,d]=o;if(Number.parseInt(d,10)!==(r.length-2)/2)throw new c8({expectedSize:Number.parseInt(d,10),value:r});return Ai(r,a?32:0)}let i=n.match(lV);if(i&&Array.isArray(r)){let[u,d]=i,l=[];for(let p=0;p<r.length;p++)l.push(t(d,r[p],!0));return l.length===0?"0x":p0(...l)}throw new _l(n)}e.encode=t})(EI||(EI={}));kI=class extends Le{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${m1(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}},II=class extends Le{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}},P4=class extends Le{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},c8=class extends Le{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${a0(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},M4=class extends Le{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},R4=class extends Le{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},_l=class extends Le{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}});function Rwe(e,t){let{as:n}=t,r=wV(e),a=D4(new Uint8Array(r.length));return r.encode(a),n==="Hex"?D0(a.bytes):a.bytes}function xV(e,t={}){let{as:n="Hex"}=t;return Rwe(e,{as:n})}function wV(e){return Array.isArray(e)?$we(e.map(t=>wV(t))):Dwe(e)}function $we(e){let t=e.reduce((a,s)=>a+s.length,0),n=vV(t);return{length:t<=55?1+t:1+n+t,encode(a){t<=55?a.pushByte(192+t):(a.pushByte(247+n),n===1?a.pushUint8(t):n===2?a.pushUint16(t):n===3?a.pushUint24(t):a.pushUint32(t));for(let{encode:s}of e)s(a)}}}function Dwe(e){let t=typeof e=="string"?ll(e):e,n=vV(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(a){t.length===1&&t[0]<128?a.pushBytes(t):t.length<=55?(a.pushByte(128+t.length),a.pushBytes(t)):(a.pushByte(183+n),n===1?a.pushUint8(t.length):n===2?a.pushUint16(t.length):n===3?a.pushUint24(t.length):a.pushUint32(t.length),a.pushBytes(t))}}}function vV(e){if(e<=255)return 1;if(e<=65535)return 2;if(e<=16777215)return 3;if(e<=4294967295)return 4;throw new Le("Length is too large.")}var TV=I(()=>{f6();Ya();cr();_I()});function DI(e,t={}){let{recovered:n}=t;if(typeof e.r>"u")throw new f8({signature:e});if(typeof e.s>"u")throw new f8({signature:e});if(n&&typeof e.yParity>"u")throw new f8({signature:e});if(e.r<0n||e.r>xI)throw new PI({value:e.r});if(e.s<0n||e.s>xI)throw new RI({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new l8({value:e.yParity})}function Owe(e){return SV(D0(e))}function SV(e){if(e.length!==130&&e.length!==132)throw new CI({signature:e});let t=BigInt(s0(e,0,32)),n=BigInt(s0(e,32,64)),r=(()=>{let a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return NI(a)}catch{throw new l8({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function MI(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return OI(e)}function OI(e){let t=typeof e=="string"?SV(e):e instanceof Uint8Array?Owe(e):typeof e.r=="string"?Lwe(e):e.v?Nwe(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return DI(t),t}function Nwe(e){return{r:e.r,s:e.s,yParity:NI(e.v)}}function Lwe(e){let t=(()=>{let n=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=NI(n)),typeof r!="number")throw new l8({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function AV(e){let{r:t,s:n,yParity:r}=e;return[r?"0x01":"0x",t===0n?"0x":Tk(yn(t)),n===0n?"0x":Tk(yn(n))]}function NI(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new $I({value:e})}var CI,f8,PI,RI,l8,$I,LI=I(()=>{Ya();cr();zb();I4();CI=class extends Le{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${a0(pl(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},f8=class extends Le{constructor({signature:t}){super(`Signature \`${l6(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},PI=class extends Le{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},RI=class extends Le{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},l8=class extends Le{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},$I=class extends Le{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}});function EV(e,t={}){return typeof e.chainId=="string"?Bwe(e):{...e,...t.signature}}function Bwe(e){let{address:t,chainId:n,nonce:r}=e,a=MI(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...a}}function kV(e){return Uwe(e,{presign:!0})}function Uwe(e,t={}){let{presign:n}=t;return w5(p0("0x05",xV(Hwe(n?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function Hwe(e){let{address:t,chainId:n,nonce:r}=e,a=MI(e);return[n?yn(n):"0x",t,r?yn(r):"0x",...a?AV(a):[]]}var IV=I(()=>{v4();cr();TV();LI()});function CV(e){return fV(zwe(e))}function zwe(e){let{payload:t,signature:n}=e,{r,s:a,yParity:s}=n,i=new la.Signature(BigInt(r),BigInt(a)).addRecoveryBit(s).recoverPublicKey(pl(t).substring(2));return cV(i)}var PV=I(()=>{d5();o8();cr();yI()});var p8={};ni(p8,{InvalidWrappedSignatureError:()=>O4,assert:()=>N4,from:()=>qwe,magicBytes:()=>BI,suffixParameters:()=>UI,unwrap:()=>RV,validate:()=>Vwe,wrap:()=>Gwe});function N4(e){if(typeof e=="string"){if(s0(e,-32)!==BI)throw new O4(e)}else DI(e.authorization)}function qwe(e){return typeof e=="string"?RV(e):e}function RV(e){N4(e);let t=vh(s0(e,-64,-32)),n=s0(e,-t-64,-64),r=s0(e,0,-t-64),[a,s,o]=kl(UI,n);return{authorization:EV({address:a.delegation,chainId:Number(a.chainId),nonce:a.nonce,yParity:a.yParity,r:a.r,s:a.s}),signature:r,...o&&o!=="0x"?{data:o,to:s}:{}}}function Gwe(e){let{data:t,signature:n}=e;N4(e);let r=CV({payload:kV(e.authorization),signature:OI(e.authorization)}),a=x6(UI,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??r,t??"0x"]),s=yn(a0(a),{size:32});return p0(n,a,s,BI)}function Vwe(e){try{return N4(e),!0}catch{return!1}}var BI,UI,O4,$V=I(()=>{El();IV();Ya();cr();PV();LI();BI="0x8010801080108010801080108010801080108010801080108010801080108010",UI=d8("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");O4=class extends Le{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}});var DV=I(()=>{$V()});function L4(e){let{address:t,data:n,signature:r,to:a="hex"}=e,s=T0([Zt([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),rV]);return a==="hex"?s:bn(s)}var MV=I(()=>{aV();Uo();F0();v0()});var B4,OV=I(()=>{yt();B4=class extends z{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}});function ye(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new B4({value:e});let[n,r="0"]=e.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[s,o,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],u=Math.round(+`${o}.${i}`);u>9?r=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):r=`${s}${u}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${r}`)}var HI=I(()=>{OV()});function pa(e,t="wei"){return ye(e,T9[t])}var NV=I(()=>{S9();HI()});var Il=I(()=>{h1();tr();Ve()});function Wwe(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function LV(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Vn(e.nonce):void 0,storageProof:e.storageProof?Wwe(e.storageProof):void 0}}var BV=I(()=>{Il()});async function UV(e,{address:t,blockNumber:n,blockTag:r,storageKeys:a}){let s=r??"latest",o=n!==void 0?F(n):void 0,i=await e.request({method:"eth_getProof",params:[t,a,o||s]});return LV(i)}var HV=I(()=>{Ve();BV()});async function FV(e,{address:t,blockNumber:n,blockTag:r="latest",slot:a}){let s=n!==void 0?F(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,s||r]})}var zV=I(()=>{Ve()});async function Cl(e,{blockHash:t,blockNumber:n,blockTag:r,hash:a,index:s,sender:o,nonce:i}){let u=r||"latest",d=n!==void 0?F(n):void 0,l=null;if(a?l=await e.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):t?l=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,F(s)]},{dedupe:!0}):(d||u)&&typeof s=="number"?l=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[d||u,F(s)]},{dedupe:!!d}):o&&typeof i=="number"&&(l=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[o,F(i)]},{dedupe:!0})),!l)throw new lf({blockHash:t,blockNumber:n,blockTag:u,hash:a,index:s});return(e.chain?.formatters?.transaction?.format||Yf)(l,"getTransaction")}var U4=I(()=>{Ks();Ve();Ob()});async function jV(e,{hash:t,transactionReceipt:n}){let[r,a]=await Promise.all([ce(e,ki,"getBlockNumber")({}),t?ce(e,Cl,"getTransaction")({hash:t}):void 0]),s=n?.blockNumber||a?.blockNumber;return s?r-s+1n:0n}var qV=I(()=>{sn();hl();U4()});async function Pl(e,{hash:t}){let n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new pf({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||qh)(n,"getTransactionReceipt")}var FI=I(()=>{Ks();Gh()});async function GV(e,t){let{account:n,authorizationList:r,allowFailure:a=!0,blockNumber:s,blockOverrides:o,blockTag:i,stateOverride:u}=t,d=t.contracts,{batchSize:l=t.batchSize??1024,deployless:p=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},y=(()=>{if(t.multicallAddress)return t.multicallAddress;if(p)return null;if(e.chain)return no({blockNumber:s,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),m=[[]],g=0,h=0;for(let T=0;T<d.length;T++){let{abi:A,address:_,args:E,functionName:O}=d[T];try{let $=X({abi:A,args:E,functionName:O});h+=($.length-2)/2,l>0&&h>l&&m[g].length>0&&(g++,h=($.length-2)/2,m[g]=[]),m[g]=[...m[g],{allowFailure:!0,callData:$,target:_}]}catch($){let B=As($,{abi:A,address:_,args:E,docsPath:"/docs/contract/multicall",functionName:O,sender:n});if(!a)throw B;m[g]=[...m[g],{allowFailure:!0,callData:"0x",target:_}]}}let w=await Promise.allSettled(m.map(T=>ce(e,se,"readContract")({...y===null?{code:bl}:{address:y},abi:p6,account:n,args:[T],authorizationList:r,blockNumber:s,blockOverrides:o,blockTag:i,functionName:"aggregate3",stateOverride:u}))),v=[];for(let T=0;T<w.length;T++){let A=w[T];if(A.status==="rejected"){if(!a)throw A.reason;for(let E=0;E<m[T].length;E++)v.push({status:"failure",error:A.reason,result:void 0});continue}let _=A.value;for(let E=0;E<_.length;E++){let{returnData:O,success:$}=_[E],{callData:B}=m[T][E],{abi:V,address:D,functionName:G,args:N}=d[v.length];try{if(B==="0x")throw new Ws;if(!$)throw new hi({data:O});let W=Qa({abi:V,args:N,data:O,functionName:G});v.push(a?{result:W,status:"success"}:W)}catch(W){let me=As(W,{abi:V,address:D,args:N,docsPath:"/docs/contract/multicall",functionName:G});if(!a)throw me;v.push({error:me,result:void 0,status:"failure"})}}}if(v.length!==d.length)throw new z("multicall results mismatch");return v}var VV=I(()=>{U1();Vb();w0();yt();Wc();d6();Xa();y5();s5();sn();ks()});async function m8(e,t){let{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:a,returnFullTransactions:s,traceTransfers:o,validation:i}=t;try{let u=[];for(let y of a){let m=y.blockOverrides?_h(y.blockOverrides):void 0,g=y.calls.map(w=>{let v=w,T=v.account?at(v.account):void 0,A=v.abi?X(v):v.data,_={...v,account:T,data:v.dataSuffix?Ae([A||"0x",v.dataSuffix]):A,from:v.from??T?.address};return ir(_),Nr(_)}),h=y.stateOverrides?Xf(y.stateOverrides):void 0;u.push({blockOverrides:m,calls:g,stateOverrides:h})}let l=(typeof n=="bigint"?F(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:u,returnFullTransactions:s,traceTransfers:o,validation:i},l]})).map((y,m)=>({...Y9(y),calls:y.calls.map((g,h)=>{let{abi:w,args:v,functionName:T,to:A}=a[m].calls[h],_=g.error?.data??g.returnData,E=BigInt(g.gasUsed),O=g.logs?.map(D=>Br(D)),$=g.status==="0x1"?"success":"failure",B=w&&$==="success"&&_!=="0x"?Qa({abi:w,data:_,functionName:T}):null,V=(()=>{if($==="success")return;let D;if(g.error?.data==="0x"?D=new Ws:g.error&&(D=new hi(g.error)),!!D)return As(D,{abi:w??[],address:A??"0x",args:v,functionName:T??"<unknown>"})})();return{data:_,gasUsed:E,logs:O,status:$,...$==="success"?{result:B}:{error:V}}})}))}catch(u){let d=u,l=a6(d,{});throw l instanceof Ys?d:l}}var zI=I(()=>{Sk();r0();w0();Wc();r6();d6();Xa();F0();Ve();s5();Db();ak();u6();D1();X9();vi()});function F4(e){let t=!0,n="",r=0,a="",s=!1;for(let o=0;o<e.length;o++){let i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function","error",""].includes(a))a="";else if(a+=i,i===")"){s=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}a+=i,n+=i}}if(!s)throw new Le("Unable to normalize signature.");return a}function H4(e,t){let n=typeof e,r=t.type;switch(r){case"address":return _4(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((a,s)=>H4(Object.values(e)[s],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(a=>H4(a,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function jI(e,t,n){for(let r in e){let a=e[r],s=t[r];if(a.type==="tuple"&&s.type==="tuple"&&"components"in a&&"components"in s)return jI(a.components,s.components,n[r]);let o=[a.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?_4(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?_4(n[r],{strict:!1}):!1)return o}}var WV=I(()=>{o8();Ya()});function z4(e,t={}){let{prepare:n=!0}=t,r=Array.isArray(e)?qu(e):typeof e=="string"?qu(e):e;return{...r,...n?{hash:Rl(r)}:{}}}function b8(e,t,n){let{args:r=[],prepare:a=!0}=n??{},s=qb(t,{strict:!1}),o=e.filter(d=>s?d.type==="function"||d.type==="error"?GI(d)===s0(t,0,4):d.type==="event"?Rl(d)===t:!1:"name"in d&&d.name===t);if(o.length===0)throw new w6({name:t});if(o.length===1)return{...o[0],...a?{hash:Rl(o[0])}:{}};let i;for(let d of o){if(!("inputs"in d))continue;if(!r||r.length===0){if(!d.inputs||d.inputs.length===0)return{...d,...a?{hash:Rl(d)}:{}};continue}if(!d.inputs||d.inputs.length===0||d.inputs.length!==r.length)continue;if(r.every((p,y)=>{let m="inputs"in d&&d.inputs[y];return m?H4(p,m):!1})){if(i&&"inputs"in i&&i.inputs){let p=jI(d.inputs,i.inputs,r);if(p)throw new qI({abiItem:d,type:p[0]},{abiItem:i,type:p[1]})}i=d}}let u=(()=>{if(i)return i;let[d,...l]=o;return{...d,overloads:l}})();if(!u)throw new w6({name:t});return{...u,...a?{hash:Rl(u)}:{}}}function GI(...e){let t=(()=>{if(Array.isArray(e[0])){let[n,r]=e;return b8(n,r)}return e[0]})();return s0(Rl(t),0,4)}function Kwe(...e){let t=(()=>{if(Array.isArray(e[0])){let[r,a]=e;return b8(r,a)}return e[0]})(),n=typeof t=="string"?t:zu(t);return F4(n)}function Rl(...e){let t=(()=>{if(Array.isArray(e[0])){let[n,r]=e;return b8(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:w5(ml(Kwe(t)))}var qI,w6,VI=I(()=>{Gu();Ya();v4();cr();WV();qI=class extends Le{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${F4(zu(t.abiItem))}\`, and`,`\`${n.type}\` in \`${F4(zu(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},w6=class extends Le{constructor({name:t,data:n,type:r="item"}){let a=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${a} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}});function KV(...e){let[t,n]=(()=>{if(Array.isArray(e[0])){let[s,o]=e;return[Xwe(s),o]}return e})(),{bytecode:r,args:a}=n;return p0(r,t.inputs?.length&&a?.length?x6(t.inputs,a):"0x")}function XV(e){return z4(e)}function Xwe(e){let t=e.find(n=>n.type==="constructor");if(!t)throw new w6({name:"constructor"});return t}var JV=I(()=>{VI();El();cr()});function YV(...e){let[t,n=[]]=(()=>{if(Array.isArray(e[0])){let[d,l,p]=e;return[QV(d,l,{args:p}),p]}let[i,u]=e;return[i,u]})(),{overloads:r}=t,a=r?QV([t,...r],t.name,{args:n}):t,s=Qwe(a),o=n.length>0?x6(a.inputs,n):void 0;return o?p0(s,o):s}function S5(e,t={}){return z4(e,t)}function QV(e,t,n){let r=b8(e,t,n);if(r.type!=="function")throw new w6({name:t,type:"function"});return r}function Qwe(e){return GI(e)}var eW=I(()=>{VI();El();cr()});var WI,es,ZI=I(()=>{WI="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",es="0x0000000000000000000000000000000000000000"});async function tW(e,t){let{blockNumber:n,blockTag:r,calls:a,stateOverrides:s,traceAssetChanges:o,traceTransfers:i,validation:u}=t,d=t.account?at(t.account):void 0;if(o&&!d)throw new z("`account` is required when `traceAssetChanges` is true");let l=d?KV(XV("constructor(bytes, bytes)"),{bytecode:Ih,args:[eve,YV(S5("function getBalance(address)"),[d.address])]}):void 0,p=o?await Promise.all(t.calls.map(async ne=>{if(!ne.data&&!ne.abi)return;let{accessList:be}=await i4(e,{account:d.address,...ne,data:ne.abi?X(ne):ne.data});return be.map(({address:ze,storageKeys:pt})=>pt.length>0?ze:null)})).then(ne=>ne.flat().filter(Boolean)):[],y=await m8(e,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:l}],stateOverrides:s},{calls:p.map((ne,be)=>({abi:[S5("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:ne,from:es,nonce:be})),stateOverrides:[{address:es,nonce:0}]}]:[],{calls:[...a,{}].map(ne=>({...ne,from:d?.address})),stateOverrides:s},...o?[{calls:[{data:l}]},{calls:p.map((ne,be)=>({abi:[S5("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:ne,from:es,nonce:be})),stateOverrides:[{address:es,nonce:0}]},{calls:p.map((ne,be)=>({to:ne,abi:[S5("function decimals() returns (uint256)")],functionName:"decimals",from:es,nonce:be})),stateOverrides:[{address:es,nonce:0}]},{calls:p.map((ne,be)=>({to:ne,abi:[S5("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:es,nonce:be})),stateOverrides:[{address:es,nonce:0}]},{calls:p.map((ne,be)=>({to:ne,abi:[S5("function symbol() returns (string)")],functionName:"symbol",from:es,nonce:be})),stateOverrides:[{address:es,nonce:0}]}]:[]],traceTransfers:i,validation:u}),m=o?y[2]:y[0],[g,h,,w,v,T,A,_]=o?y:[],{calls:E,...O}=m,$=E.slice(0,-1)??[],B=g?.calls??[],V=h?.calls??[],D=[...B,...V].map(ne=>ne.status==="success"?n0(ne.data):null),G=w?.calls??[],N=v?.calls??[],W=[...G,...N].map(ne=>ne.status==="success"?n0(ne.data):null),me=(T?.calls??[]).map(ne=>ne.status==="success"?ne.result:null),j=(_?.calls??[]).map(ne=>ne.status==="success"?ne.result:null),Z=(A?.calls??[]).map(ne=>ne.status==="success"?ne.result:null),de=[];for(let[ne,be]of W.entries()){let ze=D[ne];if(typeof be!="bigint"||typeof ze!="bigint")continue;let pt=me[ne-1],rn=j[ne-1],zt=Z[ne-1],ct=ne===0?{address:WI,decimals:18,symbol:"ETH"}:{address:p[ne-1],decimals:zt||pt?Number(pt??1):void 0,symbol:rn??void 0};de.some(fn=>fn.token.address===ct.address)||de.push({token:ct,value:{pre:ze,post:be,diff:be-ze}})}return{assetChanges:de,block:O,results:$}}var eve,nW=I(()=>{JV();eW();r0();ZI();Vb();yt();Xa();Il();Yk();zI();eve="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033"});var y8={};ni(y8,{InvalidWrappedSignatureError:()=>j4,assert:()=>XI,from:()=>rve,magicBytes:()=>KI,universalSignatureValidatorAbi:()=>nve,universalSignatureValidatorBytecode:()=>tve,unwrap:()=>rW,validate:()=>sve,wrap:()=>ave});function XI(e){if(s0(e,-32)!==KI)throw new j4(e)}function rve(e){return typeof e=="string"?rW(e):e}function rW(e){XI(e);let[t,n,r]=kl(d8("address, bytes, bytes"),e);return{data:n,signature:r,to:t}}function ave(e){let{data:t,signature:n,to:r}=e;return p0(x6(d8("address, bytes, bytes"),[r,t,n]),KI)}function sve(e){try{return XI(e),!0}catch{return!1}}var KI,tve,nve,j4,aW=I(()=>{El();Ya();cr();KI="0x6492649264926492649264926492649264926492649264926492649264926492",tve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",nve=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];j4=class extends Le{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}});var sW=I(()=>{aW()});function q4({r:e,s:t,to:n="hex",v:r,yParity:a}){let s=(()=>{if(a===0||a===1)return a;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new la.Signature(n0(e),n0(t)).toCompactHex()}${s===0?"1b":"1c"}`;return n==="hex"?o:bn(o)}var JI=I(()=>{d5();tr();v0()});async function v6(e,t){let{address:n,chain:r=e.chain,hash:a,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??r?.contracts?.erc6492Verifier?.address,multicallAddress:o=t.multicallAddress??r?.contracts?.multicall3?.address}=t;if(r?.verifyHash)return await r.verifyHash(e,t);let i=(()=>{let u=t.signature;return mn(u)?u:typeof u=="object"&&"r"in u&&"s"in u?q4(u):tn(u)})();try{return p8.validate(i)?await ove(e,{...t,multicallAddress:o,signature:i}):await ive(e,{...t,verifierAddress:s,signature:i})}catch(u){try{if(Tr(xe(n),await V9({hash:a,signature:i})))return!0}catch{}if(u instanceof j1)return!1;throw u}}async function ove(e,t){let{address:n,blockNumber:r,blockTag:a,hash:s,multicallAddress:o}=t,{authorization:i,data:u,signature:d,to:l}=p8.unwrap(t.signature);if(await Is(e,{address:n,blockNumber:r,blockTag:a})===T0(["0xef0100",i.address]))return await cve(e,{address:n,blockNumber:r,blockTag:a,hash:s,signature:d});let y={address:i.address,chainId:Number(i.chainId),nonce:Number(i.nonce),r:F(i.r,{size:32}),s:F(i.s,{size:32}),yParity:i.yParity};if(!await MG({address:n,authorization:y}))throw new j1;let g=await ce(e,se,"readContract")({...o?{address:o}:{code:bl},authorizationList:[y],abi:p6,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...u?[{allowFailure:!0,target:l??n,callData:u}]:[],{allowFailure:!0,target:n,callData:X({abi:Ek,functionName:"isValidSignature",args:[s,d]})}]]});if(g[g.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new j1}async function ive(e,t){let{address:n,factory:r,factoryData:a,hash:s,signature:o,verifierAddress:i,...u}=t,d=await(async()=>!r&&!a||y8.validate(o)?o:y8.wrap({data:a,signature:o,to:r}))(),l=i?{to:i,data:X({abi:Gb,functionName:"isValidSig",args:[n,s,d]}),...u}:{data:_i({abi:Gb,args:[n,s,d],bytecode:hq}),...u},{data:p}=await ce(e,Ei,"call")(l).catch(y=>{throw y instanceof bf?new j1:y});if(mb(p??"0x0"))return!0;throw new j1}async function cve(e,t){let{address:n,blockNumber:r,blockTag:a,hash:s,signature:o}=t;if((await ce(e,se,"readContract")({address:n,abi:Ek,args:[s,o],blockNumber:r,blockTag:a,functionName:"isValidSignature"}).catch(u=>{throw u instanceof yf?new j1:u})).startsWith("0x1626ba7e"))return!0;throw new j1}var j1,g8=I(()=>{sW();DV();U1();Vb();Wc();Kb();Xa();bi();c6();OG();F0();Ts();tr();Ve();sn();ek();JI();gl();r8();ks();j1=class extends Error{}});async function oW(e,{address:t,message:n,factory:r,factoryData:a,signature:s,...o}){let i=jo(n);return ce(e,v6,"verifyHash")({address:t,factory:r,factoryData:a,hash:i,signature:s,...o})}var iW=I(()=>{sn();s8();g8()});async function cW(e,t){let{address:n,factory:r,factoryData:a,signature:s,message:o,primaryType:i,types:u,domain:d,...l}=t,p=z1({message:o,primaryType:i,types:u,domain:d});return ce(e,v6,"verifyHash")({address:n,factory:r,factoryData:a,hash:p,signature:s,...l})}var uW=I(()=>{sn();h4();g8()});function G4(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:a,poll:s,pollingInterval:o=e.pollingInterval}){let i=typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),u;return i?(()=>{let p=Kt(["watchBlockNumber",e.uid,t,n,o]);return Ur(p,{onBlockNumber:r,onError:a},y=>ro(async()=>{try{let m=await ce(e,ki,"getBlockNumber")({cacheTime:0});if(u!==void 0){if(m===u)return;if(m-u>1&&n)for(let g=u+1n;g<m;g++)y.onBlockNumber(g,u),u=g}(u===void 0||m>u)&&(y.onBlockNumber(m,u),u=m)}catch(m){y.onError?.(m)}},{emitOnBegin:t,interval:o}))})():(()=>{let p=Kt(["watchBlockNumber",e.uid,t,n]);return Ur(p,{onBlockNumber:r,onError:a},y=>{let m=!0,g=()=>m=!1;return(async()=>{try{let h=(()=>{if(e.transport.type==="fallback"){let v=e.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return v?v.value:e.transport}return e.transport})(),{unsubscribe:w}=await h.subscribe({params:["newHeads"],onData(v){if(!m)return;let T=n0(v.result?.number);y.onBlockNumber(T,u),u=T},onError(v){y.onError?.(v)}});g=w,m||g()}catch(h){a?.(h)}})(),()=>g()})})()}var QI=I(()=>{tr();sn();m6();g5();Dr();hl()});async function V4(e,t){let{checkReplacement:n=!0,confirmations:r=1,hash:a,onReplaced:s,retryCount:o=6,retryDelay:i=({count:E})=>~~(1<<E)*200,timeout:u=18e4}=t,d=Kt(["waitForTransactionReceipt",e.uid,a]),l=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval,p,y,m,g=!1,h,w,{promise:v,resolve:T,reject:A}=yl(),_=u?setTimeout(()=>{w?.(),h?.(),A(new R9({hash:a}))},u):void 0;return h=Ur(d,{onReplaced:s,resolve:T,reject:A},async E=>{if(m=await ce(e,Pl,"getTransactionReceipt")({hash:a}).catch(()=>{}),m&&r<=1){clearTimeout(_),E.resolve(m),h?.();return}w=ce(e,G4,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(O){let $=V=>{clearTimeout(_),w?.(),V(),h?.()},B=O;if(!g)try{if(m){if(r>1&&(!m.blockNumber||B-m.blockNumber+1n<r))return;$(()=>E.resolve(m));return}if(n&&!p&&(g=!0,await x5(async()=>{p=await ce(e,Cl,"getTransaction")({hash:a}),p.blockNumber&&(B=p.blockNumber)},{delay:i,retryCount:o}),g=!1),m=await ce(e,Pl,"getTransactionReceipt")({hash:a}),r>1&&(!m.blockNumber||B-m.blockNumber+1n<r))return;$(()=>E.resolve(m))}catch(V){if(V instanceof lf||V instanceof pf){if(!p){g=!1;return}try{y=p,g=!0;let D=await x5(()=>ce(e,l0,"getBlock")({blockNumber:B,includeTransactions:!0}),{delay:i,retryCount:o,shouldRetry:({error:W})=>W instanceof Qf});g=!1;let G=D.transactions.find(({from:W,nonce:me})=>W===y.from&&me===y.nonce);if(!G||(m=await ce(e,Pl,"getTransactionReceipt")({hash:G.hash}),r>1&&(!m.blockNumber||B-m.blockNumber+1n<r)))return;let N="replaced";G.to===y.to&&G.value===y.value&&G.input===y.input?N="repriced":G.from===G.to&&G.value===0n&&(N="cancelled"),$(()=>{E.onReplaced?.({reason:N,replacedTransaction:y,transaction:G,transactionReceipt:m}),E.resolve(m)})}catch(D){$(()=>E.reject(D))}}else $(()=>E.reject(V))}}})}),v}var YI=I(()=>{nk();Ks();sn();m6();$h();jh();Dr();O1();U4();FI();QI()});function dW(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:a,onError:s,includeTransactions:o,poll:i,pollingInterval:u=e.pollingInterval}){let d=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),l=o??!1,p;return d?(()=>{let g=Kt(["watchBlocks",e.uid,t,n,r,l,u]);return Ur(g,{onBlock:a,onError:s},h=>ro(async()=>{try{let w=await ce(e,l0,"getBlock")({blockTag:t,includeTransactions:l});if(w.number!==null&&p?.number!=null){if(w.number===p.number)return;if(w.number-p.number>1&&n)for(let v=p?.number+1n;v<w.number;v++){let T=await ce(e,l0,"getBlock")({blockNumber:v,includeTransactions:l});h.onBlock(T,p),p=T}}(p?.number==null||t==="pending"&&w?.number==null||w.number!==null&&w.number>p.number)&&(h.onBlock(w,p),p=w)}catch(w){h.onError?.(w)}},{emitOnBegin:r,interval:u}))})():(()=>{let g=!0,h=!0,w=()=>g=!1;return(async()=>{try{r&&ce(e,l0,"getBlock")({blockTag:t,includeTransactions:l}).then(A=>{g&&h&&(a(A,void 0),h=!1)}).catch(s);let v=(()=>{if(e.transport.type==="fallback"){let A=e.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return A?A.value:e.transport}return e.transport})(),{unsubscribe:T}=await v.subscribe({params:["newHeads"],async onData(A){if(!g)return;let _=await ce(e,l0,"getBlock")({blockNumber:A.result?.number,includeTransactions:l}).catch(()=>{});g&&(a(_,p),h=!1,p=_)},onError(A){s?.(A)}});w=T,g||w()}catch(v){s?.(v)}})(),()=>w()})()}var fW=I(()=>{sn();m6();g5();Dr();O1()});function lW(e,{address:t,args:n,batch:r=!0,event:a,events:s,fromBlock:o,onError:i,onLogs:u,poll:d,pollingInterval:l=e.pollingInterval,strict:p}){let y=typeof d<"u"?d:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),m=p??!1;return y?(()=>{let w=Kt(["watchEvent",t,n,r,e.uid,a,l,o]);return Ur(w,{onLogs:u,onError:i},v=>{let T;o!==void 0&&(T=o-1n);let A,_=!1,E=ro(async()=>{if(!_){try{A=await ce(e,c4,"createEventFilter")({address:t,args:n,event:a,events:s,strict:m,fromBlock:o})}catch{}_=!0;return}try{let O;if(A)O=await ce(e,b6,"getFilterChanges")({filter:A});else{let $=await ce(e,ki,"getBlockNumber")({});T&&T!==$?O=await ce(e,il,"getLogs")({address:t,args:n,event:a,events:s,fromBlock:T+1n,toBlock:$}):O=[],T=$}if(O.length===0)return;if(r)v.onLogs(O);else for(let $ of O)v.onLogs([$])}catch(O){A&&O instanceof Js&&(_=!1),v.onError?.(O)}},{emitOnBegin:!0,interval:l});return async()=>{A&&await ce(e,y6,"uninstallFilter")({filter:A}),E()}})})():(()=>{let w=!0,v=()=>w=!1;return(async()=>{try{let T=(()=>{if(e.transport.type==="fallback"){let O=e.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return O?O.value:e.transport}return e.transport})(),A=s??(a?[a]:void 0),_=[];A&&(_=[A.flatMap($=>yi({abi:[$],eventName:$.name,args:n}))],a&&(_=_[0]));let{unsubscribe:E}=await T.subscribe({params:["logs",{address:t,topics:_}],onData(O){if(!w)return;let $=O.result;try{let{eventName:B,args:V}=l5({abi:A??[],data:$.data,topics:$.topics,strict:m}),D=Br($,{args:V,eventName:B});u([D])}catch(B){let V,D;if(B instanceof g1||B instanceof Fc){if(p)return;V=B.abiItem.name,D=B.abiItem.inputs?.some(N=>!("name"in N&&N.name))}let G=Br($,{args:D?[]:{},eventName:V});u([G])}},onError(O){i?.(O)}});v=E,w||v()}catch(T){i?.(T)}})(),()=>v()})()}var pW=I(()=>{w0();Of();ph();sf();u6();sn();m6();g5();Dr();eI();hl();Qb();mh();Yb()});function mW(e,{batch:t=!0,onError:n,onTransactions:r,poll:a,pollingInterval:s=e.pollingInterval}){return(typeof a<"u"?a:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{let d=Kt(["watchPendingTransactions",e.uid,t,s]);return Ur(d,{onTransactions:r,onError:n},l=>{let p,y=ro(async()=>{try{if(!p)try{p=await ce(e,u4,"createPendingTransactionFilter")({});return}catch(g){throw y(),g}let m=await ce(e,b6,"getFilterChanges")({filter:p});if(m.length===0)return;if(t)l.onTransactions(m);else for(let g of m)l.onTransactions([g])}catch(m){l.onError?.(m)}},{emitOnBegin:!0,interval:s});return async()=>{p&&await ce(e,y6,"uninstallFilter")({filter:p}),y()}})})():(()=>{let d=!0,l=()=>d=!1;return(async()=>{try{let{unsubscribe:p}=await e.transport.subscribe({params:["newPendingTransactions"],onData(y){if(!d)return;let m=y.result;r([m])},onError(y){n?.(y)}});l=p,d||l()}catch(p){n?.(p)}})(),()=>l()})()}var bW=I(()=>{sn();m6();g5();Dr();tI();Qb();Yb()});function yW(e){let{scheme:t,statement:n,...r}=e.match(uve)?.groups??{},{chainId:a,expirationTime:s,issuedAt:o,notBefore:i,requestId:u,...d}=e.match(dve)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...d,...a?{chainId:Number(a)}:{},...s?{expirationTime:new Date(s)}:{},...o?{issuedAt:new Date(o)}:{},...i?{notBefore:new Date(i)}:{},...u?{requestId:u}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}var uve,dve,gW=I(()=>{uve=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,dve=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/});function hW(e){let{address:t,domain:n,message:r,nonce:a,scheme:s,time:o=new Date}=e;if(n&&r.domain!==n||a&&r.nonce!==a||s&&r.scheme!==s||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Se(r.address,{strict:!1})||t&&!Tr(r.address,t))return!1}catch{return!1}return!0}var xW=I(()=>{Va();c6()});async function wW(e,t){let{address:n,domain:r,message:a,nonce:s,scheme:o,signature:i,time:u=new Date,...d}=t,l=yW(a);if(!l.address||!hW({address:n,domain:r,message:l,nonce:s,scheme:o,time:u}))return!1;let y=jo(a);return v6(e,{address:l.address,hash:y,signature:i,...d})}var vW=I(()=>{s8();gW();xW();g8()});async function $l(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){let a=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,F(r)]:[t]},{retryCount:0}),o=(e.chain?.formatters?.transactionReceipt?.format||qh)(a);if(o.status==="reverted"&&n)throw new mf({receipt:o});return o}var W4=I(()=>{Ks();Gh();Il()});function TW(e){return{call:t=>Ei(e,t),createAccessList:t=>i4(e,t),createBlockFilter:()=>nG(e),createContractEventFilter:t=>of(e,t),createEventFilter:t=>c4(e,t),createPendingTransactionFilter:()=>u4(e),estimateContractGas:t=>lh(e,t),estimateGas:t=>ol(e,t),getBalance:t=>aG(e,t),getBlobBaseFee:()=>oG(e),getBlock:t=>l0(e,t),getBlockNumber:t=>ki(e,t),getBlockTransactionCount:t=>cG(e,t),getBytecode:t=>Is(e,t),getChainId:()=>Lr(e),getCode:t=>Is(e,t),getContractEvents:t=>cl(e,t),getEip712Domain:t=>fG(e,t),getEnsAddress:t=>Hq(e,t),getEnsAvatar:t=>Xq(e,t),getEnsName:t=>Qq(e,t),getEnsResolver:t=>eG(e,t),getEnsText:t=>o4(e,t),getFeeHistory:t=>bG(e,t),estimateFeesPerGas:t=>Dj(e,t),getFilterChanges:t=>b6(e,t),getFilterLogs:t=>gG(e,t),getGasPrice:()=>el(e),getLogs:t=>il(e,t),getProof:t=>UV(e,t),estimateMaxPriorityFeePerGas:t=>$j(e,t),fillTransaction:t=>al(e,t),getStorageAt:t=>FV(e,t),getTransaction:t=>Cl(e,t),getTransactionConfirmations:t=>jV(e,t),getTransactionCount:t=>o6(e,t),getTransactionReceipt:t=>Pl(e,t),multicall:t=>GV(e,t),prepareTransactionRequest:t=>Ti(e,t),readContract:t=>se(e,t),sendRawTransaction:t=>wl(e,t),sendRawTransactionSync:t=>$l(e,t),simulate:t=>m8(e,t),simulateBlocks:t=>m8(e,t),simulateCalls:t=>tW(e,t),simulateContract:t=>Fe(e,t),verifyHash:t=>v6(e,t),verifyMessage:t=>oW(e,t),verifySiweMessage:t=>wW(e,t),verifyTypedData:t=>cW(e,t),uninstallFilter:t=>y6(e,t),waitForTransactionReceipt:t=>V4(e,t),watchBlocks:t=>dW(e,t),watchBlockNumber:t=>G4(e,t),watchContractEvent:t=>Bh(e,t),watchEvent:t=>lW(e,t),watchPendingTransactions:t=>mW(e,t)}}var SW=I(()=>{Fq();Jq();Yq();tG();Qk();gl();Yk();rG();y9();eI();tI();pk();ik();fh();ok();dh();sG();iG();O1();hl();uG();N1();r8();bh();lG();yG();Qb();hG();eh();mh();HV();zV();U4();qV();Nb();FI();VV();ks();zI();nW();Lh();Yb();g8();iW();uW();YI();QI();fW();Lk();pW();bW();vW();sl();Hh();W4()});function _e(e){let{key:t="public",name:n="Public Client"}=e;return Yh({...e,key:t,name:n,type:"publicClient"}).extend(TW)}var AW=I(()=>{Wk();SW()});async function _W(e,{chain:t}){let{id:n,name:r,nativeCurrency:a,rpcUrls:s,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:F(n),chainName:r,nativeCurrency:a,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:i})=>i):void 0}]},{dedupe:!0,retryCount:0})}var EW=I(()=>{Ve()});function kW(e,t){let{abi:n,args:r,bytecode:a,...s}=t,o=_i({abi:n,args:r,bytecode:a});return g6(e,{...s,...s.authorizationList?{to:null}:{},data:o})}var IW=I(()=>{Kb();e8()});async function CW(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>mi(n))}var PW=I(()=>{bi()});async function RW(e,t={}){let{account:n=e.account,chainId:r}=t,a=n?at(n):void 0,s=r?[a?.address,[F(r)]]:[a?.address],o=await e.request({method:"wallet_getCapabilities",params:s}),i={};for(let[u,d]of Object.entries(o)){i[Number(u)]={};for(let[l,p]of Object.entries(d))l==="addSubAccount"&&(l="unstable_addSubAccount"),i[Number(u)][l]=p}return typeof r=="number"?i[r]:i}var $W=I(()=>{r0();Ve()});async function DW(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}var MW=I(()=>{});async function Z4(e,t){let{account:n=e.account,chainId:r,nonce:a}=t;if(!n)throw new ur({docsPath:"/docs/eip7702/prepareAuthorization"});let s=at(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:at(t.executor)})(),i={address:t.contractAddress??t.address,chainId:r,nonce:a};return typeof i.chainId>"u"&&(i.chainId=e.chain?.id??await ce(e,Lr,"getChainId")({})),typeof i.nonce>"u"&&(i.nonce=await ce(e,o6,"getTransactionCount")({address:s.address,blockTag:"pending"}),(o==="self"||o?.address&&Tr(o.address,s.address))&&(i.nonce+=1)),i}var eC=I(()=>{r0();F1();c6();sn();N1();Nb()});async function OW(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>xe(n))}var NW=I(()=>{bi()});async function LW(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}var BW=I(()=>{});async function UW(e,t){let{chain:n=e.chain}=t,r=t.timeout??Math.max((n?.blockTime??0)*3,5e3),a=await Vh(e,t);return await Kh(e,{...t,id:a.id,timeout:r})}var HW=I(()=>{Wh();Gk()});async function K4(e,t){let{account:n=e.account,chain:r=e.chain,accessList:a,authorizationList:s,blobs:o,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,pollingInterval:g,throwOnReceiptRevert:h,type:w,value:v,...T}=t,A=t.timeout??Math.max((r?.blockTime??0)*3,5e3);if(typeof n>"u")throw new ur({docsPath:"/docs/actions/wallet/sendTransactionSync"});let _=n?at(n):null;try{ir(t);let E=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await n6({authorization:s[0]}).catch(()=>{throw new z("`to` is required. Could not infer from `authorizationList`.")})})();if(_?.type==="json-rpc"||_===null){let O;r!==null&&(O=await ce(e,Lr,"getChainId")({}),xl({currentChainId:O,chain:r}));let $=e.chain?.formatters?.transactionRequest?.format,V=($||Nr)({...eo(T,{format:$}),accessList:a,account:_,authorizationList:s,blobs:o,chainId:O,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,to:E,type:w,value:v},"sendTransaction"),D=tC.get(e.uid),G=D?"wallet_sendTransaction":"eth_sendTransaction",N=await(async()=>{try{return await e.request({method:G,params:[V]},{retryCount:0})}catch(me){if(D===!1)throw me;let j=me;if(j.name==="InvalidInputRpcError"||j.name==="InvalidParamsRpcError"||j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[V]},{retryCount:0}).then(Z=>(tC.set(e.uid,!0),Z)).catch(Z=>{let de=Z;throw de.name==="MethodNotFoundRpcError"||de.name==="MethodNotSupportedRpcError"?(tC.set(e.uid,!1),j):de});throw j}})(),W=await ce(e,V4,"waitForTransactionReceipt")({checkReplacement:!1,hash:N,pollingInterval:g,timeout:A});if(h&&W.status==="reverted")throw new mf({receipt:W});return W}if(_?.type==="local"){let O=await ce(e,Ti,"prepareTransactionRequest")({account:_,accessList:a,authorizationList:s,blobs:o,chain:r,data:i,gas:u,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:y,nonce:m,nonceManager:_.nonceManager,parameters:[...Bb,"sidecars"],type:w,value:v,...T,to:E}),$=r?.serializers?.transaction,B=await _.signTransaction(O,{serializer:$});return await ce(e,$l,"sendRawTransactionSync")({serializedTransaction:B,throwOnReceiptRevert:h,timeout:t.timeout})}throw _?.type==="smart"?new ao({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ao({docsPath:"/docs/actions/wallet/sendTransactionSync",type:_?.type})}catch(E){throw E instanceof ao?E:i6(E,{...t,account:_,chain:t.chain||void 0})}}var tC,nC=I(()=>{r0();F1();yt();Ks();$b();Uh();Lb();f5();D1();sn();qc();vi();N1();YI();sl();W4();tC=new $r(128)});async function FW(e,t){let{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}var zW=I(()=>{});async function jW(e,t){let{account:n=e.account}=t;if(!n)throw new ur({docsPath:"/docs/eip7702/signAuthorization"});let r=at(n);if(!r.signAuthorization)throw new ao({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});let a=await Z4(e,t);return r.signAuthorization(a)}var qW=I(()=>{r0();F1();eC()});async function GW(e,{account:t=e.account,message:n}){if(!t)throw new ur({docsPath:"/docs/actions/wallet/signMessage"});let r=at(t);if(r.signMessage)return r.signMessage({message:n});let a=typeof n=="string"?qa(n):n.raw instanceof Uint8Array?ge(n.raw):n.raw;return e.request({method:"personal_sign",params:[a,r.address]},{retryCount:0})}var VW=I(()=>{r0();F1();Ve()});async function WW(e,t){let{account:n=e.account,chain:r=e.chain,...a}=t;if(!n)throw new ur({docsPath:"/docs/actions/wallet/signTransaction"});let s=at(n);ir({account:s,...t});let o=await ce(e,Lr,"getChainId")({});r!==null&&xl({currentChainId:o,chain:r});let u=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||Nr;return s.signTransaction?s.signTransaction({...a,chainId:o},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u({...a,account:s},"signTransaction"),chainId:F(o),from:s.address}]},{retryCount:0})}var ZW=I(()=>{r0();F1();Uh();Ve();D1();sn();vi();N1()});async function KW(e,t){let{account:n=e.account,domain:r,message:a,primaryType:s}=t;if(!n)throw new ur({docsPath:"/docs/actions/wallet/signTypedData"});let o=at(n),i={EIP712Domain:g4({domain:r}),...t.types};if(y4({domain:r,message:a,primaryType:s,types:i}),o.signTypedData)return o.signTypedData({domain:r,message:a,primaryType:s,types:i});let u=QG({domain:r,message:a,primaryType:s,types:i});return e.request({method:"eth_signTypedData_v4",params:[o.address,u]},{retryCount:0})}var XW=I(()=>{r0();F1();cI()});async function JW(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:F(t)}]},{retryCount:0})}var QW=I(()=>{Ve()});async function YW(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}var eZ=I(()=>{});async function tZ(e,t){return Mt.internal(e,K4,"sendTransactionSync",t)}var nZ=I(()=>{nC();t8()});function rZ(e){return{addChain:t=>_W(e,t),deployContract:t=>kW(e,t),fillTransaction:t=>al(e,t),getAddresses:()=>CW(e),getCallsStatus:t=>Zh(e,t),getCapabilities:t=>RW(e,t),getChainId:()=>Lr(e),getPermissions:()=>DW(e),prepareAuthorization:t=>Z4(e,t),prepareTransactionRequest:t=>Ti(e,t),requestAddresses:()=>OW(e),requestPermissions:t=>LW(e,t),sendCalls:t=>Vh(e,t),sendCallsSync:t=>UW(e,t),sendRawTransaction:t=>wl(e,t),sendRawTransactionSync:t=>$l(e,t),sendTransaction:t=>g6(e,t),sendTransactionSync:t=>K4(e,t),showCallsStatus:t=>FW(e,t),signAuthorization:t=>jW(e,t),signMessage:t=>GW(e,t),signTransaction:t=>WW(e,t),signTypedData:t=>KW(e,t),switchChain:t=>JW(e,t),waitForCallsStatus:t=>Kh(e,t),watchAsset:t=>YW(e,t),writeContract:t=>Mt(e,t),writeContractSync:t=>tZ(e,t)}}var aZ=I(()=>{dh();N1();EW();IW();PW();jk();$W();MW();eC();sl();NW();BW();Wh();HW();Hh();W4();e8();nC();zW();qW();VW();ZW();XW();QW();Gk();eZ();t8();nZ()});function Tt(e){let{key:t="wallet",name:n="Wallet Client",transport:r}=e;return Yh({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(rZ)}var sZ=I(()=>{Wk();aZ()});function X4({key:e,methods:t,name:n,request:r,retryCount:a=3,retryDelay:s=150,timeout:o,type:i},u){let d=Qh();return{config:{key:e,methods:t,name:n,request:r,retryCount:a,retryDelay:s,timeout:o,type:i},request:BG(r,{methods:t,retryCount:a,retryDelay:s,uid:d}),value:u}}var rC=I(()=>{UG();Vk()});function aC(e,t={}){let{key:n="custom",methods:r,name:a="Custom Provider",retryDelay:s}=t;return({retryCount:o})=>X4({key:n,methods:r,name:a,request:e.request.bind(e),retryCount:t.retryCount??o,retryDelay:s,type:"custom"})}var oZ=I(()=>{rC()});var J4,iZ=I(()=>{yt();J4=class extends z{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}});function gt(e,t={}){let{batch:n,fetchFn:r,fetchOptions:a,key:s="http",methods:o,name:i="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:d,retryDelay:l,raw:p}=t;return({chain:y,retryCount:m,timeout:g})=>{let{batchSize:h=1e3,wait:w=0}=typeof n=="object"?n:{},v=t.retryCount??m,T=g??t.timeout??1e4,A=e||y?.rpcUrls.default.http[0];if(!A)throw new J4;let _=GG(A,{fetchFn:r,fetchOptions:a,onRequest:u,onResponse:d,timeout:T});return X4({key:s,methods:o,name:i,async request({method:E,params:O}){let $={method:E,params:O},{schedule:B}=Dh({id:A,wait:w,shouldSplitBatch(N){return N.length>h},fn:N=>_.request({body:N}),sort:(N,W)=>N.id-W.id}),V=async N=>n?B(N):[await _.request({body:N})],[{error:D,result:G}]=await V($);if(p)return{error:D,result:G};if(D)throw new Zc({body:$,error:D,url:A});return G},retryCount:v,retryDelay:l,timeout:T,type:"http"},{fetchOptions:a,url:A})}}var cZ=I(()=>{n5();iZ();Pk();VG();rC()});var Y=I(()=>{Gu();Mq();AW();sZ();oZ();cZ();U1();ZI();J9();yt();ff();Uo();Kb();Xa();wG();Ub();bi();AG();Va();c6();HG();F0();Ts();h1();tr();v0();Ve();Ga();Ju();s8();h4();vb();Qu();A9();NV();HI()});function h8(){return ge(la.utils.randomPrivateKey())}var uZ=I(()=>{d5();Ve()});function dZ(e){if(typeof e=="string"){if(!Se(e,{strict:!1}))throw new In({address:e});return{address:e,type:"json-rpc"}}if(!Se(e.address,{strict:!1}))throw new In({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}var fZ=I(()=>{Bo();Va()});async function Ii({hash:e,privateKey:t,to:n="object"}){let{r,s:a,recovery:s}=la.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:mn(sC,{strict:!1})?bn(sC):sC}),o={r:F(r,{size:32}),s:F(a,{size:32}),v:s?28n:27n,yParity:s};return n==="bytes"||n==="hex"?q4({...o,to:n}):o}var sC,Dl=I(()=>{d5();Ts();v0();Ve();JI();sC=!1});async function lZ(e){let{chainId:t,nonce:n,privateKey:r,to:a="object"}=e,s=e.contractAddress??e.address,o=await Ii({hash:Z9({address:s,chainId:t,nonce:n}),privateKey:r,to:a});return a==="object"?{address:s,chainId:t,nonce:n,...o}:o}var pZ=I(()=>{tk();Dl()});async function mZ({message:e,privateKey:t}){return await Ii({hash:jo(e),privateKey:t,to:"hex"})}var bZ=I(()=>{s8();Dl()});async function yZ(e){let{privateKey:t,transaction:n,serializer:r=RG}=e,a=n.type==="eip4844"?{...n,sidecars:!1}:n,s=await Ii({hash:Ke(await r(a)),privateKey:t});return await r(n,s)}var gZ=I(()=>{Ga();aI();Dl()});async function hZ(e){let{privateKey:t,...n}=e;return await Ii({hash:z1(n),privateKey:t,to:"hex"})}var xZ=I(()=>{h4();Dl()});function ma(e,t={}){let{nonceManager:n}=t,r=ge(la.getPublicKey(e.slice(2),!1)),a=N9(r);return{...dZ({address:a,nonceManager:n,async sign({hash:o}){return Ii({hash:o,privateKey:e,to:"hex"})},async signAuthorization(o){return lZ({...o,privateKey:e})},async signMessage({message:o}){return mZ({message:o,privateKey:e})},async signTransaction(o,{serializer:i}={}){return yZ({privateKey:e,transaction:o,serializer:i})},async signTypedData(o){return hZ({...o,privateKey:e})}}),publicKey:r,source:"privateKey"}}var wZ=I(()=>{d5();Ve();fZ();_E();Dl();pZ();bZ();gZ();xZ()});var T6=I(()=>{uZ();wZ();r0()});function oC(){let e=h8();return{address:ma(e).address,privateKey:e}}async function iC(e){await K_(e.privateKey)}async function ht(){let e=await X_();return e?{address:ma(e).address,privateKey:e}:null}function on(e){return ma(e.privateKey)}var M0=I(()=>{"use strict";T6();t0()});function Qe(e){let t=S6[e];if(!t){let n=Object.keys(S6).join(", ");throw new Error(`Chain ${e} not supported. Supported chains: ${n}`)}return t}function cC(e){return e in S6}function uC(){return Object.keys(S6).map(Number)}function Ee(e,t){let n=Qe(e);return sI({id:e,name:n.displayName,nativeCurrency:n.nativeCurrency,rpcUrls:{default:{http:[t]}},blockExplorers:n.blockExplorer?{default:{name:"Explorer",url:n.blockExplorer}}:void 0})}async function vZ(e,t){try{let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_chainId",params:[],id:1})});if(!n.ok)return{valid:!1,error:`HTTP ${n.status}`};let r=await n.json();if(r.error)return{valid:!1,error:r.error.message};let a=parseInt(r.result||"0",16);return t!==0&&a!==t?{valid:!1,actualChainId:a,error:`Chain ID mismatch: expected ${t}, got ${a}`}:{valid:!0,actualChainId:a}}catch(n){return{valid:!1,error:`Connection failed: ${n instanceof Error?n.message:"Unknown error"}`}}}var S6,mt=I(()=>{"use strict";Y();S6={10143:{chainId:10143,name:"monad-testnet",displayName:"Monad Testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorer:"https://testnet.monadexplorer.com",tokens:{wmon:"0x3bd359c1119da7da1d913d1c4d2b7c461115433a",weth:"0xee8c0e9f1bffb4eb878d8f15f368a02a35481242"},aggregators:{router:"0x0000000000001fF3684f28c67538d4D072C22734"}},143:{chainId:143,name:"monad",displayName:"Monad",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorer:"https://monadvision.com",publicRpc:"https://rpc.monad.xyz",tokens:{wmon:"0x3bd359c1119da7da1d913d1c4d2b7c461115433a",weth:"0xee8c0e9f1bffb4eb878d8f15f368a02a35481242"},aggregators:{router:"0x0000000000001fF3684f28c67538d4D072C22734"}}}});function lve(){let e=new Uint8Array(32);return crypto.getRandomValues(e),"0x"+Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}async function TZ(e,t,n,r){let a=await ht();if(!a)throw new Error("Session key not found. Run setup_wallet first.");let s=ma(a.privateKey),o=Ee(n,r),i=Tt({account:s,chain:o,transport:gt(r)}),u=Math.floor(Date.now()/1e3),d={from:xe(a.address),to:xe(e.payTo),value:BigInt(e.amount),validAfter:BigInt(u-60),validBefore:BigInt(u+300),nonce:lve()},l={name:e.extra?.name||"USDC",version:e.extra?.version||"2",chainId:n,verifyingContract:xe(t)},p=await i.signTypedData({domain:l,types:fve,primaryType:"TransferWithAuthorization",message:{from:d.from,to:d.to,value:d.value,validAfter:d.validAfter,validBefore:d.validBefore,nonce:d.nonce}});return{authorization:d,signature:p}}function SZ(e,t,n,r){let a={x402Version:2,resource:r,accepted:n,payload:{authorization:{from:e.from,to:e.to,value:e.value.toString(),validAfter:e.validAfter.toString(),validBefore:e.validBefore.toString(),nonce:e.nonce},signature:t}};return Buffer.from(JSON.stringify(a)).toString("base64")}var fve,AZ=I(()=>{"use strict";Y();T6();M0();mt();fve={TransferWithAuthorization:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"validAfter",type:"uint256"},{name:"validBefore",type:"uint256"},{name:"nonce",type:"bytes32"}]}});var _Z,EZ=I(()=>{"use strict";_Z=["api.pr4gma.xyz","localhost:8787"]});async function PZ(e,t,n){let r=A5[n];if(!r)throw new Error(`USDC not configured for chain ${n}`);return t.readContract({address:r,abi:Xe,functionName:"balanceOf",args:[e]})}function dC(e){return`${le(e,x8)} USDC`}function RZ(e){return e in A5}function $Z(e){return A5[e]}var A5,x8,kZ,IZ,CZ,w8=I(()=>{"use strict";Y();A5={143:"0x754704Bc059F8C67012fEd69BC8A327a5aafb603"},x8=6,kZ=10000n,IZ=100000n,CZ=1000000n});import*as Ci from"node:fs/promises";import*as Q4 from"node:path";function fC(){let e=process.env.PRAGMA_CONFIG_PATH;return e?e.replace("~",process.env.HOME||""):Q4.join(process.env.HOME||"",".pragma","config.json")}function pve(){return Q4.dirname(fC())}async function mve(){let e=pve();await Ci.mkdir(e,{recursive:!0})}function bve(e){let t="x402";e.mode==="diy"||e.mode==="byok"?t="byok":(e.mode==="convenient"||e.mode==="x402")&&(t="x402");let n=e.network,r=n?.chainId,a=n?.name;if(!r)throw new Error("Invalid config: missing network.chainId");let s=Qe(r),o=a||s.name,i={mode:t,network:{chainId:r,name:o}},u=e.wallet;if(u){let l=u.smartAccountAddress,p=u.sessionKeyAddress,y=u.keyId;l&&p&&y&&(i.wallet={smartAccountAddress:l,sessionKeyAddress:p,keyId:y})}let d=e.providers;return d&&(i.providers=d),i}async function q(){let e=fC();try{let t=await Ci.readFile(e,"utf-8"),n=JSON.parse(t),r=bve(n),a=JSON.stringify(n),s=JSON.stringify(r);return a!==s&&(await Ml(r),console.error("[config] Migrated config to new format")),r}catch(t){if(t.code==="ENOENT")return null;throw t}}async function Ml(e){await mve();let t=fC(),n=`${t}.tmp`,r=JSON.stringify(e,null,2);await Ci.writeFile(n,r,"utf-8"),await Ci.rename(n,t)}function Pe(e){return e?.wallet?!!(e.wallet.smartAccountAddress&&e.wallet.sessionKeyAddress&&e.wallet.keyId):!1}function lC(e){let t=Qe(e);return{mode:"x402",network:{chainId:e,name:t.name}}}async function we(e){if(e.mode==="x402"){let{getX402BaseUrl:r}=await Promise.resolve().then(()=>(We(),pC));return`${r()}/${e.network.chainId}/rpc`}let{getProvider:t}=await Promise.resolve().then(()=>(t0(),Gm)),n=await t("rpc");if(!n)throw new Error("RPC not configured. Run /pragma:providers to set your RPC endpoint.");return n}async function Ol(e){if(e.mode==="x402"){let{getX402BaseUrl:r}=await Promise.resolve().then(()=>(We(),pC));return`${r()}/${e.network.chainId}/bundler`}let{getProvider:t}=await Promise.resolve().then(()=>(t0(),Gm)),n=await t("bundler");if(!n)throw new Error("Bundler not configured. Run /pragma:providers to set up your bundler provider.");return n}var Te=I(()=>{"use strict";mt()});function Y4(e){return new Promise(t=>setTimeout(t,e))}function ex(e){let t=e.message.toLowerCase();return yve.some(n=>t.includes(n.toLowerCase()))}function gve(e,t,n){return n?t*Math.pow(2,e):t}async function O0(e,t={}){let{maxRetries:n=2,baseDelayMs:r=500,exponentialBackoff:a=!0,operationName:s="operation",isTransient:o=ex}=t,i,u=0;for(let d=0;d<=n;d++)try{return{data:await e(),success:!0,retryCount:u}}catch(l){if(i=l instanceof Error?l:new Error(String(l)),d<n&&o(i)){u++;let p=gve(d,r,a);console.error(`[retry] ${s} failed (attempt ${d+1}/${n+1}): ${i.message}. Retrying in ${p}ms...`),await Y4(p);continue}break}return{error:i,success:!1,retryCount:u}}async function xt(e,t={}){let n=await O0(e,t);if(n.success&&n.data!==void 0)return n.data;throw n.error??new Error(`${t.operationName??"Operation"} failed after ${n.retryCount} retries`)}var yve,m0=I(()=>{"use strict";yve=["fetch failed","timeout","ECONNRESET","ECONNREFUSED","ETIMEDOUT","socket hang up","network","502","503","504","429","rate limit","too many requests"]});function wve(){tx===null&&typeof setInterval<"u"&&(tx=setInterval(()=>{let e=Date.now();for(let[t,n]of nx.entries())e-n.timestamp>hve&&nx.delete(t)},xve),tx.unref&&tx.unref())}function mC(e,t){wve(),nx.set(e.toLowerCase(),{receipt:t,timestamp:Date.now()})}function bC(e){return nx.get(e.toLowerCase())?.receipt}var nx,hve,xve,tx,rx=I(()=>{"use strict";nx=new Map,hve=300*1e3,xve=60*1e3,tx=null});function vve(e){let t=e.status,n;t==="0x1"||t===1||t===1n||t==="success"?n="success":n="reverted";let r=s=>typeof s=="bigint"?s:typeof s=="number"||typeof s=="string"?BigInt(s):0n,a=s=>typeof s=="number"?s:typeof s=="bigint"?Number(s):typeof s=="string"?parseInt(s,16):0;return{blockHash:e.blockHash,blockNumber:r(e.blockNumber),contractAddress:e.contractAddress,cumulativeGasUsed:r(e.cumulativeGasUsed),effectiveGasPrice:r(e.effectiveGasPrice),from:e.from,gasUsed:r(e.gasUsed),logs:e.logs||[],logsBloom:e.logsBloom,status:n,to:e.to,transactionHash:e.transactionHash,transactionIndex:a(e.transactionIndex),type:e.type}}function yC(e,t){let n=t?.timeout??5e3;return aC({async request({method:r,params:a}){let s=e({chain:void 0,retryCount:0});if(r==="eth_sendRawTransaction")try{let o=await s.request({method:"eth_sendRawTransactionSync",params:[...a,n]});if(typeof o=="object"&&o!==null&&"transactionHash"in o){let u=vve(o);return mC(u.transactionHash,u),u.transactionHash}return o}catch(o){let i=o,u=i?.code===-32601||i?.message?.includes("not found")||i?.message?.includes("not supported")||i?.message?.includes("unknown method"),d=i?.message?.includes("timeout")||i?.message?.includes("not available within");if(u||d)return s.request({method:r,params:a});throw o}return s.request({method:r,params:a})}})}var DZ=I(()=>{"use strict";Y();rx()});async function Xt(e,t,n){let r=bC(t);if(r)return r;let a=n?.timeout??6e4;return await e.waitForTransactionReceipt({hash:t,timeout:a})}var MZ=I(()=>{"use strict";rx()});var Ar=I(()=>{"use strict";DZ();MZ();rx()});var pC={};ni(pC,{createSyncHttpTransport:()=>Ze,createX402Fetch:()=>Sve,getApiEndpoint:()=>_5,getX402BaseUrl:()=>gn,isX402Endpoint:()=>NZ,isX402Mode:()=>Ct,serviceNeedsAuth:()=>_ve,x402Fetch:()=>dt,x402HttpOptions:()=>Ot});async function ax(e,t,n="fetch"){let r;for(let a=0;a<=Nl;a++)try{let s=await fetch(e,t);if(s.status===402)return s;if(s.status>=502&&s.status<=504){let o=`Server error ${s.status}`;if(a<Nl){let i=OZ*Math.pow(2,a);console.error(`[x402] ${n}: ${o}, retrying in ${i}ms (attempt ${a+1}/${Nl})`),await Y4(i);continue}return console.error(`[x402] ${n}: ${o} after ${Nl} retries`),s}return s}catch(s){if(r=s instanceof Error?s:new Error(String(s)),ex(r)&&a<Nl){let o=OZ*Math.pow(2,a);console.error(`[x402] ${n}: ${r.message}, retrying in ${o}ms (attempt ${a+1}/${Nl})`),await Y4(o);continue}throw r}throw r??new Error("Fetch failed after retries")}function NZ(e){let t=[..._Z];if(process.env.X402_API_URL)try{let n=new URL(process.env.X402_API_URL).host;t.includes(n)||t.push(n)}catch{}return t.some(n=>e.includes(n))}function Tve(e){if(!e)return!1;if(e instanceof Headers)return e.has(gC);let t=e;return gC in t||"X-PAYMENT"in t}async function dt(e,t){let n=e.toString();if(!NZ(n))return ax(e,t,"byok");if(Tve(t?.headers))return ax(e,t,"x402-paid");let r=await q(),a=r?.wallet?.smartAccountAddress,s=r?.wallet?.sessionKeyAddress,i={...t?.headers instanceof Headers?Object.fromEntries(t.headers.entries()):t?.headers||{},...a&&{"X-PRAGMA-WALLET":a},...s&&{"X-PRAGMA-SESSION":s}},u={...t,headers:i},d=await ax(e,u,"x402-initial");if(d.status!==402)return d;let l;try{l=await d.json()}catch{throw new Error("Invalid 402 response: could not parse payment requirements")}if(!l.accepts||l.accepts.length===0)throw new Error("No payment options available in 402 response");let p=l.accepts[0];if(!r)throw new Error("Config not loaded. Run setup_wallet first.");let y=r.network.chainId,m=await we(r),g=$Z(y);if(!g)throw new Error(`USDC not configured for chain ${y}`);let{authorization:h,signature:w}=await TZ(p,g,y,m),v=SZ(h,w,p,l.resource),T={...t,headers:{...i,[gC]:v}},A=await ax(e,T,"x402-paid");if(A.status===402){let _="Payment rejected";try{let E=await A.json();_=`Payment rejected: ${E.reason||E.message||"Unknown reason"}`}catch{}throw new Error(_)}return A}async function Ct(){return(await q())?.mode==="x402"}function Sve(e){return async(t,n)=>{try{return await dt(t,n)}catch(r){throw r instanceof Error&&e&&e(r,t.toString()),r}}}function Ot(e){return e.mode!=="x402"?{}:{fetchFn:dt,retryCount:0}}function Ze(e,t){let n=gt(e,Ot(t));return yC(n)}function gn(){return process.env.X402_API_URL||Ave}async function _5(e,t){if(await Ct())return{url:`${gn()}/${t}/${e}`,needsAuth:!1,isX402:!0};throw new Error(`BYOK mode requires adapter configuration. Run /pragma:providers to set up your ${e} provider.`)}async function _ve(e){return!await Ct()}var gC,Nl,OZ,Ave,We=I(()=>{"use strict";Y();AZ();EZ();w8();Te();m0();Ar();gC="x-payment",Nl=2,OZ=500;Ave="https://api.pr4gma.xyz"});import{existsSync as LZ,mkdirSync as C9t,readdirSync as Eve,readFileSync as kve,writeFileSync as P9t,unlinkSync as R9t}from"node:fs";import{homedir as Ive}from"node:os";import*as ox from"node:path";function Cve(){return ox.join(Ive(),".pragma","providers")}function BZ(e){return ox.join(Cve(),e)}function Pve(e,t){return ox.join(BZ(e),`${t}.json`)}function sx(e,t){let n=Pve(e,t);if(!LZ(n))return null;try{let r=kve(n,"utf-8"),a=JSON.parse(r);return!a.name||!a.type||!a.endpoint||!a.auth?(console.warn(`[adapters] Invalid adapter file: ${n} - missing required fields`),null):a.type!==e?(console.warn(`[adapters] Adapter type mismatch: ${n} - expected ${e}, got ${a.type}`),null):a}catch(r){return console.warn(`[adapters] Failed to load adapter: ${n}`,r),null}}function v8(e){let t=BZ(e);if(!LZ(t))return[];try{return Eve(t).filter(r=>r.endsWith(".json")).map(r=>r.slice(0,-5))}catch{return[]}}function UZ(e,t){let n=t?.[e]??[];if(n.length===0){let a=v8(e);if(a.length===0)return[];let s=sx(e,a[0]);return s?[s]:[]}let r=[];for(let a of n){let s=sx(e,a);s?r.push(s):console.warn(`[adapters] Configured adapter not found: ${e}/${a}`)}return r}var hC=I(()=>{"use strict"});var vC=L((Ul,k8)=>{(function(){var e,t="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",i=500,u="__lodash_placeholder__",d=1,l=2,p=4,y=1,m=2,g=1,h=2,w=4,v=8,T=16,A=32,_=64,E=128,O=256,$=512,B=30,V="...",D=800,G=16,N=1,W=2,me=3,j=1/0,Z=9007199254740991,de=17976931348623157e292,ne=NaN,be=4294967295,ze=be-1,pt=be>>>1,rn=[["ary",E],["bind",g],["bindKey",h],["curry",v],["curryRight",T],["flip",$],["partial",A],["partialRight",_],["rearg",O]],zt="[object Arguments]",ct="[object Array]",fn="[object AsyncFunction]",Pn="[object Boolean]",W0="[object Date]",Zi="[object DOMException]",Yr="[object Error]",yo="[object Function]",Y5="[object GeneratorFunction]",pr="[object Map]",fs="[object Number]",Y6="[object Null]",_r="[object Object]",xp="[object Promise]",Lse="[object Proxy]",wp="[object RegExp]",go="[object Set]",vp="[object String]",X2="[object Symbol]",Bse="[object Undefined]",Tp="[object WeakMap]",Use="[object WeakSet]",Sp="[object ArrayBuffer]",ed="[object DataView]",G7="[object Float32Array]",V7="[object Float64Array]",W7="[object Int8Array]",Z7="[object Int16Array]",K7="[object Int32Array]",X7="[object Uint8Array]",J7="[object Uint8ClampedArray]",Q7="[object Uint16Array]",Y7="[object Uint32Array]",Hse=/\b__p \+= '';/g,Fse=/\b(__p \+=) '' \+/g,zse=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k$=/&(?:amp|lt|gt|quot|#39);/g,I$=/[&<>"']/g,jse=RegExp(k$.source),qse=RegExp(I$.source),Gse=/<%-([\s\S]+?)%>/g,Vse=/<%([\s\S]+?)%>/g,C$=/<%=([\s\S]+?)%>/g,Wse=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zse=/^\w*$/,Kse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ew=/[\\^$.*+?()[\]{}|]/g,Xse=RegExp(ew.source),tw=/^\s+/,Jse=/\s/,Qse=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yse=/\{\n\/\* \[wrapped with (.+)\] \*/,eoe=/,? & /,toe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,noe=/[()=,{}\[\]\/\s]/,roe=/\\(\\)?/g,aoe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,P$=/\w*$/,soe=/^[-+]0x[0-9a-f]+$/i,ooe=/^0b[01]+$/i,ioe=/^\[object .+?Constructor\]$/,coe=/^0o[0-7]+$/i,uoe=/^(?:0|[1-9]\d*)$/,doe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,J2=/($^)/,foe=/['\n\r\u2028\u2029\\]/g,Q2="\\ud800-\\udfff",loe="\\u0300-\\u036f",poe="\\ufe20-\\ufe2f",moe="\\u20d0-\\u20ff",R$=loe+poe+moe,$$="\\u2700-\\u27bf",D$="a-z\\xdf-\\xf6\\xf8-\\xff",boe="\\xac\\xb1\\xd7\\xf7",yoe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",goe="\\u2000-\\u206f",hoe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",M$="A-Z\\xc0-\\xd6\\xd8-\\xde",O$="\\ufe0e\\ufe0f",N$=boe+yoe+goe+hoe,nw="['\u2019]",xoe="["+Q2+"]",L$="["+N$+"]",Y2="["+R$+"]",B$="\\d+",woe="["+$$+"]",U$="["+D$+"]",H$="[^"+Q2+N$+B$+$$+D$+M$+"]",rw="\\ud83c[\\udffb-\\udfff]",voe="(?:"+Y2+"|"+rw+")",F$="[^"+Q2+"]",aw="(?:\\ud83c[\\udde6-\\uddff]){2}",sw="[\\ud800-\\udbff][\\udc00-\\udfff]",td="["+M$+"]",z$="\\u200d",j$="(?:"+U$+"|"+H$+")",Toe="(?:"+td+"|"+H$+")",q$="(?:"+nw+"(?:d|ll|m|re|s|t|ve))?",G$="(?:"+nw+"(?:D|LL|M|RE|S|T|VE))?",V$=voe+"?",W$="["+O$+"]?",Soe="(?:"+z$+"(?:"+[F$,aw,sw].join("|")+")"+W$+V$+")*",Aoe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_oe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Z$=W$+V$+Soe,Eoe="(?:"+[woe,aw,sw].join("|")+")"+Z$,koe="(?:"+[F$+Y2+"?",Y2,aw,sw,xoe].join("|")+")",Ioe=RegExp(nw,"g"),Coe=RegExp(Y2,"g"),ow=RegExp(rw+"(?="+rw+")|"+koe+Z$,"g"),Poe=RegExp([td+"?"+U$+"+"+q$+"(?="+[L$,td,"$"].join("|")+")",Toe+"+"+G$+"(?="+[L$,td+j$,"$"].join("|")+")",td+"?"+j$+"+"+q$,td+"+"+G$,_oe,Aoe,B$,Eoe].join("|"),"g"),Roe=RegExp("["+z$+Q2+R$+O$+"]"),$oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Doe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Moe=-1,jn={};jn[G7]=jn[V7]=jn[W7]=jn[Z7]=jn[K7]=jn[X7]=jn[J7]=jn[Q7]=jn[Y7]=!0,jn[zt]=jn[ct]=jn[Sp]=jn[Pn]=jn[ed]=jn[W0]=jn[Yr]=jn[yo]=jn[pr]=jn[fs]=jn[_r]=jn[wp]=jn[go]=jn[vp]=jn[Tp]=!1;var Mn={};Mn[zt]=Mn[ct]=Mn[Sp]=Mn[ed]=Mn[Pn]=Mn[W0]=Mn[G7]=Mn[V7]=Mn[W7]=Mn[Z7]=Mn[K7]=Mn[pr]=Mn[fs]=Mn[_r]=Mn[wp]=Mn[go]=Mn[vp]=Mn[X2]=Mn[X7]=Mn[J7]=Mn[Q7]=Mn[Y7]=!0,Mn[Yr]=Mn[yo]=Mn[Tp]=!1;var Ooe={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Noe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Loe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Boe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uoe=parseFloat,Hoe=parseInt,K$=typeof global=="object"&&global&&global.Object===Object&&global,Foe=typeof self=="object"&&self&&self.Object===Object&&self,ar=K$||Foe||Function("return this")(),iw=typeof Ul=="object"&&Ul&&!Ul.nodeType&&Ul,eu=iw&&typeof k8=="object"&&k8&&!k8.nodeType&&k8,X$=eu&&eu.exports===iw,cw=X$&&K$.process,Ps=(function(){try{var U=eu&&eu.require&&eu.require("util").types;return U||cw&&cw.binding&&cw.binding("util")}catch{}})(),J$=Ps&&Ps.isArrayBuffer,Q$=Ps&&Ps.isDate,Y$=Ps&&Ps.isMap,eD=Ps&&Ps.isRegExp,tD=Ps&&Ps.isSet,nD=Ps&&Ps.isTypedArray;function ls(U,ee,K){switch(K.length){case 0:return U.call(ee);case 1:return U.call(ee,K[0]);case 2:return U.call(ee,K[0],K[1]);case 3:return U.call(ee,K[0],K[1],K[2])}return U.apply(ee,K)}function zoe(U,ee,K,De){for(var bt=-1,xn=U==null?0:U.length;++bt<xn;){var Z0=U[bt];ee(De,Z0,K(Z0),U)}return De}function Rs(U,ee){for(var K=-1,De=U==null?0:U.length;++K<De&&ee(U[K],K,U)!==!1;);return U}function joe(U,ee){for(var K=U==null?0:U.length;K--&&ee(U[K],K,U)!==!1;);return U}function rD(U,ee){for(var K=-1,De=U==null?0:U.length;++K<De;)if(!ee(U[K],K,U))return!1;return!0}function uc(U,ee){for(var K=-1,De=U==null?0:U.length,bt=0,xn=[];++K<De;){var Z0=U[K];ee(Z0,K,U)&&(xn[bt++]=Z0)}return xn}function ey(U,ee){var K=U==null?0:U.length;return!!K&&nd(U,ee,0)>-1}function uw(U,ee,K){for(var De=-1,bt=U==null?0:U.length;++De<bt;)if(K(ee,U[De]))return!0;return!1}function Xn(U,ee){for(var K=-1,De=U==null?0:U.length,bt=Array(De);++K<De;)bt[K]=ee(U[K],K,U);return bt}function dc(U,ee){for(var K=-1,De=ee.length,bt=U.length;++K<De;)U[bt+K]=ee[K];return U}function dw(U,ee,K,De){var bt=-1,xn=U==null?0:U.length;for(De&&xn&&(K=U[++bt]);++bt<xn;)K=ee(K,U[bt],bt,U);return K}function qoe(U,ee,K,De){var bt=U==null?0:U.length;for(De&&bt&&(K=U[--bt]);bt--;)K=ee(K,U[bt],bt,U);return K}function fw(U,ee){for(var K=-1,De=U==null?0:U.length;++K<De;)if(ee(U[K],K,U))return!0;return!1}var Goe=lw("length");function Voe(U){return U.split("")}function Woe(U){return U.match(toe)||[]}function aD(U,ee,K){var De;return K(U,function(bt,xn,Z0){if(ee(bt,xn,Z0))return De=xn,!1}),De}function ty(U,ee,K,De){for(var bt=U.length,xn=K+(De?1:-1);De?xn--:++xn<bt;)if(ee(U[xn],xn,U))return xn;return-1}function nd(U,ee,K){return ee===ee?sie(U,ee,K):ty(U,sD,K)}function Zoe(U,ee,K,De){for(var bt=K-1,xn=U.length;++bt<xn;)if(De(U[bt],ee))return bt;return-1}function sD(U){return U!==U}function oD(U,ee){var K=U==null?0:U.length;return K?mw(U,ee)/K:ne}function lw(U){return function(ee){return ee==null?e:ee[U]}}function pw(U){return function(ee){return U==null?e:U[ee]}}function iD(U,ee,K,De,bt){return bt(U,function(xn,Z0,Rn){K=De?(De=!1,xn):ee(K,xn,Z0,Rn)}),K}function Koe(U,ee){var K=U.length;for(U.sort(ee);K--;)U[K]=U[K].value;return U}function mw(U,ee){for(var K,De=-1,bt=U.length;++De<bt;){var xn=ee(U[De]);xn!==e&&(K=K===e?xn:K+xn)}return K}function bw(U,ee){for(var K=-1,De=Array(U);++K<U;)De[K]=ee(K);return De}function Xoe(U,ee){return Xn(ee,function(K){return[K,U[K]]})}function cD(U){return U&&U.slice(0,lD(U)+1).replace(tw,"")}function ps(U){return function(ee){return U(ee)}}function yw(U,ee){return Xn(ee,function(K){return U[K]})}function Ap(U,ee){return U.has(ee)}function uD(U,ee){for(var K=-1,De=U.length;++K<De&&nd(ee,U[K],0)>-1;);return K}function dD(U,ee){for(var K=U.length;K--&&nd(ee,U[K],0)>-1;);return K}function Joe(U,ee){for(var K=U.length,De=0;K--;)U[K]===ee&&++De;return De}var Qoe=pw(Ooe),Yoe=pw(Noe);function eie(U){return"\\"+Boe[U]}function tie(U,ee){return U==null?e:U[ee]}function rd(U){return Roe.test(U)}function nie(U){return $oe.test(U)}function rie(U){for(var ee,K=[];!(ee=U.next()).done;)K.push(ee.value);return K}function gw(U){var ee=-1,K=Array(U.size);return U.forEach(function(De,bt){K[++ee]=[bt,De]}),K}function fD(U,ee){return function(K){return U(ee(K))}}function fc(U,ee){for(var K=-1,De=U.length,bt=0,xn=[];++K<De;){var Z0=U[K];(Z0===ee||Z0===u)&&(U[K]=u,xn[bt++]=K)}return xn}function ny(U){var ee=-1,K=Array(U.size);return U.forEach(function(De){K[++ee]=De}),K}function aie(U){var ee=-1,K=Array(U.size);return U.forEach(function(De){K[++ee]=[De,De]}),K}function sie(U,ee,K){for(var De=K-1,bt=U.length;++De<bt;)if(U[De]===ee)return De;return-1}function oie(U,ee,K){for(var De=K+1;De--;)if(U[De]===ee)return De;return De}function ad(U){return rd(U)?cie(U):Goe(U)}function ho(U){return rd(U)?uie(U):Voe(U)}function lD(U){for(var ee=U.length;ee--&&Jse.test(U.charAt(ee)););return ee}var iie=pw(Loe);function cie(U){for(var ee=ow.lastIndex=0;ow.test(U);)++ee;return ee}function uie(U){return U.match(ow)||[]}function die(U){return U.match(Poe)||[]}var fie=(function U(ee){ee=ee==null?ar:lc.defaults(ar.Object(),ee,lc.pick(ar,Doe));var K=ee.Array,De=ee.Date,bt=ee.Error,xn=ee.Function,Z0=ee.Math,Rn=ee.Object,hw=ee.RegExp,lie=ee.String,$s=ee.TypeError,ry=K.prototype,pie=xn.prototype,sd=Rn.prototype,ay=ee["__core-js_shared__"],sy=pie.toString,Sn=sd.hasOwnProperty,mie=0,pD=(function(){var c=/[^.]+$/.exec(ay&&ay.keys&&ay.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""})(),oy=sd.toString,bie=sy.call(Rn),yie=ar._,gie=hw("^"+sy.call(Sn).replace(ew,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iy=X$?ee.Buffer:e,pc=ee.Symbol,cy=ee.Uint8Array,mD=iy?iy.allocUnsafe:e,uy=fD(Rn.getPrototypeOf,Rn),bD=Rn.create,yD=sd.propertyIsEnumerable,dy=ry.splice,gD=pc?pc.isConcatSpreadable:e,_p=pc?pc.iterator:e,tu=pc?pc.toStringTag:e,fy=(function(){try{var c=ou(Rn,"defineProperty");return c({},"",{}),c}catch{}})(),hie=ee.clearTimeout!==ar.clearTimeout&&ee.clearTimeout,xie=De&&De.now!==ar.Date.now&&De.now,wie=ee.setTimeout!==ar.setTimeout&&ee.setTimeout,ly=Z0.ceil,py=Z0.floor,xw=Rn.getOwnPropertySymbols,vie=iy?iy.isBuffer:e,hD=ee.isFinite,Tie=ry.join,Sie=fD(Rn.keys,Rn),K0=Z0.max,Er=Z0.min,Aie=De.now,_ie=ee.parseInt,xD=Z0.random,Eie=ry.reverse,ww=ou(ee,"DataView"),Ep=ou(ee,"Map"),vw=ou(ee,"Promise"),od=ou(ee,"Set"),kp=ou(ee,"WeakMap"),Ip=ou(Rn,"create"),my=kp&&new kp,id={},kie=iu(ww),Iie=iu(Ep),Cie=iu(vw),Pie=iu(od),Rie=iu(kp),by=pc?pc.prototype:e,Cp=by?by.valueOf:e,wD=by?by.toString:e;function k(c){if(x0(c)&&!vt(c)&&!(c instanceof Gt)){if(c instanceof Ds)return c;if(Sn.call(c,"__wrapped__"))return vM(c)}return new Ds(c)}var cd=(function(){function c(){}return function(f){if(!u0(f))return{};if(bD)return bD(f);c.prototype=f;var b=new c;return c.prototype=e,b}})();function yy(){}function Ds(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=e}k.templateSettings={escape:Gse,evaluate:Vse,interpolate:C$,variable:"",imports:{_:k}},k.prototype=yy.prototype,k.prototype.constructor=k,Ds.prototype=cd(yy.prototype),Ds.prototype.constructor=Ds;function Gt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function $ie(){var c=new Gt(this.__wrapped__);return c.__actions__=Ra(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Ra(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Ra(this.__views__),c}function Die(){if(this.__filtered__){var c=new Gt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Mie(){var c=this.__wrapped__.value(),f=this.__dir__,b=vt(c),x=f<0,S=b?c.length:0,P=V1e(0,S,this.__views__),R=P.start,M=P.end,H=M-R,re=x?M:R-1,ae=this.__iteratees__,ue=ae.length,ve=0,Be=Er(H,this.__takeCount__);if(!b||!x&&S==H&&Be==H)return qD(c,this.__actions__);var ot=[];e:for(;H--&&ve<Be;){re+=f;for(var Rt=-1,it=c[re];++Rt<ue;){var jt=ae[Rt],Jt=jt.iteratee,ys=jt.type,na=Jt(it);if(ys==W)it=na;else if(!na){if(ys==N)continue e;break e}}ot[ve++]=it}return ot}Gt.prototype=cd(yy.prototype),Gt.prototype.constructor=Gt;function nu(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Oie(){this.__data__=Ip?Ip(null):{},this.size=0}function Nie(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function Lie(c){var f=this.__data__;if(Ip){var b=f[c];return b===o?e:b}return Sn.call(f,c)?f[c]:e}function Bie(c){var f=this.__data__;return Ip?f[c]!==e:Sn.call(f,c)}function Uie(c,f){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=Ip&&f===e?o:f,this}nu.prototype.clear=Oie,nu.prototype.delete=Nie,nu.prototype.get=Lie,nu.prototype.has=Bie,nu.prototype.set=Uie;function Ki(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Hie(){this.__data__=[],this.size=0}function Fie(c){var f=this.__data__,b=gy(f,c);if(b<0)return!1;var x=f.length-1;return b==x?f.pop():dy.call(f,b,1),--this.size,!0}function zie(c){var f=this.__data__,b=gy(f,c);return b<0?e:f[b][1]}function jie(c){return gy(this.__data__,c)>-1}function qie(c,f){var b=this.__data__,x=gy(b,c);return x<0?(++this.size,b.push([c,f])):b[x][1]=f,this}Ki.prototype.clear=Hie,Ki.prototype.delete=Fie,Ki.prototype.get=zie,Ki.prototype.has=jie,Ki.prototype.set=qie;function Xi(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Gie(){this.size=0,this.__data__={hash:new nu,map:new(Ep||Ki),string:new nu}}function Vie(c){var f=Cy(this,c).delete(c);return this.size-=f?1:0,f}function Wie(c){return Cy(this,c).get(c)}function Zie(c){return Cy(this,c).has(c)}function Kie(c,f){var b=Cy(this,c),x=b.size;return b.set(c,f),this.size+=b.size==x?0:1,this}Xi.prototype.clear=Gie,Xi.prototype.delete=Vie,Xi.prototype.get=Wie,Xi.prototype.has=Zie,Xi.prototype.set=Kie;function ru(c){var f=-1,b=c==null?0:c.length;for(this.__data__=new Xi;++f<b;)this.add(c[f])}function Xie(c){return this.__data__.set(c,o),this}function Jie(c){return this.__data__.has(c)}ru.prototype.add=ru.prototype.push=Xie,ru.prototype.has=Jie;function xo(c){var f=this.__data__=new Ki(c);this.size=f.size}function Qie(){this.__data__=new Ki,this.size=0}function Yie(c){var f=this.__data__,b=f.delete(c);return this.size=f.size,b}function e1e(c){return this.__data__.get(c)}function t1e(c){return this.__data__.has(c)}function n1e(c,f){var b=this.__data__;if(b instanceof Ki){var x=b.__data__;if(!Ep||x.length<n-1)return x.push([c,f]),this.size=++b.size,this;b=this.__data__=new Xi(x)}return b.set(c,f),this.size=b.size,this}xo.prototype.clear=Qie,xo.prototype.delete=Yie,xo.prototype.get=e1e,xo.prototype.has=t1e,xo.prototype.set=n1e;function vD(c,f){var b=vt(c),x=!b&&cu(c),S=!b&&!x&&hc(c),P=!b&&!x&&!S&&ld(c),R=b||x||S||P,M=R?bw(c.length,lie):[],H=M.length;for(var re in c)(f||Sn.call(c,re))&&!(R&&(re=="length"||S&&(re=="offset"||re=="parent")||P&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||e1(re,H)))&&M.push(re);return M}function TD(c){var f=c.length;return f?c[$w(0,f-1)]:e}function r1e(c,f){return Py(Ra(c),au(f,0,c.length))}function a1e(c){return Py(Ra(c))}function Tw(c,f,b){(b!==e&&!wo(c[f],b)||b===e&&!(f in c))&&Ji(c,f,b)}function Pp(c,f,b){var x=c[f];(!(Sn.call(c,f)&&wo(x,b))||b===e&&!(f in c))&&Ji(c,f,b)}function gy(c,f){for(var b=c.length;b--;)if(wo(c[b][0],f))return b;return-1}function s1e(c,f,b,x){return mc(c,function(S,P,R){f(x,S,b(S),R)}),x}function SD(c,f){return c&&ei(f,sr(f),c)}function o1e(c,f){return c&&ei(f,Da(f),c)}function Ji(c,f,b){f=="__proto__"&&fy?fy(c,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):c[f]=b}function Sw(c,f){for(var b=-1,x=f.length,S=K(x),P=c==null;++b<x;)S[b]=P?e:rv(c,f[b]);return S}function au(c,f,b){return c===c&&(b!==e&&(c=c<=b?c:b),f!==e&&(c=c>=f?c:f)),c}function Ms(c,f,b,x,S,P){var R,M=f&d,H=f&l,re=f&p;if(b&&(R=S?b(c,x,S,P):b(c)),R!==e)return R;if(!u0(c))return c;var ae=vt(c);if(ae){if(R=Z1e(c),!M)return Ra(c,R)}else{var ue=kr(c),ve=ue==yo||ue==Y5;if(hc(c))return WD(c,M);if(ue==_r||ue==zt||ve&&!S){if(R=H||ve?{}:lM(c),!M)return H?L1e(c,o1e(R,c)):N1e(c,SD(R,c))}else{if(!Mn[ue])return S?c:{};R=K1e(c,ue,M)}}P||(P=new xo);var Be=P.get(c);if(Be)return Be;P.set(c,R),FM(c)?c.forEach(function(it){R.add(Ms(it,f,b,it,c,P))}):UM(c)&&c.forEach(function(it,jt){R.set(jt,Ms(it,f,b,jt,c,P))});var ot=re?H?jw:zw:H?Da:sr,Rt=ae?e:ot(c);return Rs(Rt||c,function(it,jt){Rt&&(jt=it,it=c[jt]),Pp(R,jt,Ms(it,f,b,jt,c,P))}),R}function i1e(c){var f=sr(c);return function(b){return AD(b,c,f)}}function AD(c,f,b){var x=b.length;if(c==null)return!x;for(c=Rn(c);x--;){var S=b[x],P=f[S],R=c[S];if(R===e&&!(S in c)||!P(R))return!1}return!0}function _D(c,f,b){if(typeof c!="function")throw new $s(a);return Lp(function(){c.apply(e,b)},f)}function Rp(c,f,b,x){var S=-1,P=ey,R=!0,M=c.length,H=[],re=f.length;if(!M)return H;b&&(f=Xn(f,ps(b))),x?(P=uw,R=!1):f.length>=n&&(P=Ap,R=!1,f=new ru(f));e:for(;++S<M;){var ae=c[S],ue=b==null?ae:b(ae);if(ae=x||ae!==0?ae:0,R&&ue===ue){for(var ve=re;ve--;)if(f[ve]===ue)continue e;H.push(ae)}else P(f,ue,x)||H.push(ae)}return H}var mc=QD(Yo),ED=QD(_w,!0);function c1e(c,f){var b=!0;return mc(c,function(x,S,P){return b=!!f(x,S,P),b}),b}function hy(c,f,b){for(var x=-1,S=c.length;++x<S;){var P=c[x],R=f(P);if(R!=null&&(M===e?R===R&&!bs(R):b(R,M)))var M=R,H=P}return H}function u1e(c,f,b,x){var S=c.length;for(b=Et(b),b<0&&(b=-b>S?0:S+b),x=x===e||x>S?S:Et(x),x<0&&(x+=S),x=b>x?0:jM(x);b<x;)c[b++]=f;return c}function kD(c,f){var b=[];return mc(c,function(x,S,P){f(x,S,P)&&b.push(x)}),b}function mr(c,f,b,x,S){var P=-1,R=c.length;for(b||(b=J1e),S||(S=[]);++P<R;){var M=c[P];f>0&&b(M)?f>1?mr(M,f-1,b,x,S):dc(S,M):x||(S[S.length]=M)}return S}var Aw=YD(),ID=YD(!0);function Yo(c,f){return c&&Aw(c,f,sr)}function _w(c,f){return c&&ID(c,f,sr)}function xy(c,f){return uc(f,function(b){return t1(c[b])})}function su(c,f){f=yc(f,c);for(var b=0,x=f.length;c!=null&&b<x;)c=c[ti(f[b++])];return b&&b==x?c:e}function CD(c,f,b){var x=f(c);return vt(c)?x:dc(x,b(c))}function ea(c){return c==null?c===e?Bse:Y6:tu&&tu in Rn(c)?G1e(c):ace(c)}function Ew(c,f){return c>f}function d1e(c,f){return c!=null&&Sn.call(c,f)}function f1e(c,f){return c!=null&&f in Rn(c)}function l1e(c,f,b){return c>=Er(f,b)&&c<K0(f,b)}function kw(c,f,b){for(var x=b?uw:ey,S=c[0].length,P=c.length,R=P,M=K(P),H=1/0,re=[];R--;){var ae=c[R];R&&f&&(ae=Xn(ae,ps(f))),H=Er(ae.length,H),M[R]=!b&&(f||S>=120&&ae.length>=120)?new ru(R&&ae):e}ae=c[0];var ue=-1,ve=M[0];e:for(;++ue<S&&re.length<H;){var Be=ae[ue],ot=f?f(Be):Be;if(Be=b||Be!==0?Be:0,!(ve?Ap(ve,ot):x(re,ot,b))){for(R=P;--R;){var Rt=M[R];if(!(Rt?Ap(Rt,ot):x(c[R],ot,b)))continue e}ve&&ve.push(ot),re.push(Be)}}return re}function p1e(c,f,b,x){return Yo(c,function(S,P,R){f(x,b(S),P,R)}),x}function $p(c,f,b){f=yc(f,c),c=yM(c,f);var x=c==null?c:c[ti(Ns(f))];return x==null?e:ls(x,c,b)}function PD(c){return x0(c)&&ea(c)==zt}function m1e(c){return x0(c)&&ea(c)==Sp}function b1e(c){return x0(c)&&ea(c)==W0}function Dp(c,f,b,x,S){return c===f?!0:c==null||f==null||!x0(c)&&!x0(f)?c!==c&&f!==f:y1e(c,f,b,x,Dp,S)}function y1e(c,f,b,x,S,P){var R=vt(c),M=vt(f),H=R?ct:kr(c),re=M?ct:kr(f);H=H==zt?_r:H,re=re==zt?_r:re;var ae=H==_r,ue=re==_r,ve=H==re;if(ve&&hc(c)){if(!hc(f))return!1;R=!0,ae=!1}if(ve&&!ae)return P||(P=new xo),R||ld(c)?uM(c,f,b,x,S,P):j1e(c,f,H,b,x,S,P);if(!(b&y)){var Be=ae&&Sn.call(c,"__wrapped__"),ot=ue&&Sn.call(f,"__wrapped__");if(Be||ot){var Rt=Be?c.value():c,it=ot?f.value():f;return P||(P=new xo),S(Rt,it,b,x,P)}}return ve?(P||(P=new xo),q1e(c,f,b,x,S,P)):!1}function g1e(c){return x0(c)&&kr(c)==pr}function Iw(c,f,b,x){var S=b.length,P=S,R=!x;if(c==null)return!P;for(c=Rn(c);S--;){var M=b[S];if(R&&M[2]?M[1]!==c[M[0]]:!(M[0]in c))return!1}for(;++S<P;){M=b[S];var H=M[0],re=c[H],ae=M[1];if(R&&M[2]){if(re===e&&!(H in c))return!1}else{var ue=new xo;if(x)var ve=x(re,ae,H,c,f,ue);if(!(ve===e?Dp(ae,re,y|m,x,ue):ve))return!1}}return!0}function RD(c){if(!u0(c)||Y1e(c))return!1;var f=t1(c)?gie:ioe;return f.test(iu(c))}function h1e(c){return x0(c)&&ea(c)==wp}function x1e(c){return x0(c)&&kr(c)==go}function w1e(c){return x0(c)&&Ny(c.length)&&!!jn[ea(c)]}function $D(c){return typeof c=="function"?c:c==null?Ma:typeof c=="object"?vt(c)?OD(c[0],c[1]):MD(c):eO(c)}function Cw(c){if(!Np(c))return Sie(c);var f=[];for(var b in Rn(c))Sn.call(c,b)&&b!="constructor"&&f.push(b);return f}function v1e(c){if(!u0(c))return rce(c);var f=Np(c),b=[];for(var x in c)x=="constructor"&&(f||!Sn.call(c,x))||b.push(x);return b}function Pw(c,f){return c<f}function DD(c,f){var b=-1,x=$a(c)?K(c.length):[];return mc(c,function(S,P,R){x[++b]=f(S,P,R)}),x}function MD(c){var f=Gw(c);return f.length==1&&f[0][2]?mM(f[0][0],f[0][1]):function(b){return b===c||Iw(b,c,f)}}function OD(c,f){return Ww(c)&&pM(f)?mM(ti(c),f):function(b){var x=rv(b,c);return x===e&&x===f?av(b,c):Dp(f,x,y|m)}}function wy(c,f,b,x,S){c!==f&&Aw(f,function(P,R){if(S||(S=new xo),u0(P))T1e(c,f,R,b,wy,x,S);else{var M=x?x(Kw(c,R),P,R+"",c,f,S):e;M===e&&(M=P),Tw(c,R,M)}},Da)}function T1e(c,f,b,x,S,P,R){var M=Kw(c,b),H=Kw(f,b),re=R.get(H);if(re){Tw(c,b,re);return}var ae=P?P(M,H,b+"",c,f,R):e,ue=ae===e;if(ue){var ve=vt(H),Be=!ve&&hc(H),ot=!ve&&!Be&&ld(H);ae=H,ve||Be||ot?vt(M)?ae=M:I0(M)?ae=Ra(M):Be?(ue=!1,ae=WD(H,!0)):ot?(ue=!1,ae=ZD(H,!0)):ae=[]:Bp(H)||cu(H)?(ae=M,cu(M)?ae=qM(M):(!u0(M)||t1(M))&&(ae=lM(H))):ue=!1}ue&&(R.set(H,ae),S(ae,H,x,P,R),R.delete(H)),Tw(c,b,ae)}function ND(c,f){var b=c.length;if(b)return f+=f<0?b:0,e1(f,b)?c[f]:e}function LD(c,f,b){f.length?f=Xn(f,function(P){return vt(P)?function(R){return su(R,P.length===1?P[0]:P)}:P}):f=[Ma];var x=-1;f=Xn(f,ps(tt()));var S=DD(c,function(P,R,M){var H=Xn(f,function(re){return re(P)});return{criteria:H,index:++x,value:P}});return Koe(S,function(P,R){return O1e(P,R,b)})}function S1e(c,f){return BD(c,f,function(b,x){return av(c,x)})}function BD(c,f,b){for(var x=-1,S=f.length,P={};++x<S;){var R=f[x],M=su(c,R);b(M,R)&&Mp(P,yc(R,c),M)}return P}function A1e(c){return function(f){return su(f,c)}}function Rw(c,f,b,x){var S=x?Zoe:nd,P=-1,R=f.length,M=c;for(c===f&&(f=Ra(f)),b&&(M=Xn(c,ps(b)));++P<R;)for(var H=0,re=f[P],ae=b?b(re):re;(H=S(M,ae,H,x))>-1;)M!==c&&dy.call(M,H,1),dy.call(c,H,1);return c}function UD(c,f){for(var b=c?f.length:0,x=b-1;b--;){var S=f[b];if(b==x||S!==P){var P=S;e1(S)?dy.call(c,S,1):Ow(c,S)}}return c}function $w(c,f){return c+py(xD()*(f-c+1))}function _1e(c,f,b,x){for(var S=-1,P=K0(ly((f-c)/(b||1)),0),R=K(P);P--;)R[x?P:++S]=c,c+=b;return R}function Dw(c,f){var b="";if(!c||f<1||f>Z)return b;do f%2&&(b+=c),f=py(f/2),f&&(c+=c);while(f);return b}function Bt(c,f){return Xw(bM(c,f,Ma),c+"")}function E1e(c){return TD(pd(c))}function k1e(c,f){var b=pd(c);return Py(b,au(f,0,b.length))}function Mp(c,f,b,x){if(!u0(c))return c;f=yc(f,c);for(var S=-1,P=f.length,R=P-1,M=c;M!=null&&++S<P;){var H=ti(f[S]),re=b;if(H==="__proto__"||H==="constructor"||H==="prototype")return c;if(S!=R){var ae=M[H];re=x?x(ae,H,M):e,re===e&&(re=u0(ae)?ae:e1(f[S+1])?[]:{})}Pp(M,H,re),M=M[H]}return c}var HD=my?function(c,f){return my.set(c,f),c}:Ma,I1e=fy?function(c,f){return fy(c,"toString",{configurable:!0,enumerable:!1,value:ov(f),writable:!0})}:Ma;function C1e(c){return Py(pd(c))}function Os(c,f,b){var x=-1,S=c.length;f<0&&(f=-f>S?0:S+f),b=b>S?S:b,b<0&&(b+=S),S=f>b?0:b-f>>>0,f>>>=0;for(var P=K(S);++x<S;)P[x]=c[x+f];return P}function P1e(c,f){var b;return mc(c,function(x,S,P){return b=f(x,S,P),!b}),!!b}function vy(c,f,b){var x=0,S=c==null?x:c.length;if(typeof f=="number"&&f===f&&S<=pt){for(;x<S;){var P=x+S>>>1,R=c[P];R!==null&&!bs(R)&&(b?R<=f:R<f)?x=P+1:S=P}return S}return Mw(c,f,Ma,b)}function Mw(c,f,b,x){var S=0,P=c==null?0:c.length;if(P===0)return 0;f=b(f);for(var R=f!==f,M=f===null,H=bs(f),re=f===e;S<P;){var ae=py((S+P)/2),ue=b(c[ae]),ve=ue!==e,Be=ue===null,ot=ue===ue,Rt=bs(ue);if(R)var it=x||ot;else re?it=ot&&(x||ve):M?it=ot&&ve&&(x||!Be):H?it=ot&&ve&&!Be&&(x||!Rt):Be||Rt?it=!1:it=x?ue<=f:ue<f;it?S=ae+1:P=ae}return Er(P,ze)}function FD(c,f){for(var b=-1,x=c.length,S=0,P=[];++b<x;){var R=c[b],M=f?f(R):R;if(!b||!wo(M,H)){var H=M;P[S++]=R===0?0:R}}return P}function zD(c){return typeof c=="number"?c:bs(c)?ne:+c}function ms(c){if(typeof c=="string")return c;if(vt(c))return Xn(c,ms)+"";if(bs(c))return wD?wD.call(c):"";var f=c+"";return f=="0"&&1/c==-j?"-0":f}function bc(c,f,b){var x=-1,S=ey,P=c.length,R=!0,M=[],H=M;if(b)R=!1,S=uw;else if(P>=n){var re=f?null:F1e(c);if(re)return ny(re);R=!1,S=Ap,H=new ru}else H=f?[]:M;e:for(;++x<P;){var ae=c[x],ue=f?f(ae):ae;if(ae=b||ae!==0?ae:0,R&&ue===ue){for(var ve=H.length;ve--;)if(H[ve]===ue)continue e;f&&H.push(ue),M.push(ae)}else S(H,ue,b)||(H!==M&&H.push(ue),M.push(ae))}return M}function Ow(c,f){return f=yc(f,c),c=yM(c,f),c==null||delete c[ti(Ns(f))]}function jD(c,f,b,x){return Mp(c,f,b(su(c,f)),x)}function Ty(c,f,b,x){for(var S=c.length,P=x?S:-1;(x?P--:++P<S)&&f(c[P],P,c););return b?Os(c,x?0:P,x?P+1:S):Os(c,x?P+1:0,x?S:P)}function qD(c,f){var b=c;return b instanceof Gt&&(b=b.value()),dw(f,function(x,S){return S.func.apply(S.thisArg,dc([x],S.args))},b)}function Nw(c,f,b){var x=c.length;if(x<2)return x?bc(c[0]):[];for(var S=-1,P=K(x);++S<x;)for(var R=c[S],M=-1;++M<x;)M!=S&&(P[S]=Rp(P[S]||R,c[M],f,b));return bc(mr(P,1),f,b)}function GD(c,f,b){for(var x=-1,S=c.length,P=f.length,R={};++x<S;){var M=x<P?f[x]:e;b(R,c[x],M)}return R}function Lw(c){return I0(c)?c:[]}function Bw(c){return typeof c=="function"?c:Ma}function yc(c,f){return vt(c)?c:Ww(c,f)?[c]:wM(vn(c))}var R1e=Bt;function gc(c,f,b){var x=c.length;return b=b===e?x:b,!f&&b>=x?c:Os(c,f,b)}var VD=hie||function(c){return ar.clearTimeout(c)};function WD(c,f){if(f)return c.slice();var b=c.length,x=mD?mD(b):new c.constructor(b);return c.copy(x),x}function Uw(c){var f=new c.constructor(c.byteLength);return new cy(f).set(new cy(c)),f}function $1e(c,f){var b=f?Uw(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function D1e(c){var f=new c.constructor(c.source,P$.exec(c));return f.lastIndex=c.lastIndex,f}function M1e(c){return Cp?Rn(Cp.call(c)):{}}function ZD(c,f){var b=f?Uw(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function KD(c,f){if(c!==f){var b=c!==e,x=c===null,S=c===c,P=bs(c),R=f!==e,M=f===null,H=f===f,re=bs(f);if(!M&&!re&&!P&&c>f||P&&R&&H&&!M&&!re||x&&R&&H||!b&&H||!S)return 1;if(!x&&!P&&!re&&c<f||re&&b&&S&&!x&&!P||M&&b&&S||!R&&S||!H)return-1}return 0}function O1e(c,f,b){for(var x=-1,S=c.criteria,P=f.criteria,R=S.length,M=b.length;++x<R;){var H=KD(S[x],P[x]);if(H){if(x>=M)return H;var re=b[x];return H*(re=="desc"?-1:1)}}return c.index-f.index}function XD(c,f,b,x){for(var S=-1,P=c.length,R=b.length,M=-1,H=f.length,re=K0(P-R,0),ae=K(H+re),ue=!x;++M<H;)ae[M]=f[M];for(;++S<R;)(ue||S<P)&&(ae[b[S]]=c[S]);for(;re--;)ae[M++]=c[S++];return ae}function JD(c,f,b,x){for(var S=-1,P=c.length,R=-1,M=b.length,H=-1,re=f.length,ae=K0(P-M,0),ue=K(ae+re),ve=!x;++S<ae;)ue[S]=c[S];for(var Be=S;++H<re;)ue[Be+H]=f[H];for(;++R<M;)(ve||S<P)&&(ue[Be+b[R]]=c[S++]);return ue}function Ra(c,f){var b=-1,x=c.length;for(f||(f=K(x));++b<x;)f[b]=c[b];return f}function ei(c,f,b,x){var S=!b;b||(b={});for(var P=-1,R=f.length;++P<R;){var M=f[P],H=x?x(b[M],c[M],M,b,c):e;H===e&&(H=c[M]),S?Ji(b,M,H):Pp(b,M,H)}return b}function N1e(c,f){return ei(c,Vw(c),f)}function L1e(c,f){return ei(c,dM(c),f)}function Sy(c,f){return function(b,x){var S=vt(b)?zoe:s1e,P=f?f():{};return S(b,c,tt(x,2),P)}}function ud(c){return Bt(function(f,b){var x=-1,S=b.length,P=S>1?b[S-1]:e,R=S>2?b[2]:e;for(P=c.length>3&&typeof P=="function"?(S--,P):e,R&&ta(b[0],b[1],R)&&(P=S<3?e:P,S=1),f=Rn(f);++x<S;){var M=b[x];M&&c(f,M,x,P)}return f})}function QD(c,f){return function(b,x){if(b==null)return b;if(!$a(b))return c(b,x);for(var S=b.length,P=f?S:-1,R=Rn(b);(f?P--:++P<S)&&x(R[P],P,R)!==!1;);return b}}function YD(c){return function(f,b,x){for(var S=-1,P=Rn(f),R=x(f),M=R.length;M--;){var H=R[c?M:++S];if(b(P[H],H,P)===!1)break}return f}}function B1e(c,f,b){var x=f&g,S=Op(c);function P(){var R=this&&this!==ar&&this instanceof P?S:c;return R.apply(x?b:this,arguments)}return P}function eM(c){return function(f){f=vn(f);var b=rd(f)?ho(f):e,x=b?b[0]:f.charAt(0),S=b?gc(b,1).join(""):f.slice(1);return x[c]()+S}}function dd(c){return function(f){return dw(QM(JM(f).replace(Ioe,"")),c,"")}}function Op(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=cd(c.prototype),x=c.apply(b,f);return u0(x)?x:b}}function U1e(c,f,b){var x=Op(c);function S(){for(var P=arguments.length,R=K(P),M=P,H=fd(S);M--;)R[M]=arguments[M];var re=P<3&&R[0]!==H&&R[P-1]!==H?[]:fc(R,H);if(P-=re.length,P<b)return sM(c,f,Ay,S.placeholder,e,R,re,e,e,b-P);var ae=this&&this!==ar&&this instanceof S?x:c;return ls(ae,this,R)}return S}function tM(c){return function(f,b,x){var S=Rn(f);if(!$a(f)){var P=tt(b,3);f=sr(f),b=function(M){return P(S[M],M,S)}}var R=c(f,b,x);return R>-1?S[P?f[R]:R]:e}}function nM(c){return Yi(function(f){var b=f.length,x=b,S=Ds.prototype.thru;for(c&&f.reverse();x--;){var P=f[x];if(typeof P!="function")throw new $s(a);if(S&&!R&&Iy(P)=="wrapper")var R=new Ds([],!0)}for(x=R?x:b;++x<b;){P=f[x];var M=Iy(P),H=M=="wrapper"?qw(P):e;H&&Zw(H[0])&&H[1]==(E|v|A|O)&&!H[4].length&&H[9]==1?R=R[Iy(H[0])].apply(R,H[3]):R=P.length==1&&Zw(P)?R[M]():R.thru(P)}return function(){var re=arguments,ae=re[0];if(R&&re.length==1&&vt(ae))return R.plant(ae).value();for(var ue=0,ve=b?f[ue].apply(this,re):ae;++ue<b;)ve=f[ue].call(this,ve);return ve}})}function Ay(c,f,b,x,S,P,R,M,H,re){var ae=f&E,ue=f&g,ve=f&h,Be=f&(v|T),ot=f&$,Rt=ve?e:Op(c);function it(){for(var jt=arguments.length,Jt=K(jt),ys=jt;ys--;)Jt[ys]=arguments[ys];if(Be)var na=fd(it),gs=Joe(Jt,na);if(x&&(Jt=XD(Jt,x,S,Be)),P&&(Jt=JD(Jt,P,R,Be)),jt-=gs,Be&&jt<re){var C0=fc(Jt,na);return sM(c,f,Ay,it.placeholder,b,Jt,C0,M,H,re-jt)}var vo=ue?b:this,r1=ve?vo[c]:c;return jt=Jt.length,M?Jt=sce(Jt,M):ot&&jt>1&&Jt.reverse(),ae&&H<jt&&(Jt.length=H),this&&this!==ar&&this instanceof it&&(r1=Rt||Op(r1)),r1.apply(vo,Jt)}return it}function rM(c,f){return function(b,x){return p1e(b,c,f(x),{})}}function _y(c,f){return function(b,x){var S;if(b===e&&x===e)return f;if(b!==e&&(S=b),x!==e){if(S===e)return x;typeof b=="string"||typeof x=="string"?(b=ms(b),x=ms(x)):(b=zD(b),x=zD(x)),S=c(b,x)}return S}}function Hw(c){return Yi(function(f){return f=Xn(f,ps(tt())),Bt(function(b){var x=this;return c(f,function(S){return ls(S,x,b)})})})}function Ey(c,f){f=f===e?" ":ms(f);var b=f.length;if(b<2)return b?Dw(f,c):f;var x=Dw(f,ly(c/ad(f)));return rd(f)?gc(ho(x),0,c).join(""):x.slice(0,c)}function H1e(c,f,b,x){var S=f&g,P=Op(c);function R(){for(var M=-1,H=arguments.length,re=-1,ae=x.length,ue=K(ae+H),ve=this&&this!==ar&&this instanceof R?P:c;++re<ae;)ue[re]=x[re];for(;H--;)ue[re++]=arguments[++M];return ls(ve,S?b:this,ue)}return R}function aM(c){return function(f,b,x){return x&&typeof x!="number"&&ta(f,b,x)&&(b=x=e),f=n1(f),b===e?(b=f,f=0):b=n1(b),x=x===e?f<b?1:-1:n1(x),_1e(f,b,x,c)}}function ky(c){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=Ls(f),b=Ls(b)),c(f,b)}}function sM(c,f,b,x,S,P,R,M,H,re){var ae=f&v,ue=ae?R:e,ve=ae?e:R,Be=ae?P:e,ot=ae?e:P;f|=ae?A:_,f&=~(ae?_:A),f&w||(f&=~(g|h));var Rt=[c,f,S,Be,ue,ot,ve,M,H,re],it=b.apply(e,Rt);return Zw(c)&&gM(it,Rt),it.placeholder=x,hM(it,c,f)}function Fw(c){var f=Z0[c];return function(b,x){if(b=Ls(b),x=x==null?0:Er(Et(x),292),x&&hD(b)){var S=(vn(b)+"e").split("e"),P=f(S[0]+"e"+(+S[1]+x));return S=(vn(P)+"e").split("e"),+(S[0]+"e"+(+S[1]-x))}return f(b)}}var F1e=od&&1/ny(new od([,-0]))[1]==j?function(c){return new od(c)}:uv;function oM(c){return function(f){var b=kr(f);return b==pr?gw(f):b==go?aie(f):Xoe(f,c(f))}}function Qi(c,f,b,x,S,P,R,M){var H=f&h;if(!H&&typeof c!="function")throw new $s(a);var re=x?x.length:0;if(re||(f&=~(A|_),x=S=e),R=R===e?R:K0(Et(R),0),M=M===e?M:Et(M),re-=S?S.length:0,f&_){var ae=x,ue=S;x=S=e}var ve=H?e:qw(c),Be=[c,f,b,x,S,ae,ue,P,R,M];if(ve&&nce(Be,ve),c=Be[0],f=Be[1],b=Be[2],x=Be[3],S=Be[4],M=Be[9]=Be[9]===e?H?0:c.length:K0(Be[9]-re,0),!M&&f&(v|T)&&(f&=~(v|T)),!f||f==g)var ot=B1e(c,f,b);else f==v||f==T?ot=U1e(c,f,M):(f==A||f==(g|A))&&!S.length?ot=H1e(c,f,b,x):ot=Ay.apply(e,Be);var Rt=ve?HD:gM;return hM(Rt(ot,Be),c,f)}function iM(c,f,b,x){return c===e||wo(c,sd[b])&&!Sn.call(x,b)?f:c}function cM(c,f,b,x,S,P){return u0(c)&&u0(f)&&(P.set(f,c),wy(c,f,e,cM,P),P.delete(f)),c}function z1e(c){return Bp(c)?e:c}function uM(c,f,b,x,S,P){var R=b&y,M=c.length,H=f.length;if(M!=H&&!(R&&H>M))return!1;var re=P.get(c),ae=P.get(f);if(re&&ae)return re==f&&ae==c;var ue=-1,ve=!0,Be=b&m?new ru:e;for(P.set(c,f),P.set(f,c);++ue<M;){var ot=c[ue],Rt=f[ue];if(x)var it=R?x(Rt,ot,ue,f,c,P):x(ot,Rt,ue,c,f,P);if(it!==e){if(it)continue;ve=!1;break}if(Be){if(!fw(f,function(jt,Jt){if(!Ap(Be,Jt)&&(ot===jt||S(ot,jt,b,x,P)))return Be.push(Jt)})){ve=!1;break}}else if(!(ot===Rt||S(ot,Rt,b,x,P))){ve=!1;break}}return P.delete(c),P.delete(f),ve}function j1e(c,f,b,x,S,P,R){switch(b){case ed:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case Sp:return!(c.byteLength!=f.byteLength||!P(new cy(c),new cy(f)));case Pn:case W0:case fs:return wo(+c,+f);case Yr:return c.name==f.name&&c.message==f.message;case wp:case vp:return c==f+"";case pr:var M=gw;case go:var H=x&y;if(M||(M=ny),c.size!=f.size&&!H)return!1;var re=R.get(c);if(re)return re==f;x|=m,R.set(c,f);var ae=uM(M(c),M(f),x,S,P,R);return R.delete(c),ae;case X2:if(Cp)return Cp.call(c)==Cp.call(f)}return!1}function q1e(c,f,b,x,S,P){var R=b&y,M=zw(c),H=M.length,re=zw(f),ae=re.length;if(H!=ae&&!R)return!1;for(var ue=H;ue--;){var ve=M[ue];if(!(R?ve in f:Sn.call(f,ve)))return!1}var Be=P.get(c),ot=P.get(f);if(Be&&ot)return Be==f&&ot==c;var Rt=!0;P.set(c,f),P.set(f,c);for(var it=R;++ue<H;){ve=M[ue];var jt=c[ve],Jt=f[ve];if(x)var ys=R?x(Jt,jt,ve,f,c,P):x(jt,Jt,ve,c,f,P);if(!(ys===e?jt===Jt||S(jt,Jt,b,x,P):ys)){Rt=!1;break}it||(it=ve=="constructor")}if(Rt&&!it){var na=c.constructor,gs=f.constructor;na!=gs&&"constructor"in c&&"constructor"in f&&!(typeof na=="function"&&na instanceof na&&typeof gs=="function"&&gs instanceof gs)&&(Rt=!1)}return P.delete(c),P.delete(f),Rt}function Yi(c){return Xw(bM(c,e,AM),c+"")}function zw(c){return CD(c,sr,Vw)}function jw(c){return CD(c,Da,dM)}var qw=my?function(c){return my.get(c)}:uv;function Iy(c){for(var f=c.name+"",b=id[f],x=Sn.call(id,f)?b.length:0;x--;){var S=b[x],P=S.func;if(P==null||P==c)return S.name}return f}function fd(c){var f=Sn.call(k,"placeholder")?k:c;return f.placeholder}function tt(){var c=k.iteratee||iv;return c=c===iv?$D:c,arguments.length?c(arguments[0],arguments[1]):c}function Cy(c,f){var b=c.__data__;return Q1e(f)?b[typeof f=="string"?"string":"hash"]:b.map}function Gw(c){for(var f=sr(c),b=f.length;b--;){var x=f[b],S=c[x];f[b]=[x,S,pM(S)]}return f}function ou(c,f){var b=tie(c,f);return RD(b)?b:e}function G1e(c){var f=Sn.call(c,tu),b=c[tu];try{c[tu]=e;var x=!0}catch{}var S=oy.call(c);return x&&(f?c[tu]=b:delete c[tu]),S}var Vw=xw?function(c){return c==null?[]:(c=Rn(c),uc(xw(c),function(f){return yD.call(c,f)}))}:dv,dM=xw?function(c){for(var f=[];c;)dc(f,Vw(c)),c=uy(c);return f}:dv,kr=ea;(ww&&kr(new ww(new ArrayBuffer(1)))!=ed||Ep&&kr(new Ep)!=pr||vw&&kr(vw.resolve())!=xp||od&&kr(new od)!=go||kp&&kr(new kp)!=Tp)&&(kr=function(c){var f=ea(c),b=f==_r?c.constructor:e,x=b?iu(b):"";if(x)switch(x){case kie:return ed;case Iie:return pr;case Cie:return xp;case Pie:return go;case Rie:return Tp}return f});function V1e(c,f,b){for(var x=-1,S=b.length;++x<S;){var P=b[x],R=P.size;switch(P.type){case"drop":c+=R;break;case"dropRight":f-=R;break;case"take":f=Er(f,c+R);break;case"takeRight":c=K0(c,f-R);break}}return{start:c,end:f}}function W1e(c){var f=c.match(Yse);return f?f[1].split(eoe):[]}function fM(c,f,b){f=yc(f,c);for(var x=-1,S=f.length,P=!1;++x<S;){var R=ti(f[x]);if(!(P=c!=null&&b(c,R)))break;c=c[R]}return P||++x!=S?P:(S=c==null?0:c.length,!!S&&Ny(S)&&e1(R,S)&&(vt(c)||cu(c)))}function Z1e(c){var f=c.length,b=new c.constructor(f);return f&&typeof c[0]=="string"&&Sn.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function lM(c){return typeof c.constructor=="function"&&!Np(c)?cd(uy(c)):{}}function K1e(c,f,b){var x=c.constructor;switch(f){case Sp:return Uw(c);case Pn:case W0:return new x(+c);case ed:return $1e(c,b);case G7:case V7:case W7:case Z7:case K7:case X7:case J7:case Q7:case Y7:return ZD(c,b);case pr:return new x;case fs:case vp:return new x(c);case wp:return D1e(c);case go:return new x;case X2:return M1e(c)}}function X1e(c,f){var b=f.length;if(!b)return c;var x=b-1;return f[x]=(b>1?"& ":"")+f[x],f=f.join(b>2?", ":" "),c.replace(Qse,`{
/* [wrapped with `+f+`] */
`)}function J1e(c){return vt(c)||cu(c)||!!(gD&&c&&c[gD])}function e1(c,f){var b=typeof c;return f=f??Z,!!f&&(b=="number"||b!="symbol"&&uoe.test(c))&&c>-1&&c%1==0&&c<f}function ta(c,f,b){if(!u0(b))return!1;var x=typeof f;return(x=="number"?$a(b)&&e1(f,b.length):x=="string"&&f in b)?wo(b[f],c):!1}function Ww(c,f){if(vt(c))return!1;var b=typeof c;return b=="number"||b=="symbol"||b=="boolean"||c==null||bs(c)?!0:Zse.test(c)||!Wse.test(c)||f!=null&&c in Rn(f)}function Q1e(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function Zw(c){var f=Iy(c),b=k[f];if(typeof b!="function"||!(f in Gt.prototype))return!1;if(c===b)return!0;var x=qw(b);return!!x&&c===x[0]}function Y1e(c){return!!pD&&pD in c}var ece=ay?t1:fv;function Np(c){var f=c&&c.constructor,b=typeof f=="function"&&f.prototype||sd;return c===b}function pM(c){return c===c&&!u0(c)}function mM(c,f){return function(b){return b==null?!1:b[c]===f&&(f!==e||c in Rn(b))}}function tce(c){var f=My(c,function(x){return b.size===i&&b.clear(),x}),b=f.cache;return f}function nce(c,f){var b=c[1],x=f[1],S=b|x,P=S<(g|h|E),R=x==E&&b==v||x==E&&b==O&&c[7].length<=f[8]||x==(E|O)&&f[7].length<=f[8]&&b==v;if(!(P||R))return c;x&g&&(c[2]=f[2],S|=b&g?0:w);var M=f[3];if(M){var H=c[3];c[3]=H?XD(H,M,f[4]):M,c[4]=H?fc(c[3],u):f[4]}return M=f[5],M&&(H=c[5],c[5]=H?JD(H,M,f[6]):M,c[6]=H?fc(c[5],u):f[6]),M=f[7],M&&(c[7]=M),x&E&&(c[8]=c[8]==null?f[8]:Er(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=S,c}function rce(c){var f=[];if(c!=null)for(var b in Rn(c))f.push(b);return f}function ace(c){return oy.call(c)}function bM(c,f,b){return f=K0(f===e?c.length-1:f,0),function(){for(var x=arguments,S=-1,P=K0(x.length-f,0),R=K(P);++S<P;)R[S]=x[f+S];S=-1;for(var M=K(f+1);++S<f;)M[S]=x[S];return M[f]=b(R),ls(c,this,M)}}function yM(c,f){return f.length<2?c:su(c,Os(f,0,-1))}function sce(c,f){for(var b=c.length,x=Er(f.length,b),S=Ra(c);x--;){var P=f[x];c[x]=e1(P,b)?S[P]:e}return c}function Kw(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var gM=xM(HD),Lp=wie||function(c,f){return ar.setTimeout(c,f)},Xw=xM(I1e);function hM(c,f,b){var x=f+"";return Xw(c,X1e(x,oce(W1e(x),b)))}function xM(c){var f=0,b=0;return function(){var x=Aie(),S=G-(x-b);if(b=x,S>0){if(++f>=D)return arguments[0]}else f=0;return c.apply(e,arguments)}}function Py(c,f){var b=-1,x=c.length,S=x-1;for(f=f===e?x:f;++b<f;){var P=$w(b,S),R=c[P];c[P]=c[b],c[b]=R}return c.length=f,c}var wM=tce(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Kse,function(b,x,S,P){f.push(S?P.replace(roe,"$1"):x||b)}),f});function ti(c){if(typeof c=="string"||bs(c))return c;var f=c+"";return f=="0"&&1/c==-j?"-0":f}function iu(c){if(c!=null){try{return sy.call(c)}catch{}try{return c+""}catch{}}return""}function oce(c,f){return Rs(rn,function(b){var x="_."+b[0];f&b[1]&&!ey(c,x)&&c.push(x)}),c.sort()}function vM(c){if(c instanceof Gt)return c.clone();var f=new Ds(c.__wrapped__,c.__chain__);return f.__actions__=Ra(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function ice(c,f,b){(b?ta(c,f,b):f===e)?f=1:f=K0(Et(f),0);var x=c==null?0:c.length;if(!x||f<1)return[];for(var S=0,P=0,R=K(ly(x/f));S<x;)R[P++]=Os(c,S,S+=f);return R}function cce(c){for(var f=-1,b=c==null?0:c.length,x=0,S=[];++f<b;){var P=c[f];P&&(S[x++]=P)}return S}function uce(){var c=arguments.length;if(!c)return[];for(var f=K(c-1),b=arguments[0],x=c;x--;)f[x-1]=arguments[x];return dc(vt(b)?Ra(b):[b],mr(f,1))}var dce=Bt(function(c,f){return I0(c)?Rp(c,mr(f,1,I0,!0)):[]}),fce=Bt(function(c,f){var b=Ns(f);return I0(b)&&(b=e),I0(c)?Rp(c,mr(f,1,I0,!0),tt(b,2)):[]}),lce=Bt(function(c,f){var b=Ns(f);return I0(b)&&(b=e),I0(c)?Rp(c,mr(f,1,I0,!0),e,b):[]});function pce(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===e?1:Et(f),Os(c,f<0?0:f,x)):[]}function mce(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===e?1:Et(f),f=x-f,Os(c,0,f<0?0:f)):[]}function bce(c,f){return c&&c.length?Ty(c,tt(f,3),!0,!0):[]}function yce(c,f){return c&&c.length?Ty(c,tt(f,3),!0):[]}function gce(c,f,b,x){var S=c==null?0:c.length;return S?(b&&typeof b!="number"&&ta(c,f,b)&&(b=0,x=S),u1e(c,f,b,x)):[]}function TM(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var S=b==null?0:Et(b);return S<0&&(S=K0(x+S,0)),ty(c,tt(f,3),S)}function SM(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var S=x-1;return b!==e&&(S=Et(b),S=b<0?K0(x+S,0):Er(S,x-1)),ty(c,tt(f,3),S,!0)}function AM(c){var f=c==null?0:c.length;return f?mr(c,1):[]}function hce(c){var f=c==null?0:c.length;return f?mr(c,j):[]}function xce(c,f){var b=c==null?0:c.length;return b?(f=f===e?1:Et(f),mr(c,f)):[]}function wce(c){for(var f=-1,b=c==null?0:c.length,x={};++f<b;){var S=c[f];x[S[0]]=S[1]}return x}function _M(c){return c&&c.length?c[0]:e}function vce(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var S=b==null?0:Et(b);return S<0&&(S=K0(x+S,0)),nd(c,f,S)}function Tce(c){var f=c==null?0:c.length;return f?Os(c,0,-1):[]}var Sce=Bt(function(c){var f=Xn(c,Lw);return f.length&&f[0]===c[0]?kw(f):[]}),Ace=Bt(function(c){var f=Ns(c),b=Xn(c,Lw);return f===Ns(b)?f=e:b.pop(),b.length&&b[0]===c[0]?kw(b,tt(f,2)):[]}),_ce=Bt(function(c){var f=Ns(c),b=Xn(c,Lw);return f=typeof f=="function"?f:e,f&&b.pop(),b.length&&b[0]===c[0]?kw(b,e,f):[]});function Ece(c,f){return c==null?"":Tie.call(c,f)}function Ns(c){var f=c==null?0:c.length;return f?c[f-1]:e}function kce(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var S=x;return b!==e&&(S=Et(b),S=S<0?K0(x+S,0):Er(S,x-1)),f===f?oie(c,f,S):ty(c,sD,S,!0)}function Ice(c,f){return c&&c.length?ND(c,Et(f)):e}var Cce=Bt(EM);function EM(c,f){return c&&c.length&&f&&f.length?Rw(c,f):c}function Pce(c,f,b){return c&&c.length&&f&&f.length?Rw(c,f,tt(b,2)):c}function Rce(c,f,b){return c&&c.length&&f&&f.length?Rw(c,f,e,b):c}var $ce=Yi(function(c,f){var b=c==null?0:c.length,x=Sw(c,f);return UD(c,Xn(f,function(S){return e1(S,b)?+S:S}).sort(KD)),x});function Dce(c,f){var b=[];if(!(c&&c.length))return b;var x=-1,S=[],P=c.length;for(f=tt(f,3);++x<P;){var R=c[x];f(R,x,c)&&(b.push(R),S.push(x))}return UD(c,S),b}function Jw(c){return c==null?c:Eie.call(c)}function Mce(c,f,b){var x=c==null?0:c.length;return x?(b&&typeof b!="number"&&ta(c,f,b)?(f=0,b=x):(f=f==null?0:Et(f),b=b===e?x:Et(b)),Os(c,f,b)):[]}function Oce(c,f){return vy(c,f)}function Nce(c,f,b){return Mw(c,f,tt(b,2))}function Lce(c,f){var b=c==null?0:c.length;if(b){var x=vy(c,f);if(x<b&&wo(c[x],f))return x}return-1}function Bce(c,f){return vy(c,f,!0)}function Uce(c,f,b){return Mw(c,f,tt(b,2),!0)}function Hce(c,f){var b=c==null?0:c.length;if(b){var x=vy(c,f,!0)-1;if(wo(c[x],f))return x}return-1}function Fce(c){return c&&c.length?FD(c):[]}function zce(c,f){return c&&c.length?FD(c,tt(f,2)):[]}function jce(c){var f=c==null?0:c.length;return f?Os(c,1,f):[]}function qce(c,f,b){return c&&c.length?(f=b||f===e?1:Et(f),Os(c,0,f<0?0:f)):[]}function Gce(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===e?1:Et(f),f=x-f,Os(c,f<0?0:f,x)):[]}function Vce(c,f){return c&&c.length?Ty(c,tt(f,3),!1,!0):[]}function Wce(c,f){return c&&c.length?Ty(c,tt(f,3)):[]}var Zce=Bt(function(c){return bc(mr(c,1,I0,!0))}),Kce=Bt(function(c){var f=Ns(c);return I0(f)&&(f=e),bc(mr(c,1,I0,!0),tt(f,2))}),Xce=Bt(function(c){var f=Ns(c);return f=typeof f=="function"?f:e,bc(mr(c,1,I0,!0),e,f)});function Jce(c){return c&&c.length?bc(c):[]}function Qce(c,f){return c&&c.length?bc(c,tt(f,2)):[]}function Yce(c,f){return f=typeof f=="function"?f:e,c&&c.length?bc(c,e,f):[]}function Qw(c){if(!(c&&c.length))return[];var f=0;return c=uc(c,function(b){if(I0(b))return f=K0(b.length,f),!0}),bw(f,function(b){return Xn(c,lw(b))})}function kM(c,f){if(!(c&&c.length))return[];var b=Qw(c);return f==null?b:Xn(b,function(x){return ls(f,e,x)})}var e6e=Bt(function(c,f){return I0(c)?Rp(c,f):[]}),t6e=Bt(function(c){return Nw(uc(c,I0))}),n6e=Bt(function(c){var f=Ns(c);return I0(f)&&(f=e),Nw(uc(c,I0),tt(f,2))}),r6e=Bt(function(c){var f=Ns(c);return f=typeof f=="function"?f:e,Nw(uc(c,I0),e,f)}),a6e=Bt(Qw);function s6e(c,f){return GD(c||[],f||[],Pp)}function o6e(c,f){return GD(c||[],f||[],Mp)}var i6e=Bt(function(c){var f=c.length,b=f>1?c[f-1]:e;return b=typeof b=="function"?(c.pop(),b):e,kM(c,b)});function IM(c){var f=k(c);return f.__chain__=!0,f}function c6e(c,f){return f(c),c}function Ry(c,f){return f(c)}var u6e=Yi(function(c){var f=c.length,b=f?c[0]:0,x=this.__wrapped__,S=function(P){return Sw(P,c)};return f>1||this.__actions__.length||!(x instanceof Gt)||!e1(b)?this.thru(S):(x=x.slice(b,+b+(f?1:0)),x.__actions__.push({func:Ry,args:[S],thisArg:e}),new Ds(x,this.__chain__).thru(function(P){return f&&!P.length&&P.push(e),P}))});function d6e(){return IM(this)}function f6e(){return new Ds(this.value(),this.__chain__)}function l6e(){this.__values__===e&&(this.__values__=zM(this.value()));var c=this.__index__>=this.__values__.length,f=c?e:this.__values__[this.__index__++];return{done:c,value:f}}function p6e(){return this}function m6e(c){for(var f,b=this;b instanceof yy;){var x=vM(b);x.__index__=0,x.__values__=e,f?S.__wrapped__=x:f=x;var S=x;b=b.__wrapped__}return S.__wrapped__=c,f}function b6e(){var c=this.__wrapped__;if(c instanceof Gt){var f=c;return this.__actions__.length&&(f=new Gt(this)),f=f.reverse(),f.__actions__.push({func:Ry,args:[Jw],thisArg:e}),new Ds(f,this.__chain__)}return this.thru(Jw)}function y6e(){return qD(this.__wrapped__,this.__actions__)}var g6e=Sy(function(c,f,b){Sn.call(c,b)?++c[b]:Ji(c,b,1)});function h6e(c,f,b){var x=vt(c)?rD:c1e;return b&&ta(c,f,b)&&(f=e),x(c,tt(f,3))}function x6e(c,f){var b=vt(c)?uc:kD;return b(c,tt(f,3))}var w6e=tM(TM),v6e=tM(SM);function T6e(c,f){return mr($y(c,f),1)}function S6e(c,f){return mr($y(c,f),j)}function A6e(c,f,b){return b=b===e?1:Et(b),mr($y(c,f),b)}function CM(c,f){var b=vt(c)?Rs:mc;return b(c,tt(f,3))}function PM(c,f){var b=vt(c)?joe:ED;return b(c,tt(f,3))}var _6e=Sy(function(c,f,b){Sn.call(c,b)?c[b].push(f):Ji(c,b,[f])});function E6e(c,f,b,x){c=$a(c)?c:pd(c),b=b&&!x?Et(b):0;var S=c.length;return b<0&&(b=K0(S+b,0)),Ly(c)?b<=S&&c.indexOf(f,b)>-1:!!S&&nd(c,f,b)>-1}var k6e=Bt(function(c,f,b){var x=-1,S=typeof f=="function",P=$a(c)?K(c.length):[];return mc(c,function(R){P[++x]=S?ls(f,R,b):$p(R,f,b)}),P}),I6e=Sy(function(c,f,b){Ji(c,b,f)});function $y(c,f){var b=vt(c)?Xn:DD;return b(c,tt(f,3))}function C6e(c,f,b,x){return c==null?[]:(vt(f)||(f=f==null?[]:[f]),b=x?e:b,vt(b)||(b=b==null?[]:[b]),LD(c,f,b))}var P6e=Sy(function(c,f,b){c[b?0:1].push(f)},function(){return[[],[]]});function R6e(c,f,b){var x=vt(c)?dw:iD,S=arguments.length<3;return x(c,tt(f,4),b,S,mc)}function $6e(c,f,b){var x=vt(c)?qoe:iD,S=arguments.length<3;return x(c,tt(f,4),b,S,ED)}function D6e(c,f){var b=vt(c)?uc:kD;return b(c,Oy(tt(f,3)))}function M6e(c){var f=vt(c)?TD:E1e;return f(c)}function O6e(c,f,b){(b?ta(c,f,b):f===e)?f=1:f=Et(f);var x=vt(c)?r1e:k1e;return x(c,f)}function N6e(c){var f=vt(c)?a1e:C1e;return f(c)}function L6e(c){if(c==null)return 0;if($a(c))return Ly(c)?ad(c):c.length;var f=kr(c);return f==pr||f==go?c.size:Cw(c).length}function B6e(c,f,b){var x=vt(c)?fw:P1e;return b&&ta(c,f,b)&&(f=e),x(c,tt(f,3))}var U6e=Bt(function(c,f){if(c==null)return[];var b=f.length;return b>1&&ta(c,f[0],f[1])?f=[]:b>2&&ta(f[0],f[1],f[2])&&(f=[f[0]]),LD(c,mr(f,1),[])}),Dy=xie||function(){return ar.Date.now()};function H6e(c,f){if(typeof f!="function")throw new $s(a);return c=Et(c),function(){if(--c<1)return f.apply(this,arguments)}}function RM(c,f,b){return f=b?e:f,f=c&&f==null?c.length:f,Qi(c,E,e,e,e,e,f)}function $M(c,f){var b;if(typeof f!="function")throw new $s(a);return c=Et(c),function(){return--c>0&&(b=f.apply(this,arguments)),c<=1&&(f=e),b}}var Yw=Bt(function(c,f,b){var x=g;if(b.length){var S=fc(b,fd(Yw));x|=A}return Qi(c,x,f,b,S)}),DM=Bt(function(c,f,b){var x=g|h;if(b.length){var S=fc(b,fd(DM));x|=A}return Qi(f,x,c,b,S)});function MM(c,f,b){f=b?e:f;var x=Qi(c,v,e,e,e,e,e,f);return x.placeholder=MM.placeholder,x}function OM(c,f,b){f=b?e:f;var x=Qi(c,T,e,e,e,e,e,f);return x.placeholder=OM.placeholder,x}function NM(c,f,b){var x,S,P,R,M,H,re=0,ae=!1,ue=!1,ve=!0;if(typeof c!="function")throw new $s(a);f=Ls(f)||0,u0(b)&&(ae=!!b.leading,ue="maxWait"in b,P=ue?K0(Ls(b.maxWait)||0,f):P,ve="trailing"in b?!!b.trailing:ve);function Be(C0){var vo=x,r1=S;return x=S=e,re=C0,R=c.apply(r1,vo),R}function ot(C0){return re=C0,M=Lp(jt,f),ae?Be(C0):R}function Rt(C0){var vo=C0-H,r1=C0-re,tO=f-vo;return ue?Er(tO,P-r1):tO}function it(C0){var vo=C0-H,r1=C0-re;return H===e||vo>=f||vo<0||ue&&r1>=P}function jt(){var C0=Dy();if(it(C0))return Jt(C0);M=Lp(jt,Rt(C0))}function Jt(C0){return M=e,ve&&x?Be(C0):(x=S=e,R)}function ys(){M!==e&&VD(M),re=0,x=H=S=M=e}function na(){return M===e?R:Jt(Dy())}function gs(){var C0=Dy(),vo=it(C0);if(x=arguments,S=this,H=C0,vo){if(M===e)return ot(H);if(ue)return VD(M),M=Lp(jt,f),Be(H)}return M===e&&(M=Lp(jt,f)),R}return gs.cancel=ys,gs.flush=na,gs}var F6e=Bt(function(c,f){return _D(c,1,f)}),z6e=Bt(function(c,f,b){return _D(c,Ls(f)||0,b)});function j6e(c){return Qi(c,$)}function My(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new $s(a);var b=function(){var x=arguments,S=f?f.apply(this,x):x[0],P=b.cache;if(P.has(S))return P.get(S);var R=c.apply(this,x);return b.cache=P.set(S,R)||P,R};return b.cache=new(My.Cache||Xi),b}My.Cache=Xi;function Oy(c){if(typeof c!="function")throw new $s(a);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function q6e(c){return $M(2,c)}var G6e=R1e(function(c,f){f=f.length==1&&vt(f[0])?Xn(f[0],ps(tt())):Xn(mr(f,1),ps(tt()));var b=f.length;return Bt(function(x){for(var S=-1,P=Er(x.length,b);++S<P;)x[S]=f[S].call(this,x[S]);return ls(c,this,x)})}),ev=Bt(function(c,f){var b=fc(f,fd(ev));return Qi(c,A,e,f,b)}),LM=Bt(function(c,f){var b=fc(f,fd(LM));return Qi(c,_,e,f,b)}),V6e=Yi(function(c,f){return Qi(c,O,e,e,e,f)});function W6e(c,f){if(typeof c!="function")throw new $s(a);return f=f===e?f:Et(f),Bt(c,f)}function Z6e(c,f){if(typeof c!="function")throw new $s(a);return f=f==null?0:K0(Et(f),0),Bt(function(b){var x=b[f],S=gc(b,0,f);return x&&dc(S,x),ls(c,this,S)})}function K6e(c,f,b){var x=!0,S=!0;if(typeof c!="function")throw new $s(a);return u0(b)&&(x="leading"in b?!!b.leading:x,S="trailing"in b?!!b.trailing:S),NM(c,f,{leading:x,maxWait:f,trailing:S})}function X6e(c){return RM(c,1)}function J6e(c,f){return ev(Bw(f),c)}function Q6e(){if(!arguments.length)return[];var c=arguments[0];return vt(c)?c:[c]}function Y6e(c){return Ms(c,p)}function eue(c,f){return f=typeof f=="function"?f:e,Ms(c,p,f)}function tue(c){return Ms(c,d|p)}function nue(c,f){return f=typeof f=="function"?f:e,Ms(c,d|p,f)}function rue(c,f){return f==null||AD(c,f,sr(f))}function wo(c,f){return c===f||c!==c&&f!==f}var aue=ky(Ew),sue=ky(function(c,f){return c>=f}),cu=PD((function(){return arguments})())?PD:function(c){return x0(c)&&Sn.call(c,"callee")&&!yD.call(c,"callee")},vt=K.isArray,oue=J$?ps(J$):m1e;function $a(c){return c!=null&&Ny(c.length)&&!t1(c)}function I0(c){return x0(c)&&$a(c)}function iue(c){return c===!0||c===!1||x0(c)&&ea(c)==Pn}var hc=vie||fv,cue=Q$?ps(Q$):b1e;function uue(c){return x0(c)&&c.nodeType===1&&!Bp(c)}function due(c){if(c==null)return!0;if($a(c)&&(vt(c)||typeof c=="string"||typeof c.splice=="function"||hc(c)||ld(c)||cu(c)))return!c.length;var f=kr(c);if(f==pr||f==go)return!c.size;if(Np(c))return!Cw(c).length;for(var b in c)if(Sn.call(c,b))return!1;return!0}function fue(c,f){return Dp(c,f)}function lue(c,f,b){b=typeof b=="function"?b:e;var x=b?b(c,f):e;return x===e?Dp(c,f,e,b):!!x}function tv(c){if(!x0(c))return!1;var f=ea(c);return f==Yr||f==Zi||typeof c.message=="string"&&typeof c.name=="string"&&!Bp(c)}function pue(c){return typeof c=="number"&&hD(c)}function t1(c){if(!u0(c))return!1;var f=ea(c);return f==yo||f==Y5||f==fn||f==Lse}function BM(c){return typeof c=="number"&&c==Et(c)}function Ny(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Z}function u0(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function x0(c){return c!=null&&typeof c=="object"}var UM=Y$?ps(Y$):g1e;function mue(c,f){return c===f||Iw(c,f,Gw(f))}function bue(c,f,b){return b=typeof b=="function"?b:e,Iw(c,f,Gw(f),b)}function yue(c){return HM(c)&&c!=+c}function gue(c){if(ece(c))throw new bt(r);return RD(c)}function hue(c){return c===null}function xue(c){return c==null}function HM(c){return typeof c=="number"||x0(c)&&ea(c)==fs}function Bp(c){if(!x0(c)||ea(c)!=_r)return!1;var f=uy(c);if(f===null)return!0;var b=Sn.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&sy.call(b)==bie}var nv=eD?ps(eD):h1e;function wue(c){return BM(c)&&c>=-Z&&c<=Z}var FM=tD?ps(tD):x1e;function Ly(c){return typeof c=="string"||!vt(c)&&x0(c)&&ea(c)==vp}function bs(c){return typeof c=="symbol"||x0(c)&&ea(c)==X2}var ld=nD?ps(nD):w1e;function vue(c){return c===e}function Tue(c){return x0(c)&&kr(c)==Tp}function Sue(c){return x0(c)&&ea(c)==Use}var Aue=ky(Pw),_ue=ky(function(c,f){return c<=f});function zM(c){if(!c)return[];if($a(c))return Ly(c)?ho(c):Ra(c);if(_p&&c[_p])return rie(c[_p]());var f=kr(c),b=f==pr?gw:f==go?ny:pd;return b(c)}function n1(c){if(!c)return c===0?c:0;if(c=Ls(c),c===j||c===-j){var f=c<0?-1:1;return f*de}return c===c?c:0}function Et(c){var f=n1(c),b=f%1;return f===f?b?f-b:f:0}function jM(c){return c?au(Et(c),0,be):0}function Ls(c){if(typeof c=="number")return c;if(bs(c))return ne;if(u0(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=u0(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=cD(c);var b=ooe.test(c);return b||coe.test(c)?Hoe(c.slice(2),b?2:8):soe.test(c)?ne:+c}function qM(c){return ei(c,Da(c))}function Eue(c){return c?au(Et(c),-Z,Z):c===0?c:0}function vn(c){return c==null?"":ms(c)}var kue=ud(function(c,f){if(Np(f)||$a(f)){ei(f,sr(f),c);return}for(var b in f)Sn.call(f,b)&&Pp(c,b,f[b])}),GM=ud(function(c,f){ei(f,Da(f),c)}),By=ud(function(c,f,b,x){ei(f,Da(f),c,x)}),Iue=ud(function(c,f,b,x){ei(f,sr(f),c,x)}),Cue=Yi(Sw);function Pue(c,f){var b=cd(c);return f==null?b:SD(b,f)}var Rue=Bt(function(c,f){c=Rn(c);var b=-1,x=f.length,S=x>2?f[2]:e;for(S&&ta(f[0],f[1],S)&&(x=1);++b<x;)for(var P=f[b],R=Da(P),M=-1,H=R.length;++M<H;){var re=R[M],ae=c[re];(ae===e||wo(ae,sd[re])&&!Sn.call(c,re))&&(c[re]=P[re])}return c}),$ue=Bt(function(c){return c.push(e,cM),ls(VM,e,c)});function Due(c,f){return aD(c,tt(f,3),Yo)}function Mue(c,f){return aD(c,tt(f,3),_w)}function Oue(c,f){return c==null?c:Aw(c,tt(f,3),Da)}function Nue(c,f){return c==null?c:ID(c,tt(f,3),Da)}function Lue(c,f){return c&&Yo(c,tt(f,3))}function Bue(c,f){return c&&_w(c,tt(f,3))}function Uue(c){return c==null?[]:xy(c,sr(c))}function Hue(c){return c==null?[]:xy(c,Da(c))}function rv(c,f,b){var x=c==null?e:su(c,f);return x===e?b:x}function Fue(c,f){return c!=null&&fM(c,f,d1e)}function av(c,f){return c!=null&&fM(c,f,f1e)}var zue=rM(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=oy.call(f)),c[f]=b},ov(Ma)),jue=rM(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=oy.call(f)),Sn.call(c,f)?c[f].push(b):c[f]=[b]},tt),que=Bt($p);function sr(c){return $a(c)?vD(c):Cw(c)}function Da(c){return $a(c)?vD(c,!0):v1e(c)}function Gue(c,f){var b={};return f=tt(f,3),Yo(c,function(x,S,P){Ji(b,f(x,S,P),x)}),b}function Vue(c,f){var b={};return f=tt(f,3),Yo(c,function(x,S,P){Ji(b,S,f(x,S,P))}),b}var Wue=ud(function(c,f,b){wy(c,f,b)}),VM=ud(function(c,f,b,x){wy(c,f,b,x)}),Zue=Yi(function(c,f){var b={};if(c==null)return b;var x=!1;f=Xn(f,function(P){return P=yc(P,c),x||(x=P.length>1),P}),ei(c,jw(c),b),x&&(b=Ms(b,d|l|p,z1e));for(var S=f.length;S--;)Ow(b,f[S]);return b});function Kue(c,f){return WM(c,Oy(tt(f)))}var Xue=Yi(function(c,f){return c==null?{}:S1e(c,f)});function WM(c,f){if(c==null)return{};var b=Xn(jw(c),function(x){return[x]});return f=tt(f),BD(c,b,function(x,S){return f(x,S[0])})}function Jue(c,f,b){f=yc(f,c);var x=-1,S=f.length;for(S||(S=1,c=e);++x<S;){var P=c==null?e:c[ti(f[x])];P===e&&(x=S,P=b),c=t1(P)?P.call(c):P}return c}function Que(c,f,b){return c==null?c:Mp(c,f,b)}function Yue(c,f,b,x){return x=typeof x=="function"?x:e,c==null?c:Mp(c,f,b,x)}var ZM=oM(sr),KM=oM(Da);function e5e(c,f,b){var x=vt(c),S=x||hc(c)||ld(c);if(f=tt(f,4),b==null){var P=c&&c.constructor;S?b=x?new P:[]:u0(c)?b=t1(P)?cd(uy(c)):{}:b={}}return(S?Rs:Yo)(c,function(R,M,H){return f(b,R,M,H)}),b}function t5e(c,f){return c==null?!0:Ow(c,f)}function n5e(c,f,b){return c==null?c:jD(c,f,Bw(b))}function r5e(c,f,b,x){return x=typeof x=="function"?x:e,c==null?c:jD(c,f,Bw(b),x)}function pd(c){return c==null?[]:yw(c,sr(c))}function a5e(c){return c==null?[]:yw(c,Da(c))}function s5e(c,f,b){return b===e&&(b=f,f=e),b!==e&&(b=Ls(b),b=b===b?b:0),f!==e&&(f=Ls(f),f=f===f?f:0),au(Ls(c),f,b)}function o5e(c,f,b){return f=n1(f),b===e?(b=f,f=0):b=n1(b),c=Ls(c),l1e(c,f,b)}function i5e(c,f,b){if(b&&typeof b!="boolean"&&ta(c,f,b)&&(f=b=e),b===e&&(typeof f=="boolean"?(b=f,f=e):typeof c=="boolean"&&(b=c,c=e)),c===e&&f===e?(c=0,f=1):(c=n1(c),f===e?(f=c,c=0):f=n1(f)),c>f){var x=c;c=f,f=x}if(b||c%1||f%1){var S=xD();return Er(c+S*(f-c+Uoe("1e-"+((S+"").length-1))),f)}return $w(c,f)}var c5e=dd(function(c,f,b){return f=f.toLowerCase(),c+(b?XM(f):f)});function XM(c){return sv(vn(c).toLowerCase())}function JM(c){return c=vn(c),c&&c.replace(doe,Qoe).replace(Coe,"")}function u5e(c,f,b){c=vn(c),f=ms(f);var x=c.length;b=b===e?x:au(Et(b),0,x);var S=b;return b-=f.length,b>=0&&c.slice(b,S)==f}function d5e(c){return c=vn(c),c&&qse.test(c)?c.replace(I$,Yoe):c}function f5e(c){return c=vn(c),c&&Xse.test(c)?c.replace(ew,"\\$&"):c}var l5e=dd(function(c,f,b){return c+(b?"-":"")+f.toLowerCase()}),p5e=dd(function(c,f,b){return c+(b?" ":"")+f.toLowerCase()}),m5e=eM("toLowerCase");function b5e(c,f,b){c=vn(c),f=Et(f);var x=f?ad(c):0;if(!f||x>=f)return c;var S=(f-x)/2;return Ey(py(S),b)+c+Ey(ly(S),b)}function y5e(c,f,b){c=vn(c),f=Et(f);var x=f?ad(c):0;return f&&x<f?c+Ey(f-x,b):c}function g5e(c,f,b){c=vn(c),f=Et(f);var x=f?ad(c):0;return f&&x<f?Ey(f-x,b)+c:c}function h5e(c,f,b){return b||f==null?f=0:f&&(f=+f),_ie(vn(c).replace(tw,""),f||0)}function x5e(c,f,b){return(b?ta(c,f,b):f===e)?f=1:f=Et(f),Dw(vn(c),f)}function w5e(){var c=arguments,f=vn(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var v5e=dd(function(c,f,b){return c+(b?"_":"")+f.toLowerCase()});function T5e(c,f,b){return b&&typeof b!="number"&&ta(c,f,b)&&(f=b=e),b=b===e?be:b>>>0,b?(c=vn(c),c&&(typeof f=="string"||f!=null&&!nv(f))&&(f=ms(f),!f&&rd(c))?gc(ho(c),0,b):c.split(f,b)):[]}var S5e=dd(function(c,f,b){return c+(b?" ":"")+sv(f)});function A5e(c,f,b){return c=vn(c),b=b==null?0:au(Et(b),0,c.length),f=ms(f),c.slice(b,b+f.length)==f}function _5e(c,f,b){var x=k.templateSettings;b&&ta(c,f,b)&&(f=e),c=vn(c),f=By({},f,x,iM);var S=By({},f.imports,x.imports,iM),P=sr(S),R=yw(S,P),M,H,re=0,ae=f.interpolate||J2,ue="__p += '",ve=hw((f.escape||J2).source+"|"+ae.source+"|"+(ae===C$?aoe:J2).source+"|"+(f.evaluate||J2).source+"|$","g"),Be="//# sourceURL="+(Sn.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Moe+"]")+`
`;c.replace(ve,function(it,jt,Jt,ys,na,gs){return Jt||(Jt=ys),ue+=c.slice(re,gs).replace(foe,eie),jt&&(M=!0,ue+=`' +
__e(`+jt+`) +
'`),na&&(H=!0,ue+=`';
`+na+`;
__p += '`),Jt&&(ue+=`' +
((__t = (`+Jt+`)) == null ? '' : __t) +
'`),re=gs+it.length,it}),ue+=`';
`;var ot=Sn.call(f,"variable")&&f.variable;if(!ot)ue=`with (obj) {
`+ue+`
}
`;else if(noe.test(ot))throw new bt(s);ue=(H?ue.replace(Hse,""):ue).replace(Fse,"$1").replace(zse,"$1;"),ue="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var Rt=YM(function(){return xn(P,Be+"return "+ue).apply(e,R)});if(Rt.source=ue,tv(Rt))throw Rt;return Rt}function E5e(c){return vn(c).toLowerCase()}function k5e(c){return vn(c).toUpperCase()}function I5e(c,f,b){if(c=vn(c),c&&(b||f===e))return cD(c);if(!c||!(f=ms(f)))return c;var x=ho(c),S=ho(f),P=uD(x,S),R=dD(x,S)+1;return gc(x,P,R).join("")}function C5e(c,f,b){if(c=vn(c),c&&(b||f===e))return c.slice(0,lD(c)+1);if(!c||!(f=ms(f)))return c;var x=ho(c),S=dD(x,ho(f))+1;return gc(x,0,S).join("")}function P5e(c,f,b){if(c=vn(c),c&&(b||f===e))return c.replace(tw,"");if(!c||!(f=ms(f)))return c;var x=ho(c),S=uD(x,ho(f));return gc(x,S).join("")}function R5e(c,f){var b=B,x=V;if(u0(f)){var S="separator"in f?f.separator:S;b="length"in f?Et(f.length):b,x="omission"in f?ms(f.omission):x}c=vn(c);var P=c.length;if(rd(c)){var R=ho(c);P=R.length}if(b>=P)return c;var M=b-ad(x);if(M<1)return x;var H=R?gc(R,0,M).join(""):c.slice(0,M);if(S===e)return H+x;if(R&&(M+=H.length-M),nv(S)){if(c.slice(M).search(S)){var re,ae=H;for(S.global||(S=hw(S.source,vn(P$.exec(S))+"g")),S.lastIndex=0;re=S.exec(ae);)var ue=re.index;H=H.slice(0,ue===e?M:ue)}}else if(c.indexOf(ms(S),M)!=M){var ve=H.lastIndexOf(S);ve>-1&&(H=H.slice(0,ve))}return H+x}function $5e(c){return c=vn(c),c&&jse.test(c)?c.replace(k$,iie):c}var D5e=dd(function(c,f,b){return c+(b?" ":"")+f.toUpperCase()}),sv=eM("toUpperCase");function QM(c,f,b){return c=vn(c),f=b?e:f,f===e?nie(c)?die(c):Woe(c):c.match(f)||[]}var YM=Bt(function(c,f){try{return ls(c,e,f)}catch(b){return tv(b)?b:new bt(b)}}),M5e=Yi(function(c,f){return Rs(f,function(b){b=ti(b),Ji(c,b,Yw(c[b],c))}),c});function O5e(c){var f=c==null?0:c.length,b=tt();return c=f?Xn(c,function(x){if(typeof x[1]!="function")throw new $s(a);return[b(x[0]),x[1]]}):[],Bt(function(x){for(var S=-1;++S<f;){var P=c[S];if(ls(P[0],this,x))return ls(P[1],this,x)}})}function N5e(c){return i1e(Ms(c,d))}function ov(c){return function(){return c}}function L5e(c,f){return c==null||c!==c?f:c}var B5e=nM(),U5e=nM(!0);function Ma(c){return c}function iv(c){return $D(typeof c=="function"?c:Ms(c,d))}function H5e(c){return MD(Ms(c,d))}function F5e(c,f){return OD(c,Ms(f,d))}var z5e=Bt(function(c,f){return function(b){return $p(b,c,f)}}),j5e=Bt(function(c,f){return function(b){return $p(c,b,f)}});function cv(c,f,b){var x=sr(f),S=xy(f,x);b==null&&!(u0(f)&&(S.length||!x.length))&&(b=f,f=c,c=this,S=xy(f,sr(f)));var P=!(u0(b)&&"chain"in b)||!!b.chain,R=t1(c);return Rs(S,function(M){var H=f[M];c[M]=H,R&&(c.prototype[M]=function(){var re=this.__chain__;if(P||re){var ae=c(this.__wrapped__),ue=ae.__actions__=Ra(this.__actions__);return ue.push({func:H,args:arguments,thisArg:c}),ae.__chain__=re,ae}return H.apply(c,dc([this.value()],arguments))})}),c}function q5e(){return ar._===this&&(ar._=yie),this}function uv(){}function G5e(c){return c=Et(c),Bt(function(f){return ND(f,c)})}var V5e=Hw(Xn),W5e=Hw(rD),Z5e=Hw(fw);function eO(c){return Ww(c)?lw(ti(c)):A1e(c)}function K5e(c){return function(f){return c==null?e:su(c,f)}}var X5e=aM(),J5e=aM(!0);function dv(){return[]}function fv(){return!1}function Q5e(){return{}}function Y5e(){return""}function ede(){return!0}function tde(c,f){if(c=Et(c),c<1||c>Z)return[];var b=be,x=Er(c,be);f=tt(f),c-=be;for(var S=bw(x,f);++b<c;)f(b);return S}function nde(c){return vt(c)?Xn(c,ti):bs(c)?[c]:Ra(wM(vn(c)))}function rde(c){var f=++mie;return vn(c)+f}var ade=_y(function(c,f){return c+f},0),sde=Fw("ceil"),ode=_y(function(c,f){return c/f},1),ide=Fw("floor");function cde(c){return c&&c.length?hy(c,Ma,Ew):e}function ude(c,f){return c&&c.length?hy(c,tt(f,2),Ew):e}function dde(c){return oD(c,Ma)}function fde(c,f){return oD(c,tt(f,2))}function lde(c){return c&&c.length?hy(c,Ma,Pw):e}function pde(c,f){return c&&c.length?hy(c,tt(f,2),Pw):e}var mde=_y(function(c,f){return c*f},1),bde=Fw("round"),yde=_y(function(c,f){return c-f},0);function gde(c){return c&&c.length?mw(c,Ma):0}function hde(c,f){return c&&c.length?mw(c,tt(f,2)):0}return k.after=H6e,k.ary=RM,k.assign=kue,k.assignIn=GM,k.assignInWith=By,k.assignWith=Iue,k.at=Cue,k.before=$M,k.bind=Yw,k.bindAll=M5e,k.bindKey=DM,k.castArray=Q6e,k.chain=IM,k.chunk=ice,k.compact=cce,k.concat=uce,k.cond=O5e,k.conforms=N5e,k.constant=ov,k.countBy=g6e,k.create=Pue,k.curry=MM,k.curryRight=OM,k.debounce=NM,k.defaults=Rue,k.defaultsDeep=$ue,k.defer=F6e,k.delay=z6e,k.difference=dce,k.differenceBy=fce,k.differenceWith=lce,k.drop=pce,k.dropRight=mce,k.dropRightWhile=bce,k.dropWhile=yce,k.fill=gce,k.filter=x6e,k.flatMap=T6e,k.flatMapDeep=S6e,k.flatMapDepth=A6e,k.flatten=AM,k.flattenDeep=hce,k.flattenDepth=xce,k.flip=j6e,k.flow=B5e,k.flowRight=U5e,k.fromPairs=wce,k.functions=Uue,k.functionsIn=Hue,k.groupBy=_6e,k.initial=Tce,k.intersection=Sce,k.intersectionBy=Ace,k.intersectionWith=_ce,k.invert=zue,k.invertBy=jue,k.invokeMap=k6e,k.iteratee=iv,k.keyBy=I6e,k.keys=sr,k.keysIn=Da,k.map=$y,k.mapKeys=Gue,k.mapValues=Vue,k.matches=H5e,k.matchesProperty=F5e,k.memoize=My,k.merge=Wue,k.mergeWith=VM,k.method=z5e,k.methodOf=j5e,k.mixin=cv,k.negate=Oy,k.nthArg=G5e,k.omit=Zue,k.omitBy=Kue,k.once=q6e,k.orderBy=C6e,k.over=V5e,k.overArgs=G6e,k.overEvery=W5e,k.overSome=Z5e,k.partial=ev,k.partialRight=LM,k.partition=P6e,k.pick=Xue,k.pickBy=WM,k.property=eO,k.propertyOf=K5e,k.pull=Cce,k.pullAll=EM,k.pullAllBy=Pce,k.pullAllWith=Rce,k.pullAt=$ce,k.range=X5e,k.rangeRight=J5e,k.rearg=V6e,k.reject=D6e,k.remove=Dce,k.rest=W6e,k.reverse=Jw,k.sampleSize=O6e,k.set=Que,k.setWith=Yue,k.shuffle=N6e,k.slice=Mce,k.sortBy=U6e,k.sortedUniq=Fce,k.sortedUniqBy=zce,k.split=T5e,k.spread=Z6e,k.tail=jce,k.take=qce,k.takeRight=Gce,k.takeRightWhile=Vce,k.takeWhile=Wce,k.tap=c6e,k.throttle=K6e,k.thru=Ry,k.toArray=zM,k.toPairs=ZM,k.toPairsIn=KM,k.toPath=nde,k.toPlainObject=qM,k.transform=e5e,k.unary=X6e,k.union=Zce,k.unionBy=Kce,k.unionWith=Xce,k.uniq=Jce,k.uniqBy=Qce,k.uniqWith=Yce,k.unset=t5e,k.unzip=Qw,k.unzipWith=kM,k.update=n5e,k.updateWith=r5e,k.values=pd,k.valuesIn=a5e,k.without=e6e,k.words=QM,k.wrap=J6e,k.xor=t6e,k.xorBy=n6e,k.xorWith=r6e,k.zip=a6e,k.zipObject=s6e,k.zipObjectDeep=o6e,k.zipWith=i6e,k.entries=ZM,k.entriesIn=KM,k.extend=GM,k.extendWith=By,cv(k,k),k.add=ade,k.attempt=YM,k.camelCase=c5e,k.capitalize=XM,k.ceil=sde,k.clamp=s5e,k.clone=Y6e,k.cloneDeep=tue,k.cloneDeepWith=nue,k.cloneWith=eue,k.conformsTo=rue,k.deburr=JM,k.defaultTo=L5e,k.divide=ode,k.endsWith=u5e,k.eq=wo,k.escape=d5e,k.escapeRegExp=f5e,k.every=h6e,k.find=w6e,k.findIndex=TM,k.findKey=Due,k.findLast=v6e,k.findLastIndex=SM,k.findLastKey=Mue,k.floor=ide,k.forEach=CM,k.forEachRight=PM,k.forIn=Oue,k.forInRight=Nue,k.forOwn=Lue,k.forOwnRight=Bue,k.get=rv,k.gt=aue,k.gte=sue,k.has=Fue,k.hasIn=av,k.head=_M,k.identity=Ma,k.includes=E6e,k.indexOf=vce,k.inRange=o5e,k.invoke=que,k.isArguments=cu,k.isArray=vt,k.isArrayBuffer=oue,k.isArrayLike=$a,k.isArrayLikeObject=I0,k.isBoolean=iue,k.isBuffer=hc,k.isDate=cue,k.isElement=uue,k.isEmpty=due,k.isEqual=fue,k.isEqualWith=lue,k.isError=tv,k.isFinite=pue,k.isFunction=t1,k.isInteger=BM,k.isLength=Ny,k.isMap=UM,k.isMatch=mue,k.isMatchWith=bue,k.isNaN=yue,k.isNative=gue,k.isNil=xue,k.isNull=hue,k.isNumber=HM,k.isObject=u0,k.isObjectLike=x0,k.isPlainObject=Bp,k.isRegExp=nv,k.isSafeInteger=wue,k.isSet=FM,k.isString=Ly,k.isSymbol=bs,k.isTypedArray=ld,k.isUndefined=vue,k.isWeakMap=Tue,k.isWeakSet=Sue,k.join=Ece,k.kebabCase=l5e,k.last=Ns,k.lastIndexOf=kce,k.lowerCase=p5e,k.lowerFirst=m5e,k.lt=Aue,k.lte=_ue,k.max=cde,k.maxBy=ude,k.mean=dde,k.meanBy=fde,k.min=lde,k.minBy=pde,k.stubArray=dv,k.stubFalse=fv,k.stubObject=Q5e,k.stubString=Y5e,k.stubTrue=ede,k.multiply=mde,k.nth=Ice,k.noConflict=q5e,k.noop=uv,k.now=Dy,k.pad=b5e,k.padEnd=y5e,k.padStart=g5e,k.parseInt=h5e,k.random=i5e,k.reduce=R6e,k.reduceRight=$6e,k.repeat=x5e,k.replace=w5e,k.result=Jue,k.round=bde,k.runInContext=U,k.sample=M6e,k.size=L6e,k.snakeCase=v5e,k.some=B6e,k.sortedIndex=Oce,k.sortedIndexBy=Nce,k.sortedIndexOf=Lce,k.sortedLastIndex=Bce,k.sortedLastIndexBy=Uce,k.sortedLastIndexOf=Hce,k.startCase=S5e,k.startsWith=A5e,k.subtract=yde,k.sum=gde,k.sumBy=hde,k.template=_5e,k.times=tde,k.toFinite=n1,k.toInteger=Et,k.toLength=jM,k.toLower=E5e,k.toNumber=Ls,k.toSafeInteger=Eue,k.toString=vn,k.toUpper=k5e,k.trim=I5e,k.trimEnd=C5e,k.trimStart=P5e,k.truncate=R5e,k.unescape=$5e,k.uniqueId=rde,k.upperCase=D5e,k.upperFirst=sv,k.each=CM,k.eachRight=PM,k.first=_M,cv(k,(function(){var c={};return Yo(k,function(f,b){Sn.call(k.prototype,b)||(c[b]=f)}),c})(),{chain:!1}),k.VERSION=t,Rs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){k[c].placeholder=k}),Rs(["drop","take"],function(c,f){Gt.prototype[c]=function(b){b=b===e?1:K0(Et(b),0);var x=this.__filtered__&&!f?new Gt(this):this.clone();return x.__filtered__?x.__takeCount__=Er(b,x.__takeCount__):x.__views__.push({size:Er(b,be),type:c+(x.__dir__<0?"Right":"")}),x},Gt.prototype[c+"Right"]=function(b){return this.reverse()[c](b).reverse()}}),Rs(["filter","map","takeWhile"],function(c,f){var b=f+1,x=b==N||b==me;Gt.prototype[c]=function(S){var P=this.clone();return P.__iteratees__.push({iteratee:tt(S,3),type:b}),P.__filtered__=P.__filtered__||x,P}}),Rs(["head","last"],function(c,f){var b="take"+(f?"Right":"");Gt.prototype[c]=function(){return this[b](1).value()[0]}}),Rs(["initial","tail"],function(c,f){var b="drop"+(f?"":"Right");Gt.prototype[c]=function(){return this.__filtered__?new Gt(this):this[b](1)}}),Gt.prototype.compact=function(){return this.filter(Ma)},Gt.prototype.find=function(c){return this.filter(c).head()},Gt.prototype.findLast=function(c){return this.reverse().find(c)},Gt.prototype.invokeMap=Bt(function(c,f){return typeof c=="function"?new Gt(this):this.map(function(b){return $p(b,c,f)})}),Gt.prototype.reject=function(c){return this.filter(Oy(tt(c)))},Gt.prototype.slice=function(c,f){c=Et(c);var b=this;return b.__filtered__&&(c>0||f<0)?new Gt(b):(c<0?b=b.takeRight(-c):c&&(b=b.drop(c)),f!==e&&(f=Et(f),b=f<0?b.dropRight(-f):b.take(f-c)),b)},Gt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Gt.prototype.toArray=function(){return this.take(be)},Yo(Gt.prototype,function(c,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),x=/^(?:head|last)$/.test(f),S=k[x?"take"+(f=="last"?"Right":""):f],P=x||/^find/.test(f);S&&(k.prototype[f]=function(){var R=this.__wrapped__,M=x?[1]:arguments,H=R instanceof Gt,re=M[0],ae=H||vt(R),ue=function(jt){var Jt=S.apply(k,dc([jt],M));return x&&ve?Jt[0]:Jt};ae&&b&&typeof re=="function"&&re.length!=1&&(H=ae=!1);var ve=this.__chain__,Be=!!this.__actions__.length,ot=P&&!ve,Rt=H&&!Be;if(!P&&ae){R=Rt?R:new Gt(this);var it=c.apply(R,M);return it.__actions__.push({func:Ry,args:[ue],thisArg:e}),new Ds(it,ve)}return ot&&Rt?c.apply(this,M):(it=this.thru(ue),ot?x?it.value()[0]:it.value():it)})}),Rs(["pop","push","shift","sort","splice","unshift"],function(c){var f=ry[c],b=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",x=/^(?:pop|shift)$/.test(c);k.prototype[c]=function(){var S=arguments;if(x&&!this.__chain__){var P=this.value();return f.apply(vt(P)?P:[],S)}return this[b](function(R){return f.apply(vt(R)?R:[],S)})}}),Yo(Gt.prototype,function(c,f){var b=k[f];if(b){var x=b.name+"";Sn.call(id,x)||(id[x]=[]),id[x].push({name:f,func:b})}}),id[Ay(e,h).name]=[{name:"wrapper",func:e}],Gt.prototype.clone=$ie,Gt.prototype.reverse=Die,Gt.prototype.value=Mie,k.prototype.at=u6e,k.prototype.chain=d6e,k.prototype.commit=f6e,k.prototype.next=l6e,k.prototype.plant=m6e,k.prototype.reverse=b6e,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=y6e,k.prototype.first=k.prototype.head,_p&&(k.prototype[_p]=p6e),k}),lc=fie();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ar._=lc,define(function(){return lc})):eu?((eu.exports=lc)._=lc,iw._=lc):ar._=lc}).call(Ul)});var eK=L((iht,YZ)=>{var Hl=1e3,Fl=Hl*60,zl=Fl*60,k5=zl*24,tTe=k5*7,nTe=k5*365.25;YZ.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return rTe(e);if(n==="number"&&isFinite(e))return t.long?sTe(e):aTe(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function rTe(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*nTe;case"weeks":case"week":case"w":return n*tTe;case"days":case"day":case"d":return n*k5;case"hours":case"hour":case"hrs":case"hr":case"h":return n*zl;case"minutes":case"minute":case"mins":case"min":case"m":return n*Fl;case"seconds":case"second":case"secs":case"sec":case"s":return n*Hl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function aTe(e){var t=Math.abs(e);return t>=k5?Math.round(e/k5)+"d":t>=zl?Math.round(e/zl)+"h":t>=Fl?Math.round(e/Fl)+"m":t>=Hl?Math.round(e/Hl)+"s":e+"ms"}function sTe(e){var t=Math.abs(e);return t>=k5?dx(e,t,k5,"day"):t>=zl?dx(e,t,zl,"hour"):t>=Fl?dx(e,t,Fl,"minute"):t>=Hl?dx(e,t,Hl,"second"):e+" ms"}function dx(e,t,n,r){var a=t>=n*1.5;return Math.round(e/n)+" "+r+(a?"s":"")}});var kC=L((cht,tK)=>{function oTe(e){n.debug=n,n.default=n,n.coerce=u,n.disable=o,n.enable=a,n.enabled=i,n.humanize=eK(),n.destroy=d,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let p=0;for(let y=0;y<l.length;y++)p=(p<<5)-p+l.charCodeAt(y),p|=0;return n.colors[Math.abs(p)%n.colors.length]}n.selectColor=t;function n(l){let p,y=null,m,g;function h(...w){if(!h.enabled)return;let v=h,T=Number(new Date),A=T-(p||T);v.diff=A,v.prev=p,v.curr=T,p=T,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let _=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(O,$)=>{if(O==="%%")return"%";_++;let B=n.formatters[$];if(typeof B=="function"){let V=w[_];O=B.call(v,V),w.splice(_,1),_--}return O}),n.formatArgs.call(v,w),(v.log||n.log).apply(v,w)}return h.namespace=l,h.useColors=n.useColors(),h.color=n.selectColor(l),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(m!==n.namespaces&&(m=n.namespaces,g=n.enabled(l)),g),set:w=>{y=w}}),typeof n.init=="function"&&n.init(h),h}function r(l,p){let y=n(this.namespace+(typeof p>"u"?":":p)+l);return y.log=this.log,y}function a(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let p=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let y of p)y[0]==="-"?n.skips.push(y.slice(1)):n.names.push(y)}function s(l,p){let y=0,m=0,g=-1,h=0;for(;y<l.length;)if(m<p.length&&(p[m]===l[y]||p[m]==="*"))p[m]==="*"?(g=m,h=y,m++):(y++,m++);else if(g!==-1)m=g+1,h++,y=h;else return!1;for(;m<p.length&&p[m]==="*";)m++;return m===p.length}function o(){let l=[...n.names,...n.skips.map(p=>"-"+p)].join(",");return n.enable(""),l}function i(l){for(let p of n.skips)if(s(l,p))return!1;for(let p of n.names)if(s(l,p))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}tK.exports=oTe});var nK=L((ts,fx)=>{ts.formatArgs=cTe;ts.save=uTe;ts.load=dTe;ts.useColors=iTe;ts.storage=fTe();ts.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ts.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function iTe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cTe(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+fx.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(n++,a==="%c"&&(r=n))}),e.splice(r,0,t)}ts.log=console.debug||console.log||(()=>{});function uTe(e){try{e?ts.storage.setItem("debug",e):ts.storage.removeItem("debug")}catch{}}function dTe(){let e;try{e=ts.storage.getItem("debug")||ts.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function fTe(){try{return localStorage}catch{}}fx.exports=kC()(ts);var{formatters:lTe}=fx.exports;lTe.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var aK=L((uht,rK)=>{"use strict";rK.exports=(e,t)=>{t=t||process.argv;let n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),a=t.indexOf("--");return r!==-1&&(a===-1?!0:r<a)}});var oK=L((dht,sK)=>{"use strict";var pTe=Uy("os"),qo=aK(),Hr=process.env,jl;qo("no-color")||qo("no-colors")||qo("color=false")?jl=!1:(qo("color")||qo("colors")||qo("color=true")||qo("color=always"))&&(jl=!0);"FORCE_COLOR"in Hr&&(jl=Hr.FORCE_COLOR.length===0||parseInt(Hr.FORCE_COLOR,10)!==0);function mTe(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function bTe(e){if(jl===!1)return 0;if(qo("color=16m")||qo("color=full")||qo("color=truecolor"))return 3;if(qo("color=256"))return 2;if(e&&!e.isTTY&&jl!==!0)return 0;let t=jl?1:0;if(process.platform==="win32"){let n=pTe.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Hr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in Hr)||Hr.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Hr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Hr.TEAMCITY_VERSION)?1:0;if(Hr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Hr){let n=parseInt((Hr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Hr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Hr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Hr.TERM)||"COLORTERM"in Hr?1:(Hr.TERM==="dumb",t)}function IC(e){let t=bTe(e);return mTe(t)}sK.exports={supportsColor:IC,stdout:IC(process.stdout),stderr:IC(process.stderr)}});var cK=L((dr,px)=>{var yTe=Uy("tty"),lx=Uy("util");dr.init=STe;dr.log=wTe;dr.formatArgs=hTe;dr.save=vTe;dr.load=TTe;dr.useColors=gTe;dr.destroy=lx.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");dr.colors=[6,2,3,4,5,1];try{let e=oK();e&&(e.stderr||e).level>=2&&(dr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}dr.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(a,s)=>s.toUpperCase()),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[n]=r,e},{});function gTe(){return"colors"in dr.inspectOpts?!!dr.inspectOpts.colors:yTe.isatty(process.stderr.fd)}function hTe(e){let{namespace:t,useColors:n}=this;if(n){let r=this.color,a="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${a};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(a+"m+"+px.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=xTe()+t+" "+e[0]}function xTe(){return dr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function wTe(...e){return process.stderr.write(lx.formatWithOptions(dr.inspectOpts,...e)+`
`)}function vTe(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function TTe(){return process.env.DEBUG}function STe(e){e.inspectOpts={};let t=Object.keys(dr.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=dr.inspectOpts[t[n]]}px.exports=kC()(dr);var{formatters:iK}=px.exports;iK.o=function(e){return this.inspectOpts.colors=this.useColors,lx.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};iK.O=function(e){return this.inspectOpts.colors=this.useColors,lx.inspect(e,this.inspectOpts)}});var uK=L((fht,CC)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?CC.exports=nK():CC.exports=cK()});var I8=L((lht,dK)=>{"use strict";var ATe="2.0.0",_Te=Number.MAX_SAFE_INTEGER||9007199254740991,ETe=16,kTe=250,ITe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];dK.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ETe,MAX_SAFE_BUILD_LENGTH:kTe,MAX_SAFE_INTEGER:_Te,RELEASE_TYPES:ITe,SEMVER_SPEC_VERSION:ATe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var C8=L((pht,fK)=>{"use strict";var CTe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};fK.exports=CTe});var ql=L((Pi,lK)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:PC,MAX_SAFE_BUILD_LENGTH:PTe,MAX_LENGTH:RTe}=I8(),$Te=C8();Pi=lK.exports={};var DTe=Pi.re=[],MTe=Pi.safeRe=[],Re=Pi.src=[],OTe=Pi.safeSrc=[],$e=Pi.t={},NTe=0,RC="[a-zA-Z0-9-]",LTe=[["\\s",1],["\\d",RTe],[RC,PTe]],BTe=e=>{for(let[t,n]of LTe)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e},St=(e,t,n)=>{let r=BTe(t),a=NTe++;$Te(e,a,t),$e[e]=a,Re[a]=t,OTe[a]=r,DTe[a]=new RegExp(t,n?"g":void 0),MTe[a]=new RegExp(r,n?"g":void 0)};St("NUMERICIDENTIFIER","0|[1-9]\\d*");St("NUMERICIDENTIFIERLOOSE","\\d+");St("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${RC}*`);St("MAINVERSION",`(${Re[$e.NUMERICIDENTIFIER]})\\.(${Re[$e.NUMERICIDENTIFIER]})\\.(${Re[$e.NUMERICIDENTIFIER]})`);St("MAINVERSIONLOOSE",`(${Re[$e.NUMERICIDENTIFIERLOOSE]})\\.(${Re[$e.NUMERICIDENTIFIERLOOSE]})\\.(${Re[$e.NUMERICIDENTIFIERLOOSE]})`);St("PRERELEASEIDENTIFIER",`(?:${Re[$e.NONNUMERICIDENTIFIER]}|${Re[$e.NUMERICIDENTIFIER]})`);St("PRERELEASEIDENTIFIERLOOSE",`(?:${Re[$e.NONNUMERICIDENTIFIER]}|${Re[$e.NUMERICIDENTIFIERLOOSE]})`);St("PRERELEASE",`(?:-(${Re[$e.PRERELEASEIDENTIFIER]}(?:\\.${Re[$e.PRERELEASEIDENTIFIER]})*))`);St("PRERELEASELOOSE",`(?:-?(${Re[$e.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Re[$e.PRERELEASEIDENTIFIERLOOSE]})*))`);St("BUILDIDENTIFIER",`${RC}+`);St("BUILD",`(?:\\+(${Re[$e.BUILDIDENTIFIER]}(?:\\.${Re[$e.BUILDIDENTIFIER]})*))`);St("FULLPLAIN",`v?${Re[$e.MAINVERSION]}${Re[$e.PRERELEASE]}?${Re[$e.BUILD]}?`);St("FULL",`^${Re[$e.FULLPLAIN]}$`);St("LOOSEPLAIN",`[v=\\s]*${Re[$e.MAINVERSIONLOOSE]}${Re[$e.PRERELEASELOOSE]}?${Re[$e.BUILD]}?`);St("LOOSE",`^${Re[$e.LOOSEPLAIN]}$`);St("GTLT","((?:<|>)?=?)");St("XRANGEIDENTIFIERLOOSE",`${Re[$e.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);St("XRANGEIDENTIFIER",`${Re[$e.NUMERICIDENTIFIER]}|x|X|\\*`);St("XRANGEPLAIN",`[v=\\s]*(${Re[$e.XRANGEIDENTIFIER]})(?:\\.(${Re[$e.XRANGEIDENTIFIER]})(?:\\.(${Re[$e.XRANGEIDENTIFIER]})(?:${Re[$e.PRERELEASE]})?${Re[$e.BUILD]}?)?)?`);St("XRANGEPLAINLOOSE",`[v=\\s]*(${Re[$e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Re[$e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Re[$e.XRANGEIDENTIFIERLOOSE]})(?:${Re[$e.PRERELEASELOOSE]})?${Re[$e.BUILD]}?)?)?`);St("XRANGE",`^${Re[$e.GTLT]}\\s*${Re[$e.XRANGEPLAIN]}$`);St("XRANGELOOSE",`^${Re[$e.GTLT]}\\s*${Re[$e.XRANGEPLAINLOOSE]}$`);St("COERCEPLAIN",`(^|[^\\d])(\\d{1,${PC}})(?:\\.(\\d{1,${PC}}))?(?:\\.(\\d{1,${PC}}))?`);St("COERCE",`${Re[$e.COERCEPLAIN]}(?:$|[^\\d])`);St("COERCEFULL",Re[$e.COERCEPLAIN]+`(?:${Re[$e.PRERELEASE]})?(?:${Re[$e.BUILD]})?(?:$|[^\\d])`);St("COERCERTL",Re[$e.COERCE],!0);St("COERCERTLFULL",Re[$e.COERCEFULL],!0);St("LONETILDE","(?:~>?)");St("TILDETRIM",`(\\s*)${Re[$e.LONETILDE]}\\s+`,!0);Pi.tildeTrimReplace="$1~";St("TILDE",`^${Re[$e.LONETILDE]}${Re[$e.XRANGEPLAIN]}$`);St("TILDELOOSE",`^${Re[$e.LONETILDE]}${Re[$e.XRANGEPLAINLOOSE]}$`);St("LONECARET","(?:\\^)");St("CARETTRIM",`(\\s*)${Re[$e.LONECARET]}\\s+`,!0);Pi.caretTrimReplace="$1^";St("CARET",`^${Re[$e.LONECARET]}${Re[$e.XRANGEPLAIN]}$`);St("CARETLOOSE",`^${Re[$e.LONECARET]}${Re[$e.XRANGEPLAINLOOSE]}$`);St("COMPARATORLOOSE",`^${Re[$e.GTLT]}\\s*(${Re[$e.LOOSEPLAIN]})$|^$`);St("COMPARATOR",`^${Re[$e.GTLT]}\\s*(${Re[$e.FULLPLAIN]})$|^$`);St("COMPARATORTRIM",`(\\s*)${Re[$e.GTLT]}\\s*(${Re[$e.LOOSEPLAIN]}|${Re[$e.XRANGEPLAIN]})`,!0);Pi.comparatorTrimReplace="$1$2$3";St("HYPHENRANGE",`^\\s*(${Re[$e.XRANGEPLAIN]})\\s+-\\s+(${Re[$e.XRANGEPLAIN]})\\s*$`);St("HYPHENRANGELOOSE",`^\\s*(${Re[$e.XRANGEPLAINLOOSE]})\\s+-\\s+(${Re[$e.XRANGEPLAINLOOSE]})\\s*$`);St("STAR","(<|>)?=?\\s*\\*");St("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");St("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var mx=L((mht,pK)=>{"use strict";var UTe=Object.freeze({loose:!0}),HTe=Object.freeze({}),FTe=e=>e?typeof e!="object"?UTe:e:HTe;pK.exports=FTe});var $C=L((bht,yK)=>{"use strict";var mK=/^[0-9]+$/,bK=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let n=mK.test(e),r=mK.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},zTe=(e,t)=>bK(t,e);yK.exports={compareIdentifiers:bK,rcompareIdentifiers:zTe}});var Fr=L((yht,hK)=>{"use strict";var bx=C8(),{MAX_LENGTH:gK,MAX_SAFE_INTEGER:yx}=I8(),{safeRe:gx,t:hx}=ql(),jTe=mx(),{compareIdentifiers:DC}=$C(),MC=class e{constructor(t,n){if(n=jTe(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>gK)throw new TypeError(`version is longer than ${gK} characters`);bx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?gx[hx.LOOSE]:gx[hx.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>yx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>yx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>yx||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let s=+a;if(s>=0&&s<yx)return s}return a}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(bx("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],a=t.prerelease[n];if(bx("prerelease compare",n,r,a),r===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(r===void 0)return-1;if(r===a)continue;return DC(r,a)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{let r=this.build[n],a=t.build[n];if(bx("build compare",n,r,a),r===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(r===void 0)return-1;if(r===a)continue;return DC(r,a)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let a=`-${n}`.match(this.options.loose?gx[hx.PRERELEASELOOSE]:gx[hx.PRERELEASE]);if(!a||a[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let a=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[a];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(n){let s=[n,a];r===!1&&(s=[n]),DC(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};hK.exports=MC});var I5=L((ght,wK)=>{"use strict";var xK=Fr(),qTe=(e,t,n=!1)=>{if(e instanceof xK)return e;try{return new xK(e,t)}catch(r){if(!n)return null;throw r}};wK.exports=qTe});var TK=L((hht,vK)=>{"use strict";var GTe=I5(),VTe=(e,t)=>{let n=GTe(e,t);return n?n.version:null};vK.exports=VTe});var AK=L((xht,SK)=>{"use strict";var WTe=I5(),ZTe=(e,t)=>{let n=WTe(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};SK.exports=ZTe});var kK=L((wht,EK)=>{"use strict";var _K=Fr(),KTe=(e,t,n,r,a)=>{typeof n=="string"&&(a=r,r=n,n=void 0);try{return new _K(e instanceof _K?e.version:e,n).inc(t,r,a).version}catch{return null}};EK.exports=KTe});var PK=L((vht,CK)=>{"use strict";var IK=I5(),XTe=(e,t)=>{let n=IK(e,null,!0),r=IK(t,null,!0),a=n.compare(r);if(a===0)return null;let s=a>0,o=s?n:r,i=s?r:n,u=!!o.prerelease.length;if(!!i.prerelease.length&&!u){if(!i.patch&&!i.minor)return"major";if(i.compareMain(o)===0)return i.minor&&!i.patch?"minor":"patch"}let l=u?"pre":"";return n.major!==r.major?l+"major":n.minor!==r.minor?l+"minor":n.patch!==r.patch?l+"patch":"prerelease"};CK.exports=XTe});var $K=L((Tht,RK)=>{"use strict";var JTe=Fr(),QTe=(e,t)=>new JTe(e,t).major;RK.exports=QTe});var MK=L((Sht,DK)=>{"use strict";var YTe=Fr(),eSe=(e,t)=>new YTe(e,t).minor;DK.exports=eSe});var NK=L((Aht,OK)=>{"use strict";var tSe=Fr(),nSe=(e,t)=>new tSe(e,t).patch;OK.exports=nSe});var BK=L((_ht,LK)=>{"use strict";var rSe=I5(),aSe=(e,t)=>{let n=rSe(e,t);return n&&n.prerelease.length?n.prerelease:null};LK.exports=aSe});var so=L((Eht,HK)=>{"use strict";var UK=Fr(),sSe=(e,t,n)=>new UK(e,n).compare(new UK(t,n));HK.exports=sSe});var zK=L((kht,FK)=>{"use strict";var oSe=so(),iSe=(e,t,n)=>oSe(t,e,n);FK.exports=iSe});var qK=L((Iht,jK)=>{"use strict";var cSe=so(),uSe=(e,t)=>cSe(e,t,!0);jK.exports=uSe});var xx=L((Cht,VK)=>{"use strict";var GK=Fr(),dSe=(e,t,n)=>{let r=new GK(e,n),a=new GK(t,n);return r.compare(a)||r.compareBuild(a)};VK.exports=dSe});var ZK=L((Pht,WK)=>{"use strict";var fSe=xx(),lSe=(e,t)=>e.sort((n,r)=>fSe(n,r,t));WK.exports=lSe});var XK=L((Rht,KK)=>{"use strict";var pSe=xx(),mSe=(e,t)=>e.sort((n,r)=>pSe(r,n,t));KK.exports=mSe});var P8=L(($ht,JK)=>{"use strict";var bSe=so(),ySe=(e,t,n)=>bSe(e,t,n)>0;JK.exports=ySe});var wx=L((Dht,QK)=>{"use strict";var gSe=so(),hSe=(e,t,n)=>gSe(e,t,n)<0;QK.exports=hSe});var OC=L((Mht,YK)=>{"use strict";var xSe=so(),wSe=(e,t,n)=>xSe(e,t,n)===0;YK.exports=wSe});var NC=L((Oht,eX)=>{"use strict";var vSe=so(),TSe=(e,t,n)=>vSe(e,t,n)!==0;eX.exports=TSe});var vx=L((Nht,tX)=>{"use strict";var SSe=so(),ASe=(e,t,n)=>SSe(e,t,n)>=0;tX.exports=ASe});var Tx=L((Lht,nX)=>{"use strict";var _Se=so(),ESe=(e,t,n)=>_Se(e,t,n)<=0;nX.exports=ESe});var LC=L((Bht,rX)=>{"use strict";var kSe=OC(),ISe=NC(),CSe=P8(),PSe=vx(),RSe=wx(),$Se=Tx(),DSe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kSe(e,n,r);case"!=":return ISe(e,n,r);case">":return CSe(e,n,r);case">=":return PSe(e,n,r);case"<":return RSe(e,n,r);case"<=":return $Se(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};rX.exports=DSe});var sX=L((Uht,aX)=>{"use strict";var MSe=Fr(),OSe=I5(),{safeRe:Sx,t:Ax}=ql(),NSe=(e,t)=>{if(e instanceof MSe)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?Sx[Ax.COERCEFULL]:Sx[Ax.COERCE]);else{let u=t.includePrerelease?Sx[Ax.COERCERTLFULL]:Sx[Ax.COERCERTL],d;for(;(d=u.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||d.index+d[0].length!==n.index+n[0].length)&&(n=d),u.lastIndex=d.index+d[1].length+d[2].length;u.lastIndex=-1}if(n===null)return null;let r=n[2],a=n[3]||"0",s=n[4]||"0",o=t.includePrerelease&&n[5]?`-${n[5]}`:"",i=t.includePrerelease&&n[6]?`+${n[6]}`:"";return OSe(`${r}.${a}.${s}${o}${i}`,t)};aX.exports=NSe});var iX=L((Hht,oX)=>{"use strict";var BC=class{constructor(){this.max=1e3,this.map=new Map}get(t){let n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){let a=this.map.keys().next().value;this.delete(a)}this.map.set(t,n)}return this}};oX.exports=BC});var oo=L((Fht,fX)=>{"use strict";var LSe=/\s+/g,UC=class e{constructor(t,n){if(n=USe(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof HC)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().replace(LSe," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(a=>!uX(a[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let a of this.set)if(a.length===1&&VSe(a[0])){this.set=[a];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let n=this.set[t];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let r=((this.options.includePrerelease&&qSe)|(this.options.loose&&GSe))+":"+t,a=cX.get(r);if(a)return a;let s=this.options.loose,o=s?ba[zr.HYPHENRANGELOOSE]:ba[zr.HYPHENRANGE];t=t.replace(o,nAe(this.options.includePrerelease)),Wn("hyphen replace",t),t=t.replace(ba[zr.COMPARATORTRIM],FSe),Wn("comparator trim",t),t=t.replace(ba[zr.TILDETRIM],zSe),Wn("tilde trim",t),t=t.replace(ba[zr.CARETTRIM],jSe),Wn("caret trim",t);let i=t.split(" ").map(p=>WSe(p,this.options)).join(" ").split(/\s+/).map(p=>tAe(p,this.options));s&&(i=i.filter(p=>(Wn("loose invalid filter",p,this.options),!!p.match(ba[zr.COMPARATORLOOSE])))),Wn("range list",i);let u=new Map,d=i.map(p=>new HC(p,this.options));for(let p of d){if(uX(p))return[p];u.set(p.value,p)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return cX.set(r,l),l}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(r=>dX(r,n)&&t.set.some(a=>dX(a,n)&&r.every(s=>a.every(o=>s.intersects(o,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new HSe(t,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(rAe(this.set[n],t,this.options))return!0;return!1}};fX.exports=UC;var BSe=iX(),cX=new BSe,USe=mx(),HC=R8(),Wn=C8(),HSe=Fr(),{safeRe:ba,t:zr,comparatorTrimReplace:FSe,tildeTrimReplace:zSe,caretTrimReplace:jSe}=ql(),{FLAG_INCLUDE_PRERELEASE:qSe,FLAG_LOOSE:GSe}=I8(),uX=e=>e.value==="<0.0.0-0",VSe=e=>e.value==="",dX=(e,t)=>{let n=!0,r=e.slice(),a=r.pop();for(;n&&r.length;)n=r.every(s=>a.intersects(s,t)),a=r.pop();return n},WSe=(e,t)=>(e=e.replace(ba[zr.BUILD],""),Wn("comp",e,t),e=XSe(e,t),Wn("caret",e),e=ZSe(e,t),Wn("tildes",e),e=QSe(e,t),Wn("xrange",e),e=eAe(e,t),Wn("stars",e),e),ya=e=>!e||e.toLowerCase()==="x"||e==="*",ZSe=(e,t)=>e.trim().split(/\s+/).map(n=>KSe(n,t)).join(" "),KSe=(e,t)=>{let n=t.loose?ba[zr.TILDELOOSE]:ba[zr.TILDE];return e.replace(n,(r,a,s,o,i)=>{Wn("tilde",e,r,a,s,o,i);let u;return ya(a)?u="":ya(s)?u=`>=${a}.0.0 <${+a+1}.0.0-0`:ya(o)?u=`>=${a}.${s}.0 <${a}.${+s+1}.0-0`:i?(Wn("replaceTilde pr",i),u=`>=${a}.${s}.${o}-${i} <${a}.${+s+1}.0-0`):u=`>=${a}.${s}.${o} <${a}.${+s+1}.0-0`,Wn("tilde return",u),u})},XSe=(e,t)=>e.trim().split(/\s+/).map(n=>JSe(n,t)).join(" "),JSe=(e,t)=>{Wn("caret",e,t);let n=t.loose?ba[zr.CARETLOOSE]:ba[zr.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(a,s,o,i,u)=>{Wn("caret",e,a,s,o,i,u);let d;return ya(s)?d="":ya(o)?d=`>=${s}.0.0${r} <${+s+1}.0.0-0`:ya(i)?s==="0"?d=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:u?(Wn("replaceCaret pr",u),s==="0"?o==="0"?d=`>=${s}.${o}.${i}-${u} <${s}.${o}.${+i+1}-0`:d=`>=${s}.${o}.${i}-${u} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${i}-${u} <${+s+1}.0.0-0`):(Wn("no pr"),s==="0"?o==="0"?d=`>=${s}.${o}.${i}${r} <${s}.${o}.${+i+1}-0`:d=`>=${s}.${o}.${i}${r} <${s}.${+o+1}.0-0`:d=`>=${s}.${o}.${i} <${+s+1}.0.0-0`),Wn("caret return",d),d})},QSe=(e,t)=>(Wn("replaceXRanges",e,t),e.split(/\s+/).map(n=>YSe(n,t)).join(" ")),YSe=(e,t)=>{e=e.trim();let n=t.loose?ba[zr.XRANGELOOSE]:ba[zr.XRANGE];return e.replace(n,(r,a,s,o,i,u)=>{Wn("xRange",e,r,a,s,o,i,u);let d=ya(s),l=d||ya(o),p=l||ya(i),y=p;return a==="="&&y&&(a=""),u=t.includePrerelease?"-0":"",d?a===">"||a==="<"?r="<0.0.0-0":r="*":a&&y?(l&&(o=0),i=0,a===">"?(a=">=",l?(s=+s+1,o=0,i=0):(o=+o+1,i=0)):a==="<="&&(a="<",l?s=+s+1:o=+o+1),a==="<"&&(u="-0"),r=`${a+s}.${o}.${i}${u}`):l?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:p&&(r=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Wn("xRange return",r),r})},eAe=(e,t)=>(Wn("replaceStars",e,t),e.trim().replace(ba[zr.STAR],"")),tAe=(e,t)=>(Wn("replaceGTE0",e,t),e.trim().replace(ba[t.includePrerelease?zr.GTE0PRE:zr.GTE0],"")),nAe=e=>(t,n,r,a,s,o,i,u,d,l,p,y)=>(ya(r)?n="":ya(a)?n=`>=${r}.0.0${e?"-0":""}`:ya(s)?n=`>=${r}.${a}.0${e?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${e?"-0":""}`,ya(d)?u="":ya(l)?u=`<${+d+1}.0.0-0`:ya(p)?u=`<${d}.${+l+1}.0-0`:y?u=`<=${d}.${l}.${p}-${y}`:e?u=`<${d}.${l}.${+p+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),rAe=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let r=0;r<e.length;r++)if(Wn(e[r].semver),e[r].semver!==HC.ANY&&e[r].semver.prerelease.length>0){let a=e[r].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}});var R8=L((zht,gX)=>{"use strict";var $8=Symbol("SemVer ANY"),jC=class e{static get ANY(){return $8}constructor(t,n){if(n=lX(n),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),zC("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===$8?this.value="":this.value=this.operator+this.semver.version,zC("comp",this)}parse(t){let n=this.options.loose?pX[mX.COMPARATORLOOSE]:pX[mX.COMPARATOR],r=t.match(n);if(!r)throw new TypeError(`Invalid comparator: ${t}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new bX(r[2],this.options.loose):this.semver=$8}toString(){return this.value}test(t){if(zC("Comparator.test",t,this.options.loose),this.semver===$8||t===$8)return!0;if(typeof t=="string")try{t=new bX(t,this.options)}catch{return!1}return FC(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new yX(t.value,n).test(this.value):t.operator===""?t.value===""?!0:new yX(this.value,n).test(t.semver):(n=lX(n),n.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||FC(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||FC(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};gX.exports=jC;var lX=mx(),{safeRe:pX,t:mX}=ql(),FC=LC(),zC=C8(),bX=Fr(),yX=oo()});var D8=L((jht,hX)=>{"use strict";var aAe=oo(),sAe=(e,t,n)=>{try{t=new aAe(t,n)}catch{return!1}return t.test(e)};hX.exports=sAe});var wX=L((qht,xX)=>{"use strict";var oAe=oo(),iAe=(e,t)=>new oAe(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));xX.exports=iAe});var TX=L((Ght,vX)=>{"use strict";var cAe=Fr(),uAe=oo(),dAe=(e,t,n)=>{let r=null,a=null,s=null;try{s=new uAe(t,n)}catch{return null}return e.forEach(o=>{s.test(o)&&(!r||a.compare(o)===-1)&&(r=o,a=new cAe(r,n))}),r};vX.exports=dAe});var AX=L((Vht,SX)=>{"use strict";var fAe=Fr(),lAe=oo(),pAe=(e,t,n)=>{let r=null,a=null,s=null;try{s=new lAe(t,n)}catch{return null}return e.forEach(o=>{s.test(o)&&(!r||a.compare(o)===1)&&(r=o,a=new fAe(r,n))}),r};SX.exports=pAe});var kX=L((Wht,EX)=>{"use strict";var qC=Fr(),mAe=oo(),_X=P8(),bAe=(e,t)=>{e=new mAe(e,t);let n=new qC("0.0.0");if(e.test(n)||(n=new qC("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){let a=e.set[r],s=null;a.forEach(o=>{let i=new qC(o.semver.version);switch(o.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||_X(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!n||_X(n,s))&&(n=s)}return n&&e.test(n)?n:null};EX.exports=bAe});var CX=L((Zht,IX)=>{"use strict";var yAe=oo(),gAe=(e,t)=>{try{return new yAe(e,t).range||"*"}catch{return null}};IX.exports=gAe});var _x=L((Kht,DX)=>{"use strict";var hAe=Fr(),$X=R8(),{ANY:xAe}=$X,wAe=oo(),vAe=D8(),PX=P8(),RX=wx(),TAe=Tx(),SAe=vx(),AAe=(e,t,n,r)=>{e=new hAe(e,r),t=new wAe(t,r);let a,s,o,i,u;switch(n){case">":a=PX,s=TAe,o=RX,i=">",u=">=";break;case"<":a=RX,s=SAe,o=PX,i="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vAe(e,t,r))return!1;for(let d=0;d<t.set.length;++d){let l=t.set[d],p=null,y=null;if(l.forEach(m=>{m.semver===xAe&&(m=new $X(">=0.0.0")),p=p||m,y=y||m,a(m.semver,p.semver,r)?p=m:o(m.semver,y.semver,r)&&(y=m)}),p.operator===i||p.operator===u||(!y.operator||y.operator===i)&&s(e,y.semver))return!1;if(y.operator===u&&o(e,y.semver))return!1}return!0};DX.exports=AAe});var OX=L((Xht,MX)=>{"use strict";var _Ae=_x(),EAe=(e,t,n)=>_Ae(e,t,">",n);MX.exports=EAe});var LX=L((Jht,NX)=>{"use strict";var kAe=_x(),IAe=(e,t,n)=>kAe(e,t,"<",n);NX.exports=IAe});var HX=L((Qht,UX)=>{"use strict";var BX=oo(),CAe=(e,t,n)=>(e=new BX(e,n),t=new BX(t,n),e.intersects(t,n));UX.exports=CAe});var zX=L((Yht,FX)=>{"use strict";var PAe=D8(),RAe=so();FX.exports=(e,t,n)=>{let r=[],a=null,s=null,o=e.sort((l,p)=>RAe(l,p,n));for(let l of o)PAe(l,t,n)?(s=l,a||(a=l)):(s&&r.push([a,s]),s=null,a=null);a&&r.push([a,null]);let i=[];for(let[l,p]of r)l===p?i.push(l):!p&&l===o[0]?i.push("*"):p?l===o[0]?i.push(`<=${p}`):i.push(`${l} - ${p}`):i.push(`>=${l}`);let u=i.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return u.length<d.length?u:t}});var ZX=L((e4t,WX)=>{"use strict";var jX=oo(),VC=R8(),{ANY:GC}=VC,M8=D8(),WC=so(),$Ae=(e,t,n={})=>{if(e===t)return!0;e=new jX(e,n),t=new jX(t,n);let r=!1;e:for(let a of e.set){for(let s of t.set){let o=MAe(a,s,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},DAe=[new VC(">=0.0.0-0")],qX=[new VC(">=0.0.0")],MAe=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===GC){if(t.length===1&&t[0].semver===GC)return!0;n.includePrerelease?e=DAe:e=qX}if(t.length===1&&t[0].semver===GC){if(n.includePrerelease)return!0;t=qX}let r=new Set,a,s;for(let m of e)m.operator===">"||m.operator===">="?a=GX(a,m,n):m.operator==="<"||m.operator==="<="?s=VX(s,m,n):r.add(m.semver);if(r.size>1)return null;let o;if(a&&s){if(o=WC(a.semver,s.semver,n),o>0)return null;if(o===0&&(a.operator!==">="||s.operator!=="<="))return null}for(let m of r){if(a&&!M8(m,String(a),n)||s&&!M8(m,String(s),n))return null;for(let g of t)if(!M8(m,String(g),n))return!1;return!0}let i,u,d,l,p=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,y=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let m of t){if(l=l||m.operator===">"||m.operator===">=",d=d||m.operator==="<"||m.operator==="<=",a){if(y&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===y.major&&m.semver.minor===y.minor&&m.semver.patch===y.patch&&(y=!1),m.operator===">"||m.operator===">="){if(i=GX(a,m,n),i===m&&i!==a)return!1}else if(a.operator===">="&&!M8(a.semver,String(m),n))return!1}if(s){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator==="<"||m.operator==="<="){if(u=VX(s,m,n),u===m&&u!==s)return!1}else if(s.operator==="<="&&!M8(s.semver,String(m),n))return!1}if(!m.operator&&(s||a)&&o!==0)return!1}return!(a&&d&&!s&&o!==0||s&&l&&!a&&o!==0||y||p)},GX=(e,t,n)=>{if(!e)return t;let r=WC(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},VX=(e,t,n)=>{if(!e)return t;let r=WC(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};WX.exports=$Ae});var QX=L((t4t,JX)=>{"use strict";var ZC=ql(),KX=I8(),OAe=Fr(),XX=$C(),NAe=I5(),LAe=TK(),BAe=AK(),UAe=kK(),HAe=PK(),FAe=$K(),zAe=MK(),jAe=NK(),qAe=BK(),GAe=so(),VAe=zK(),WAe=qK(),ZAe=xx(),KAe=ZK(),XAe=XK(),JAe=P8(),QAe=wx(),YAe=OC(),e_e=NC(),t_e=vx(),n_e=Tx(),r_e=LC(),a_e=sX(),s_e=R8(),o_e=oo(),i_e=D8(),c_e=wX(),u_e=TX(),d_e=AX(),f_e=kX(),l_e=CX(),p_e=_x(),m_e=OX(),b_e=LX(),y_e=HX(),g_e=zX(),h_e=ZX();JX.exports={parse:NAe,valid:LAe,clean:BAe,inc:UAe,diff:HAe,major:FAe,minor:zAe,patch:jAe,prerelease:qAe,compare:GAe,rcompare:VAe,compareLoose:WAe,compareBuild:ZAe,sort:KAe,rsort:XAe,gt:JAe,lt:QAe,eq:YAe,neq:e_e,gte:t_e,lte:n_e,cmp:r_e,coerce:a_e,Comparator:s_e,Range:o_e,satisfies:i_e,toComparators:c_e,maxSatisfying:u_e,minSatisfying:d_e,minVersion:f_e,validRange:l_e,outside:p_e,gtr:m_e,ltr:b_e,intersects:y_e,simplifyRange:g_e,subset:h_e,SemVer:OAe,re:ZC.re,src:ZC.src,tokens:ZC.t,SEMVER_SPEC_VERSION:KX.SEMVER_SPEC_VERSION,RELEASE_TYPES:KX.RELEASE_TYPES,compareIdentifiers:XX.compareIdentifiers,rcompareIdentifiers:XX.rcompareIdentifiers}});var XC=L(Ex=>{"use strict";Object.defineProperty(Ex,"__esModule",{value:!0});Ex.StructError=void 0;var KC=class extends TypeError{constructor(t,n){let r,{message:a,explanation:s,...o}=t,{path:i}=t,u=i.length===0?a:`At path: ${i.join(".")} -- ${a}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}};Ex.StructError=KC});var N8=L(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.run=jr.toFailures=jr.toFailure=jr.shiftIterator=jr.print=jr.isPlainObject=jr.isObject=void 0;function x_e(e){return O8(e)&&typeof e[Symbol.iterator]=="function"}function O8(e){return typeof e=="object"&&e!==null}jr.isObject=O8;function w_e(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}jr.isPlainObject=w_e;function YX(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}jr.print=YX;function v_e(e){let{done:t,value:n}=e.next();return t?void 0:n}jr.shiftIterator=v_e;function eJ(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:a,branch:s}=t,{type:o}=n,{refinement:i,message:u=`Expected a value of type \`${o}\`${i?` with refinement \`${i}\``:""}, but received: \`${YX(r)}\``}=e;return{value:r,type:o,refinement:i,key:a[a.length-1],path:a,branch:s,...e,message:u}}jr.toFailure=eJ;function*T_e(e,t,n,r){x_e(e)||(e=[e]);for(let a of e){let s=eJ(a,t,n,r);s&&(yield s)}}jr.toFailures=T_e;function*tJ(e,t,n={}){let{path:r=[],branch:a=[e],coerce:s=!1,mask:o=!1}=n,i={path:r,branch:a};if(s&&(e=t.coercer(e,i),o&&t.type!=="type"&&O8(t.schema)&&O8(e)&&!Array.isArray(e)))for(let d in e)t.schema[d]===void 0&&delete e[d];let u="valid";for(let d of t.validator(e,i))d.explanation=n.message,u="not_valid",yield[d,void 0];for(let[d,l,p]of t.entries(e,i)){let y=tJ(l,p,{path:d===void 0?r:[...r,d],branch:d===void 0?a:[...a,l],coerce:s,mask:o,message:n.message});for(let m of y)m[0]?(u=m[0].refinement===null||m[0].refinement===void 0?"not_valid":"not_refined",yield[m[0],void 0]):s&&(l=m[1],d===void 0?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):O8(e)&&(l!==void 0||d in e)&&(e[d]=l))}if(u!=="not_valid")for(let d of t.refiner(e,i))d.explanation=n.message,u="not_refined",yield[d,void 0];u==="valid"&&(yield[void 0,e])}jr.run=tJ});var Vl=L(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.validate=qr.is=qr.mask=qr.create=qr.assert=qr.ExactOptionalStruct=qr.Struct=void 0;var S_e=XC(),L8=N8(),kx=class{constructor(t){let{type:n,schema:r,validator:a,refiner:s,coercer:o=u=>u,entries:i=function*(){}}=t;this.type=n,this.schema=r,this.entries=i,this.coercer=o,a?this.validator=(u,d)=>{let l=a(u,d);return(0,L8.toFailures)(l,d,this,u)}:this.validator=()=>[],s?this.refiner=(u,d)=>{let l=s(u,d);return(0,L8.toFailures)(l,d,this,u)}:this.refiner=()=>[]}assert(t,n){return rJ(t,this,n)}create(t,n){return aJ(t,this,n)}is(t){return oJ(t,this)}mask(t,n){return sJ(t,this,n)}validate(t,n={}){return Gl(t,this,n)}};qr.Struct=kx;var nJ="EXACT_OPTIONAL",JC=class extends kx{constructor(t){super({...t,type:`exact optional ${t.type}`}),this.brand=nJ}static isExactOptional(t){return(0,L8.isObject)(t)&&"brand"in t&&t.brand===nJ}};qr.ExactOptionalStruct=JC;function rJ(e,t,n){let r=Gl(e,t,{message:n});if(r[0])throw r[0]}qr.assert=rJ;function aJ(e,t,n){let r=Gl(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}qr.create=aJ;function sJ(e,t,n){let r=Gl(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}qr.mask=sJ;function oJ(e,t){return!Gl(e,t)[0]}qr.is=oJ;function Gl(e,t,n={}){let r=(0,L8.run)(e,t,n),a=(0,L8.shiftIterator)(r);return a[0]?[new S_e.StructError(a[0],function*(){for(let i of r)i[0]&&(yield i[0])}),void 0]:[void 0,a[1]]}qr.validate=Gl});var QC=L(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.pick=fr.partial=fr.omit=fr.lazy=fr.dynamic=fr.deprecated=fr.define=fr.assign=void 0;var B8=Vl(),G1=Ix();function A_e(...e){let t=e[0]?.type==="type",n=e.map(({schema:a})=>a),r=Object.assign({},...n);return t?(0,G1.type)(r):(0,G1.object)(r)}fr.assign=A_e;function __e(e,t){return new B8.Struct({type:e,schema:null,validator:t})}fr.define=__e;function E_e(e,t){return new B8.Struct({...e,refiner:(n,r)=>n===void 0||e.refiner(n,r),validator(n,r){return n===void 0?!0:(t(n,r),e.validator(n,r))}})}fr.deprecated=E_e;function k_e(e){return new B8.Struct({type:"dynamic",schema:null,*entries(t,n){yield*e(t,n).entries(t,n)},validator(t,n){return e(t,n).validator(t,n)},coercer(t,n){return e(t,n).coercer(t,n)},refiner(t,n){return e(t,n).refiner(t,n)}})}fr.dynamic=k_e;function I_e(e){let t;return new B8.Struct({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator(n,r){return t??(t=e()),t.validator(n,r)},coercer(n,r){return t??(t=e()),t.coercer(n,r)},refiner(n,r){return t??(t=e()),t.refiner(n,r)}})}fr.lazy=I_e;function C_e(e,t){let{schema:n}=e,r={...n};for(let a of t)delete r[a];return e.type==="type"?(0,G1.type)(r):(0,G1.object)(r)}fr.omit=C_e;function P_e(e){let t=e instanceof B8.Struct,n=t?{...e.schema}:{...e};for(let r in n)n[r]=(0,G1.optional)(n[r]);return t&&e.type==="type"?(0,G1.type)(n):(0,G1.object)(n)}fr.partial=P_e;function R_e(e,t){let{schema:n}=e,r={};for(let a of t)r[a]=n[a];return e.type==="type"?(0,G1.type)(r):(0,G1.object)(r)}fr.pick=R_e});var Ix=L(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.unknown=Ye.union=Ye.type=Ye.tuple=Ye.string=Ye.set=Ye.regexp=Ye.record=Ye.exactOptional=Ye.optional=Ye.object=Ye.number=Ye.nullable=Ye.never=Ye.map=Ye.literal=Ye.intersection=Ye.integer=Ye.instance=Ye.func=Ye.enums=Ye.date=Ye.boolean=Ye.bigint=Ye.array=Ye.any=void 0;var ga=Vl(),Dn=N8(),io=QC();function $_e(){return(0,io.define)("any",()=>!0)}Ye.any=$_e;function D_e(e){return new ga.Struct({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[n,r]of t.entries())yield[n,r,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${(0,Dn.print)(t)}`}})}Ye.array=D_e;function M_e(){return(0,io.define)("bigint",e=>typeof e=="bigint")}Ye.bigint=M_e;function O_e(){return(0,io.define)("boolean",e=>typeof e=="boolean")}Ye.boolean=O_e;function N_e(){return(0,io.define)("date",e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${(0,Dn.print)(e)}`)}Ye.date=N_e;function L_e(e){let t={},n=e.map(r=>(0,Dn.print)(r)).join();for(let r of e)t[r]=r;return new ga.Struct({type:"enums",schema:t,validator(r){return e.includes(r)||`Expected one of \`${n}\`, but received: ${(0,Dn.print)(r)}`}})}Ye.enums=L_e;function B_e(){return(0,io.define)("func",e=>typeof e=="function"||`Expected a function, but received: ${(0,Dn.print)(e)}`)}Ye.func=B_e;function U_e(e){return(0,io.define)("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${(0,Dn.print)(t)}`)}Ye.instance=U_e;function H_e(){return(0,io.define)("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${(0,Dn.print)(e)}`)}Ye.integer=H_e;function F_e(e){return new ga.Struct({type:"intersection",schema:null,*entries(t,n){for(let{entries:r}of e)yield*r(t,n)},*validator(t,n){for(let{validator:r}of e)yield*r(t,n)},*refiner(t,n){for(let{refiner:r}of e)yield*r(t,n)}})}Ye.intersection=F_e;function z_e(e){let t=(0,Dn.print)(e),n=typeof e;return new ga.Struct({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(r){return r===e||`Expected the literal \`${t}\`, but received: ${(0,Dn.print)(r)}`}})}Ye.literal=z_e;function j_e(e,t){return new ga.Struct({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(let[r,a]of n.entries())yield[r,r,e],yield[r,a,t]},coercer(n){return n instanceof Map?new Map(n):n},validator(n){return n instanceof Map||`Expected a \`Map\` object, but received: ${(0,Dn.print)(n)}`}})}Ye.map=j_e;function YC(){return(0,io.define)("never",()=>!1)}Ye.never=YC;function q_e(e){return new ga.Struct({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}Ye.nullable=q_e;function G_e(){return(0,io.define)("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${(0,Dn.print)(e)}`)}Ye.number=G_e;function V_e(e){let t=e?Object.keys(e):[],n=YC();return new ga.Struct({type:"object",schema:e??null,*entries(r){if(e&&(0,Dn.isObject)(r)){let a=new Set(Object.keys(r));for(let s of t){a.delete(s);let o=e[s];ga.ExactOptionalStruct.isExactOptional(o)&&!Object.prototype.hasOwnProperty.call(r,s)||(yield[s,r[s],e[s]])}for(let s of a)yield[s,r[s],n]}},validator(r){return(0,Dn.isObject)(r)||`Expected an object, but received: ${(0,Dn.print)(r)}`},coercer(r){return(0,Dn.isObject)(r)?{...r}:r}})}Ye.object=V_e;function W_e(e){return new ga.Struct({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}Ye.optional=W_e;function Z_e(e){return new ga.ExactOptionalStruct(e)}Ye.exactOptional=Z_e;function K_e(e,t){return new ga.Struct({type:"record",schema:null,*entries(n){if((0,Dn.isObject)(n))for(let r in n){let a=n[r];yield[r,r,e],yield[r,a,t]}},validator(n){return(0,Dn.isObject)(n)||`Expected an object, but received: ${(0,Dn.print)(n)}`}})}Ye.record=K_e;function X_e(){return(0,io.define)("regexp",e=>e instanceof RegExp)}Ye.regexp=X_e;function J_e(e){return new ga.Struct({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let n of t)yield[n,n,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||`Expected a \`Set\` object, but received: ${(0,Dn.print)(t)}`}})}Ye.set=J_e;function Q_e(){return(0,io.define)("string",e=>typeof e=="string"||`Expected a string, but received: ${(0,Dn.print)(e)}`)}Ye.string=Q_e;function Y_e(e){let t=YC();return new ga.Struct({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){let r=Math.max(e.length,n.length);for(let a=0;a<r;a++)yield[a,n[a],e[a]||t]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${(0,Dn.print)(n)}`}})}Ye.tuple=Y_e;function eEe(e){let t=Object.keys(e);return new ga.Struct({type:"type",schema:e,*entries(n){if((0,Dn.isObject)(n))for(let r of t)yield[r,n[r],e[r]]},validator(n){return(0,Dn.isObject)(n)||`Expected an object, but received: ${(0,Dn.print)(n)}`},coercer(n){return(0,Dn.isObject)(n)?{...n}:n}})}Ye.type=eEe;function tEe(e){let t=e.map(n=>n.type).join(" | ");return new ga.Struct({type:"union",schema:null,coercer(n){for(let r of e){let[a,s]=r.validate(n,{coerce:!0});if(!a)return s}return n},validator(n,r){let a=[];for(let s of e){let[...o]=(0,Dn.run)(n,s,r),[i]=o;if(!i?.[0])return[];for(let[u]of o)u&&a.push(u)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${(0,Dn.print)(n)}`,...a]}})}Ye.union=tEe;function nEe(){return(0,io.define)("unknown",()=>!0)}Ye.unknown=nEe});var dJ=L(_6=>{"use strict";Object.defineProperty(_6,"__esModule",{value:!0});_6.trimmed=_6.defaulted=_6.coerce=void 0;var iJ=Vl(),cJ=N8(),uJ=Ix();function eP(e,t,n){return new iJ.Struct({...e,coercer:(r,a)=>(0,iJ.is)(r,t)?e.coercer(n(r,a),a):e.coercer(r,a)})}_6.coerce=eP;function rEe(e,t,n={}){return eP(e,(0,uJ.unknown)(),r=>{let a=typeof t=="function"?t():t;if(r===void 0)return a;if(!n.strict&&(0,cJ.isPlainObject)(r)&&(0,cJ.isPlainObject)(a)){let s={...r},o=!1;for(let i in a)s[i]===void 0&&(s[i]=a[i],o=!0);if(o)return s}return r})}_6.defaulted=rEe;function aEe(e){return eP(e,(0,uJ.string)(),t=>t.trim())}_6.trimmed=aEe});var lJ=L(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.refine=Gr.size=Gr.pattern=Gr.nonempty=Gr.min=Gr.max=Gr.empty=void 0;var sEe=Vl(),oEe=N8();function iEe(e){return C5(e,"empty",t=>{let n=fJ(t);return n===0||`Expected an empty ${e.type} but received one with a size of \`${n}\``})}Gr.empty=iEe;function fJ(e){return e instanceof Map||e instanceof Set?e.size:e.length}function cEe(e,t,n={}){let{exclusive:r}=n;return C5(e,"max",a=>r?a<t:a<=t||`Expected a ${e.type} less than ${r?"":"or equal to "}${t} but received \`${a}\``)}Gr.max=cEe;function uEe(e,t,n={}){let{exclusive:r}=n;return C5(e,"min",a=>r?a>t:a>=t||`Expected a ${e.type} greater than ${r?"":"or equal to "}${t} but received \`${a}\``)}Gr.min=uEe;function dEe(e){return C5(e,"nonempty",t=>fJ(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}Gr.nonempty=dEe;function fEe(e,t){return C5(e,"pattern",n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`)}Gr.pattern=fEe;function lEe(e,t,n=t){let r=`Expected a ${e.type}`,a=t===n?`of \`${t}\``:`between \`${t}\` and \`${n}\``;return C5(e,"size",s=>{if(typeof s=="number"||s instanceof Date)return t<=s&&s<=n||`${r} ${a} but received \`${s}\``;if(s instanceof Map||s instanceof Set){let{size:i}=s;return t<=i&&i<=n||`${r} with a size ${a} but received one with a size of \`${i}\``}let{length:o}=s;return t<=o&&o<=n||`${r} with a length ${a} but received one with a length of \`${o}\``})}Gr.size=lEe;function C5(e,t,n){return new sEe.Struct({...e,*refiner(r,a){yield*e.refiner(r,a);let s=n(r,a),o=(0,oEe.toFailures)(s,a,e,r);for(let i of o)yield{...i,refinement:t}}})}Gr.refine=C5});var Go=L(co=>{"use strict";var pEe=co&&co.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Wl=co&&co.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&pEe(t,e,n)};Object.defineProperty(co,"__esModule",{value:!0});Wl(XC(),co);Wl(Vl(),co);Wl(dJ(),co);Wl(lJ(),co);Wl(Ix(),co);Wl(QC(),co)});var mJ=L((O4t,pJ)=>{"use strict";var tP=class e extends Error{constructor(t,{cause:n}={}){super(t),this.name=e.name,n&&(this.cause=n),this.message=t}};pJ.exports={ErrorWithCause:tP}});var hJ=L((N4t,gJ)=>{"use strict";var mEe=(e,t)=>{if(!e||!t||!(e instanceof Error)||!(t.prototype instanceof Error)&&t!==Error)return;let n=new Set,r=e;for(;r&&!n.has(r);){if(n.add(r),r instanceof t)return r;r=Cx(r)}},Cx=e=>{if(!(!e||typeof e!="object"||!("cause"in e)))if(typeof e.cause=="function"){let t=e.cause();return t instanceof Error?t:void 0}else return e.cause instanceof Error?e.cause:void 0},bJ=(e,t)=>{if(!(e instanceof Error))return"";let n=e.stack||"";if(t.has(e))return n+`
causes have become circular...`;let r=Cx(e);return r?(t.add(e),n+`
caused by: `+bJ(r,t)):n},bEe=e=>bJ(e,new Set),yJ=(e,t,n)=>{if(!(e instanceof Error))return"";let r=n?"":e.message||"";if(t.has(e))return r+": ...";let a=Cx(e);if(a){t.add(e);let s="cause"in e&&typeof e.cause=="function";return r+(s?"":": ")+yJ(a,t,s)}else return r},yEe=e=>yJ(e,new Set);gJ.exports={findCauseByReference:mEe,getErrorCause:Cx,stackWithCauses:bEe,messageWithCauses:yEe}});var wJ=L((L4t,xJ)=>{"use strict";var{ErrorWithCause:gEe}=mJ(),{findCauseByReference:hEe,getErrorCause:xEe,messageWithCauses:wEe,stackWithCauses:vEe}=hJ();xJ.exports={ErrorWithCause:gEe,findCauseByReference:hEe,getErrorCause:xEe,stackWithCauses:vEe,messageWithCauses:wEe}});var Px=L(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.calculateNumberSize=Bn.calculateStringSize=Bn.isASCII=Bn.isPlainObject=Bn.ESCAPE_CHARACTERS_REGEXP=Bn.JsonSize=Bn.getKnownPropertyNames=Bn.hasProperty=Bn.isObject=Bn.isNullOrUndefined=Bn.isNonEmptyArray=void 0;function TEe(e){return Array.isArray(e)&&e.length>0}Bn.isNonEmptyArray=TEe;function SEe(e){return e==null}Bn.isNullOrUndefined=SEe;function AEe(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}Bn.isObject=AEe;var _Ee=(e,t)=>Object.hasOwnProperty.call(e,t);Bn.hasProperty=_Ee;function EEe(e){return Object.getOwnPropertyNames(e)}Bn.getKnownPropertyNames=EEe;var kEe;(function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"})(kEe=Bn.JsonSize||(Bn.JsonSize={}));Bn.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function IEe(e){if(typeof e!="object"||e===null)return!1;try{let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch{return!1}}Bn.isPlainObject=IEe;function vJ(e){return e.charCodeAt(0)<=127}Bn.isASCII=vJ;function CEe(e){return e.split("").reduce((n,r)=>vJ(r)?n+1:n+2,0)+(e.match(Bn.ESCAPE_CHARACTERS_REGEXP)??[]).length}Bn.calculateStringSize=CEe;function PEe(e){return e.toString().length}Bn.calculateNumberSize=PEe});var nP=L(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.wrapError=uo.getErrorMessage=uo.isErrorWithStack=uo.isErrorWithMessage=uo.isErrorWithCode=void 0;var REe=wJ(),TJ=Px();function $Ee(e){return e instanceof Error||(0,TJ.isObject)(e)&&e.constructor.name==="Error"}function SJ(e){return typeof e=="object"&&e!==null&&"code"in e}uo.isErrorWithCode=SJ;function AJ(e){return typeof e=="object"&&e!==null&&"message"in e}uo.isErrorWithMessage=AJ;function DEe(e){return typeof e=="object"&&e!==null&&"stack"in e}uo.isErrorWithStack=DEe;function MEe(e){return AJ(e)&&typeof e.message=="string"?e.message:(0,TJ.isNullOrUndefined)(e)?"":String(e)}uo.getErrorMessage=MEe;function OEe(e,t){if($Ee(e)){let n;return Error.length===2?n=new Error(t,{cause:e}):n=new REe.ErrorWithCause(t,{cause:e}),SJ(e)&&(n.code=e.code),n}return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}uo.wrapError=OEe});var V1=L(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.assertExhaustive=Ri.assertStruct=Ri.assert=Ri.AssertionError=void 0;var NEe=Go(),LEe=nP();function BEe(e){return typeof e?.prototype?.constructor?.name=="string"}function UEe(e){return(0,LEe.getErrorMessage)(e).replace(/\.$/u,"")}function _J(e,t){return BEe(e)?new e({message:t}):e({message:t})}var U8=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};Ri.AssertionError=U8;function HEe(e,t="Assertion failed.",n=U8){if(!e)throw t instanceof Error?t:_J(n,t)}Ri.assert=HEe;function FEe(e,t,n="Assertion failed",r=U8){try{(0,NEe.assert)(e,t)}catch(a){throw _J(r,`${n}: ${UEe(a)}.`)}}Ri.assertStruct=FEe;function zEe(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}Ri.assertExhaustive=zEe});var rP=L(Rx=>{"use strict";Object.defineProperty(Rx,"__esModule",{value:!0});Rx.base64=void 0;var jEe=Go(),qEe=V1(),GEe=(e,t={})=>{let n=t.paddingRequired??!1,r=t.characterSet??"base64",a;r==="base64"?a=String.raw`[A-Za-z0-9+\/]`:((0,qEe.assert)(r==="base64url"),a=String.raw`[-_A-Za-z0-9]`);let s;return n?s=new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):s=new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,jEe.pattern)(e,s)};Rx.base64=GEe});var UJ=L(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.bytes=Oe.stringToBytes=Oe.str=Oe.bytesToString=Oe.hex=Oe.utf8=Oe.bech32m=Oe.bech32=Oe.base58check=Oe.createBase58check=Oe.base58xmr=Oe.base58xrp=Oe.base58flickr=Oe.base58=Oe.base64urlnopad=Oe.base64url=Oe.base64nopad=Oe.base64=Oe.base32crockford=Oe.base32hexnopad=Oe.base32hex=Oe.base32nopad=Oe.base32=Oe.base16=Oe.utils=void 0;function P5(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function oP(e,...t){if(!P5(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function PJ(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function iP(e){if(typeof e!="function")throw new Error("function expected");return!0}function E6(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Zl(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Dx(e){if(!Array.isArray(e))throw new Error("array expected")}function Mx(e,t){if(!PJ(!0,t))throw new Error(`${e}: array of strings expected`)}function cP(e,t){if(!PJ(!1,t))throw new Error(`${e}: array of numbers expected`)}function ha(...e){let t=s=>s,n=(s,o)=>i=>s(o(i)),r=e.map(s=>s.encode).reduceRight(n,t),a=e.map(s=>s.decode).reduce(n,t);return{encode:r,decode:a}}function ns(e){let t=typeof e=="string"?e.split(""):e,n=t.length;Mx("alphabet",t);let r=new Map(t.map((a,s)=>[a,s]));return{encode:a=>(Dx(a),a.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:a=>(Dx(a),a.map(s=>{E6("alphabet.decode",s);let o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function rs(e=""){return E6("join",e),{encode:t=>(Mx("join.decode",t),t.join(e)),decode:t=>(E6("join.decode",t),t.split(e))}}function F8(e,t="="){return Zl(e),E6("padding",t),{encode(n){for(Mx("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Mx("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function RJ(e){return iP(e),{encode:t=>t,decode:t=>e(t)}}function aP(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Dx(e),!e.length)return[];let r=0,a=[],s=Array.from(e,i=>{if(Zl(i),i<0||i>=t)throw new Error(`invalid integer: ${i}`);return i}),o=s.length;for(;;){let i=0,u=!0;for(let d=r;d<o;d++){let l=s[d],p=t*i,y=p+l;if(!Number.isSafeInteger(y)||p/t!==i||y-l!==p)throw new Error("convertRadix: carry overflow");let m=y/n;i=y%n;let g=Math.floor(m);if(s[d]=g,!Number.isSafeInteger(g)||g*n+i!==y)throw new Error("convertRadix: carry overflow");if(u)g?u=!1:r=d;else continue}if(a.push(i),u)break}for(let i=0;i<e.length-1&&e[i]===0;i++)a.push(0);return a.reverse()}var $J=(e,t)=>t===0?e:$J(t,e%t),Ox=(e,t)=>e+(t-$J(e,t)),$x=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Nx(e,t,n,r){if(Dx(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ox(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ox(t,n)}`);let a=0,s=0,o=$x[t],i=$x[n]-1,u=[];for(let d of e){if(Zl(d),d>=o)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(a=a<<t|d,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)u.push((a>>s-n&i)>>>0);let l=$x[s];if(l===void 0)throw new Error("invalid carry");a&=l-1}if(a=a<<n-s&i,!r&&s>=t)throw new Error("Excess padding");if(!r&&a>0)throw new Error(`Non-zero padding: ${a}`);return r&&s>0&&u.push(a>>>0),u}function DJ(e){Zl(e);let t=2**8;return{encode:n=>{if(!P5(n))throw new Error("radix.encode input should be Uint8Array");return aP(Array.from(n),t,e)},decode:n=>(cP("radix.decode",n),Uint8Array.from(aP(n,e,t)))}}function Cs(e,t=!1){if(Zl(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ox(8,e)>32||Ox(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!P5(n))throw new Error("radix2.encode input should be Uint8Array");return Nx(Array.from(n),8,e,!t)},decode:n=>(cP("radix2.decode",n),Uint8Array.from(Nx(n,e,8,t)))}}function EJ(e){return iP(e),function(...t){try{return e.apply(null,t)}catch{}}}function MJ(e,t){return Zl(e),iP(t),{encode(n){if(!P5(n))throw new Error("checksum.encode: input should be Uint8Array");let r=t(n).slice(0,e),a=new Uint8Array(n.length+e);return a.set(n),a.set(r,n.length),a},decode(n){if(!P5(n))throw new Error("checksum.decode: input should be Uint8Array");let r=n.slice(0,-e),a=n.slice(-e),s=t(r).slice(0,e);for(let o=0;o<e;o++)if(s[o]!==a[o])throw new Error("Invalid checksum");return r}}}Oe.utils={alphabet:ns,chain:ha,checksum:MJ,convertRadix:aP,convertRadix2:Nx,radix:DJ,radix2:Cs,join:rs,padding:F8};Oe.base16=ha(Cs(4),ns("0123456789ABCDEF"),rs(""));Oe.base32=ha(Cs(5),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),F8(5),rs(""));Oe.base32nopad=ha(Cs(5),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),rs(""));Oe.base32hex=ha(Cs(5),ns("0123456789ABCDEFGHIJKLMNOPQRSTUV"),F8(5),rs(""));Oe.base32hexnopad=ha(Cs(5),ns("0123456789ABCDEFGHIJKLMNOPQRSTUV"),rs(""));Oe.base32crockford=ha(Cs(5),ns("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),rs(""),RJ(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));var OJ=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",NJ=(e,t)=>{E6("base64",e);let n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})};Oe.base64=OJ?{encode(e){return oP(e),e.toBase64()},decode(e){return NJ(e,!1)}}:ha(Cs(6),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),F8(6),rs(""));Oe.base64nopad=ha(Cs(6),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),rs(""));Oe.base64url=OJ?{encode(e){return oP(e),e.toBase64({alphabet:"base64url"})},decode(e){return NJ(e,!0)}}:ha(Cs(6),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),F8(6),rs(""));Oe.base64urlnopad=ha(Cs(6),ns("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),rs(""));var uP=e=>ha(DJ(58),ns(e),rs(""));Oe.base58=uP("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Oe.base58flickr=uP("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Oe.base58xrp=uP("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var kJ=[0,2,3,5,6,7,9,10,11];Oe.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){let r=e.subarray(n,n+8);t+=Oe.base58.encode(r).padStart(kJ[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let r=e.slice(n,n+11),a=kJ.indexOf(r.length),s=Oe.base58.decode(r);for(let o=0;o<s.length-a;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-a)))}return Uint8Array.from(t)}};var VEe=e=>ha(MJ(4,t=>e(e(t))),Oe.base58);Oe.createBase58check=VEe;Oe.base58check=Oe.createBase58check;var sP=ha(ns("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),rs("")),IJ=[996825010,642813549,513874426,1027748829,705979059];function H8(e){let t=e>>25,n=(e&33554431)<<5;for(let r=0;r<IJ.length;r++)(t>>r&1)===1&&(n^=IJ[r]);return n}function CJ(e,t,n=1){let r=e.length,a=1;for(let s=0;s<r;s++){let o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);a=H8(a)^o>>5}a=H8(a);for(let s=0;s<r;s++)a=H8(a)^e.charCodeAt(s)&31;for(let s of t)a=H8(a)^s;for(let s=0;s<6;s++)a=H8(a);return a^=n,sP.encode(Nx([a%$x[30]],30,5,!1))}function LJ(e){let t=e==="bech32"?1:734539939,n=Cs(5),r=n.decode,a=n.encode,s=EJ(r);function o(p,y,m=90){E6("bech32.encode prefix",p),P5(y)&&(y=Array.from(y)),cP("bech32.encode",y);let g=p.length;if(g===0)throw new TypeError(`Invalid prefix length ${g}`);let h=g+7+y.length;if(m!==!1&&h>m)throw new TypeError(`Length ${h} exceeds limit ${m}`);let w=p.toLowerCase(),v=CJ(w,y,t);return`${w}1${sP.encode(y)}${v}`}function i(p,y=90){E6("bech32.decode input",p);let m=p.length;if(m<8||y!==!1&&m>y)throw new TypeError(`invalid string length: ${m} (${p}). Expected (8..${y})`);let g=p.toLowerCase();if(p!==g&&p!==p.toUpperCase())throw new Error("String must be lowercase or uppercase");let h=g.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');let w=g.slice(0,h),v=g.slice(h+1);if(v.length<6)throw new Error("Data must be at least 6 characters long");let T=sP.decode(v).slice(0,-6),A=CJ(w,T,t);if(!v.endsWith(A))throw new Error(`Invalid checksum in ${p}: expected "${A}"`);return{prefix:w,words:T}}let u=EJ(i);function d(p){let{prefix:y,words:m}=i(p,!1);return{prefix:y,words:m,bytes:r(m)}}function l(p,y){return o(p,a(y))}return{encode:o,decode:i,encodeFromBytes:l,decodeToBytes:d,decodeUnsafe:u,fromWords:r,fromWordsUnsafe:s,toWords:a}}Oe.bech32=LJ("bech32");Oe.bech32m=LJ("bech32m");Oe.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};var WEe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ZEe={encode(e){return oP(e),e.toHex()},decode(e){return E6("hex",e),Uint8Array.fromHex(e)}};Oe.hex=WEe?ZEe:ha(Cs(4),ns("0123456789abcdef"),rs(""),RJ(e=>{if(typeof e!="string"||e.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var Lx={utf8:Oe.utf8,hex:Oe.hex,base16:Oe.base16,base32:Oe.base32,base64:Oe.base64,base64url:Oe.base64url,base58:Oe.base58,base58xmr:Oe.base58xmr},BJ="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",KEe=(e,t)=>{if(typeof e!="string"||!Lx.hasOwnProperty(e))throw new TypeError(BJ);if(!P5(t))throw new TypeError("bytesToString() expects Uint8Array");return Lx[e].encode(t)};Oe.bytesToString=KEe;Oe.str=Oe.bytesToString;var XEe=(e,t)=>{if(!Lx.hasOwnProperty(e))throw new TypeError(BJ);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return Lx[e].decode(t)};Oe.stringToBytes=XEe;Oe.bytes=Oe.stringToBytes});var lP=L(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.toBig=wt.shrSL=wt.shrSH=wt.rotrSL=wt.rotrSH=wt.rotrBL=wt.rotrBH=wt.rotr32L=wt.rotr32H=wt.rotlSL=wt.rotlSH=wt.rotlBL=wt.rotlBH=wt.add5L=wt.add5H=wt.add4L=wt.add4H=wt.add3L=wt.add3H=void 0;wt.add=eQ;wt.fromBig=fP;wt.split=HJ;var Bx=BigInt(2**32-1),dP=BigInt(32);function fP(e,t=!1){return t?{h:Number(e&Bx),l:Number(e>>dP&Bx)}:{h:Number(e>>dP&Bx)|0,l:Number(e&Bx)|0}}function HJ(e,t=!1){let n=e.length,r=new Uint32Array(n),a=new Uint32Array(n);for(let s=0;s<n;s++){let{h:o,l:i}=fP(e[s],t);[r[s],a[s]]=[o,i]}return[r,a]}var FJ=(e,t)=>BigInt(e>>>0)<<dP|BigInt(t>>>0);wt.toBig=FJ;var zJ=(e,t,n)=>e>>>n;wt.shrSH=zJ;var jJ=(e,t,n)=>e<<32-n|t>>>n;wt.shrSL=jJ;var qJ=(e,t,n)=>e>>>n|t<<32-n;wt.rotrSH=qJ;var GJ=(e,t,n)=>e<<32-n|t>>>n;wt.rotrSL=GJ;var VJ=(e,t,n)=>e<<64-n|t>>>n-32;wt.rotrBH=VJ;var WJ=(e,t,n)=>e>>>n-32|t<<64-n;wt.rotrBL=WJ;var ZJ=(e,t)=>t;wt.rotr32H=ZJ;var KJ=(e,t)=>e;wt.rotr32L=KJ;var XJ=(e,t,n)=>e<<n|t>>>32-n;wt.rotlSH=XJ;var JJ=(e,t,n)=>t<<n|e>>>32-n;wt.rotlSL=JJ;var QJ=(e,t,n)=>t<<n-32|e>>>64-n;wt.rotlBH=QJ;var YJ=(e,t,n)=>e<<n-32|t>>>64-n;wt.rotlBL=YJ;function eQ(e,t,n,r){let a=(t>>>0)+(r>>>0);return{h:e+n+(a/2**32|0)|0,l:a|0}}var tQ=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);wt.add3L=tQ;var nQ=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;wt.add3H=nQ;var rQ=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);wt.add4L=rQ;var aQ=(e,t,n,r,a)=>t+n+r+a+(e/2**32|0)|0;wt.add4H=aQ;var sQ=(e,t,n,r,a)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(a>>>0);wt.add5L=sQ;var oQ=(e,t,n,r,a,s)=>t+n+r+a+s+(e/2**32|0)|0;wt.add5H=oQ;var JEe={fromBig:fP,split:HJ,toBig:FJ,shrSH:zJ,shrSL:jJ,rotrSH:qJ,rotrSL:GJ,rotrBH:VJ,rotrBL:WJ,rotr32H:ZJ,rotr32L:KJ,rotlSH:XJ,rotlSL:JJ,rotlBH:QJ,rotlBL:YJ,add:eQ,add3L:tQ,add3H:nQ,add4L:rQ,add4H:aQ,add5H:oQ,add5L:sQ};wt.default=JEe});var iQ=L(Ux=>{"use strict";Object.defineProperty(Ux,"__esModule",{value:!0});Ux.crypto=void 0;var k6=Uy("node:crypto");Ux.crypto=k6&&typeof k6=="object"&&"webcrypto"in k6?k6.webcrypto:k6&&typeof k6=="object"&&"randomBytes"in k6?k6:void 0});var Fx=L(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.wrapXOFConstructorWithOpts=st.wrapConstructorWithOpts=st.wrapConstructor=st.Hash=st.nextTick=st.swap32IfBE=st.byteSwapIfBE=st.swap8IfBE=st.isLE=void 0;st.isBytes=uQ;st.anumber=pP;st.abytes=Xl;st.ahash=QEe;st.aexists=YEe;st.aoutput=eke;st.u8=tke;st.u32=nke;st.clean=rke;st.createView=ake;st.rotr=ske;st.rotl=oke;st.byteSwap=bP;st.byteSwap32=dQ;st.bytesToHex=cke;st.hexToBytes=uke;st.asyncLoop=fke;st.utf8ToBytes=yP;st.bytesToUtf8=lke;st.toBytes=Hx;st.kdfInputToBytes=pke;st.concatBytes=mke;st.checkOpts=bke;st.createHasher=lQ;st.createOptHasher=pQ;st.createXOFer=mQ;st.randomBytes=yke;var Kl=iQ();function uQ(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function pP(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Xl(e,...t){if(!uQ(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function QEe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");pP(e.outputLen),pP(e.blockLen)}function YEe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function eke(e,t){Xl(e);let n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function tke(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function nke(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function rke(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ake(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ske(e,t){return e<<32-t|e>>>t}function oke(e,t){return e<<t|e>>>32-t>>>0}st.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bP(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}st.swap8IfBE=st.isLE?e=>e:e=>bP(e);st.byteSwapIfBE=st.swap8IfBE;function dQ(e){for(let t=0;t<e.length;t++)e[t]=bP(e[t]);return e}st.swap32IfBE=st.isLE?e=>e:dQ;var fQ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ike=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cke(e){if(Xl(e),fQ)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=ike[e[n]];return t}var W1={_0:48,_9:57,A:65,F:70,a:97,f:102};function cQ(e){if(e>=W1._0&&e<=W1._9)return e-W1._0;if(e>=W1.A&&e<=W1.F)return e-(W1.A-10);if(e>=W1.a&&e<=W1.f)return e-(W1.a-10)}function uke(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(fQ)return Uint8Array.fromHex(e);let t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let a=0,s=0;a<n;a++,s+=2){let o=cQ(e.charCodeAt(s)),i=cQ(e.charCodeAt(s+1));if(o===void 0||i===void 0){let u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[a]=o*16+i}return r}var dke=async()=>{};st.nextTick=dke;async function fke(e,t,n){let r=Date.now();for(let a=0;a<e;a++){n(a);let s=Date.now()-r;s>=0&&s<t||(await(0,st.nextTick)(),r+=s)}}function yP(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function lke(e){return new TextDecoder().decode(e)}function Hx(e){return typeof e=="string"&&(e=yP(e)),Xl(e),e}function pke(e){return typeof e=="string"&&(e=yP(e)),Xl(e),e}function mke(...e){let t=0;for(let r=0;r<e.length;r++){let a=e[r];Xl(a),t+=a.length}let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let s=e[r];n.set(s,a),a+=s.length}return n}function bke(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(e,t)}var mP=class{};st.Hash=mP;function lQ(e){let t=r=>e().update(Hx(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function pQ(e){let t=(r,a)=>e(a).update(Hx(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function mQ(e){let t=(r,a)=>e(a).update(Hx(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}st.wrapConstructor=lQ;st.wrapConstructorWithOpts=pQ;st.wrapXOFConstructorWithOpts=mQ;function yke(e=32){if(Kl.crypto&&typeof Kl.crypto.getRandomValues=="function")return Kl.crypto.getRandomValues(new Uint8Array(e));if(Kl.crypto&&typeof Kl.crypto.randomBytes=="function")return Uint8Array.from(Kl.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}});var SQ=L(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.shake256=Zn.shake128=Zn.keccak_512=Zn.keccak_384=Zn.keccak_256=Zn.keccak_224=Zn.sha3_512=Zn.sha3_384=Zn.sha3_256=Zn.sha3_224=Zn.Keccak=void 0;Zn.keccakP=vQ;var j8=lP(),Vr=Fx(),gke=BigInt(0),z8=BigInt(1),hke=BigInt(2),xke=BigInt(7),wke=BigInt(256),vke=BigInt(113),gQ=[],hQ=[],xQ=[];for(let e=0,t=z8,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],gQ.push(2*(5*r+n)),hQ.push((e+1)*(e+2)/2%64);let a=gke;for(let s=0;s<7;s++)t=(t<<z8^(t>>xke)*vke)%wke,t&hke&&(a^=z8<<(z8<<BigInt(s))-z8);xQ.push(a)}var wQ=(0,j8.split)(xQ,!0),Tke=wQ[0],Ske=wQ[1],bQ=(e,t,n)=>n>32?(0,j8.rotlBH)(e,t,n):(0,j8.rotlSH)(e,t,n),yQ=(e,t,n)=>n>32?(0,j8.rotlBL)(e,t,n):(0,j8.rotlSL)(e,t,n);function vQ(e,t=24){let n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){let i=(o+8)%10,u=(o+2)%10,d=n[u],l=n[u+1],p=bQ(d,l,1)^n[i],y=yQ(d,l,1)^n[i+1];for(let m=0;m<50;m+=10)e[o+m]^=p,e[o+m+1]^=y}let a=e[2],s=e[3];for(let o=0;o<24;o++){let i=hQ[o],u=bQ(a,s,i),d=yQ(a,s,i),l=gQ[o];a=e[l],s=e[l+1],e[l]=u,e[l+1]=d}for(let o=0;o<50;o+=10){for(let i=0;i<10;i++)n[i]=e[o+i];for(let i=0;i<10;i++)e[o+i]^=~n[(i+2)%10]&n[(i+4)%10]}e[0]^=Tke[r],e[1]^=Ske[r]}(0,Vr.clean)(n)}var q8=class e extends Vr.Hash{constructor(t,n,r,a=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=a,this.rounds=s,(0,Vr.anumber)(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,Vr.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,Vr.swap32IfBE)(this.state32),vQ(this.state32,this.rounds),(0,Vr.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(t){(0,Vr.aexists)(this),t=(0,Vr.toBytes)(t),(0,Vr.abytes)(t);let{blockLen:n,state:r}=this,a=t.length;for(let s=0;s<a;){let o=Math.min(n-this.pos,a-s);for(let i=0;i<o;i++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:n,pos:r,blockLen:a}=this;t[r]^=n,(n&128)!==0&&r===a-1&&this.keccak(),t[a-1]^=128,this.keccak()}writeInto(t){(0,Vr.aexists)(this,!1),(0,Vr.abytes)(t),this.finish();let n=this.state,{blockLen:r}=this;for(let a=0,s=t.length;a<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-a);t.set(n.subarray(this.posOut,this.posOut+o),a),this.posOut+=o,a+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,Vr.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,Vr.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,Vr.clean)(this.state)}_cloneInto(t){let{blockLen:n,suffix:r,outputLen:a,rounds:s,enableXOF:o}=this;return t||(t=new e(n,r,a,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=a,t.enableXOF=o,t.destroyed=this.destroyed,t}};Zn.Keccak=q8;var I6=(e,t,n)=>(0,Vr.createHasher)(()=>new q8(t,e,n));Zn.sha3_224=I6(6,144,224/8);Zn.sha3_256=I6(6,136,256/8);Zn.sha3_384=I6(6,104,384/8);Zn.sha3_512=I6(6,72,512/8);Zn.keccak_224=I6(1,144,224/8);Zn.keccak_256=I6(1,136,256/8);Zn.keccak_384=I6(1,104,384/8);Zn.keccak_512=I6(1,72,512/8);var TQ=(e,t,n)=>(0,Vr.createXOFer)((r={})=>new q8(t,e,r.dkLen===void 0?n:r.dkLen,!0));Zn.shake128=TQ(31,168,128/8);Zn.shake256=TQ(31,136,256/8)});var G8=L(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.remove0x=Nt.add0x=Nt.isValidHexAddress=Nt.isValidHexAddressUnmemoized=Nt.isValidChecksumAddress=Nt.isValidChecksumAddressUnmemoized=Nt.getChecksumAddress=Nt.getChecksumAddressUnmemoized=Nt.assertIsStrictHexString=Nt.assertIsHexString=Nt.isHexChecksumAddress=Nt.isHexAddress=Nt.isStrictHexString=Nt.isHexString=Nt.HexChecksumAddressStruct=Nt.HexAddressStruct=Nt.StrictHexStruct=Nt.HexStruct=void 0;var C6=Go(),Ake=SQ(),gP=vC(),hP=V1(),AQ=/^(?:0x)?[0-9a-f]+$/iu,_Q=/^0x[0-9a-f]+$/iu,EQ=/^0x[0-9a-f]{40}$/u,kQ=/^0x[0-9a-fA-F]{40}$/u;Nt.HexStruct=(0,C6.pattern)((0,C6.string)(),AQ);Nt.StrictHexStruct=(0,C6.pattern)((0,C6.string)(),_Q);Nt.HexAddressStruct=(0,C6.pattern)((0,C6.string)(),EQ);Nt.HexChecksumAddressStruct=(0,C6.pattern)((0,C6.string)(),kQ);var zx=e=>typeof e=="string";function IQ(e){return zx(e)&&AQ.test(e)}Nt.isHexString=IQ;function CQ(e){return zx(e)&&_Q.test(e)}Nt.isStrictHexString=CQ;function PQ(e){return zx(e)&&EQ.test(e)}Nt.isHexAddress=PQ;function xP(e){return zx(e)&&kQ.test(e)}Nt.isHexChecksumAddress=xP;function _ke(e){(0,hP.assert)(IQ(e),"Value must be a hexadecimal string.")}Nt.assertIsHexString=_ke;function Eke(e){(0,hP.assert)(CQ(e),'Value must be a hexadecimal string, starting with "0x".')}Nt.assertIsStrictHexString=Eke;function RQ(e){(0,hP.assert)(xP(e),"Invalid hex address.");let t=MQ(e).toLowerCase(),n=(0,Ake.keccak_256)(t),{length:r}=t,a=new Array(r);for(let s=0;s<r;s++){let o=s>>1,i=s&1,u=n[o],d=i===0?u>>4:u&15;a[s]=d>=8?t[s].toUpperCase():t[s]}return`0x${a.join("")}`}Nt.getChecksumAddressUnmemoized=RQ;Nt.getChecksumAddress=(0,gP.memoize)(RQ);function $Q(e){return xP(e)?(0,Nt.getChecksumAddress)(e)===e:!1}Nt.isValidChecksumAddressUnmemoized=$Q;Nt.isValidChecksumAddress=(0,gP.memoize)($Q);function DQ(e){return PQ(e)||(0,Nt.isValidChecksumAddress)(e)}Nt.isValidHexAddressUnmemoized=DQ;Nt.isValidHexAddress=(0,gP.memoize)(DQ);function kke(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`}Nt.add0x=kke;function MQ(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}Nt.remove0x=MQ});var TP=L(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.areUint8ArraysEqual=Ft.createDataView=Ft.concatBytes=Ft.valueToBytes=Ft.base64ToBytes=Ft.stringToBytes=Ft.numberToBytes=Ft.signedBigIntToBytes=Ft.bigIntToBytes=Ft.hexToBytes=Ft.bytesToBase64=Ft.bytesToString=Ft.bytesToNumber=Ft.bytesToSignedBigInt=Ft.bytesToBigInt=Ft.bytesToHex=Ft.assertIsBytes=Ft.isBytes=void 0;var BQ=UJ(),as=V1(),wP=G8(),OQ=48,NQ=58,LQ=87;function Ike(){let e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}var Cke=Ike();function vP(e){return e instanceof Uint8Array}Ft.isBytes=vP;function R5(e){(0,as.assert)(vP(e),"Value must be a Uint8Array.")}Ft.assertIsBytes=R5;function UQ(e){if(R5(e),e.length===0)return"0x";let t=Cke(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,wP.add0x)(n.join(""))}Ft.bytesToHex=UQ;function HQ(e){R5(e);let t=UQ(e);return BigInt(t)}Ft.bytesToBigInt=HQ;function Pke(e){R5(e);let t=BigInt(0);for(let n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(e.length*8,t)}Ft.bytesToSignedBigInt=Pke;function Rke(e){R5(e);let t=HQ(e);return(0,as.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}Ft.bytesToNumber=Rke;function $ke(e){return R5(e),new TextDecoder().decode(e)}Ft.bytesToString=$ke;function Dke(e){return R5(e),BQ.base64.encode(e)}Ft.bytesToBase64=Dke;function jx(e){if(e?.toLowerCase?.()==="0x")return new Uint8Array;(0,wP.assertIsHexString)(e);let t=(0,wP.remove0x)(e).toLowerCase(),n=t.length%2===0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let a=0;a<r.length;a++){let s=n.charCodeAt(a*2),o=n.charCodeAt(a*2+1),i=s-(s<NQ?OQ:LQ),u=o-(o<NQ?OQ:LQ);r[a]=i*16+u}return r}Ft.hexToBytes=jx;function FQ(e){(0,as.assert)(typeof e=="bigint","Value must be a bigint."),(0,as.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");let t=e.toString(16);return jx(t)}Ft.bigIntToBytes=FQ;function Mke(e,t){(0,as.assert)(t>0);let n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(t*8+-1))}function Oke(e,t){(0,as.assert)(typeof e=="bigint","Value must be a bigint."),(0,as.assert)(typeof t=="number","Byte length must be a number."),(0,as.assert)(t>0,"Byte length must be greater than 0."),(0,as.assert)(Mke(e,t),"Byte length is too small to represent the given value.");let n=e,r=new Uint8Array(t);for(let a=0;a<r.length;a++)r[a]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()}Ft.signedBigIntToBytes=Oke;function zQ(e){(0,as.assert)(typeof e=="number","Value must be a number."),(0,as.assert)(e>=0,"Value must be a non-negative number."),(0,as.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");let t=e.toString(16);return jx(t)}Ft.numberToBytes=zQ;function jQ(e){return(0,as.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}Ft.stringToBytes=jQ;function Nke(e){return(0,as.assert)(typeof e=="string","Value must be a string."),BQ.base64.decode(e)}Ft.base64ToBytes=Nke;function qQ(e){if(typeof e=="bigint")return FQ(e);if(typeof e=="number")return zQ(e);if(typeof e=="string")return e.startsWith("0x")?jx(e):jQ(e);if(vP(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}Ft.valueToBytes=qQ;function Lke(e){let t=new Array(e.length),n=0;for(let a=0;a<e.length;a++){let s=qQ(e[a]);t[a]=s,n+=s.length}let r=new Uint8Array(n);for(let a=0,s=0;a<t.length;a++)r.set(t[a],s),s+=t[a].length;return r}Ft.concatBytes=Lke;function Bke(e){if(typeof Buffer<"u"&&e instanceof Buffer){let t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}Ft.createDataView=Bke;function Uke(e,t){let n=e.byteLength^t.byteLength,r=Math.max(e.byteLength,t.byteLength);for(let a=0;a<r;a++){let s=e[a]??0,o=t[a]??0;n|=s^o}return n===0}Ft.areUint8ArraysEqual=Uke});var SP=L(qx=>{"use strict";Object.defineProperty(qx,"__esModule",{value:!0});qx.definePattern=void 0;var Hke=Go();function Fke(e,t){return(0,Hke.define)(e,n=>typeof n=="string"&&t.test(n))}qx.definePattern=Fke});var WQ=L(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.toCaipAssetId=te.toCaipAssetType=te.toCaipAccountId=te.toCaipChainId=te.parseCaipAssetId=te.parseCaipAssetType=te.parseCaipAccountId=te.parseCaipChainId=te.isCaipAssetId=te.isCaipAssetType=te.isCaipTokenId=te.isCaipAssetReference=te.isCaipAssetNamespace=te.isCaipAccountAddress=te.isCaipAccountId=te.isCaipReference=te.isCaipNamespace=te.isCaipChainId=te.KnownCaipNamespace=te.CaipAssetTypeOrIdStruct=te.CaipAssetIdStruct=te.CaipAssetTypeStruct=te.CaipTokenIdStruct=te.CaipAssetReferenceStruct=te.CaipAssetNamespaceStruct=te.CaipAccountAddressStruct=te.CaipAccountIdStruct=te.CaipReferenceStruct=te.CaipNamespaceStruct=te.CaipChainIdStruct=te.CAIP_ASSET_ID_REGEX=te.CAIP_ASSET_TYPE_REGEX=te.CAIP_TOKEN_ID_REGEX=te.CAIP_ASSET_REFERENCE_REGEX=te.CAIP_ASSET_NAMESPACE_REGEX=te.CAIP_ACCOUNT_ADDRESS_REGEX=te.CAIP_ACCOUNT_ID_REGEX=te.CAIP_REFERENCE_REGEX=te.CAIP_NAMESPACE_REGEX=te.CAIP_CHAIN_ID_REGEX=void 0;var Vo=SP();te.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u;te.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u;te.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u;te.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u;te.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u;te.CAIP_ASSET_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u;te.CAIP_ASSET_REFERENCE_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u;te.CAIP_TOKEN_ID_REGEX=/^[-.%a-zA-Z0-9]{1,78}$/u;te.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u;te.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u;var zke=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})(\/(?<tokenId>[-.%a-zA-Z0-9]{1,78}))?$/u;te.CaipChainIdStruct=(0,Vo.definePattern)("CaipChainId",te.CAIP_CHAIN_ID_REGEX);te.CaipNamespaceStruct=(0,Vo.definePattern)("CaipNamespace",te.CAIP_NAMESPACE_REGEX);te.CaipReferenceStruct=(0,Vo.definePattern)("CaipReference",te.CAIP_REFERENCE_REGEX);te.CaipAccountIdStruct=(0,Vo.definePattern)("CaipAccountId",te.CAIP_ACCOUNT_ID_REGEX);te.CaipAccountAddressStruct=(0,Vo.definePattern)("CaipAccountAddress",te.CAIP_ACCOUNT_ADDRESS_REGEX);te.CaipAssetNamespaceStruct=(0,Vo.definePattern)("CaipAssetNamespace",te.CAIP_ASSET_NAMESPACE_REGEX);te.CaipAssetReferenceStruct=(0,Vo.definePattern)("CaipAssetReference",te.CAIP_ASSET_REFERENCE_REGEX);te.CaipTokenIdStruct=(0,Vo.definePattern)("CaipTokenId",te.CAIP_TOKEN_ID_REGEX);te.CaipAssetTypeStruct=(0,Vo.definePattern)("CaipAssetType",te.CAIP_ASSET_TYPE_REGEX);te.CaipAssetIdStruct=(0,Vo.definePattern)("CaipAssetId",te.CAIP_ASSET_ID_REGEX);te.CaipAssetTypeOrIdStruct=(0,Vo.definePattern)("CaipAssetTypeOrId",zke);var jke;(function(e){e.Bip122="bip122",e.Solana="solana",e.Tron="tron",e.Eip155="eip155",e.Wallet="wallet"})(jke=te.KnownCaipNamespace||(te.KnownCaipNamespace={}));function qke(e){return typeof e=="string"&&te.CAIP_CHAIN_ID_REGEX.test(e)}te.isCaipChainId=qke;function V8(e){return typeof e=="string"&&te.CAIP_NAMESPACE_REGEX.test(e)}te.isCaipNamespace=V8;function W8(e){return typeof e=="string"&&te.CAIP_REFERENCE_REGEX.test(e)}te.isCaipReference=W8;function Gke(e){return typeof e=="string"&&te.CAIP_ACCOUNT_ID_REGEX.test(e)}te.isCaipAccountId=Gke;function GQ(e){return typeof e=="string"&&te.CAIP_ACCOUNT_ADDRESS_REGEX.test(e)}te.isCaipAccountAddress=GQ;function AP(e){return typeof e=="string"&&te.CAIP_ASSET_NAMESPACE_REGEX.test(e)}te.isCaipAssetNamespace=AP;function _P(e){return typeof e=="string"&&te.CAIP_ASSET_REFERENCE_REGEX.test(e)}te.isCaipAssetReference=_P;function VQ(e){return typeof e=="string"&&te.CAIP_TOKEN_ID_REGEX.test(e)}te.isCaipTokenId=VQ;function Vke(e){return typeof e=="string"&&te.CAIP_ASSET_TYPE_REGEX.test(e)}te.isCaipAssetType=Vke;function Wke(e){return typeof e=="string"&&te.CAIP_ASSET_ID_REGEX.test(e)}te.isCaipAssetId=Wke;function Zke(e){let t=te.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}}te.parseCaipChainId=Zke;function Kke(e){let t=te.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}}te.parseCaipAccountId=Kke;function Xke(e){let t=te.CAIP_ASSET_TYPE_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset type.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}}te.parseCaipAssetType=Xke;function Jke(e){let t=te.CAIP_ASSET_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset ID.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,tokenId:t.groups.tokenId,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}}te.parseCaipAssetId=Jke;function Qke(e,t){if(!V8(e))throw new Error(`Invalid "namespace", must match: ${te.CAIP_NAMESPACE_REGEX.toString()}`);if(!W8(t))throw new Error(`Invalid "reference", must match: ${te.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}te.toCaipChainId=Qke;function Yke(e,t,n){if(!V8(e))throw new Error(`Invalid "namespace", must match: ${te.CAIP_NAMESPACE_REGEX.toString()}`);if(!W8(t))throw new Error(`Invalid "reference", must match: ${te.CAIP_REFERENCE_REGEX.toString()}`);if(!GQ(n))throw new Error(`Invalid "accountAddress", must match: ${te.CAIP_ACCOUNT_ADDRESS_REGEX.toString()}`);return`${e}:${t}:${n}`}te.toCaipAccountId=Yke;function eIe(e,t,n,r){if(!V8(e))throw new Error(`Invalid "namespace", must match: ${te.CAIP_NAMESPACE_REGEX.toString()}`);if(!W8(t))throw new Error(`Invalid "reference", must match: ${te.CAIP_REFERENCE_REGEX.toString()}`);if(!AP(n))throw new Error(`Invalid "assetNamespace", must match: ${te.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!_P(r))throw new Error(`Invalid "assetReference", must match: ${te.CAIP_ASSET_REFERENCE_REGEX.toString()}`);return`${e}:${t}/${n}:${r}`}te.toCaipAssetType=eIe;function tIe(e,t,n,r,a){if(!V8(e))throw new Error(`Invalid "namespace", must match: ${te.CAIP_NAMESPACE_REGEX.toString()}`);if(!W8(t))throw new Error(`Invalid "reference", must match: ${te.CAIP_REFERENCE_REGEX.toString()}`);if(!AP(n))throw new Error(`Invalid "assetNamespace", must match: ${te.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!_P(r))throw new Error(`Invalid "assetReference", must match: ${te.CAIP_ASSET_REFERENCE_REGEX.toString()}`);if(!VQ(a))throw new Error(`Invalid "tokenId", must match: ${te.CAIP_TOKEN_ID_REGEX.toString()}`);return`${e}:${t}/${n}:${r}/${a}`}te.toCaipAssetId=tIe});var KQ=L(Gx=>{"use strict";Object.defineProperty(Gx,"__esModule",{value:!0});Gx.ChecksumStruct=void 0;var ZQ=Go(),nIe=rP();Gx.ChecksumStruct=(0,ZQ.size)((0,nIe.base64)((0,ZQ.string)(),{paddingRequired:!0}),44,44)});var QQ=L($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.createHex=$i.createBytes=$i.createBigInt=$i.createNumber=void 0;var b0=Go(),rIe=V1(),XQ=TP(),Vx=G8(),JQ=(0,b0.union)([(0,b0.number)(),(0,b0.bigint)(),(0,b0.string)(),Vx.StrictHexStruct]),aIe=(0,b0.coerce)((0,b0.number)(),JQ,Number),sIe=(0,b0.coerce)((0,b0.bigint)(),JQ,BigInt),Q4t=(0,b0.union)([Vx.StrictHexStruct,(0,b0.instance)(Uint8Array)]),oIe=(0,b0.coerce)((0,b0.instance)(Uint8Array),(0,b0.union)([Vx.StrictHexStruct]),XQ.hexToBytes),iIe=(0,b0.coerce)(Vx.StrictHexStruct,(0,b0.instance)(Uint8Array),XQ.bytesToHex);function cIe(e){try{let t=(0,b0.create)(e,aIe);return(0,rIe.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof b0.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}$i.createNumber=cIe;function uIe(e){try{return(0,b0.create)(e,sIe)}catch(t){throw t instanceof b0.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}$i.createBigInt=uIe;function dIe(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,b0.create)(e,oIe)}catch(t){throw t instanceof b0.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}$i.createBytes=dIe;function fIe(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,b0.create)(e,iIe)}catch(t){throw t instanceof b0.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}$i.createHex=fIe});var eY=L(Mi=>{"use strict";var xa=Mi&&Mi.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},YQ=Mi&&Mi.__classPrivateFieldSet||function(e,t,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n},Wo,Di;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.FrozenSet=Mi.FrozenMap=void 0;var Z8=class{get size(){return xa(this,Wo,"f").size}[(Wo=new WeakMap,Symbol.iterator)](){return xa(this,Wo,"f")[Symbol.iterator]()}constructor(t){Wo.set(this,void 0),YQ(this,Wo,new Map(t),"f"),Object.freeze(this)}entries(){return xa(this,Wo,"f").entries()}forEach(t,n){return xa(this,Wo,"f").forEach((r,a,s)=>t.call(n,r,a,this))}get(t){return xa(this,Wo,"f").get(t)}has(t){return xa(this,Wo,"f").has(t)}keys(){return xa(this,Wo,"f").keys()}values(){return xa(this,Wo,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,n])=>`${String(t)} => ${String(n)}`).join(", ")} `:""}}`}};Mi.FrozenMap=Z8;var K8=class{get size(){return xa(this,Di,"f").size}[(Di=new WeakMap,Symbol.iterator)](){return xa(this,Di,"f")[Symbol.iterator]()}constructor(t){Di.set(this,void 0),YQ(this,Di,new Set(t),"f"),Object.freeze(this)}entries(){return xa(this,Di,"f").entries()}forEach(t,n){return xa(this,Di,"f").forEach((r,a,s)=>t.call(n,r,a,this))}has(t){return xa(this,Di,"f").has(t)}keys(){return xa(this,Di,"f").keys()}values(){return xa(this,Di,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}};Mi.FrozenSet=K8;Object.freeze(Z8);Object.freeze(Z8.prototype);Object.freeze(K8);Object.freeze(K8.prototype)});var nY=L(tY=>{"use strict";Object.defineProperty(tY,"__esModule",{value:!0})});var aY=L(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.SHA512_IV=wa.SHA384_IV=wa.SHA224_IV=wa.SHA256_IV=wa.HashMD=void 0;wa.setBigUint64=rY;wa.Chi=lIe;wa.Maj=pIe;var Oi=Fx();function rY(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let a=BigInt(32),s=BigInt(4294967295),o=Number(n>>a&s),i=Number(n&s),u=r?4:0,d=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+d,i,r)}function lIe(e,t,n){return e&t^~e&n}function pIe(e,t,n){return e&t^e&n^t&n}var EP=class extends Oi.Hash{constructor(t,n,r,a){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=a,this.buffer=new Uint8Array(t),this.view=(0,Oi.createView)(this.buffer)}update(t){(0,Oi.aexists)(this),t=(0,Oi.toBytes)(t),(0,Oi.abytes)(t);let{view:n,buffer:r,blockLen:a}=this,s=t.length;for(let o=0;o<s;){let i=Math.min(a-this.pos,s-o);if(i===a){let u=(0,Oi.createView)(t);for(;a<=s-o;o+=a)this.process(u,o);continue}r.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===a&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Oi.aexists)(this),(0,Oi.aoutput)(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:a,isLE:s}=this,{pos:o}=this;n[o++]=128,(0,Oi.clean)(this.buffer.subarray(o)),this.padOffset>a-o&&(this.process(r,0),o=0);for(let p=o;p<a;p++)n[p]=0;rY(r,a-8,BigInt(this.length*8),s),this.process(r,0);let i=(0,Oi.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<d;p++)i.setUint32(4*p,l[p],s)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:a,finished:s,destroyed:o,pos:i}=this;return t.destroyed=o,t.finished=s,t.length=a,t.pos=i,a%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};wa.HashMD=EP;wa.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);wa.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);wa.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]);wa.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});var oY=L(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.sha512_224=Un.sha512_256=Un.sha384=Un.sha512=Un.sha224=Un.sha256=Un.SHA512_256=Un.SHA512_224=Un.SHA384=Un.SHA512=Un.SHA224=Un.SHA256=void 0;var et=aY(),Lt=lP(),j0=Fx(),mIe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),P6=new Uint32Array(64),X8=class extends et.HashMD{constructor(t=32){super(64,t,8,!1),this.A=et.SHA256_IV[0]|0,this.B=et.SHA256_IV[1]|0,this.C=et.SHA256_IV[2]|0,this.D=et.SHA256_IV[3]|0,this.E=et.SHA256_IV[4]|0,this.F=et.SHA256_IV[5]|0,this.G=et.SHA256_IV[6]|0,this.H=et.SHA256_IV[7]|0}get(){let{A:t,B:n,C:r,D:a,E:s,F:o,G:i,H:u}=this;return[t,n,r,a,s,o,i,u]}set(t,n,r,a,s,o,i,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=a|0,this.E=s|0,this.F=o|0,this.G=i|0,this.H=u|0}process(t,n){for(let p=0;p<16;p++,n+=4)P6[p]=t.getUint32(n,!1);for(let p=16;p<64;p++){let y=P6[p-15],m=P6[p-2],g=(0,j0.rotr)(y,7)^(0,j0.rotr)(y,18)^y>>>3,h=(0,j0.rotr)(m,17)^(0,j0.rotr)(m,19)^m>>>10;P6[p]=h+P6[p-7]+g+P6[p-16]|0}let{A:r,B:a,C:s,D:o,E:i,F:u,G:d,H:l}=this;for(let p=0;p<64;p++){let y=(0,j0.rotr)(i,6)^(0,j0.rotr)(i,11)^(0,j0.rotr)(i,25),m=l+y+(0,et.Chi)(i,u,d)+mIe[p]+P6[p]|0,h=((0,j0.rotr)(r,2)^(0,j0.rotr)(r,13)^(0,j0.rotr)(r,22))+(0,et.Maj)(r,a,s)|0;l=d,d=u,u=i,i=o+m|0,o=s,s=a,a=r,r=m+h|0}r=r+this.A|0,a=a+this.B|0,s=s+this.C|0,o=o+this.D|0,i=i+this.E|0,u=u+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,a,s,o,i,u,d,l)}roundClean(){(0,j0.clean)(P6)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,j0.clean)(this.buffer)}};Un.SHA256=X8;var Wx=class extends X8{constructor(){super(28),this.A=et.SHA224_IV[0]|0,this.B=et.SHA224_IV[1]|0,this.C=et.SHA224_IV[2]|0,this.D=et.SHA224_IV[3]|0,this.E=et.SHA224_IV[4]|0,this.F=et.SHA224_IV[5]|0,this.G=et.SHA224_IV[6]|0,this.H=et.SHA224_IV[7]|0}};Un.SHA224=Wx;var sY=Lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),bIe=sY[0],yIe=sY[1],R6=new Uint32Array(80),$6=new Uint32Array(80),$5=class extends et.HashMD{constructor(t=64){super(128,t,16,!1),this.Ah=et.SHA512_IV[0]|0,this.Al=et.SHA512_IV[1]|0,this.Bh=et.SHA512_IV[2]|0,this.Bl=et.SHA512_IV[3]|0,this.Ch=et.SHA512_IV[4]|0,this.Cl=et.SHA512_IV[5]|0,this.Dh=et.SHA512_IV[6]|0,this.Dl=et.SHA512_IV[7]|0,this.Eh=et.SHA512_IV[8]|0,this.El=et.SHA512_IV[9]|0,this.Fh=et.SHA512_IV[10]|0,this.Fl=et.SHA512_IV[11]|0,this.Gh=et.SHA512_IV[12]|0,this.Gl=et.SHA512_IV[13]|0,this.Hh=et.SHA512_IV[14]|0,this.Hl=et.SHA512_IV[15]|0}get(){let{Ah:t,Al:n,Bh:r,Bl:a,Ch:s,Cl:o,Dh:i,Dl:u,Eh:d,El:l,Fh:p,Fl:y,Gh:m,Gl:g,Hh:h,Hl:w}=this;return[t,n,r,a,s,o,i,u,d,l,p,y,m,g,h,w]}set(t,n,r,a,s,o,i,u,d,l,p,y,m,g,h,w){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=a|0,this.Ch=s|0,this.Cl=o|0,this.Dh=i|0,this.Dl=u|0,this.Eh=d|0,this.El=l|0,this.Fh=p|0,this.Fl=y|0,this.Gh=m|0,this.Gl=g|0,this.Hh=h|0,this.Hl=w|0}process(t,n){for(let A=0;A<16;A++,n+=4)R6[A]=t.getUint32(n),$6[A]=t.getUint32(n+=4);for(let A=16;A<80;A++){let _=R6[A-15]|0,E=$6[A-15]|0,O=Lt.rotrSH(_,E,1)^Lt.rotrSH(_,E,8)^Lt.shrSH(_,E,7),$=Lt.rotrSL(_,E,1)^Lt.rotrSL(_,E,8)^Lt.shrSL(_,E,7),B=R6[A-2]|0,V=$6[A-2]|0,D=Lt.rotrSH(B,V,19)^Lt.rotrBH(B,V,61)^Lt.shrSH(B,V,6),G=Lt.rotrSL(B,V,19)^Lt.rotrBL(B,V,61)^Lt.shrSL(B,V,6),N=Lt.add4L($,G,$6[A-7],$6[A-16]),W=Lt.add4H(N,O,D,R6[A-7],R6[A-16]);R6[A]=W|0,$6[A]=N|0}let{Ah:r,Al:a,Bh:s,Bl:o,Ch:i,Cl:u,Dh:d,Dl:l,Eh:p,El:y,Fh:m,Fl:g,Gh:h,Gl:w,Hh:v,Hl:T}=this;for(let A=0;A<80;A++){let _=Lt.rotrSH(p,y,14)^Lt.rotrSH(p,y,18)^Lt.rotrBH(p,y,41),E=Lt.rotrSL(p,y,14)^Lt.rotrSL(p,y,18)^Lt.rotrBL(p,y,41),O=p&m^~p&h,$=y&g^~y&w,B=Lt.add5L(T,E,$,yIe[A],$6[A]),V=Lt.add5H(B,v,_,O,bIe[A],R6[A]),D=B|0,G=Lt.rotrSH(r,a,28)^Lt.rotrBH(r,a,34)^Lt.rotrBH(r,a,39),N=Lt.rotrSL(r,a,28)^Lt.rotrBL(r,a,34)^Lt.rotrBL(r,a,39),W=r&s^r&i^s&i,me=a&o^a&u^o&u;v=h|0,T=w|0,h=m|0,w=g|0,m=p|0,g=y|0,{h:p,l:y}=Lt.add(d|0,l|0,V|0,D|0),d=i|0,l=u|0,i=s|0,u=o|0,s=r|0,o=a|0;let j=Lt.add3L(D,N,me);r=Lt.add3H(j,V,G,W),a=j|0}({h:r,l:a}=Lt.add(this.Ah|0,this.Al|0,r|0,a|0)),{h:s,l:o}=Lt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:i,l:u}=Lt.add(this.Ch|0,this.Cl|0,i|0,u|0),{h:d,l}=Lt.add(this.Dh|0,this.Dl|0,d|0,l|0),{h:p,l:y}=Lt.add(this.Eh|0,this.El|0,p|0,y|0),{h:m,l:g}=Lt.add(this.Fh|0,this.Fl|0,m|0,g|0),{h,l:w}=Lt.add(this.Gh|0,this.Gl|0,h|0,w|0),{h:v,l:T}=Lt.add(this.Hh|0,this.Hl|0,v|0,T|0),this.set(r,a,s,o,i,u,d,l,p,y,m,g,h,w,v,T)}roundClean(){(0,j0.clean)(R6,$6)}destroy(){(0,j0.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Un.SHA512=$5;var Zx=class extends $5{constructor(){super(48),this.Ah=et.SHA384_IV[0]|0,this.Al=et.SHA384_IV[1]|0,this.Bh=et.SHA384_IV[2]|0,this.Bl=et.SHA384_IV[3]|0,this.Ch=et.SHA384_IV[4]|0,this.Cl=et.SHA384_IV[5]|0,this.Dh=et.SHA384_IV[6]|0,this.Dl=et.SHA384_IV[7]|0,this.Eh=et.SHA384_IV[8]|0,this.El=et.SHA384_IV[9]|0,this.Fh=et.SHA384_IV[10]|0,this.Fl=et.SHA384_IV[11]|0,this.Gh=et.SHA384_IV[12]|0,this.Gl=et.SHA384_IV[13]|0,this.Hh=et.SHA384_IV[14]|0,this.Hl=et.SHA384_IV[15]|0}};Un.SHA384=Zx;var Wr=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),Zr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]),Kx=class extends $5{constructor(){super(28),this.Ah=Wr[0]|0,this.Al=Wr[1]|0,this.Bh=Wr[2]|0,this.Bl=Wr[3]|0,this.Ch=Wr[4]|0,this.Cl=Wr[5]|0,this.Dh=Wr[6]|0,this.Dl=Wr[7]|0,this.Eh=Wr[8]|0,this.El=Wr[9]|0,this.Fh=Wr[10]|0,this.Fl=Wr[11]|0,this.Gh=Wr[12]|0,this.Gl=Wr[13]|0,this.Hh=Wr[14]|0,this.Hl=Wr[15]|0}};Un.SHA512_224=Kx;var Xx=class extends $5{constructor(){super(32),this.Ah=Zr[0]|0,this.Al=Zr[1]|0,this.Bh=Zr[2]|0,this.Bl=Zr[3]|0,this.Ch=Zr[4]|0,this.Cl=Zr[5]|0,this.Dh=Zr[6]|0,this.Dl=Zr[7]|0,this.Eh=Zr[8]|0,this.El=Zr[9]|0,this.Fh=Zr[10]|0,this.Fl=Zr[11]|0,this.Gh=Zr[12]|0,this.Gl=Zr[13]|0,this.Hh=Zr[14]|0,this.Hl=Zr[15]|0}};Un.SHA512_256=Xx;Un.sha256=(0,j0.createHasher)(()=>new X8);Un.sha224=(0,j0.createHasher)(()=>new Wx);Un.sha512=(0,j0.createHasher)(()=>new $5);Un.sha384=(0,j0.createHasher)(()=>new Zx);Un.sha512_256=(0,j0.createHasher)(()=>new Xx);Un.sha512_224=(0,j0.createHasher)(()=>new Kx)});var iY=L(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.sha224=Ni.SHA224=Ni.sha256=Ni.SHA256=void 0;var Jx=oY();Ni.SHA256=Jx.SHA256;Ni.sha256=Jx.sha256;Ni.SHA224=Jx.SHA224;Ni.sha224=Jx.sha224});var cY=L(Qx=>{"use strict";Object.defineProperty(Qx,"__esModule",{value:!0});Qx.sha256=void 0;var gIe=iY();async function hIe(e){return"crypto"in globalThis&&typeof globalThis.crypto=="object"&&globalThis.crypto.subtle?.digest?new Uint8Array(await globalThis.crypto.subtle.digest("SHA-256",e)):(0,gIe.sha256)(e)}Qx.sha256=hIe});var fY=L(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.getJsonRpcIdValidator=oe.assertIsJsonRpcError=oe.isJsonRpcError=oe.assertIsJsonRpcFailure=oe.isJsonRpcFailure=oe.assertIsJsonRpcSuccess=oe.isJsonRpcSuccess=oe.assertIsJsonRpcResponse=oe.isJsonRpcResponse=oe.assertIsPendingJsonRpcResponse=oe.isPendingJsonRpcResponse=oe.JsonRpcResponseStruct=oe.JsonRpcFailureStruct=oe.JsonRpcSuccessStruct=oe.PendingJsonRpcResponseStruct=oe.assertIsJsonRpcRequest=oe.isJsonRpcRequest=oe.assertIsJsonRpcNotification=oe.isJsonRpcNotification=oe.JsonRpcNotificationStruct=oe.JsonRpcRequestStruct=oe.JsonRpcParamsStruct=oe.JsonRpcErrorStruct=oe.JsonRpcIdStruct=oe.JsonRpcVersionStruct=oe.jsonrpc2=oe.getJsonSize=oe.getSafeJson=oe.isValidJson=oe.JsonStruct=oe.UnsafeJsonStruct=oe.exactOptional=oe.object=void 0;var cn=Go(),D6=V1(),xIe=Px(),wIe=e=>(0,cn.object)(e);oe.object=wIe;function uY({path:e,branch:t}){let n=e[e.length-1];return(0,xIe.hasProperty)(t[t.length-2],n)}function J8(e){return new cn.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!uY(n)||e.validator(t,n),refiner:(t,n)=>!uY(n)||e.refiner(t,n)})}oe.exactOptional=J8;function kP(e){if(e===null||typeof e=="boolean"||typeof e=="string"||typeof e=="number"&&Number.isFinite(e))return!0;if(typeof e=="object"){let t=!0;if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(!kP(e[r])){t=!1;break}return t}let n=Object.entries(e);for(let r=0;r<n.length;r++)if(typeof n[r][0]!="string"||!kP(n[r][1])){t=!1;break}return t}return!1}oe.UnsafeJsonStruct=(0,cn.define)("JSON",e=>kP(e));oe.JsonStruct=(0,cn.coerce)(oe.UnsafeJsonStruct,(0,cn.refine)((0,cn.any)(),"JSON",e=>(0,cn.is)(e,oe.UnsafeJsonStruct)),e=>JSON.parse(JSON.stringify(e,(t,n)=>{if(!(t==="__proto__"||t==="constructor"))return n})));function vIe(e){try{return dY(e),!0}catch{return!1}}oe.isValidJson=vIe;function dY(e){return(0,cn.create)(e,oe.JsonStruct)}oe.getSafeJson=dY;function TIe(e){(0,D6.assertStruct)(e,oe.JsonStruct,"Invalid JSON value");let t=JSON.stringify(e);return new TextEncoder().encode(t).byteLength}oe.getJsonSize=TIe;oe.jsonrpc2="2.0";oe.JsonRpcVersionStruct=(0,cn.literal)(oe.jsonrpc2);oe.JsonRpcIdStruct=(0,cn.nullable)((0,cn.union)([(0,cn.number)(),(0,cn.string)()]));oe.JsonRpcErrorStruct=(0,oe.object)({code:(0,cn.integer)(),message:(0,cn.string)(),data:J8(oe.JsonStruct),stack:J8((0,cn.string)())});oe.JsonRpcParamsStruct=(0,cn.union)([(0,cn.record)((0,cn.string)(),oe.JsonStruct),(0,cn.array)(oe.JsonStruct)]);oe.JsonRpcRequestStruct=(0,oe.object)({id:oe.JsonRpcIdStruct,jsonrpc:oe.JsonRpcVersionStruct,method:(0,cn.string)(),params:J8(oe.JsonRpcParamsStruct)});oe.JsonRpcNotificationStruct=(0,oe.object)({jsonrpc:oe.JsonRpcVersionStruct,method:(0,cn.string)(),params:J8(oe.JsonRpcParamsStruct)});function SIe(e){return(0,cn.is)(e,oe.JsonRpcNotificationStruct)}oe.isJsonRpcNotification=SIe;function AIe(e,t){(0,D6.assertStruct)(e,oe.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)}oe.assertIsJsonRpcNotification=AIe;function _Ie(e){return(0,cn.is)(e,oe.JsonRpcRequestStruct)}oe.isJsonRpcRequest=_Ie;function EIe(e,t){(0,D6.assertStruct)(e,oe.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)}oe.assertIsJsonRpcRequest=EIe;oe.PendingJsonRpcResponseStruct=(0,cn.object)({id:oe.JsonRpcIdStruct,jsonrpc:oe.JsonRpcVersionStruct,result:(0,cn.optional)((0,cn.unknown)()),error:(0,cn.optional)(oe.JsonRpcErrorStruct)});oe.JsonRpcSuccessStruct=(0,oe.object)({id:oe.JsonRpcIdStruct,jsonrpc:oe.JsonRpcVersionStruct,result:oe.JsonStruct});oe.JsonRpcFailureStruct=(0,oe.object)({id:oe.JsonRpcIdStruct,jsonrpc:oe.JsonRpcVersionStruct,error:oe.JsonRpcErrorStruct});oe.JsonRpcResponseStruct=(0,cn.union)([oe.JsonRpcSuccessStruct,oe.JsonRpcFailureStruct]);function kIe(e){return(0,cn.is)(e,oe.PendingJsonRpcResponseStruct)}oe.isPendingJsonRpcResponse=kIe;function IIe(e,t){(0,D6.assertStruct)(e,oe.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)}oe.assertIsPendingJsonRpcResponse=IIe;function CIe(e){return(0,cn.is)(e,oe.JsonRpcResponseStruct)}oe.isJsonRpcResponse=CIe;function PIe(e,t){(0,D6.assertStruct)(e,oe.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)}oe.assertIsJsonRpcResponse=PIe;function RIe(e){return(0,cn.is)(e,oe.JsonRpcSuccessStruct)}oe.isJsonRpcSuccess=RIe;function $Ie(e,t){(0,D6.assertStruct)(e,oe.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)}oe.assertIsJsonRpcSuccess=$Ie;function DIe(e){return(0,cn.is)(e,oe.JsonRpcFailureStruct)}oe.isJsonRpcFailure=DIe;function MIe(e,t){(0,D6.assertStruct)(e,oe.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)}oe.assertIsJsonRpcFailure=MIe;function OIe(e){return(0,cn.is)(e,oe.JsonRpcErrorStruct)}oe.isJsonRpcError=OIe;function NIe(e,t){(0,D6.assertStruct)(e,oe.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)}oe.assertIsJsonRpcError=NIe;function LIe(e){let{permitEmptyString:t,permitFractions:n,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return s=>!!(typeof s=="number"&&(n||Number.isInteger(s))||typeof s=="string"&&(t||s.length>0)||r&&s===null)}oe.getJsonRpcIdValidator=LIe});var pY=L(lY=>{"use strict";Object.defineProperty(lY,"__esModule",{value:!0})});var mY=L(M6=>{"use strict";var BIe=M6&&M6.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M6,"__esModule",{value:!0});M6.createModuleLogger=M6.createProjectLogger=void 0;var UIe=BIe(uK()),HIe=(0,UIe.default)("metamask");function FIe(e){return HIe.extend(e)}M6.createProjectLogger=FIe;function zIe(e,t){return e.extend(t)}M6.createModuleLogger=zIe});var bY=L(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.hexToBigInt=Li.hexToNumber=Li.bigIntToHex=Li.numberToHex=void 0;var Jl=V1(),Q8=G8(),jIe=e=>((0,Jl.assert)(typeof e=="number","Value must be a number."),(0,Jl.assert)(e>=0,"Value must be a non-negative number."),(0,Jl.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Q8.add0x)(e.toString(16)));Li.numberToHex=jIe;var qIe=e=>((0,Jl.assert)(typeof e=="bigint","Value must be a bigint."),(0,Jl.assert)(e>=0,"Value must be a non-negative bigint."),(0,Q8.add0x)(e.toString(16)));Li.bigIntToHex=qIe;var GIe=e=>{(0,Q8.assertIsHexString)(e);let t=parseInt(e,16);return(0,Jl.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};Li.hexToNumber=GIe;var VIe=e=>((0,Q8.assertIsHexString)(e),BigInt((0,Q8.add0x)(e)));Li.hexToBigInt=VIe});var gY=L(yY=>{"use strict";Object.defineProperty(yY,"__esModule",{value:!0})});var hY=L(Yx=>{"use strict";Object.defineProperty(Yx,"__esModule",{value:!0});Yx.createDeferredPromise=void 0;function WIe({suppressUnhandledRejection:e=!1}={}){let t,n,r=new Promise((a,s)=>{t=a,n=s});return e&&r.catch(a=>{}),{promise:r,resolve:t,reject:n}}Yx.createDeferredPromise=WIe});var wY=L(Z1=>{"use strict";Object.defineProperty(Z1,"__esModule",{value:!0});Z1.timeSince=Z1.inMilliseconds=Z1.Duration=void 0;var ZIe;(function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"})(ZIe=Z1.Duration||(Z1.Duration={}));var KIe=e=>Number.isInteger(e)&&e>=0,xY=(e,t)=>{if(!KIe(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};function XIe(e,t){return xY(e,"count"),e*t}Z1.inMilliseconds=XIe;function JIe(e){return xY(e,"timestamp"),Date.now()-e}Z1.timeSince=JIe});var TY=L(vY=>{"use strict";Object.defineProperty(vY,"__esModule",{value:!0})});var AY=L(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.satisfiesVersionRange=o0.gtRange=o0.gtVersion=o0.assertIsSemVerRange=o0.assertIsSemVerVersion=o0.isValidSemVerRange=o0.isValidSemVerVersion=o0.VersionRangeStruct=o0.VersionStruct=void 0;var Ql=Go(),Y8=QX(),SY=V1();o0.VersionStruct=(0,Ql.refine)((0,Ql.string)(),"Version",e=>(0,Y8.valid)(e)===null?`Expected SemVer version, got "${e}"`:!0);o0.VersionRangeStruct=(0,Ql.refine)((0,Ql.string)(),"Version range",e=>(0,Y8.validRange)(e)===null?`Expected SemVer range, got "${e}"`:!0);function QIe(e){return(0,Ql.is)(e,o0.VersionStruct)}o0.isValidSemVerVersion=QIe;function YIe(e){return(0,Ql.is)(e,o0.VersionRangeStruct)}o0.isValidSemVerRange=YIe;function eCe(e){(0,SY.assertStruct)(e,o0.VersionStruct)}o0.assertIsSemVerVersion=eCe;function tCe(e){(0,SY.assertStruct)(e,o0.VersionRangeStruct)}o0.assertIsSemVerRange=tCe;function nCe(e,t){return(0,Y8.gt)(e,t)}o0.gtVersion=nCe;function rCe(e,t){return(0,Y8.gtr)(e,t)}o0.gtRange=rCe;function aCe(e,t){return(0,Y8.satisfies)(e,t,{includePrerelease:!0})}o0.satisfiesVersionRange=aCe});var CY=L(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.toWei=nr.fromWei=nr.numberToString=nr.getValueOfUnit=nr.unitMap=nr.numericToBigInt=void 0;var e7=BigInt(0),_Y=BigInt(-1);function EY(e){if(typeof e=="string"||typeof e=="number")return BigInt(e);if(typeof e=="bigint")return e;throw new Error(`Cannot convert ${typeof e} to BigInt`)}nr.numericToBigInt=EY;nr.unitMap={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};var IP=Object.fromEntries(Object.entries(nr.unitMap).map(([e,t])=>[e,BigInt(t)])),kY=Object.fromEntries(Object.entries(nr.unitMap).map(([e,t])=>[e,t.length-1||1])),sCe=/^-?[0-9.]+$/u,oCe=/^([0-9]*[1-9]|0)(0*)/u,iCe=/\B(?=(\d{3})+(?!\d))/gu;function cCe(e="ether"){let t=e.toLowerCase(),n=IP[t];if(n===void 0)throw new Error(`The unit provided ${e} doesn't exist, please use the one of the following units ${JSON.stringify(nr.unitMap,null,2)}`);return n}nr.getValueOfUnit=cCe;function IY(e){if(typeof e=="string"){if(!sCe.test(e))throw new Error(`while converting number to string, invalid number value '${e}', should be a number matching (^-?[0-9.]+).`);return e}if(typeof e=="number")return String(e);if(typeof e=="bigint")return e.toString();throw new Error(`while converting number to string, invalid number value '${String(e)}' type ${typeof e}.`)}nr.numberToString=IY;function uCe(e,t,n){let r=EY(e),a=r<e7,s=t.toLowerCase(),o=IP[s],i=kY[s],u=n??{};if(o===void 0)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(nr.unitMap,null,2)}`);if(o===e7)return a?"-0":"0";a&&(r=r*_Y);let d=(r%o).toString();d=d.padStart(i,"0"),u.pad||(d=d.match(oCe)?.[1]??"0");let l=(r/o).toString();u.commify&&(l=l.replace(iCe,","));let p=`${l}${d==="0"?"":`.${d}`}`;return a&&(p=`-${p}`),p}nr.fromWei=uCe;function dCe(e,t){let n=t.toLowerCase(),r=IP[n],a=kY[n];if(r===void 0)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(nr.unitMap,null,2)}`);if(r===e7)return e7;if(typeof e=="bigint"&&n==="wei")return e;if(typeof e=="bigint")return e*r;let s=IY(e),o=s.startsWith("-");if(o&&(s=s.substring(1)),s===".")throw new Error(`While converting number ${e} to wei, invalid value`);let i=s.split(".");if(i.length>2)throw new Error(`While converting number ${e} to wei,  too many decimal points`);let u=i[0],d=i[1];if(u||(u="0"),d||(d="0"),d.length>a)throw new Error(`While converting number ${e} to wei, too many decimal places`);d=d.padEnd(a,"0");let l=BigInt(u),p=BigInt(d),y=l*r+p;return o&&(y=y*_Y),y}nr.toWei=dCe});var Ta=L(Me=>{"use strict";var fCe=Me&&Me.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),N0=Me&&Me.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&fCe(t,e,n)};Object.defineProperty(Me,"__esModule",{value:!0});Me.unitMap=Me.getValueOfUnit=Me.numberToString=Me.fromWei=Me.toWei=Me.remove0x=Me.add0x=Me.isValidChecksumAddress=Me.getChecksumAddress=Me.isValidHexAddress=Me.assertIsStrictHexString=Me.assertIsHexString=Me.isHexChecksumAddress=Me.isHexAddress=Me.isStrictHexString=Me.isHexString=Me.HexChecksumAddressStruct=Me.HexAddressStruct=Me.StrictHexStruct=Me.HexStruct=void 0;N0(V1(),Me);N0(rP(),Me);N0(TP(),Me);N0(WQ(),Me);N0(KQ(),Me);N0(QQ(),Me);N0(eY(),Me);N0(nY(),Me);N0(nP(),Me);N0(cY(),Me);var va=G8();Object.defineProperty(Me,"HexStruct",{enumerable:!0,get:function(){return va.HexStruct}});Object.defineProperty(Me,"StrictHexStruct",{enumerable:!0,get:function(){return va.StrictHexStruct}});Object.defineProperty(Me,"HexAddressStruct",{enumerable:!0,get:function(){return va.HexAddressStruct}});Object.defineProperty(Me,"HexChecksumAddressStruct",{enumerable:!0,get:function(){return va.HexChecksumAddressStruct}});Object.defineProperty(Me,"isHexString",{enumerable:!0,get:function(){return va.isHexString}});Object.defineProperty(Me,"isStrictHexString",{enumerable:!0,get:function(){return va.isStrictHexString}});Object.defineProperty(Me,"isHexAddress",{enumerable:!0,get:function(){return va.isHexAddress}});Object.defineProperty(Me,"isHexChecksumAddress",{enumerable:!0,get:function(){return va.isHexChecksumAddress}});Object.defineProperty(Me,"assertIsHexString",{enumerable:!0,get:function(){return va.assertIsHexString}});Object.defineProperty(Me,"assertIsStrictHexString",{enumerable:!0,get:function(){return va.assertIsStrictHexString}});Object.defineProperty(Me,"isValidHexAddress",{enumerable:!0,get:function(){return va.isValidHexAddress}});Object.defineProperty(Me,"getChecksumAddress",{enumerable:!0,get:function(){return va.getChecksumAddress}});Object.defineProperty(Me,"isValidChecksumAddress",{enumerable:!0,get:function(){return va.isValidChecksumAddress}});Object.defineProperty(Me,"add0x",{enumerable:!0,get:function(){return va.add0x}});Object.defineProperty(Me,"remove0x",{enumerable:!0,get:function(){return va.remove0x}});N0(fY(),Me);N0(pY(),Me);N0(mY(),Me);N0(Px(),Me);N0(bY(),Me);N0(gY(),Me);N0(hY(),Me);N0(SP(),Me);N0(wY(),Me);N0(TY(),Me);N0(AY(),Me);var e2=CY();Object.defineProperty(Me,"toWei",{enumerable:!0,get:function(){return e2.toWei}});Object.defineProperty(Me,"fromWei",{enumerable:!0,get:function(){return e2.fromWei}});Object.defineProperty(Me,"numberToString",{enumerable:!0,get:function(){return e2.numberToString}});Object.defineProperty(Me,"getValueOfUnit",{enumerable:!0,get:function(){return e2.getValueOfUnit}});Object.defineProperty(Me,"unitMap",{enumerable:!0,get:function(){return e2.unitMap}})});var Zo=L(K1=>{"use strict";Object.defineProperty(K1,"__esModule",{value:!0});K1.ParserError=K1.getErrorStack=K1.getErrorMessage=void 0;var PY=Ta(),lCe=e=>typeof e=="string"?e:e instanceof Error||(0,PY.isObject)(e)&&(0,PY.hasProperty)(e,"message")&&typeof e.message=="string"?e.message:"Unknown error.";K1.getErrorMessage=lCe;var pCe=e=>{if(e instanceof Error)return e.stack};K1.getErrorStack=pCe;var CP=class extends Error{constructor(t,n){super(t),this.name="ParserError";let r=(0,K1.getErrorStack)(n);r&&(this.stack=r)}};K1.ParserError=CP});var $Y=L(t7=>{"use strict";Object.defineProperty(t7,"__esModule",{value:!0});t7.iterate=void 0;var RY=Ta(),mCe=function*(e,t=32){for(let n=0;n<e.length;n+=t){let r=s=>{(0,RY.assert)(s>=0,"Cannot skip a negative number of bytes."),(0,RY.assert)(s%t===0,"Length must be a multiple of the size."),n+=s},a=e.subarray(n);yield{skip:r,value:a}}return{skip:()=>{},value:new Uint8Array}};t7.iterate=mCe});var MY=L(O6=>{"use strict";Object.defineProperty(O6,"__esModule",{value:!0});O6.padEnd=O6.padStart=O6.set=void 0;var PP=Ta(),DY=32,bCe=(e,t,n)=>(0,PP.concatBytes)([e.subarray(0,n),t,e.subarray(n+t.length)]);O6.set=bCe;var yCe=(e,t=DY)=>{let n=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,PP.concatBytes)([n,e])};O6.padStart=yCe;var gCe=(e,t=DY)=>{let n=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,PP.concatBytes)([e,n])};O6.padEnd=gCe});var M5=L(D5=>{"use strict";var hCe=D5&&D5.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),xCe=D5&&D5.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&hCe(t,e,n)};Object.defineProperty(D5,"__esModule",{value:!0});xCe(MY(),D5)});var NY=L(O5=>{"use strict";Object.defineProperty(O5,"__esModule",{value:!0});O5.address=O5.getAddress=void 0;var Yl=Ta(),wCe=Zo(),OY=M5(),vCe=e=>{let t=(0,Yl.createBytes)(e);return(0,Yl.assert)(t.length<=20,new wCe.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,OY.padStart)(t,20)};O5.getAddress=vCe;O5.address={isDynamic:!1,isType:e=>e==="address",getByteLength(){return 32},encode({buffer:e,value:t,packed:n}){let r=(0,O5.getAddress)(t);if(n)return(0,Yl.concatBytes)([e,r]);let a=(0,OY.padStart)(r);return(0,Yl.concatBytes)([e,a])},decode({value:e}){return(0,Yl.add0x)((0,Yl.bytesToHex)(e.slice(12,32)))}}});var n7=L(N6=>{"use strict";Object.defineProperty(N6,"__esModule",{value:!0});N6.fixedBytes=N6.getByteLength=void 0;var ep=Ta(),BY=Zo(),LY=M5(),UY=/^bytes([0-9]{1,2})$/u,TCe=e=>{let t=e.match(UY)?.[1];(0,ep.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);let n=Number(t);return(0,ep.assert)(n>0&&n<=32,new BY.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),n};N6.getByteLength=TCe;N6.fixedBytes={isDynamic:!1,isType(e){return UY.test(e)},getByteLength(){return 32},encode({type:e,buffer:t,value:n,packed:r}){let a=(0,N6.getByteLength)(e),s=(0,ep.createBytes)(n);return(0,ep.assert)(s.length<=a,new BY.ParserError(`Expected a value of length ${a}, but received a value of length ${s.length}.`)),r?(0,ep.concatBytes)([t,(0,LY.padEnd)(s,a)]):(0,ep.concatBytes)([t,(0,LY.padEnd)(s)])},decode({type:e,value:t}){let n=(0,N6.getByteLength)(e);return t.slice(0,n)}}});var RP=L(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.tuple=Bi.getTupleElements=void 0;var SCe=Ta(),ACe=Zo(),tp=r7(),_Ce=/^\((.+)\)$/u,ECe=e=>_Ce.test(e),kCe=e=>{(0,SCe.assert)(e.startsWith("(")&&e.endsWith(")"),new ACe.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));let t=[],n="",r=0;for(let a=1;a<e.length-1;a++){let s=e[a];s===","&&r===0?(t.push(n.trim()),n=""):(n+=s,s==="("?r+=1:s===")"&&(r-=1))}return n.trim()&&t.push(n.trim()),t};Bi.getTupleElements=kCe;Bi.tuple={isDynamic(e){return(0,Bi.getTupleElements)(e).some(n=>{let r=(0,tp.getParser)(n);return(0,tp.isDynamicParser)(r,n)})},isType(e){return ECe(e)},getByteLength(e){return(0,tp.isDynamicParser)(this,e)?32:(0,Bi.getTupleElements)(e).reduce((n,r)=>n+(0,tp.getParser)(r).getByteLength(r),0)},encode({type:e,buffer:t,value:n,packed:r,tight:a}){let s=(0,Bi.getTupleElements)(e);return(0,tp.pack)({types:s,values:n,byteArray:t,packed:r,tight:a})},decode({type:e,value:t,skip:n}){let r=(0,Bi.getTupleElements)(e),a=this.getByteLength(e)-32;return n(a),(0,tp.unpack)(r,t)}}});var zY=L(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.array=q0.getTupleType=q0.getArrayType=q0.isArrayType=void 0;var L6=Ta(),t2=Zo(),X1=r7(),ICe=M5(),HY=n7(),$P=RP(),FY=/^(?<type>.*)\[(?<length>\d*?)\]$/u,CCe=e=>FY.test(e);q0.isArrayType=CCe;var PCe=e=>{let t=e.match(FY);return(0,L6.assert)(t?.groups?.type,new t2.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):void 0]};q0.getArrayType=PCe;var RCe=(e,t)=>`(${new Array(t).fill(e).join(",")})`;q0.getTupleType=RCe;q0.array={isDynamic(e){let[t,n]=(0,q0.getArrayType)(e);return n===void 0||(0,X1.isDynamicParser)((0,X1.getParser)(t),t)},isType(e){return(0,q0.isArrayType)(e)},getByteLength(e){(0,L6.assert)((0,q0.isArrayType)(e),new t2.ParserError(`Expected an array type, but received "${e}".`));let[t,n]=(0,q0.getArrayType)(e);return!(0,X1.isDynamicParser)(this,e)&&n!==void 0?$P.tuple.getByteLength((0,q0.getTupleType)(t,n)):32},encode({type:e,buffer:t,value:n,packed:r,tight:a}){let[s,o]=(0,q0.getArrayType)(e);if((0,L6.assert)(!r||!(0,q0.isArrayType)(s),new t2.ParserError("Cannot pack nested arrays.")),r&&(0,X1.isDynamicParser)((0,X1.getParser)(s),s))return(0,X1.pack)({types:new Array(n.length).fill(s),values:n,byteArray:t,packed:r,arrayPacked:!0,tight:a});if(o)return(0,L6.assert)(o===n.length,new t2.ParserError(`Array length does not match type length. Expected a length of ${o}, but received ${n.length}.`)),$P.tuple.encode({type:(0,q0.getTupleType)(s,o),buffer:t,value:n,packed:HY.fixedBytes.isType(s)&&a,tight:a});if(r)return(0,X1.pack)({types:new Array(n.length).fill(s),values:n,byteArray:t,packed:HY.fixedBytes.isType(s)&&a,arrayPacked:!0,tight:a});let i=(0,ICe.padStart)((0,L6.numberToBytes)(n.length));return(0,X1.pack)({types:new Array(n.length).fill(s),values:n,byteArray:(0,L6.concatBytes)([t,i]),packed:r,tight:a})},decode({type:e,value:t,...n}){let[r,a]=(0,q0.getArrayType)(e);if(a){let o=$P.tuple.decode({type:(0,q0.getTupleType)(r,a),value:t,...n});return(0,L6.assert)(o.length===a,new t2.ParserError(`Array length does not match type length. Expected a length of ${a}, but received ${o.length}.`)),o}let s=(0,L6.bytesToNumber)(t.subarray(0,32));return(0,X1.unpack)(new Array(s).fill(r),t.subarray(32))}}});var MP=L(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.number=y0.getBigInt=y0.assertNumberLength=y0.getLength=y0.isSigned=void 0;var Kr=Ta(),np=Zo(),DP=M5(),jY=/^u?int(?<length>[0-9]*)?$/u,$Ce=e=>!e.startsWith("u");y0.isSigned=$Ce;var DCe=e=>{if(e==="int"||e==="uint")return 256;let t=e.match(jY);(0,Kr.assert)(t?.groups?.length,new np.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));let n=parseInt(t.groups.length,10);return(0,Kr.assert)(n>=8&&n<=256,new np.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,Kr.assert)(n%8===0,new np.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),n};y0.getLength=DCe;var MCe=(e,t)=>{let n=(0,y0.getLength)(t),r=BigInt(2)**BigInt(n-((0,y0.isSigned)(t)?1:0))-BigInt(1);if((0,y0.isSigned)(t)){(0,Kr.assert)(e>=-(r+BigInt(1))&&e<=r,new np.ParserError(`Number "${e}" is out of range for type "${t}".`));return}(0,Kr.assert)(e<=r,new np.ParserError(`Number "${e}" is out of range for type "${t}".`))};y0.assertNumberLength=MCe;var OCe=e=>{try{return(0,Kr.createBigInt)(e)}catch{throw new np.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}};y0.getBigInt=OCe;y0.number={isDynamic:!1,isType(e){return jY.test(e)},getByteLength(){return 32},encode({type:e,buffer:t,value:n,packed:r}){let a=(0,y0.getBigInt)(n);if((0,y0.assertNumberLength)(a,e),(0,y0.isSigned)(e)){if(r){let s=(0,y0.getLength)(e)/8;return(0,Kr.concatBytes)([t,(0,Kr.signedBigIntToBytes)(a,s)])}return(0,Kr.concatBytes)([t,(0,DP.padStart)((0,Kr.signedBigIntToBytes)(a,32))])}if(r){let s=(0,y0.getLength)(e)/8;return(0,Kr.concatBytes)([t,(0,DP.padStart)((0,Kr.bigIntToBytes)(a),s)])}return(0,Kr.concatBytes)([t,(0,DP.padStart)((0,Kr.bigIntToBytes)(a))])},decode({type:e,value:t}){let n=t.subarray(0,32);if((0,y0.isSigned)(e)){let a=(0,Kr.bytesToSignedBigInt)(n);return(0,y0.assertNumberLength)(a,e),a}let r=(0,Kr.bytesToBigInt)(n);return(0,y0.assertNumberLength)(r,e),r}}});var VY=L(N5=>{"use strict";Object.defineProperty(N5,"__esModule",{value:!0});N5.bool=N5.getBooleanValue=void 0;var rp=Go(),qY=Ta(),NCe=Zo(),GY=MP(),LCe=(0,rp.coerce)((0,rp.boolean)(),(0,rp.union)([(0,rp.literal)("true"),(0,rp.literal)("false")]),e=>e==="true"),BCe=e=>{try{return(0,rp.create)(e,LCe)?BigInt(1):BigInt(0)}catch{throw new NCe.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}};N5.getBooleanValue=BCe;N5.bool={isDynamic:!1,isType:e=>e==="bool",getByteLength(){return 32},encode({buffer:e,value:t,packed:n,tight:r}){let a=(0,N5.getBooleanValue)(t);return n?(0,qY.concatBytes)([e,(0,qY.bigIntToBytes)(a)]):GY.number.encode({type:"uint256",buffer:e,value:a,packed:n,tight:r})},decode(e){return GY.number.decode({...e,type:"uint256"})===BigInt(1)}}});var OP=L(a7=>{"use strict";Object.defineProperty(a7,"__esModule",{value:!0});a7.bytes=void 0;var n2=Ta(),WY=M5();a7.bytes={isDynamic:!0,isType:e=>e==="bytes",getByteLength(){return 32},encode({buffer:e,value:t,packed:n}){let r=(0,n2.createBytes)(t);if(n)return(0,n2.concatBytes)([e,r]);let a=Math.ceil(r.byteLength/32)*32;return(0,n2.concatBytes)([e,(0,WY.padStart)((0,n2.numberToBytes)(r.byteLength)),(0,WY.padEnd)(r,a)])},decode({value:e}){let t=e.subarray(0,32),n=(0,n2.bytesToNumber)(t);return e.slice(32,32+n)}}});var ZY=L(L5=>{"use strict";Object.defineProperty(L5,"__esModule",{value:!0});L5.fn=L5.getFunction=void 0;var r2=Go(),fo=Ta(),UCe=Zo(),HCe=n7(),FCe=(0,r2.coerce)((0,r2.object)({address:fo.StrictHexStruct,selector:fo.StrictHexStruct}),(0,r2.union)([fo.StrictHexStruct,(0,r2.instance)(Uint8Array)]),e=>{let t=(0,fo.createBytes)(e);return(0,fo.assert)(t.length===24,new UCe.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,fo.bytesToHex)(t.subarray(0,20)),selector:(0,fo.bytesToHex)(t.subarray(20,24))}}),zCe=e=>{let t=(0,r2.create)(e,FCe);return(0,fo.concatBytes)([(0,fo.hexToBytes)(t.address),(0,fo.hexToBytes)(t.selector)])};L5.getFunction=zCe;L5.fn={isDynamic:!1,isType:e=>e==="function",getByteLength(){return 32},encode({buffer:e,value:t,packed:n,tight:r}){let a=(0,L5.getFunction)(t);return HCe.fixedBytes.encode({type:"bytes24",buffer:e,value:a,packed:n,tight:r})},decode({value:e}){return{address:(0,fo.bytesToHex)(e.slice(0,20)),selector:(0,fo.bytesToHex)(e.slice(20,24))}}}});var XY=L(KY=>{"use strict";Object.defineProperty(KY,"__esModule",{value:!0})});var YY=L(s7=>{"use strict";Object.defineProperty(s7,"__esModule",{value:!0});s7.string=void 0;var JY=Ta(),QY=OP();s7.string={isDynamic:!0,isType:e=>e==="string",getByteLength(){return 32},encode({buffer:e,value:t,packed:n,tight:r}){return QY.bytes.encode({type:"bytes",buffer:e,value:(0,JY.stringToBytes)(t),packed:n,tight:r})},decode(e){return(0,JY.bytesToString)(QY.bytes.decode(e))}}});var eee=L(Xr=>{"use strict";var jCe=Xr&&Xr.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Ui=Xr&&Xr.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&jCe(t,e,n)};Object.defineProperty(Xr,"__esModule",{value:!0});Ui(NY(),Xr);Ui(zY(),Xr);Ui(VY(),Xr);Ui(OP(),Xr);Ui(n7(),Xr);Ui(ZY(),Xr);Ui(MP(),Xr);Ui(XY(),Xr);Ui(YY(),Xr);Ui(RP(),Xr)});var r7=L(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.unpack=ss.pack=ss.isDynamicParser=ss.getParser=void 0;var B5=Ta(),o7=Zo(),qCe=$Y(),J1=eee(),tee=M5(),GCe=e=>{let t={address:J1.address,array:J1.array,bool:J1.bool,bytes:J1.bytes,fixedBytes:J1.fixedBytes,function:J1.fn,number:J1.number,string:J1.string,tuple:J1.tuple},n=t[e];if(n)return n;let r=Object.values(t).find(a=>a.isType(e));if(r)return r;throw new o7.ParserError(`The type "${e}" is not supported.`)};ss.getParser=GCe;var VCe=(e,t)=>{let{isDynamic:n}=e;return typeof n=="function"?n(t):n};ss.isDynamicParser=VCe;var WCe=({types:e,values:t,packed:n=!1,tight:r=!1,arrayPacked:a=!1,byteArray:s=new Uint8Array})=>{(0,B5.assert)(e.length===t.length,new o7.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));let{staticBuffer:o,dynamicBuffer:i,pointers:u}=e.reduce(({staticBuffer:p,dynamicBuffer:y,pointers:m},g,h)=>{let w=(0,ss.getParser)(g),v=t[h];if(n||a||!(0,ss.isDynamicParser)(w,g))return{staticBuffer:w.encode({buffer:p,value:v,type:g,packed:n,tight:r}),dynamicBuffer:y,pointers:m};let T=(0,B5.concatBytes)([p,new Uint8Array(32)]),A=w.encode({buffer:y,value:v,type:g,packed:n,tight:r});return{staticBuffer:T,dynamicBuffer:A,pointers:[...m,{position:p.length,pointer:y.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,B5.assert)(!n&&!a||i.length===0,new o7.ParserError("Invalid pack state."));let d=o.length,l=u.reduce((p,{pointer:y,position:m})=>{let g=(0,tee.padStart)((0,B5.numberToBytes)(d+y));return(0,tee.set)(p,g,m)},o);return(0,B5.concatBytes)([s,l,i])};ss.pack=WCe;var ZCe=(e,t)=>{let n=(0,qCe.iterate)(t);return e.map(r=>{let{value:{value:a,skip:s},done:o}=n.next();(0,B5.assert)(!o,new o7.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${r}".`));let i=(0,ss.getParser)(r);if((0,ss.isDynamicParser)(i,r)){let d=(0,B5.bytesToNumber)(a.subarray(0,32)),l=t.subarray(d);return i.decode({type:r,value:l,skip:s})}return i.decode({type:r,value:a,skip:s})})};ss.unpack=ZCe});var aee=L(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.decodeSingle=Sa.decode=Sa.encodePacked=Sa.encodeSingle=Sa.encode=void 0;var nee=Ta(),Q1=Zo(),ree=r7(),KCe=(e,t,n,r)=>{try{return(0,ree.pack)({types:e,values:t,packed:n,tight:r})}catch(a){throw a instanceof Q1.ParserError?new Q1.ParserError(`Unable to encode value: ${a.message}`,a):new Q1.ParserError(`An unexpected error occurred: ${(0,Q1.getErrorMessage)(a)}`,a)}};Sa.encode=KCe;var XCe=(e,t)=>(0,Sa.encode)([e],[t]);Sa.encodeSingle=XCe;var JCe=(e,t,n)=>(0,Sa.encode)(e,t,!0,n);Sa.encodePacked=JCe;var QCe=(e,t)=>{let n=(0,nee.createBytes)(t);try{return(0,ree.unpack)(e,n)}catch(r){throw r instanceof Q1.ParserError?new Q1.ParserError(`Unable to decode value: ${r.message}`,r):new Q1.ParserError(`An unexpected error occurred: ${(0,Q1.getErrorMessage)(r)}`,r)}};Sa.decode=QCe;var YCe=(e,t)=>{let n=(0,Sa.decode)([e],t);return(0,nee.assert)(n.length===1,new Q1.ParserError("Decoded value array has unexpected length.")),n[0]};Sa.decodeSingle=YCe});var oee=L(see=>{"use strict";Object.defineProperty(see,"__esModule",{value:!0})});var iee=L(U5=>{"use strict";var ePe=U5&&U5.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),tPe=U5&&U5.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ePe(t,e,n)};Object.defineProperty(U5,"__esModule",{value:!0});tPe(oee(),U5)});var cee=L(Y1=>{"use strict";var nPe=Y1&&Y1.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),NP=Y1&&Y1.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&nPe(t,e,n)};Object.defineProperty(Y1,"__esModule",{value:!0});NP(aee(),Y1);NP(Zo(),Y1);NP(iee(),Y1)});var CR={};ni(CR,{buildHeaders:()=>kR,buildUrl:()=>a0e,executeDataRequest:()=>s0e,executeQuoteRequest:()=>IR,executeQuoteWithFallback:()=>tHe,executeWithAdapter:()=>rHe,extractValue:()=>n0e,mapRequest:()=>r0e,mapResponse:()=>ER});async function e0e(e){let t=await q();if(!t)return{error:{success:!1,error:"Config not loaded. Run setup_wallet first.",provider:"none",latencyMs:0}};let n=UZ(e,t.providers);return n.length===0?{error:{success:!1,error:`No ${e} adapters configured. Run /pragma:providers to set up.`,provider:"none",latencyMs:0}}:{adapters:n,config:t}}function t0e(e,t,n){return{success:!1,error:e,provider:t,latencyMs:Date.now()-n}}function n0e(e,t){if(!t.startsWith("$"))return t;let n=t.slice(1);if(n.startsWith(".")&&(n=n.slice(1)),!n)return e;let r=[],a="",s=!1;for(let i of n)i==="["&&!s?(a&&(r.push(a),a=""),s=!0):i==="]"&&s?(r.push(a.replace(/^['"]|['"]$/g,"")),a="",s=!1):i==="."&&!s?a&&(r.push(a),a=""):a+=i;a&&r.push(a);let o=e;for(let i of r){if(o==null)return;let u=parseInt(i,10);if(!isNaN(u)&&Array.isArray(o))o=o[u];else if(typeof o=="object")o=o[i];else return}return o}function r0e(e,t){let n={};for(let[r,a]of Object.entries(t)){let s=a.match(/^\{(\w+)\}$/);if(s){let o=s[1],i=e[o];i!=null&&(n[r]=String(i))}else n[r]=a}return n}function ER(e,t){let n={};for(let[r,a]of Object.entries(t)){let s=n0e(e,a);s!==void 0&&(n[r]=s)}return n}async function kR(e){let t={Accept:"application/json","Content-Type":"application/json",...e.headers};if(e.auth.type==="header"||e.auth.type==="bearer"){let{getProvider:n}=await Promise.resolve().then(()=>(t0(),Gm)),r=await n(e.auth.keyName);if(!r)throw new Error(`API key not found for adapter "${e.name}". Store it with: pragma-signer store-provider ${e.auth.keyName} "YOUR_KEY"`);e.auth.type==="bearer"?t.Authorization=`Bearer ${r}`:e.auth.header&&(t[e.auth.header]=r)}return t}async function a0e(e,t,n){let r=new URL(e);for(let[a,s]of Object.entries(t))r.searchParams.set(a,s);if(n.auth.type==="query"&&n.auth.queryParam){let{getProvider:a}=await Promise.resolve().then(()=>(t0(),Gm)),s=await a(n.auth.keyName);if(!s)throw new Error(`API key not found for adapter "${n.name}". Store it with: pragma-signer store-provider ${n.auth.keyName} "YOUR_KEY"`);r.searchParams.set(n.auth.queryParam,s)}return r.toString()}async function IR(e,t){let n=Date.now();try{if(!t.chainIds.includes(e.chainId))return{success:!1,error:`Adapter "${t.name}" does not support chain ${e.chainId}`,provider:t.name,latencyMs:Date.now()-n};let r=r0e({sellToken:e.sellToken,buyToken:e.buyToken,sellAmount:e.sellAmount,sender:e.sender,slippageBps:e.slippageBps,chainId:e.chainId},t.request),a=await a0e(t.endpoint,r,t),s=await kR(t);console.error(`[adapters] Fetching quote from ${t.name}: ${a}`);let o=await O0(async()=>{let l=await fetch(a,{method:"GET",headers:s});if(!l.ok){let p=await l.text();throw new Error(`${t.name} API error (${l.status}): ${p}`)}return l.json()},{operationName:`quote-${t.name}`});if(!o.success)return{success:!1,error:o.error?.message??"Unknown error",provider:t.name,latencyMs:Date.now()-n};let i=o.data,u=ER(i,t.response);return!u.buyAmount||!u.calldata||!u.router?{success:!1,error:`Invalid response from ${t.name}: missing required fields`,provider:t.name,latencyMs:Date.now()-n}:{success:!0,data:{buyAmount:String(u.buyAmount),minBuyAmount:String(u.minBuyAmount||u.buyAmount),router:xe(String(u.router)),calldata:String(u.calldata),value:String(u.value||"0"),gas:String(u.gas||"300000"),liquidityAvailable:u.liquidityAvailable!==!1},provider:t.name,latencyMs:Date.now()-n}}catch(r){return{success:!1,error:r instanceof Error?r.message:String(r),provider:t.name,latencyMs:Date.now()-n}}}async function tHe(e){let t=await e0e("quote");if("error"in t)return t.error;let n=[];for(let r of t.adapters){console.error(`[adapters] Trying quote adapter: ${r.name}`);let a=await IR(e,r);if(a.success)return a;n.push(`${r.name}: ${a.error}`),console.error(`[adapters] Adapter ${r.name} failed: ${a.error}`)}return t0e(`All quote adapters failed: ${n.join("; ")}`,"none",Date.now())}function nHe(e,t){if(!t.pathMappings)return e;for(let[n,r]of Object.entries(t.pathMappings)){let a=n.replace(/\{(\w+)\}/g,"([^/]+)").replace(/\//g,"\\/"),s=new RegExp(`^${a}`),o=e.match(s);if(o){let i=r;for(let u=1;u<o.length;u++)i=i.replace(`{${u}}`,o[u]);return i}}return e}async function s0e(e){let t=Date.now(),n=await e0e("data");if("error"in n)return n.error;let r=[];for(let a of n.adapters)try{if(!a.chainIds.includes(e.chainId)){r.push(`${a.name}: does not support chain ${e.chainId}`);continue}let s=nHe(e.path,a);if(e.params)for(let[p,y]of Object.entries(e.params))s=s.replace(`{${p}}`,y);let o=`${a.endpoint}${s}`,i=await kR(a);console.error(`[adapters] Fetching data from ${a.name}: ${o}`);let u=await O0(async()=>{let p=await fetch(o,{method:"GET",headers:i});if(!p.ok)throw new Error(`${a.name}: API error (${p.status}): ${await p.text()}`);return p.json()},{operationName:`data-${a.name}`});if(!u.success){r.push(u.error?.message??"Unknown error");continue}let d=u.data;return{success:!0,data:Object.keys(a.response).length>0?ER(d,a.response):d,provider:a.name,latencyMs:Date.now()-t}}catch(s){r.push(`${a.name}: ${s instanceof Error?s.message:String(s)}`)}return t0e(`All data adapters failed: ${r.join("; ")}`,"none",t)}async function rHe(e,t,n){let r=sx(e,t);return r?e==="quote"?IR(n,r):s0e(n):{success:!1,error:`Adapter not found: ${e}/${t}`,provider:t,latencyMs:0}}var PR=I(()=>{"use strict";Y();hC();Te();m0()});var C={};ni(C,{BRAND:()=>Xde,DIRTY:()=>uu,EMPTY_PATH:()=>Ide,INVALID:()=>nt,NEVER:()=>Dfe,OK:()=>Ir,ParseStatus:()=>br,Schema:()=>$t,ZodAny:()=>vc,ZodArray:()=>i1,ZodBigInt:()=>fu,ZodBoolean:()=>lu,ZodBranded:()=>Hp,ZodCatch:()=>Su,ZodDate:()=>pu,ZodDefault:()=>Tu,ZodDiscriminatedUnion:()=>jy,ZodEffects:()=>Us,ZodEnum:()=>wu,ZodError:()=>Oa,ZodFirstPartyTypeKind:()=>pe,ZodFunction:()=>Gy,ZodIntersection:()=>gu,ZodIssueCode:()=>fe,ZodLazy:()=>hu,ZodLiteral:()=>xu,ZodMap:()=>xd,ZodNaN:()=>vd,ZodNativeEnum:()=>vu,ZodNever:()=>To,ZodNull:()=>bu,ZodNullable:()=>si,ZodNumber:()=>du,ZodObject:()=>La,ZodOptional:()=>Na,ZodParsedType:()=>ke,ZodPipeline:()=>Fp,ZodPromise:()=>Tc,ZodReadonly:()=>Au,ZodRecord:()=>qy,ZodSchema:()=>$t,ZodSet:()=>wd,ZodString:()=>wc,ZodSymbol:()=>gd,ZodTransformer:()=>Us,ZodTuple:()=>ai,ZodType:()=>$t,ZodUndefined:()=>mu,ZodUnion:()=>yu,ZodUnknown:()=>o1,ZodVoid:()=>hd,addIssueToContext:()=>he,any:()=>sfe,array:()=>ufe,bigint:()=>efe,boolean:()=>lO,coerce:()=>$fe,custom:()=>uO,date:()=>tfe,datetimeRegex:()=>iO,defaultErrorMap:()=>a1,discriminatedUnion:()=>lfe,effect:()=>Afe,enum:()=>vfe,function:()=>hfe,getErrorMap:()=>md,getParsedType:()=>ri,instanceof:()=>Qde,intersection:()=>pfe,isAborted:()=>Fy,isAsync:()=>bd,isDirty:()=>zy,isValid:()=>xc,late:()=>Jde,lazy:()=>xfe,literal:()=>wfe,makeIssue:()=>Up,map:()=>yfe,nan:()=>Yde,nativeEnum:()=>Tfe,never:()=>ife,null:()=>afe,nullable:()=>Efe,number:()=>fO,object:()=>yv,objectUtil:()=>pv,oboolean:()=>Rfe,onumber:()=>Pfe,optional:()=>_fe,ostring:()=>Cfe,pipeline:()=>Ife,preprocess:()=>kfe,promise:()=>Sfe,quotelessJson:()=>_de,record:()=>bfe,set:()=>gfe,setErrorMap:()=>kde,strictObject:()=>dfe,string:()=>dO,symbol:()=>nfe,transformer:()=>Afe,tuple:()=>mfe,undefined:()=>rfe,union:()=>ffe,unknown:()=>ofe,util:()=>qt,void:()=>cfe});var qt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{let s={};for(let o of a)s[o]=o;return s},e.getValidEnumValues=a=>{let s=e.objectKeys(a).filter(i=>typeof a[a[i]]!="number"),o={};for(let i of s)o[i]=a[i];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(s){return a[s]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{let s=[];for(let o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.push(o);return s},e.find=(a,s)=>{for(let o of a)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,s=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(qt||(qt={}));var pv;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(pv||(pv={}));var ke=qt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ri=e=>{switch(typeof e){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return Number.isNaN(e)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(e)?ke.array:e===null?ke.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ke.promise:typeof Map<"u"&&e instanceof Map?ke.map:typeof Set<"u"&&e instanceof Set?ke.set:typeof Date<"u"&&e instanceof Date?ke.date:ke.object;default:return ke.unknown}};var fe=qt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_de=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Oa=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){let n=t||function(s){return s.message},r={_errors:[]},a=s=>{for(let o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let i=r,u=0;for(;u<o.path.length;){let d=o.path[u];u===o.path.length-1?(i[d]=i[d]||{_errors:[]},i[d]._errors.push(n(o))):i[d]=i[d]||{_errors:[]},i=i[d],u++}}};return a(this),r}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){let n={},r=[];for(let a of this.issues)if(a.path.length>0){let s=a.path[0];n[s]=n[s]||[],n[s].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Oa.create=e=>new Oa(e);var Ede=(e,t)=>{let n;switch(e.code){case fe.invalid_type:e.received===ke.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,qt.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${qt.joinValues(e.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${qt.joinValues(e.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${qt.joinValues(e.options)}, received '${e.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:qt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case fe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case fe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=t.defaultError,qt.assertNever(e)}return{message:n}},a1=Ede;var nO=a1;function kde(e){nO=e}function md(){return nO}var Up=e=>{let{data:t,path:n,errorMaps:r,issueData:a}=e,s=[...n,...a.path||[]],o={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let i="",u=r.filter(d=>!!d).slice().reverse();for(let d of u)i=d(o,{data:t,defaultError:i}).message;return{...a,path:s,message:i}},Ide=[];function he(e,t){let n=md(),r=Up({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===a1?void 0:a1].filter(a=>!!a)});e.common.issues.push(r)}var br=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){let r=[];for(let a of n){if(a.status==="aborted")return nt;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){let r=[];for(let a of n){let s=await a.key,o=await a.value;r.push({key:s,value:o})}return e.mergeObjectSync(t,r)}static mergeObjectSync(t,n){let r={};for(let a of n){let{key:s,value:o}=a;if(s.status==="aborted"||o.status==="aborted")return nt;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[s.value]=o.value)}return{status:t.value,value:r}}},nt=Object.freeze({status:"aborted"}),uu=e=>({status:"dirty",value:e}),Ir=e=>({status:"valid",value:e}),Fy=e=>e.status==="aborted",zy=e=>e.status==="dirty",xc=e=>e.status==="valid",bd=e=>typeof Promise<"u"&&e instanceof Promise;var Ne;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Ne||(Ne={}));var Bs=class{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},rO=(e,t)=>{if(xc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new Oa(e.common.issues);return this._error=n,this._error}}};function At(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,i)=>{let{message:u}=e;return o.code==="invalid_enum_value"?{message:u??i.defaultError}:typeof i.data>"u"?{message:u??r??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:u??n??i.defaultError}},description:a}}var $t=class{get description(){return this._def.description}_getType(t){return ri(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:ri(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new br,ctx:{common:t.parent.common,data:t.data,parsedType:ri(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let n=this._parse(t);if(bd(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){let n=this._parse(t);return Promise.resolve(n)}parse(t,n){let r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ri(t)},a=this._parseSync({data:t,path:r.path,parent:r});return rO(r,a)}"~validate"(t){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ri(t)};if(!this["~standard"].async)try{let r=this._parseSync({data:t,path:[],parent:n});return xc(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(r=>xc(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(t,n){let r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ri(t)},a=this._parse({data:t,path:r.path,parent:r}),s=await(bd(a)?a:Promise.resolve(a));return rO(r,s)}refine(t,n){let r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,s)=>{let o=t(a),i=()=>s.addIssue({code:fe.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Us({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Na.create(this,this._def)}nullable(){return si.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return i1.create(this)}promise(){return Tc.create(this,this._def)}or(t){return yu.create([this,t],this._def)}and(t){return gu.create(this,t,this._def)}transform(t){return new Us({...At(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let n=typeof t=="function"?t:()=>t;return new Tu({...At(this._def),innerType:this,defaultValue:n,typeName:pe.ZodDefault})}brand(){return new Hp({typeName:pe.ZodBranded,type:this,...At(this._def)})}catch(t){let n=typeof t=="function"?t:()=>t;return new Su({...At(this._def),innerType:this,catchValue:n,typeName:pe.ZodCatch})}describe(t){let n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Fp.create(this,t)}readonly(){return Au.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Cde=/^c[^\s-]{8,}$/i,Pde=/^[0-9a-z]+$/,Rde=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$de=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dde=/^[a-z0-9_-]{21}$/i,Mde=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ode=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nde=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Lde="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",mv,Bde=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ude=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hde=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Fde=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zde=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jde=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,sO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qde=new RegExp(`^${sO}$`);function oO(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function Gde(e){return new RegExp(`^${oO(e)}$`)}function iO(e){let t=`${sO}T${oO(e)}`,n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Vde(e,t){return!!((t==="v4"||!t)&&Bde.test(e)||(t==="v6"||!t)&&Hde.test(e))}function Wde(e,t){if(!Mde.test(e))return!1;try{let[n]=e.split(".");if(!n)return!1;let r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function Zde(e,t){return!!((t==="v4"||!t)&&Ude.test(e)||(t==="v6"||!t)&&Fde.test(e))}var wc=class e extends $t{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ke.string){let s=this._getOrReturnCtx(t);return he(s,{code:fe.invalid_type,expected:ke.string,received:s.parsedType}),nt}let r=new br,a;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(a=this._getOrReturnCtx(t,a),he(a,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(a=this._getOrReturnCtx(t,a),he(a,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){let o=t.data.length>s.value,i=t.data.length<s.value;(o||i)&&(a=this._getOrReturnCtx(t,a),o?he(a,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&he(a,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Nde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"email",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")mv||(mv=new RegExp(Lde,"u")),mv.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"emoji",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")$de.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"uuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Dde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"nanoid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Cde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"cuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Pde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"cuid2",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Rde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"ulid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),he(a,{validation:"url",code:fe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"regex",code:fe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?iO(s).test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?qde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?Gde(s).test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{code:fe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Ode.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"duration",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?Vde(t.data,s.version)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"ip",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Wde(t.data,s.alg)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"jwt",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Zde(t.data,s.version)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"cidr",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?zde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"base64",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?jde.test(t.data)||(a=this._getOrReturnCtx(t,a),he(a,{validation:"base64url",code:fe.invalid_string,message:s.message}),r.dirty()):qt.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:fe.invalid_string,...Ne.errToObj(r)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ne.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ne.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ne.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ne.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ne.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ne.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ne.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ne.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ne.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ne.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ne.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ne.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ne.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Ne.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Ne.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Ne.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Ne.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...Ne.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Ne.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Ne.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Ne.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Ne.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Ne.errToObj(n)})}nonempty(t){return this.min(1,Ne.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};wc.create=e=>new wc({checks:[],typeName:pe.ZodString,coerce:e?.coerce??!1,...At(e)});function Kde(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,s=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return s%o/10**a}var du=class e extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ke.number){let s=this._getOrReturnCtx(t);return he(s,{code:fe.invalid_type,expected:ke.number,received:s.parsedType}),nt}let r,a=new br;for(let s of this._def.checks)s.kind==="int"?qt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),he(r,{code:fe.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?Kde(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),he(r,{code:fe.not_finite,message:s.message}),a.dirty()):qt.assertNever(s);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Ne.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ne.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ne.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ne.toString(n))}setLimit(t,n,r,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Ne.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ne.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ne.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Ne.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(t)})}get minValue(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&qt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};du.create=e=>new du({checks:[],typeName:pe.ZodNumber,coerce:e?.coerce||!1,...At(e)});var fu=class e extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ke.bigint)return this._getInvalidInput(t);let r,a=new br;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),he(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):qt.assertNever(s);return{status:a.value,value:t.data}}_getInvalidInput(t){let n=this._getOrReturnCtx(t);return he(n,{code:fe.invalid_type,expected:ke.bigint,received:n.parsedType}),nt}gte(t,n){return this.setLimit("min",t,!0,Ne.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ne.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ne.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ne.toString(n))}setLimit(t,n,r,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Ne.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ne.toString(n)})}get minValue(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};fu.create=e=>new fu({checks:[],typeName:pe.ZodBigInt,coerce:e?.coerce??!1,...At(e)});var lu=class extends $t{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ke.boolean){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.boolean,received:r.parsedType}),nt}return Ir(t.data)}};lu.create=e=>new lu({typeName:pe.ZodBoolean,coerce:e?.coerce||!1,...At(e)});var pu=class e extends $t{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ke.date){let s=this._getOrReturnCtx(t);return he(s,{code:fe.invalid_type,expected:ke.date,received:s.parsedType}),nt}if(Number.isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return he(s,{code:fe.invalid_date}),nt}let r=new br,a;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(a=this._getOrReturnCtx(t,a),he(a,{code:fe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(a=this._getOrReturnCtx(t,a),he(a,{code:fe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):qt.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Ne.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Ne.toString(n)})}get minDate(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}};pu.create=e=>new pu({checks:[],coerce:e?.coerce||!1,typeName:pe.ZodDate,...At(e)});var gd=class extends $t{_parse(t){if(this._getType(t)!==ke.symbol){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.symbol,received:r.parsedType}),nt}return Ir(t.data)}};gd.create=e=>new gd({typeName:pe.ZodSymbol,...At(e)});var mu=class extends $t{_parse(t){if(this._getType(t)!==ke.undefined){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.undefined,received:r.parsedType}),nt}return Ir(t.data)}};mu.create=e=>new mu({typeName:pe.ZodUndefined,...At(e)});var bu=class extends $t{_parse(t){if(this._getType(t)!==ke.null){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.null,received:r.parsedType}),nt}return Ir(t.data)}};bu.create=e=>new bu({typeName:pe.ZodNull,...At(e)});var vc=class extends $t{constructor(){super(...arguments),this._any=!0}_parse(t){return Ir(t.data)}};vc.create=e=>new vc({typeName:pe.ZodAny,...At(e)});var o1=class extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ir(t.data)}};o1.create=e=>new o1({typeName:pe.ZodUnknown,...At(e)});var To=class extends $t{_parse(t){let n=this._getOrReturnCtx(t);return he(n,{code:fe.invalid_type,expected:ke.never,received:n.parsedType}),nt}};To.create=e=>new To({typeName:pe.ZodNever,...At(e)});var hd=class extends $t{_parse(t){if(this._getType(t)!==ke.undefined){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.void,received:r.parsedType}),nt}return Ir(t.data)}};hd.create=e=>new hd({typeName:pe.ZodVoid,...At(e)});var i1=class e extends $t{_parse(t){let{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==ke.array)return he(n,{code:fe.invalid_type,expected:ke.array,received:n.parsedType}),nt;if(a.exactLength!==null){let o=n.data.length>a.exactLength.value,i=n.data.length<a.exactLength.value;(o||i)&&(he(n,{code:o?fe.too_big:fe.too_small,minimum:i?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(he(n,{code:fe.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(he(n,{code:fe.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,i)=>a.type._parseAsync(new Bs(n,o,n.path,i)))).then(o=>br.mergeArray(r,o));let s=[...n.data].map((o,i)=>a.type._parseSync(new Bs(n,o,n.path,i)));return br.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new e({...this._def,minLength:{value:t,message:Ne.toString(n)}})}max(t,n){return new e({...this._def,maxLength:{value:t,message:Ne.toString(n)}})}length(t,n){return new e({...this._def,exactLength:{value:t,message:Ne.toString(n)}})}nonempty(t){return this.min(1,t)}};i1.create=(e,t)=>new i1({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...At(t)});function yd(e){if(e instanceof La){let t={};for(let n in e.shape){let r=e.shape[n];t[n]=Na.create(yd(r))}return new La({...e._def,shape:()=>t})}else return e instanceof i1?new i1({...e._def,type:yd(e.element)}):e instanceof Na?Na.create(yd(e.unwrap())):e instanceof si?si.create(yd(e.unwrap())):e instanceof ai?ai.create(e.items.map(t=>yd(t))):e}var La=class e extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),n=qt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==ke.object){let d=this._getOrReturnCtx(t);return he(d,{code:fe.invalid_type,expected:ke.object,received:d.parsedType}),nt}let{status:r,ctx:a}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof To&&this._def.unknownKeys==="strip"))for(let d in a.data)o.includes(d)||i.push(d);let u=[];for(let d of o){let l=s[d],p=a.data[d];u.push({key:{status:"valid",value:d},value:l._parse(new Bs(a,p,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof To){let d=this._def.unknownKeys;if(d==="passthrough")for(let l of i)u.push({key:{status:"valid",value:l},value:{status:"valid",value:a.data[l]}});else if(d==="strict")i.length>0&&(he(a,{code:fe.unrecognized_keys,keys:i}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let l of i){let p=a.data[l];u.push({key:{status:"valid",value:l},value:d._parse(new Bs(a,p,a.path,l)),alwaysSet:l in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let d=[];for(let l of u){let p=await l.key,y=await l.value;d.push({key:p,value:y,alwaysSet:l.alwaysSet})}return d}).then(d=>br.mergeObjectSync(r,d)):br.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return Ne.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{let a=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Ne.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:pe.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let n={};for(let r of qt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new e({...this._def,shape:()=>n})}omit(t){let n={};for(let r of qt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new e({...this._def,shape:()=>n})}deepPartial(){return yd(this)}partial(t){let n={};for(let r of qt.objectKeys(this.shape)){let a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}return new e({...this._def,shape:()=>n})}required(t){let n={};for(let r of qt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Na;)s=s._def.innerType;n[r]=s}return new e({...this._def,shape:()=>n})}keyof(){return cO(qt.objectKeys(this.shape))}};La.create=(e,t)=>new La({shape:()=>e,unknownKeys:"strip",catchall:To.create(),typeName:pe.ZodObject,...At(t)});La.strictCreate=(e,t)=>new La({shape:()=>e,unknownKeys:"strict",catchall:To.create(),typeName:pe.ZodObject,...At(t)});La.lazycreate=(e,t)=>new La({shape:e,unknownKeys:"strip",catchall:To.create(),typeName:pe.ZodObject,...At(t)});var yu=class extends $t{_parse(t){let{ctx:n}=this._processInputParams(t),r=this._def.options;function a(s){for(let i of s)if(i.result.status==="valid")return i.result;for(let i of s)if(i.result.status==="dirty")return n.common.issues.push(...i.ctx.common.issues),i.result;let o=s.map(i=>new Oa(i.ctx.common.issues));return he(n,{code:fe.invalid_union,unionErrors:o}),nt}if(n.common.async)return Promise.all(r.map(async s=>{let o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let s,o=[];for(let u of r){let d={...n,common:{...n.common,issues:[]},parent:null},l=u._parseSync({data:n.data,path:n.path,parent:d});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;let i=o.map(u=>new Oa(u));return he(n,{code:fe.invalid_union,unionErrors:i}),nt}}get options(){return this._def.options}};yu.create=(e,t)=>new yu({options:e,typeName:pe.ZodUnion,...At(t)});var s1=e=>e instanceof hu?s1(e.schema):e instanceof Us?s1(e.innerType()):e instanceof xu?[e.value]:e instanceof wu?e.options:e instanceof vu?qt.objectValues(e.enum):e instanceof Tu?s1(e._def.innerType):e instanceof mu?[void 0]:e instanceof bu?[null]:e instanceof Na?[void 0,...s1(e.unwrap())]:e instanceof si?[null,...s1(e.unwrap())]:e instanceof Hp||e instanceof Au?s1(e.unwrap()):e instanceof Su?s1(e._def.innerType):[],jy=class e extends $t{_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==ke.object)return he(n,{code:fe.invalid_type,expected:ke.object,received:n.parsedType}),nt;let r=this.discriminator,a=n.data[r],s=this.optionsMap.get(a);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(he(n,{code:fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),nt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){let a=new Map;for(let s of n){let o=s1(s.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let i of o){if(a.has(i))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(i)}`);a.set(i,s)}}return new e({typeName:pe.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...At(r)})}};function bv(e,t){let n=ri(e),r=ri(t);if(e===t)return{valid:!0,data:e};if(n===ke.object&&r===ke.object){let a=qt.objectKeys(t),s=qt.objectKeys(e).filter(i=>a.indexOf(i)!==-1),o={...e,...t};for(let i of s){let u=bv(e[i],t[i]);if(!u.valid)return{valid:!1};o[i]=u.data}return{valid:!0,data:o}}else if(n===ke.array&&r===ke.array){if(e.length!==t.length)return{valid:!1};let a=[];for(let s=0;s<e.length;s++){let o=e[s],i=t[s],u=bv(o,i);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===ke.date&&r===ke.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var gu=class extends $t{_parse(t){let{status:n,ctx:r}=this._processInputParams(t),a=(s,o)=>{if(Fy(s)||Fy(o))return nt;let i=bv(s.value,o.value);return i.valid?((zy(s)||zy(o))&&n.dirty(),{status:n.value,value:i.data}):(he(r,{code:fe.invalid_intersection_types}),nt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>a(s,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};gu.create=(e,t,n)=>new gu({left:e,right:t,typeName:pe.ZodIntersection,...At(n)});var ai=class e extends $t{_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ke.array)return he(r,{code:fe.invalid_type,expected:ke.array,received:r.parsedType}),nt;if(r.data.length<this._def.items.length)return he(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),nt;!this._def.rest&&r.data.length>this._def.items.length&&(he(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let s=[...r.data].map((o,i)=>{let u=this._def.items[i]||this._def.rest;return u?u._parse(new Bs(r,o,r.path,i)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>br.mergeArray(n,o)):br.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};ai.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ai({items:e,typeName:pe.ZodTuple,rest:null,...At(t)})};var qy=class e extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ke.object)return he(r,{code:fe.invalid_type,expected:ke.object,received:r.parsedType}),nt;let a=[],s=this._def.keyType,o=this._def.valueType;for(let i in r.data)a.push({key:s._parse(new Bs(r,i,r.path,i)),value:o._parse(new Bs(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?br.mergeObjectAsync(n,a):br.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof $t?new e({keyType:t,valueType:n,typeName:pe.ZodRecord,...At(r)}):new e({keyType:wc.create(),valueType:t,typeName:pe.ZodRecord,...At(n)})}},xd=class extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ke.map)return he(r,{code:fe.invalid_type,expected:ke.map,received:r.parsedType}),nt;let a=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([i,u],d)=>({key:a._parse(new Bs(r,i,r.path,[d,"key"])),value:s._parse(new Bs(r,u,r.path,[d,"value"]))}));if(r.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let u of o){let d=await u.key,l=await u.value;if(d.status==="aborted"||l.status==="aborted")return nt;(d.status==="dirty"||l.status==="dirty")&&n.dirty(),i.set(d.value,l.value)}return{status:n.value,value:i}})}else{let i=new Map;for(let u of o){let d=u.key,l=u.value;if(d.status==="aborted"||l.status==="aborted")return nt;(d.status==="dirty"||l.status==="dirty")&&n.dirty(),i.set(d.value,l.value)}return{status:n.value,value:i}}}};xd.create=(e,t,n)=>new xd({valueType:t,keyType:e,typeName:pe.ZodMap,...At(n)});var wd=class e extends $t{_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ke.set)return he(r,{code:fe.invalid_type,expected:ke.set,received:r.parsedType}),nt;let a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(he(r,{code:fe.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(he(r,{code:fe.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());let s=this._def.valueType;function o(u){let d=new Set;for(let l of u){if(l.status==="aborted")return nt;l.status==="dirty"&&n.dirty(),d.add(l.value)}return{status:n.value,value:d}}let i=[...r.data.values()].map((u,d)=>s._parse(new Bs(r,u,r.path,d)));return r.common.async?Promise.all(i).then(u=>o(u)):o(i)}min(t,n){return new e({...this._def,minSize:{value:t,message:Ne.toString(n)}})}max(t,n){return new e({...this._def,maxSize:{value:t,message:Ne.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}};wd.create=(e,t)=>new wd({valueType:e,minSize:null,maxSize:null,typeName:pe.ZodSet,...At(t)});var Gy=class e extends $t{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==ke.function)return he(n,{code:fe.invalid_type,expected:ke.function,received:n.parsedType}),nt;function r(i,u){return Up({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,md(),a1].filter(d=>!!d),issueData:{code:fe.invalid_arguments,argumentsError:u}})}function a(i,u){return Up({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,md(),a1].filter(d=>!!d),issueData:{code:fe.invalid_return_type,returnTypeError:u}})}let s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Tc){let i=this;return Ir(async function(...u){let d=new Oa([]),l=await i._def.args.parseAsync(u,s).catch(m=>{throw d.addIssue(r(u,m)),d}),p=await Reflect.apply(o,this,l);return await i._def.returns._def.type.parseAsync(p,s).catch(m=>{throw d.addIssue(a(p,m)),d})})}else{let i=this;return Ir(function(...u){let d=i._def.args.safeParse(u,s);if(!d.success)throw new Oa([r(u,d.error)]);let l=Reflect.apply(o,this,d.data),p=i._def.returns.safeParse(l,s);if(!p.success)throw new Oa([a(l,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:ai.create(t).rest(o1.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new e({args:t||ai.create([]).rest(o1.create()),returns:n||o1.create(),typeName:pe.ZodFunction,...At(r)})}},hu=class extends $t{get schema(){return this._def.getter()}_parse(t){let{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};hu.create=(e,t)=>new hu({getter:e,typeName:pe.ZodLazy,...At(t)});var xu=class extends $t{_parse(t){if(t.data!==this._def.value){let n=this._getOrReturnCtx(t);return he(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),nt}return{status:"valid",value:t.data}}get value(){return this._def.value}};xu.create=(e,t)=>new xu({value:e,typeName:pe.ZodLiteral,...At(t)});function cO(e,t){return new wu({values:e,typeName:pe.ZodEnum,...At(t)})}var wu=class e extends $t{_parse(t){if(typeof t.data!="string"){let n=this._getOrReturnCtx(t),r=this._def.values;return he(n,{expected:qt.joinValues(r),received:n.parsedType,code:fe.invalid_type}),nt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let n=this._getOrReturnCtx(t),r=this._def.values;return he(n,{received:n.data,code:fe.invalid_enum_value,options:r}),nt}return Ir(t.data)}get options(){return this._def.values}get enum(){let t={};for(let n of this._def.values)t[n]=n;return t}get Values(){let t={};for(let n of this._def.values)t[n]=n;return t}get Enum(){let t={};for(let n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return e.create(t,{...this._def,...n})}exclude(t,n=this._def){return e.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};wu.create=cO;var vu=class extends $t{_parse(t){let n=qt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){let a=qt.objectValues(n);return he(r,{expected:qt.joinValues(a),received:r.parsedType,code:fe.invalid_type}),nt}if(this._cache||(this._cache=new Set(qt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let a=qt.objectValues(n);return he(r,{received:r.data,code:fe.invalid_enum_value,options:a}),nt}return Ir(t.data)}get enum(){return this._def.values}};vu.create=(e,t)=>new vu({values:e,typeName:pe.ZodNativeEnum,...At(t)});var Tc=class extends $t{unwrap(){return this._def.type}_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==ke.promise&&n.common.async===!1)return he(n,{code:fe.invalid_type,expected:ke.promise,received:n.parsedType}),nt;let r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return Ir(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Tc.create=(e,t)=>new Tc({type:e,typeName:pe.ZodPromise,...At(t)});var Us=class extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,s={addIssue:o=>{he(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){let o=a.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async i=>{if(n.value==="aborted")return nt;let u=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return u.status==="aborted"?nt:u.status==="dirty"?uu(u.value):n.value==="dirty"?uu(u.value):u});{if(n.value==="aborted")return nt;let i=this._def.schema._parseSync({data:o,path:r.path,parent:r});return i.status==="aborted"?nt:i.status==="dirty"?uu(i.value):n.value==="dirty"?uu(i.value):i}}if(a.type==="refinement"){let o=i=>{let u=a.refinement(i,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?nt:(i.status==="dirty"&&n.dirty(),o(i.value),{status:n.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?nt:(i.status==="dirty"&&n.dirty(),o(i.value).then(()=>({status:n.value,value:i.value}))))}if(a.type==="transform")if(r.common.async===!1){let o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xc(o))return nt;let i=a.transform(o.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>xc(o)?Promise.resolve(a.transform(o.value,s)).then(i=>({status:n.value,value:i})):nt);qt.assertNever(a)}};Us.create=(e,t,n)=>new Us({schema:e,typeName:pe.ZodEffects,effect:t,...At(n)});Us.createWithPreprocess=(e,t,n)=>new Us({schema:t,effect:{type:"preprocess",transform:e},typeName:pe.ZodEffects,...At(n)});var Na=class extends $t{_parse(t){return this._getType(t)===ke.undefined?Ir(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Na.create=(e,t)=>new Na({innerType:e,typeName:pe.ZodOptional,...At(t)});var si=class extends $t{_parse(t){return this._getType(t)===ke.null?Ir(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};si.create=(e,t)=>new si({innerType:e,typeName:pe.ZodNullable,...At(t)});var Tu=class extends $t{_parse(t){let{ctx:n}=this._processInputParams(t),r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};Tu.create=(e,t)=>new Tu({innerType:e,typeName:pe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...At(t)});var Su=class extends $t{_parse(t){let{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return bd(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oa(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Oa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Su.create=(e,t)=>new Su({innerType:e,typeName:pe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...At(t)});var vd=class extends $t{_parse(t){if(this._getType(t)!==ke.nan){let r=this._getOrReturnCtx(t);return he(r,{code:fe.invalid_type,expected:ke.nan,received:r.parsedType}),nt}return{status:"valid",value:t.data}}};vd.create=e=>new vd({typeName:pe.ZodNaN,...At(e)});var Xde=Symbol("zod_brand"),Hp=class extends $t{_parse(t){let{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},Fp=class e extends $t{_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?nt:s.status==="dirty"?(n.dirty(),uu(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{let a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?nt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new e({in:t,out:n,typeName:pe.ZodPipeline})}},Au=class extends $t{_parse(t){let n=this._def.innerType._parse(t),r=a=>(xc(a)&&(a.value=Object.freeze(a.value)),a);return bd(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}};Au.create=(e,t)=>new Au({innerType:e,typeName:pe.ZodReadonly,...At(t)});function aO(e,t){let n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function uO(e,t={},n){return e?vc.create().superRefine((r,a)=>{let s=e(r);if(s instanceof Promise)return s.then(o=>{if(!o){let i=aO(t,r),u=i.fatal??n??!0;a.addIssue({code:"custom",...i,fatal:u})}});if(!s){let o=aO(t,r),i=o.fatal??n??!0;a.addIssue({code:"custom",...o,fatal:i})}}):vc.create()}var Jde={object:La.lazycreate},pe;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(pe||(pe={}));var Qde=(e,t={message:`Input not instance of ${e.name}`})=>uO(n=>n instanceof e,t),dO=wc.create,fO=du.create,Yde=vd.create,efe=fu.create,lO=lu.create,tfe=pu.create,nfe=gd.create,rfe=mu.create,afe=bu.create,sfe=vc.create,ofe=o1.create,ife=To.create,cfe=hd.create,ufe=i1.create,yv=La.create,dfe=La.strictCreate,ffe=yu.create,lfe=jy.create,pfe=gu.create,mfe=ai.create,bfe=qy.create,yfe=xd.create,gfe=wd.create,hfe=Gy.create,xfe=hu.create,wfe=xu.create,vfe=wu.create,Tfe=vu.create,Sfe=Tc.create,Afe=Us.create,_fe=Na.create,Efe=si.create,kfe=Us.createWithPreprocess,Ife=Fp.create,Cfe=()=>dO().optional(),Pfe=()=>fO().optional(),Rfe=()=>lO().optional(),$fe={string:(e=>wc.create({...e,coerce:!0})),number:(e=>du.create({...e,coerce:!0})),boolean:(e=>lu.create({...e,coerce:!0})),bigint:(e=>fu.create({...e,coerce:!0})),date:(e=>pu.create({...e,coerce:!0}))};var Dfe=nt;var Mfe=Object.freeze({status:"aborted"});function Q(e,t,n){function r(i,u){var d;Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(d=i._zod).traits??(d.traits=new Set),i._zod.traits.add(e),t(i,u);for(let l in o.prototype)l in i||Object.defineProperty(i,l,{value:o.prototype[l].bind(i)});i._zod.constr=o,i._zod.def=u}let a=n?.Parent??Object;class s extends a{}Object.defineProperty(s,"name",{value:e});function o(i){var u;let d=n?.Parent?new s:this;r(d,i),(u=d._zod).deferred??(u.deferred=[]);for(let l of d._zod.deferred)l();return d}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:i=>n?.Parent&&i instanceof n.Parent?!0:i?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}var c1=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Vy={};function hs(e){return e&&Object.assign(Vy,e),Vy}var Vt={};ni(Vt,{BIGINT_FORMAT_RANGES:()=>mO,Class:()=>hv,NUMBER_FORMAT_RANGES:()=>_v,aborted:()=>Eu,allowsEval:()=>Tv,assert:()=>Ufe,assertEqual:()=>Ofe,assertIs:()=>Lfe,assertNever:()=>Bfe,assertNotEqual:()=>Nfe,assignProp:()=>vv,cached:()=>qp,captureStackTrace:()=>Zy,cleanEnum:()=>Qfe,cleanRegex:()=>Vp,clone:()=>xs,createTransparentProxy:()=>Gfe,defineLazy:()=>On,esc:()=>_u,escapeRegex:()=>Sc,extend:()=>Zfe,finalizeIssue:()=>So,floatSafeRemainder:()=>wv,getElementAtPath:()=>Hfe,getEnumValues:()=>jp,getLengthableOrigin:()=>Wp,getParsedType:()=>qfe,getSizableOrigin:()=>bO,isObject:()=>Td,isPlainObject:()=>Sd,issue:()=>Ev,joinValues:()=>Wy,jsonStringifyReplacer:()=>xv,merge:()=>Kfe,normalizeParams:()=>rt,nullish:()=>Gp,numKeys:()=>jfe,omit:()=>Wfe,optionalKeys:()=>Av,partial:()=>Xfe,pick:()=>Vfe,prefixIssues:()=>oi,primitiveTypes:()=>pO,promiseAllObject:()=>Ffe,propertyKeyTypes:()=>Sv,randomString:()=>zfe,required:()=>Jfe,stringifyPrimitive:()=>Ky,unwrapMessage:()=>zp});function Ofe(e){return e}function Nfe(e){return e}function Lfe(e){}function Bfe(e){throw new Error}function Ufe(e){}function jp(e){let t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,a])=>t.indexOf(+r)===-1).map(([r,a])=>a)}function Wy(e,t="|"){return e.map(n=>Ky(n)).join(t)}function xv(e,t){return typeof t=="bigint"?t.toString():t}function qp(e){return{get value(){{let n=e();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function Gp(e){return e==null}function Vp(e){let t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function wv(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,s=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return s%o/10**a}function On(e,t,n){Object.defineProperty(e,t,{get(){{let a=n();return e[t]=a,a}throw new Error("cached value already set")},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function vv(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Hfe(e,t){return t?t.reduce((n,r)=>n?.[r],e):e}function Ffe(e){let t=Object.keys(e),n=t.map(r=>e[r]);return Promise.all(n).then(r=>{let a={};for(let s=0;s<t.length;s++)a[t[s]]=r[s];return a})}function zfe(e=10){let t="abcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n}function _u(e){return JSON.stringify(e)}var Zy=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Td(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var Tv=qp(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function Sd(e){if(Td(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let n=t.prototype;return!(Td(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function jfe(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}var qfe=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Sv=new Set(["string","number","symbol"]),pO=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Sc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xs(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function rt(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Gfe(e){let t;return new Proxy({},{get(n,r,a){return t??(t=e()),Reflect.get(t,r,a)},set(n,r,a,s){return t??(t=e()),Reflect.set(t,r,a,s)},has(n,r){return t??(t=e()),Reflect.has(t,r)},deleteProperty(n,r){return t??(t=e()),Reflect.deleteProperty(t,r)},ownKeys(n){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(n,r){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,r)},defineProperty(n,r,a){return t??(t=e()),Reflect.defineProperty(t,r,a)}})}function Ky(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function Av(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var _v={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},mO={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Vfe(e,t){let n={},r=e._zod.def;for(let a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(n[a]=r.shape[a])}return xs(e,{...e._zod.def,shape:n,checks:[]})}function Wfe(e,t){let n={...e._zod.def.shape},r=e._zod.def;for(let a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete n[a]}return xs(e,{...e._zod.def,shape:n,checks:[]})}function Zfe(e,t){if(!Sd(t))throw new Error("Invalid input to extend: expected a plain object");let n={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return vv(this,"shape",r),r},checks:[]};return xs(e,n)}function Kfe(e,t){return xs(e,{...e._zod.def,get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return vv(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function Xfe(e,t,n){let r=t._zod.def.shape,a={...r};if(n)for(let s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(a[s]=e?new e({type:"optional",innerType:r[s]}):r[s])}else for(let s in r)a[s]=e?new e({type:"optional",innerType:r[s]}):r[s];return xs(t,{...t._zod.def,shape:a,checks:[]})}function Jfe(e,t,n){let r=t._zod.def.shape,a={...r};if(n)for(let s in n){if(!(s in a))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(a[s]=new e({type:"nonoptional",innerType:r[s]}))}else for(let s in r)a[s]=new e({type:"nonoptional",innerType:r[s]});return xs(t,{...t._zod.def,shape:a,checks:[]})}function Eu(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function oi(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function zp(e){return typeof e=="string"?e:e?.message}function So(e,t,n){let r={...e,path:e.path??[]};if(!e.message){let a=zp(e.inst?._zod.def?.error?.(e))??zp(t?.error?.(e))??zp(n.customError?.(e))??zp(n.localeError?.(e))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function bO(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Wp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ev(...e){let[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}function Qfe(e){return Object.entries(e).filter(([t,n])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}var hv=class{constructor(...t){}};var yO=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,xv,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Xy=Q("$ZodError",yO),Zp=Q("$ZodError",yO,{Parent:Error});function kv(e,t=n=>n.message){let n={},r=[];for(let a of e.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}function Iv(e,t){let n=t||function(s){return s.message},r={_errors:[]},a=s=>{for(let o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(i=>a({issues:i}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)r._errors.push(n(o));else{let i=r,u=0;for(;u<o.path.length;){let d=o.path[u];u===o.path.length-1?(i[d]=i[d]||{_errors:[]},i[d]._errors.push(n(o))):i[d]=i[d]||{_errors:[]},i=i[d],u++}}};return a(e),r}var Cv=e=>(t,n,r,a)=>{let s=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new c1;if(o.issues.length){let i=new(a?.Err??e)(o.issues.map(u=>So(u,s,hs())));throw Zy(i,a?.callee),i}return o.value},Pv=Cv(Zp),Rv=e=>async(t,n,r,a)=>{let s=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise&&(o=await o),o.issues.length){let i=new(a?.Err??e)(o.issues.map(u=>So(u,s,hs())));throw Zy(i,a?.callee),i}return o.value},$v=Rv(Zp),Dv=e=>(t,n,r)=>{let a=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new c1;return s.issues.length?{success:!1,error:new(e??Xy)(s.issues.map(o=>So(o,a,hs())))}:{success:!0,data:s.value}},ku=Dv(Zp),Mv=e=>async(t,n,r)=>{let a=r?Object.assign(r,{async:!0}):{async:!0},s=t._zod.run({value:n,issues:[]},a);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(o=>So(o,a,hs())))}:{success:!0,data:s.value}},Iu=Mv(Zp);var gO=/^[cC][^\s-]{8,}$/,hO=/^[0-9a-z]+$/,xO=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wO=/^[0-9a-vA-V]{20}$/,vO=/^[A-Za-z0-9]{27}$/,TO=/^[a-zA-Z0-9_-]{21}$/,SO=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var AO=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ov=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;var _O=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var ele="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function EO(){return new RegExp(ele,"u")}var kO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,CO=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,PO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RO=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Nv=/^[A-Za-z0-9_-]*$/,$O=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var DO=/^\+(?:[0-9]){6,14}[0-9]$/,MO="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",OO=new RegExp(`^${MO}$`);function NO(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function LO(e){return new RegExp(`^${NO(e)}$`)}function BO(e){let t=NO({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");let r=`${t}(?:${n.join("|")})`;return new RegExp(`^${MO}T(?:${r})$`)}var UO=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)};var HO=/^\d+$/,FO=/^-?\d+(?:\.\d+)?/i,zO=/true|false/i,jO=/null/i;var qO=/^[^A-Z]*$/,GO=/^[^a-z]*$/;var yr=Q("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),VO={number:"number",bigint:"bigint",object:"date"},Lv=Q("$ZodCheckLessThan",(e,t)=>{yr.init(e,t);let n=VO[typeof t.value];e._zod.onattach.push(r=>{let a=r._zod.bag,s=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Bv=Q("$ZodCheckGreaterThan",(e,t)=>{yr.init(e,t);let n=VO[typeof t.value];e._zod.onattach.push(r=>{let a=r._zod.bag,s=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),WO=Q("$ZodCheckMultipleOf",(e,t)=>{yr.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):wv(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),ZO=Q("$ZodCheckNumberFormat",(e,t)=>{yr.init(e,t),t.format=t.format||"float64";let n=t.format?.includes("int"),r=n?"int":"number",[a,s]=_v[t.format];e._zod.onattach.push(o=>{let i=o._zod.bag;i.format=t.format,i.minimum=a,i.maximum=s,n&&(i.pattern=HO)}),e._zod.check=o=>{let i=o.value;if(n){if(!Number.isInteger(i)){o.issues.push({expected:r,format:t.format,code:"invalid_type",input:i,inst:e});return}if(!Number.isSafeInteger(i)){i>0?o.issues.push({input:i,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:i,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}i<a&&o.issues.push({origin:"number",input:i,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),i>s&&o.issues.push({origin:"number",input:i,code:"too_big",maximum:s,inst:e})}});var KO=Q("$ZodCheckMaxLength",(e,t)=>{var n;yr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let a=r.value;return!Gp(a)&&a.length!==void 0}),e._zod.onattach.push(r=>{let a=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let a=r.value;if(a.length<=t.maximum)return;let o=Wp(a);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),XO=Q("$ZodCheckMinLength",(e,t)=>{var n;yr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let a=r.value;return!Gp(a)&&a.length!==void 0}),e._zod.onattach.push(r=>{let a=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let a=r.value;if(a.length>=t.minimum)return;let o=Wp(a);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),JO=Q("$ZodCheckLengthEquals",(e,t)=>{var n;yr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let a=r.value;return!Gp(a)&&a.length!==void 0}),e._zod.onattach.push(r=>{let a=r._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=r=>{let a=r.value,s=a.length;if(s===t.length)return;let o=Wp(a),i=s>t.length;r.issues.push({origin:o,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Kp=Q("$ZodCheckStringFormat",(e,t)=>{var n,r;yr.init(e,t),e._zod.onattach.push(a=>{let s=a._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),QO=Q("$ZodCheckRegex",(e,t)=>{Kp.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),YO=Q("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=qO),Kp.init(e,t)}),eN=Q("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=GO),Kp.init(e,t)}),tN=Q("$ZodCheckIncludes",(e,t)=>{yr.init(e,t);let n=Sc(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(a=>{let s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),nN=Q("$ZodCheckStartsWith",(e,t)=>{yr.init(e,t);let n=new RegExp(`^${Sc(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{let a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),rN=Q("$ZodCheckEndsWith",(e,t)=>{yr.init(e,t);let n=new RegExp(`.*${Sc(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{let a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});var aN=Q("$ZodCheckOverwrite",(e,t)=>{yr.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});var Qy=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let r=t.split(`
`).filter(o=>o),a=Math.min(...r.map(o=>o.length-o.trimStart().length)),s=r.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(let o of s)this.content.push(o)}compile(){let t=Function,n=this?.args,a=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...n,a.join(`
`))}};var oN={major:4,minor:0,patch:0};var En=Q("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=oN;let r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(let a of r)for(let s of a._zod.onattach)s(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let a=(s,o,i)=>{let u=Eu(s),d;for(let l of o){if(l._zod.def.when){if(!l._zod.def.when(s))continue}else if(u)continue;let p=s.issues.length,y=l._zod.check(s);if(y instanceof Promise&&i?.async===!1)throw new c1;if(d||y instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await y,s.issues.length!==p&&(u||(u=Eu(s,p)))});else{if(s.issues.length===p)continue;u||(u=Eu(s,p))}}return d?d.then(()=>s):s};e._zod.run=(s,o)=>{let i=e._zod.parse(s,o);if(i instanceof Promise){if(o.async===!1)throw new c1;return i.then(u=>a(u,r,o))}return a(i,r,o)}}e["~standard"]={validate:a=>{try{let s=ku(e,a);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Iu(e,a).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Xp=Q("$ZodString",(e,t)=>{En.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??UO(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Nn=Q("$ZodStringFormat",(e,t)=>{Kp.init(e,t),Xp.init(e,t)}),Hv=Q("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=AO),Nn.init(e,t)}),Fv=Q("$ZodUUID",(e,t)=>{if(t.version){let r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Ov(r))}else t.pattern??(t.pattern=Ov());Nn.init(e,t)}),zv=Q("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=_O),Nn.init(e,t)}),jv=Q("$ZodURL",(e,t)=>{Nn.init(e,t),e._zod.check=n=>{try{let r=n.value,a=new URL(r),s=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:$O.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&s.endsWith("/")?n.value=s.slice(0,-1):n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),qv=Q("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=EO()),Nn.init(e,t)}),Gv=Q("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=TO),Nn.init(e,t)}),Vv=Q("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=gO),Nn.init(e,t)}),Wv=Q("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=hO),Nn.init(e,t)}),Zv=Q("$ZodULID",(e,t)=>{t.pattern??(t.pattern=xO),Nn.init(e,t)}),Kv=Q("$ZodXID",(e,t)=>{t.pattern??(t.pattern=wO),Nn.init(e,t)}),Xv=Q("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=vO),Nn.init(e,t)}),yN=Q("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=BO(t)),Nn.init(e,t)}),gN=Q("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=OO),Nn.init(e,t)}),hN=Q("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=LO(t)),Nn.init(e,t)}),xN=Q("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=SO),Nn.init(e,t)}),Jv=Q("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=kO),Nn.init(e,t),e._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv4"})}),Qv=Q("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=IO),Nn.init(e,t),e._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Yv=Q("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=CO),Nn.init(e,t)}),eT=Q("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=PO),Nn.init(e,t),e._zod.check=n=>{let[r,a]=n.value.split("/");try{if(!a)throw new Error;let s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function wN(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}var tT=Q("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=RO),Nn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{wN(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function tle(e){if(!Nv.test(e))return!1;let t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return wN(n)}var nT=Q("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Nv),Nn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{tle(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),rT=Q("$ZodE164",(e,t)=>{t.pattern??(t.pattern=DO),Nn.init(e,t)});function nle(e,t=null){try{let n=e.split(".");if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let a=JSON.parse(atob(r));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}var aT=Q("$ZodJWT",(e,t)=>{Nn.init(e,t),e._zod.check=n=>{nle(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}});var eg=Q("$ZodNumber",(e,t)=>{En.init(e,t),e._zod.pattern=e._zod.bag.pattern??FO,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let a=n.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return n;let s=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...s?{received:s}:{}}),n}}),sT=Q("$ZodNumber",(e,t)=>{ZO.init(e,t),eg.init(e,t)}),oT=Q("$ZodBoolean",(e,t)=>{En.init(e,t),e._zod.pattern=zO,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}let a=n.value;return typeof a=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),n}});var iT=Q("$ZodNull",(e,t)=>{En.init(e,t),e._zod.pattern=jO,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{let a=n.value;return a===null||n.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),n}});var cT=Q("$ZodUnknown",(e,t)=>{En.init(e,t),e._zod.parse=n=>n}),uT=Q("$ZodNever",(e,t)=>{En.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function iN(e,t,n){e.issues.length&&t.issues.push(...oi(n,e.issues)),t.value[n]=e.value}var dT=Q("$ZodArray",(e,t)=>{En.init(e,t),e._zod.parse=(n,r)=>{let a=n.value;if(!Array.isArray(a))return n.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),n;n.value=Array(a.length);let s=[];for(let o=0;o<a.length;o++){let i=a[o],u=t.element._zod.run({value:i,issues:[]},r);u instanceof Promise?s.push(u.then(d=>iN(d,n,o))):iN(u,n,o)}return s.length?Promise.all(s).then(()=>n):n}});function Yy(e,t,n){e.issues.length&&t.issues.push(...oi(n,e.issues)),t.value[n]=e.value}function cN(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...oi(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}var tg=Q("$ZodObject",(e,t)=>{En.init(e,t);let n=qp(()=>{let p=Object.keys(t.shape);for(let m of p)if(!(t.shape[m]instanceof En))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);let y=Av(t.shape);return{shape:t.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(y)}});On(e._zod,"propValues",()=>{let p=t.shape,y={};for(let m in p){let g=p[m]._zod;if(g.values){y[m]??(y[m]=new Set);for(let h of g.values)y[m].add(h)}}return y});let r=p=>{let y=new Qy(["shape","payload","ctx"]),m=n.value,g=T=>{let A=_u(T);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};y.write("const input = payload.value;");let h=Object.create(null),w=0;for(let T of m.keys)h[T]=`key_${w++}`;y.write("const newResult = {}");for(let T of m.keys)if(m.optionalKeys.has(T)){let A=h[T];y.write(`const ${A} = ${g(T)};`);let _=_u(T);y.write(`
        if (${A}.issues.length) {
          if (input[${_}] === undefined) {
            if (${_} in input) {
              newResult[${_}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${A}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${_}, ...iss.path] : [${_}],
              }))
            );
          }
        } else if (${A}.value === undefined) {
          if (${_} in input) newResult[${_}] = undefined;
        } else {
          newResult[${_}] = ${A}.value;
        }
        `)}else{let A=h[T];y.write(`const ${A} = ${g(T)};`),y.write(`
          if (${A}.issues.length) payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${_u(T)}, ...iss.path] : [${_u(T)}]
          })));`),y.write(`newResult[${_u(T)}] = ${A}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");let v=y.compile();return(T,A)=>v(p,T,A)},a,s=Td,o=!Vy.jitless,u=o&&Tv.value,d=t.catchall,l;e._zod.parse=(p,y)=>{l??(l=n.value);let m=p.value;if(!s(m))return p.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),p;let g=[];if(o&&u&&y?.async===!1&&y.jitless!==!0)a||(a=r(t.shape)),p=a(p,y);else{p.value={};let A=l.shape;for(let _ of l.keys){let E=A[_],O=E._zod.run({value:m[_],issues:[]},y),$=E._zod.optin==="optional"&&E._zod.optout==="optional";O instanceof Promise?g.push(O.then(B=>$?cN(B,p,_,m):Yy(B,p,_))):$?cN(O,p,_,m):Yy(O,p,_)}}if(!d)return g.length?Promise.all(g).then(()=>p):p;let h=[],w=l.keySet,v=d._zod,T=v.def.type;for(let A of Object.keys(m)){if(w.has(A))continue;if(T==="never"){h.push(A);continue}let _=v.run({value:m[A],issues:[]},y);_ instanceof Promise?g.push(_.then(E=>Yy(E,p,A))):Yy(_,p,A)}return h.length&&p.issues.push({code:"unrecognized_keys",keys:h,input:m,inst:e}),g.length?Promise.all(g).then(()=>p):p}});function uN(e,t,n,r){for(let a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(a=>a.issues.map(s=>So(s,r,hs())))}),t}var ng=Q("$ZodUnion",(e,t)=>{En.init(e,t),On(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),On(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),On(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),On(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){let n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>Vp(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let a=!1,s=[];for(let o of t.options){let i=o._zod.run({value:n.value,issues:[]},r);if(i instanceof Promise)s.push(i),a=!0;else{if(i.issues.length===0)return i;s.push(i)}}return a?Promise.all(s).then(o=>uN(o,n,e,r)):uN(s,n,e,r)}}),fT=Q("$ZodDiscriminatedUnion",(e,t)=>{ng.init(e,t);let n=e._zod.parse;On(e._zod,"propValues",()=>{let a={};for(let s of t.options){let o=s._zod.propValues;if(!o||Object.keys(o).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(let[i,u]of Object.entries(o)){a[i]||(a[i]=new Set);for(let d of u)a[i].add(d)}}return a});let r=qp(()=>{let a=t.options,s=new Map;for(let o of a){let i=o._zod.propValues[t.discriminator];if(!i||i.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(let u of i){if(s.has(u))throw new Error(`Duplicate discriminator value "${String(u)}"`);s.set(u,o)}}return s});e._zod.parse=(a,s)=>{let o=a.value;if(!Td(o))return a.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),a;let i=r.value.get(o?.[t.discriminator]);return i?i._zod.run(a,s):t.unionFallback?n(a,s):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:o,path:[t.discriminator],inst:e}),a)}}),lT=Q("$ZodIntersection",(e,t)=>{En.init(e,t),e._zod.parse=(n,r)=>{let a=n.value,s=t.left._zod.run({value:a,issues:[]},r),o=t.right._zod.run({value:a,issues:[]},r);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([u,d])=>dN(n,u,d)):dN(n,s,o)}});function Uv(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Sd(e)&&Sd(t)){let n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),a={...e,...t};for(let s of r){let o=Uv(e[s],t[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};a[s]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<e.length;r++){let a=e[r],s=t[r],o=Uv(a,s);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function dN(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Eu(e))return e;let r=Uv(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}var pT=Q("$ZodRecord",(e,t)=>{En.init(e,t),e._zod.parse=(n,r)=>{let a=n.value;if(!Sd(a))return n.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),n;let s=[];if(t.keyType._zod.values){let o=t.keyType._zod.values;n.value={};for(let u of o)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){let d=t.valueType._zod.run({value:a[u],issues:[]},r);d instanceof Promise?s.push(d.then(l=>{l.issues.length&&n.issues.push(...oi(u,l.issues)),n.value[u]=l.value})):(d.issues.length&&n.issues.push(...oi(u,d.issues)),n.value[u]=d.value)}let i;for(let u in a)o.has(u)||(i=i??[],i.push(u));i&&i.length>0&&n.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:i})}else{n.value={};for(let o of Reflect.ownKeys(a)){if(o==="__proto__")continue;let i=t.keyType._zod.run({value:o,issues:[]},r);if(i instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(i.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:i.issues.map(d=>So(d,r,hs())),input:o,path:[o],inst:e}),n.value[i.value]=i.value;continue}let u=t.valueType._zod.run({value:a[o],issues:[]},r);u instanceof Promise?s.push(u.then(d=>{d.issues.length&&n.issues.push(...oi(o,d.issues)),n.value[i.value]=d.value})):(u.issues.length&&n.issues.push(...oi(o,u.issues)),n.value[i.value]=u.value)}}return s.length?Promise.all(s).then(()=>n):n}});var mT=Q("$ZodEnum",(e,t)=>{En.init(e,t);let n=jp(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>Sv.has(typeof r)).map(r=>typeof r=="string"?Sc(r):r.toString()).join("|")})$`),e._zod.parse=(r,a)=>{let s=r.value;return e._zod.values.has(s)||r.issues.push({code:"invalid_value",values:n,input:s,inst:e}),r}}),bT=Q("$ZodLiteral",(e,t)=>{En.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Sc(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{let a=n.value;return e._zod.values.has(a)||n.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),n}});var yT=Q("$ZodTransform",(e,t)=>{En.init(e,t),e._zod.parse=(n,r)=>{let a=t.transform(n.value,n);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(n.value=o,n));if(a instanceof Promise)throw new c1;return n.value=a,n}}),gT=Q("$ZodOptional",(e,t)=>{En.init(e,t),e._zod.optin="optional",e._zod.optout="optional",On(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),On(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Vp(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),hT=Q("$ZodNullable",(e,t)=>{En.init(e,t),On(e._zod,"optin",()=>t.innerType._zod.optin),On(e._zod,"optout",()=>t.innerType._zod.optout),On(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Vp(n.source)}|null)$`):void 0}),On(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),xT=Q("$ZodDefault",(e,t)=>{En.init(e,t),e._zod.optin="optional",On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;let a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(s=>fN(s,t)):fN(a,t)}});function fN(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var wT=Q("$ZodPrefault",(e,t)=>{En.init(e,t),e._zod.optin="optional",On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),vT=Q("$ZodNonOptional",(e,t)=>{En.init(e,t),On(e._zod,"values",()=>{let n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{let a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(s=>lN(s,e)):lN(a,e)}});function lN(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var TT=Q("$ZodCatch",(e,t)=>{En.init(e,t),e._zod.optin="optional",On(e._zod,"optout",()=>t.innerType._zod.optout),On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{let a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(o=>So(o,r,hs()))},input:n.value}),n.issues=[]),n)):(n.value=a.value,a.issues.length&&(n.value=t.catchValue({...n,error:{issues:a.issues.map(s=>So(s,r,hs()))},input:n.value}),n.issues=[]),n)}});var ST=Q("$ZodPipe",(e,t)=>{En.init(e,t),On(e._zod,"values",()=>t.in._zod.values),On(e._zod,"optin",()=>t.in._zod.optin),On(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{let a=t.in._zod.run(n,r);return a instanceof Promise?a.then(s=>pN(s,t,r)):pN(a,t,r)}});function pN(e,t,n){return Eu(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}var AT=Q("$ZodReadonly",(e,t)=>{En.init(e,t),On(e._zod,"propValues",()=>t.innerType._zod.propValues),On(e._zod,"values",()=>t.innerType._zod.values),On(e._zod,"optin",()=>t.innerType._zod.optin),On(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{let a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(mN):mN(a)}});function mN(e){return e.value=Object.freeze(e.value),e}var _T=Q("$ZodCustom",(e,t)=>{yr.init(e,t),En.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{let r=n.value,a=t.fn(r);if(a instanceof Promise)return a.then(s=>bN(s,n,r,e));bN(a,n,r,e)}});function bN(e,t,n,r){if(!e){let a={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(a.params=r._zod.def.params),t.issues.push(Ev(a))}}var rle=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},ale=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(r){return e[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${rle(r.input)}`;case"invalid_value":return r.values.length===1?`Invalid input: expected ${Ky(r.values[0])}`:`Invalid option: expected one of ${Wy(r.values,"|")}`;case"too_big":{let a=r.inclusive?"<=":"<",s=t(r.origin);return s?`Too big: expected ${r.origin??"value"} to have ${a}${r.maximum.toString()} ${s.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${a}${r.maximum.toString()}`}case"too_small":{let a=r.inclusive?">=":">",s=t(r.origin);return s?`Too small: expected ${r.origin} to have ${a}${r.minimum.toString()} ${s.unit}`:`Too small: expected ${r.origin} to be ${a}${r.minimum.toString()}`}case"invalid_format":{let a=r;return a.format==="starts_with"?`Invalid string: must start with "${a.prefix}"`:a.format==="ends_with"?`Invalid string: must end with "${a.suffix}"`:a.format==="includes"?`Invalid string: must include "${a.includes}"`:a.format==="regex"?`Invalid string: must match pattern ${a.pattern}`:`Invalid ${n[a.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${Wy(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function vN(){return{localeError:ale()}}var Jp=class{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){let r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){let n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){let n=t._zod.parent;if(n){let r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}};function TN(){return new Jp}var Ac=TN();function ET(e,t){return new e({type:"string",...rt(t)})}function kT(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...rt(t)})}function rg(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...rt(t)})}function IT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...rt(t)})}function CT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...rt(t)})}function PT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...rt(t)})}function RT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...rt(t)})}function $T(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...rt(t)})}function DT(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...rt(t)})}function MT(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...rt(t)})}function OT(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...rt(t)})}function NT(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...rt(t)})}function LT(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...rt(t)})}function BT(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...rt(t)})}function UT(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...rt(t)})}function HT(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...rt(t)})}function FT(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...rt(t)})}function zT(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...rt(t)})}function jT(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...rt(t)})}function qT(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...rt(t)})}function GT(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...rt(t)})}function VT(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...rt(t)})}function WT(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...rt(t)})}function SN(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...rt(t)})}function AN(e,t){return new e({type:"string",format:"date",check:"string_format",...rt(t)})}function _N(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...rt(t)})}function EN(e,t){return new e({type:"string",format:"duration",check:"string_format",...rt(t)})}function ZT(e,t){return new e({type:"number",checks:[],...rt(t)})}function KT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...rt(t)})}function XT(e,t){return new e({type:"boolean",...rt(t)})}function JT(e,t){return new e({type:"null",...rt(t)})}function QT(e){return new e({type:"unknown"})}function YT(e,t){return new e({type:"never",...rt(t)})}function ag(e,t){return new Lv({check:"less_than",...rt(t),value:e,inclusive:!1})}function Qp(e,t){return new Lv({check:"less_than",...rt(t),value:e,inclusive:!0})}function sg(e,t){return new Bv({check:"greater_than",...rt(t),value:e,inclusive:!1})}function Yp(e,t){return new Bv({check:"greater_than",...rt(t),value:e,inclusive:!0})}function og(e,t){return new WO({check:"multiple_of",...rt(t),value:e})}function ig(e,t){return new KO({check:"max_length",...rt(t),maximum:e})}function Ad(e,t){return new XO({check:"min_length",...rt(t),minimum:e})}function cg(e,t){return new JO({check:"length_equals",...rt(t),length:e})}function eS(e,t){return new QO({check:"string_format",format:"regex",...rt(t),pattern:e})}function tS(e){return new YO({check:"string_format",format:"lowercase",...rt(e)})}function nS(e){return new eN({check:"string_format",format:"uppercase",...rt(e)})}function rS(e,t){return new tN({check:"string_format",format:"includes",...rt(t),includes:e})}function aS(e,t){return new nN({check:"string_format",format:"starts_with",...rt(t),prefix:e})}function sS(e,t){return new rN({check:"string_format",format:"ends_with",...rt(t),suffix:e})}function Cu(e){return new aN({check:"overwrite",tx:e})}function oS(e){return Cu(t=>t.normalize(e))}function iS(){return Cu(e=>e.trim())}function cS(){return Cu(e=>e.toLowerCase())}function uS(){return Cu(e=>e.toUpperCase())}function kN(e,t,n){return new e({type:"array",element:t,...rt(n)})}function dS(e,t,n){let r=rt(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function fS(e,t,n){return new e({type:"custom",check:"custom",fn:t,...rt(n)})}var ug=class{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Ac,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var r;let a=t._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;let i={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,i);let u=t._zod.toJSONSchema?.();if(u)i.schema=u;else{let p={...n,schemaPath:[...n.schemaPath,t],path:n.path},y=t._zod.parent;if(y)i.ref=y,this.process(y,p),this.seen.get(y).isParent=!0;else{let m=i.schema;switch(a.type){case"string":{let g=m;g.type="string";let{minimum:h,maximum:w,format:v,patterns:T,contentEncoding:A}=t._zod.bag;if(typeof h=="number"&&(g.minLength=h),typeof w=="number"&&(g.maxLength=w),v&&(g.format=s[v]??v,g.format===""&&delete g.format),A&&(g.contentEncoding=A),T&&T.size>0){let _=[...T];_.length===1?g.pattern=_[0].source:_.length>1&&(i.schema.allOf=[..._.map(E=>({...this.target==="draft-7"?{type:"string"}:{},pattern:E.source}))])}break}case"number":{let g=m,{minimum:h,maximum:w,format:v,multipleOf:T,exclusiveMaximum:A,exclusiveMinimum:_}=t._zod.bag;typeof v=="string"&&v.includes("int")?g.type="integer":g.type="number",typeof _=="number"&&(g.exclusiveMinimum=_),typeof h=="number"&&(g.minimum=h,typeof _=="number"&&(_>=h?delete g.minimum:delete g.exclusiveMinimum)),typeof A=="number"&&(g.exclusiveMaximum=A),typeof w=="number"&&(g.maximum=w,typeof A=="number"&&(A<=w?delete g.maximum:delete g.exclusiveMaximum)),typeof T=="number"&&(g.multipleOf=T);break}case"boolean":{let g=m;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{m.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{m.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let g=m,{minimum:h,maximum:w}=t._zod.bag;typeof h=="number"&&(g.minItems=h),typeof w=="number"&&(g.maxItems=w),g.type="array",g.items=this.process(a.element,{...p,path:[...p.path,"items"]});break}case"object":{let g=m;g.type="object",g.properties={};let h=a.shape;for(let T in h)g.properties[T]=this.process(h[T],{...p,path:[...p.path,"properties",T]});let w=new Set(Object.keys(h)),v=new Set([...w].filter(T=>{let A=a.shape[T]._zod;return this.io==="input"?A.optin===void 0:A.optout===void 0}));v.size>0&&(g.required=Array.from(v)),a.catchall?._zod.def.type==="never"?g.additionalProperties=!1:a.catchall?a.catchall&&(g.additionalProperties=this.process(a.catchall,{...p,path:[...p.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{let g=m;g.anyOf=a.options.map((h,w)=>this.process(h,{...p,path:[...p.path,"anyOf",w]}));break}case"intersection":{let g=m,h=this.process(a.left,{...p,path:[...p.path,"allOf",0]}),w=this.process(a.right,{...p,path:[...p.path,"allOf",1]}),v=A=>"allOf"in A&&Object.keys(A).length===1,T=[...v(h)?h.allOf:[h],...v(w)?w.allOf:[w]];g.allOf=T;break}case"tuple":{let g=m;g.type="array";let h=a.items.map((T,A)=>this.process(T,{...p,path:[...p.path,"prefixItems",A]}));if(this.target==="draft-2020-12"?g.prefixItems=h:g.items=h,a.rest){let T=this.process(a.rest,{...p,path:[...p.path,"items"]});this.target==="draft-2020-12"?g.items=T:g.additionalItems=T}a.rest&&(g.items=this.process(a.rest,{...p,path:[...p.path,"items"]}));let{minimum:w,maximum:v}=t._zod.bag;typeof w=="number"&&(g.minItems=w),typeof v=="number"&&(g.maxItems=v);break}case"record":{let g=m;g.type="object",g.propertyNames=this.process(a.keyType,{...p,path:[...p.path,"propertyNames"]}),g.additionalProperties=this.process(a.valueType,{...p,path:[...p.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let g=m,h=jp(a.entries);h.every(w=>typeof w=="number")&&(g.type="number"),h.every(w=>typeof w=="string")&&(g.type="string"),g.enum=h;break}case"literal":{let g=m,h=[];for(let w of a.values)if(w===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof w=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");h.push(Number(w))}else h.push(w);if(h.length!==0)if(h.length===1){let w=h[0];g.type=w===null?"null":typeof w,g.const=w}else h.every(w=>typeof w=="number")&&(g.type="number"),h.every(w=>typeof w=="string")&&(g.type="string"),h.every(w=>typeof w=="boolean")&&(g.type="string"),h.every(w=>w===null)&&(g.type="null"),g.enum=h;break}case"file":{let g=m,h={type:"string",format:"binary",contentEncoding:"binary"},{minimum:w,maximum:v,mime:T}=t._zod.bag;w!==void 0&&(h.minLength=w),v!==void 0&&(h.maxLength=v),T?T.length===1?(h.contentMediaType=T[0],Object.assign(g,h)):g.anyOf=T.map(A=>({...h,contentMediaType:A})):Object.assign(g,h);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let g=this.process(a.innerType,p);m.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(a.innerType,p),i.ref=a.innerType;break}case"success":{let g=m;g.type="boolean";break}case"default":{this.process(a.innerType,p),i.ref=a.innerType,m.default=JSON.parse(JSON.stringify(a.defaultValue));break}case"prefault":{this.process(a.innerType,p),i.ref=a.innerType,this.io==="input"&&(m._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break}case"catch":{this.process(a.innerType,p),i.ref=a.innerType;let g;try{g=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}m.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let g=m,h=t._zod.pattern;if(!h)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=h.source;break}case"pipe":{let g=this.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;this.process(g,p),i.ref=g;break}case"readonly":{this.process(a.innerType,p),i.ref=a.innerType,m.readOnly=!0;break}case"promise":{this.process(a.innerType,p),i.ref=a.innerType;break}case"optional":{this.process(a.innerType,p),i.ref=a.innerType;break}case"lazy":{let g=t._zod.innerType;this.process(g,p),i.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}default:}}}let d=this.metadataRegistry.get(t);return d&&Object.assign(i.schema,d),this.io==="input"&&X0(t)&&(delete i.schema.examples,delete i.schema.default),this.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,this.seen.get(t).schema}emit(t,n){let r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},a=this.seen.get(t);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");let s=l=>{let p=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){let h=r.external.registry.get(l[0])?.id,w=r.external.uri??(T=>T);if(h)return{ref:w(h)};let v=l[1].defId??l[1].schema.id??`schema${this.counter++}`;return l[1].defId=v,{defId:v,ref:`${w("__shared")}#/${p}/${v}`}}if(l[1]===a)return{ref:"#"};let m=`#/${p}/`,g=l[1].schema.id??`__schema${this.counter++}`;return{defId:g,ref:m+g}},o=l=>{if(l[1].schema.$ref)return;let p=l[1],{ref:y,defId:m}=s(l);p.def={...p.schema},m&&(p.defId=m);let g=p.schema;for(let h in g)delete g[h];g.$ref=y};if(r.cycles==="throw")for(let l of this.seen.entries()){let p=l[1];if(p.cycle)throw new Error(`Cycle detected: #/${p.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let l of this.seen.entries()){let p=l[1];if(t===l[0]){o(l);continue}if(r.external){let m=r.external.registry.get(l[0])?.id;if(t!==l[0]&&m){o(l);continue}}if(this.metadataRegistry.get(l[0])?.id){o(l);continue}if(p.cycle){o(l);continue}if(p.count>1&&r.reused==="ref"){o(l);continue}}let i=(l,p)=>{let y=this.seen.get(l),m=y.def??y.schema,g={...m};if(y.ref===null)return;let h=y.ref;if(y.ref=null,h){i(h,p);let w=this.seen.get(h).schema;w.$ref&&p.target==="draft-7"?(m.allOf=m.allOf??[],m.allOf.push(w)):(Object.assign(m,w),Object.assign(m,g))}y.isParent||this.override({zodSchema:l,jsonSchema:m,path:y.path??[]})};for(let l of[...this.seen.entries()].reverse())i(l[0],{target:this.target});let u={};if(this.target==="draft-2020-12"?u.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?u.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){let l=r.external.registry.get(t)?.id;if(!l)throw new Error("Schema is missing an `id` property");u.$id=r.external.uri(l)}Object.assign(u,a.def);let d=r.external?.defs??{};for(let l of this.seen.entries()){let p=l[1];p.def&&p.defId&&(d[p.defId]=p.def)}r.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?u.$defs=d:u.definitions=d);try{return JSON.parse(JSON.stringify(u))}catch{throw new Error("Error converting schema to JSON.")}}};function lS(e,t){if(e instanceof Jp){let r=new ug(t),a={};for(let i of e._idmap.entries()){let[u,d]=i;r.process(d)}let s={},o={registry:e,uri:t?.uri,defs:a};for(let i of e._idmap.entries()){let[u,d]=i;s[u]=r.emit(d,{...t,external:o})}if(Object.keys(a).length>0){let i=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[i]:a}}return{schemas:s}}let n=new ug(t);return n.process(e),n.emit(e,t)}function X0(e,t){let n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let a=e._zod.def;switch(a.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return X0(a.element,n);case"object":{for(let s in a.shape)if(X0(a.shape[s],n))return!0;return!1}case"union":{for(let s of a.options)if(X0(s,n))return!0;return!1}case"intersection":return X0(a.left,n)||X0(a.right,n);case"tuple":{for(let s of a.items)if(X0(s,n))return!0;return!!(a.rest&&X0(a.rest,n))}case"record":return X0(a.keyType,n)||X0(a.valueType,n);case"map":return X0(a.keyType,n)||X0(a.valueType,n);case"set":return X0(a.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return X0(a.innerType,n);case"lazy":return X0(a.getter(),n);case"default":return X0(a.innerType,n);case"prefault":return X0(a.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return X0(a.in,n)||X0(a.out,n);case"success":return!1;case"catch":return!1;default:}throw new Error(`Unknown schema type: ${a.type}`)}var Ule=Q("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");En.init(e,t),e.def=t,e.parse=(n,r)=>Pv(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>ku(e,n,r),e.parseAsync=async(n,r)=>$v(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Iu(e,n,r),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>xs(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e))});var Hle=Q("ZodMiniObject",(e,t)=>{tg.init(e,t),Ule.init(e,t),Vt.defineLazy(e,"shape",()=>t.shape)});function pS(e,t){let n={type:"object",get shape(){return Vt.assignProp(this,"shape",{...e}),this.shape},...Vt.normalizeParams(t)};return new Hle(n)}function Hs(e){return!!e._zod}function Ru(e){let t=Object.values(e);if(t.length===0)return pS({});let n=t.every(Hs),r=t.every(a=>!Hs(a));if(n)return pS(e);if(r)return yv(e);throw new Error("Mixed Zod versions detected in object shape.")}function _c(e,t){return Hs(e)?ku(e,t):e.safeParse(t)}async function dg(e,t){return Hs(e)?await Iu(e,t):await e.safeParseAsync(t)}function Ec(e){if(!e)return;let t;if(Hs(e)?t=e._zod?.def?.shape:t=e.shape,!!t){if(typeof t=="function")try{return t()}catch{return}return t}}function _d(e){if(e){if(typeof e=="object"){let t=e,n=e;if(!t._def&&!n._zod){let r=Object.values(e);if(r.length>0&&r.every(a=>typeof a=="object"&&a!==null&&(a._def!==void 0||a._zod!==void 0||typeof a.parse=="function")))return Ru(e)}}if(Hs(e)){let n=e._zod?.def;if(n&&(n.type==="object"||n.shape!==void 0))return e}else if(e.shape!==void 0)return e}}function fg(e){if(e&&typeof e=="object"){if("message"in e&&typeof e.message=="string")return e.message;if("issues"in e&&Array.isArray(e.issues)&&e.issues.length>0){let t=e.issues[0];if(t&&typeof t=="object"&&"message"in t)return String(t.message)}try{return JSON.stringify(e)}catch{return String(e)}}return String(e)}function CN(e){return e.description}function PN(e){if(Hs(e))return e._zod?.def?.type==="optional";let t=e;return typeof e.isOptional=="function"?e.isOptional():t._def?.typeName==="ZodOptional"}function lg(e){if(Hs(e)){let s=e._zod?.def;if(s){if(s.value!==void 0)return s.value;if(Array.isArray(s.values)&&s.values.length>0)return s.values[0]}}let n=e._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}let r=e.value;if(r!==void 0)return r}var em={};ni(em,{ZodISODate:()=>$N,ZodISODateTime:()=>RN,ZodISODuration:()=>MN,ZodISOTime:()=>DN,date:()=>bS,datetime:()=>mS,duration:()=>gS,time:()=>yS});var RN=Q("ZodISODateTime",(e,t)=>{yN.init(e,t),Jn.init(e,t)});function mS(e){return SN(RN,e)}var $N=Q("ZodISODate",(e,t)=>{gN.init(e,t),Jn.init(e,t)});function bS(e){return AN($N,e)}var DN=Q("ZodISOTime",(e,t)=>{hN.init(e,t),Jn.init(e,t)});function yS(e){return _N(DN,e)}var MN=Q("ZodISODuration",(e,t)=>{xN.init(e,t),Jn.init(e,t)});function gS(e){return EN(MN,e)}var ON=(e,t)=>{Xy.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Iv(e,n)},flatten:{value:n=>kv(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},zVe=Q("ZodError",ON),tm=Q("ZodError",ON,{Parent:Error});var NN=Cv(tm),LN=Rv(tm),BN=Dv(tm),UN=Mv(tm);var f0=Q("ZodType",(e,t)=>(En.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>xs(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>NN(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>BN(e,n,r),e.parseAsync=async(n,r)=>LN(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>UN(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(Lpe(n,r)),e.superRefine=n=>e.check(Bpe(n)),e.overwrite=n=>e.check(Cu(n)),e.optional=()=>d0(e),e.nullable=()=>zN(e),e.nullish=()=>d0(zN(e)),e.nonoptional=n=>Ppe(e,n),e.array=()=>Qt(e),e.or=n=>Ln([e,n]),e.and=n=>mg(e,n),e.transform=n=>xS(e,WN(n)),e.default=n=>kpe(e,n),e.prefault=n=>Cpe(e,n),e.catch=n=>$pe(e,n),e.pipe=n=>xS(e,n),e.readonly=()=>Ope(e),e.describe=n=>{let r=e.clone();return Ac.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Ac.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Ac.get(e);let r=e.clone();return Ac.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),jN=Q("_ZodString",(e,t)=>{Xp.init(e,t),f0.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(eS(...r)),e.includes=(...r)=>e.check(rS(...r)),e.startsWith=(...r)=>e.check(aS(...r)),e.endsWith=(...r)=>e.check(sS(...r)),e.min=(...r)=>e.check(Ad(...r)),e.max=(...r)=>e.check(ig(...r)),e.length=(...r)=>e.check(cg(...r)),e.nonempty=(...r)=>e.check(Ad(1,...r)),e.lowercase=r=>e.check(tS(r)),e.uppercase=r=>e.check(nS(r)),e.trim=()=>e.check(iS()),e.normalize=(...r)=>e.check(oS(...r)),e.toLowerCase=()=>e.check(cS()),e.toUpperCase=()=>e.check(uS())}),Kle=Q("ZodString",(e,t)=>{Xp.init(e,t),jN.init(e,t),e.email=n=>e.check(kT(Xle,n)),e.url=n=>e.check($T(Jle,n)),e.jwt=n=>e.check(WT(lpe,n)),e.emoji=n=>e.check(DT(Qle,n)),e.guid=n=>e.check(rg(HN,n)),e.uuid=n=>e.check(IT(pg,n)),e.uuidv4=n=>e.check(CT(pg,n)),e.uuidv6=n=>e.check(PT(pg,n)),e.uuidv7=n=>e.check(RT(pg,n)),e.nanoid=n=>e.check(MT(Yle,n)),e.guid=n=>e.check(rg(HN,n)),e.cuid=n=>e.check(OT(epe,n)),e.cuid2=n=>e.check(NT(tpe,n)),e.ulid=n=>e.check(LT(npe,n)),e.base64=n=>e.check(qT(upe,n)),e.base64url=n=>e.check(GT(dpe,n)),e.xid=n=>e.check(BT(rpe,n)),e.ksuid=n=>e.check(UT(ape,n)),e.ipv4=n=>e.check(HT(spe,n)),e.ipv6=n=>e.check(FT(ope,n)),e.cidrv4=n=>e.check(zT(ipe,n)),e.cidrv6=n=>e.check(jT(cpe,n)),e.e164=n=>e.check(VT(fpe,n)),e.datetime=n=>e.check(mS(n)),e.date=n=>e.check(bS(n)),e.time=n=>e.check(yS(n)),e.duration=n=>e.check(gS(n))});function J(e){return ET(Kle,e)}var Jn=Q("ZodStringFormat",(e,t)=>{Nn.init(e,t),jN.init(e,t)}),Xle=Q("ZodEmail",(e,t)=>{zv.init(e,t),Jn.init(e,t)});var HN=Q("ZodGUID",(e,t)=>{Hv.init(e,t),Jn.init(e,t)});var pg=Q("ZodUUID",(e,t)=>{Fv.init(e,t),Jn.init(e,t)});var Jle=Q("ZodURL",(e,t)=>{jv.init(e,t),Jn.init(e,t)});var Qle=Q("ZodEmoji",(e,t)=>{qv.init(e,t),Jn.init(e,t)});var Yle=Q("ZodNanoID",(e,t)=>{Gv.init(e,t),Jn.init(e,t)});var epe=Q("ZodCUID",(e,t)=>{Vv.init(e,t),Jn.init(e,t)});var tpe=Q("ZodCUID2",(e,t)=>{Wv.init(e,t),Jn.init(e,t)});var npe=Q("ZodULID",(e,t)=>{Zv.init(e,t),Jn.init(e,t)});var rpe=Q("ZodXID",(e,t)=>{Kv.init(e,t),Jn.init(e,t)});var ape=Q("ZodKSUID",(e,t)=>{Xv.init(e,t),Jn.init(e,t)});var spe=Q("ZodIPv4",(e,t)=>{Jv.init(e,t),Jn.init(e,t)});var ope=Q("ZodIPv6",(e,t)=>{Qv.init(e,t),Jn.init(e,t)});var ipe=Q("ZodCIDRv4",(e,t)=>{Yv.init(e,t),Jn.init(e,t)});var cpe=Q("ZodCIDRv6",(e,t)=>{eT.init(e,t),Jn.init(e,t)});var upe=Q("ZodBase64",(e,t)=>{tT.init(e,t),Jn.init(e,t)});var dpe=Q("ZodBase64URL",(e,t)=>{nT.init(e,t),Jn.init(e,t)});var fpe=Q("ZodE164",(e,t)=>{rT.init(e,t),Jn.init(e,t)});var lpe=Q("ZodJWT",(e,t)=>{aT.init(e,t),Jn.init(e,t)});var qN=Q("ZodNumber",(e,t)=>{eg.init(e,t),f0.init(e,t),e.gt=(r,a)=>e.check(sg(r,a)),e.gte=(r,a)=>e.check(Yp(r,a)),e.min=(r,a)=>e.check(Yp(r,a)),e.lt=(r,a)=>e.check(ag(r,a)),e.lte=(r,a)=>e.check(Qp(r,a)),e.max=(r,a)=>e.check(Qp(r,a)),e.int=r=>e.check(FN(r)),e.safe=r=>e.check(FN(r)),e.positive=r=>e.check(sg(0,r)),e.nonnegative=r=>e.check(Yp(0,r)),e.negative=r=>e.check(ag(0,r)),e.nonpositive=r=>e.check(Qp(0,r)),e.multipleOf=(r,a)=>e.check(og(r,a)),e.step=(r,a)=>e.check(og(r,a)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function An(e){return ZT(qN,e)}var ppe=Q("ZodNumberFormat",(e,t)=>{sT.init(e,t),qN.init(e,t)});function FN(e){return KT(ppe,e)}var mpe=Q("ZodBoolean",(e,t)=>{oT.init(e,t),f0.init(e,t)});function or(e){return XT(mpe,e)}var bpe=Q("ZodNull",(e,t)=>{iT.init(e,t),f0.init(e,t)});function wS(e){return JT(bpe,e)}var ype=Q("ZodUnknown",(e,t)=>{cT.init(e,t),f0.init(e,t)});function Qn(){return QT(ype)}var gpe=Q("ZodNever",(e,t)=>{uT.init(e,t),f0.init(e,t)});function hpe(e){return YT(gpe,e)}var xpe=Q("ZodArray",(e,t)=>{dT.init(e,t),f0.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Ad(n,r)),e.nonempty=n=>e.check(Ad(1,n)),e.max=(n,r)=>e.check(ig(n,r)),e.length=(n,r)=>e.check(cg(n,r)),e.unwrap=()=>e.element});function Qt(e,t){return kN(xpe,e,t)}var GN=Q("ZodObject",(e,t)=>{tg.init(e,t),f0.init(e,t),Vt.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>Ba(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Qn()}),e.loose=()=>e.clone({...e._zod.def,catchall:Qn()}),e.strict=()=>e.clone({...e._zod.def,catchall:hpe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Vt.extend(e,n),e.merge=n=>Vt.merge(e,n),e.pick=n=>Vt.pick(e,n),e.omit=n=>Vt.omit(e,n),e.partial=(...n)=>Vt.partial(ZN,e,n[0]),e.required=(...n)=>Vt.required(KN,e,n[0])});function Ce(e,t){let n={type:"object",get shape(){return Vt.assignProp(this,"shape",{...e}),this.shape},...Vt.normalizeParams(t)};return new GN(n)}function ra(e,t){return new GN({type:"object",get shape(){return Vt.assignProp(this,"shape",{...e}),this.shape},catchall:Qn(),...Vt.normalizeParams(t)})}var VN=Q("ZodUnion",(e,t)=>{ng.init(e,t),f0.init(e,t),e.options=t.options});function Ln(e,t){return new VN({type:"union",options:e,...Vt.normalizeParams(t)})}var wpe=Q("ZodDiscriminatedUnion",(e,t)=>{VN.init(e,t),fT.init(e,t)});function vS(e,t,n){return new wpe({type:"union",options:t,discriminator:e,...Vt.normalizeParams(n)})}var vpe=Q("ZodIntersection",(e,t)=>{lT.init(e,t),f0.init(e,t)});function mg(e,t){return new vpe({type:"intersection",left:e,right:t})}var Tpe=Q("ZodRecord",(e,t)=>{pT.init(e,t),f0.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Yn(e,t,n){return new Tpe({type:"record",keyType:e,valueType:t,...Vt.normalizeParams(n)})}var hS=Q("ZodEnum",(e,t)=>{mT.init(e,t),f0.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(r,a)=>{let s={};for(let o of r)if(n.has(o))s[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new hS({...t,checks:[],...Vt.normalizeParams(a),entries:s})},e.exclude=(r,a)=>{let s={...t.entries};for(let o of r)if(n.has(o))delete s[o];else throw new Error(`Key ${o} not found in enum`);return new hS({...t,checks:[],...Vt.normalizeParams(a),entries:s})}});function Ba(e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new hS({type:"enum",entries:n,...Vt.normalizeParams(t)})}var Spe=Q("ZodLiteral",(e,t)=>{bT.init(e,t),f0.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function je(e,t){return new Spe({type:"literal",values:Array.isArray(e)?e:[e],...Vt.normalizeParams(t)})}var Ape=Q("ZodTransform",(e,t)=>{yT.init(e,t),f0.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=s=>{if(typeof s=="string")n.issues.push(Vt.issue(s,n.value,t));else{let o=s;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),n.issues.push(Vt.issue(o))}};let a=t.transform(n.value,n);return a instanceof Promise?a.then(s=>(n.value=s,n)):(n.value=a,n)}});function WN(e){return new Ape({type:"transform",transform:e})}var ZN=Q("ZodOptional",(e,t)=>{gT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType});function d0(e){return new ZN({type:"optional",innerType:e})}var _pe=Q("ZodNullable",(e,t)=>{hT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zN(e){return new _pe({type:"nullable",innerType:e})}var Epe=Q("ZodDefault",(e,t)=>{xT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function kpe(e,t){return new Epe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}var Ipe=Q("ZodPrefault",(e,t)=>{wT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Cpe(e,t){return new Ipe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}var KN=Q("ZodNonOptional",(e,t)=>{vT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ppe(e,t){return new KN({type:"nonoptional",innerType:e,...Vt.normalizeParams(t)})}var Rpe=Q("ZodCatch",(e,t)=>{TT.init(e,t),f0.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function $pe(e,t){return new Rpe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var Dpe=Q("ZodPipe",(e,t)=>{ST.init(e,t),f0.init(e,t),e.in=t.in,e.out=t.out});function xS(e,t){return new Dpe({type:"pipe",in:e,out:t})}var Mpe=Q("ZodReadonly",(e,t)=>{AT.init(e,t),f0.init(e,t)});function Ope(e){return new Mpe({type:"readonly",innerType:e})}var XN=Q("ZodCustom",(e,t)=>{_T.init(e,t),f0.init(e,t)});function Npe(e){let t=new yr({check:"custom"});return t._zod.check=e,t}function JN(e,t){return dS(XN,e??(()=>!0),t)}function Lpe(e,t={}){return fS(XN,e,t)}function Bpe(e){let t=Npe(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Vt.issue(r,n.value,t._zod.def));else{let a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),n.issues.push(Vt.issue(a))}},e(n.value,n)));return t}function TS(e,t){return xS(WN(e),t)}hs(vN());var AS="2025-11-25";var QN=[AS,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],kc="io.modelcontextprotocol/related-task",yg="2.0",gr=JN(e=>e!==null&&(typeof e=="object"||typeof e=="function")),YN=Ln([J(),An().int()]),eL=J(),nWe=ra({ttl:Ln([An(),wS()]).optional(),pollInterval:An().optional()}),Upe=Ce({ttl:An().optional()}),Hpe=Ce({taskId:J()}),_S=ra({progressToken:YN.optional(),[kc]:Hpe.optional()}),ws=Ce({_meta:_S.optional()}),nm=ws.extend({task:Upe.optional()}),tL=e=>nm.safeParse(e).success,hr=Ce({method:J(),params:ws.loose().optional()}),Fs=Ce({_meta:_S.optional()}),zs=Ce({method:J(),params:Fs.loose().optional()}),xr=ra({_meta:_S.optional()}),gg=Ln([J(),An().int()]),nL=Ce({jsonrpc:je(yg),id:gg,...hr.shape}).strict(),ES=e=>nL.safeParse(e).success,rL=Ce({jsonrpc:je(yg),...zs.shape}).strict(),aL=e=>rL.safeParse(e).success,kS=Ce({jsonrpc:je(yg),id:gg,result:xr}).strict(),rm=e=>kS.safeParse(e).success;var Je;(function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(Je||(Je={}));var IS=Ce({jsonrpc:je(yg),id:gg.optional(),error:Ce({code:An().int(),message:J(),data:Qn().optional()})}).strict();var sL=e=>IS.safeParse(e).success;var oL=Ln([nL,rL,kS,IS]),rWe=Ln([kS,IS]),hg=xr.strict(),Fpe=Fs.extend({requestId:gg.optional(),reason:J().optional()}),xg=zs.extend({method:je("notifications/cancelled"),params:Fpe}),zpe=Ce({src:J(),mimeType:J().optional(),sizes:Qt(J()).optional(),theme:Ba(["light","dark"]).optional()}),am=Ce({icons:Qt(zpe).optional()}),Ed=Ce({name:J(),title:J().optional()}),iL=Ed.extend({...Ed.shape,...am.shape,version:J(),websiteUrl:J().optional(),description:J().optional()}),jpe=mg(Ce({applyDefaults:or().optional()}),Yn(J(),Qn())),qpe=TS(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,mg(Ce({form:jpe.optional(),url:gr.optional()}),Yn(J(),Qn()).optional())),Gpe=ra({list:gr.optional(),cancel:gr.optional(),requests:ra({sampling:ra({createMessage:gr.optional()}).optional(),elicitation:ra({create:gr.optional()}).optional()}).optional()}),Vpe=ra({list:gr.optional(),cancel:gr.optional(),requests:ra({tools:ra({call:gr.optional()}).optional()}).optional()}),Wpe=Ce({experimental:Yn(J(),gr).optional(),sampling:Ce({context:gr.optional(),tools:gr.optional()}).optional(),elicitation:qpe.optional(),roots:Ce({listChanged:or().optional()}).optional(),tasks:Gpe.optional()}),Zpe=ws.extend({protocolVersion:J(),capabilities:Wpe,clientInfo:iL}),CS=hr.extend({method:je("initialize"),params:Zpe});var Kpe=Ce({experimental:Yn(J(),gr).optional(),logging:gr.optional(),completions:gr.optional(),prompts:Ce({listChanged:or().optional()}).optional(),resources:Ce({subscribe:or().optional(),listChanged:or().optional()}).optional(),tools:Ce({listChanged:or().optional()}).optional(),tasks:Vpe.optional()}),Xpe=xr.extend({protocolVersion:J(),capabilities:Kpe,serverInfo:iL,instructions:J().optional()}),PS=zs.extend({method:je("notifications/initialized"),params:Fs.optional()});var wg=hr.extend({method:je("ping"),params:ws.optional()}),Jpe=Ce({progress:An(),total:d0(An()),message:d0(J())}),Qpe=Ce({...Fs.shape,...Jpe.shape,progressToken:YN}),vg=zs.extend({method:je("notifications/progress"),params:Qpe}),Ype=ws.extend({cursor:eL.optional()}),sm=hr.extend({params:Ype.optional()}),om=xr.extend({nextCursor:eL.optional()}),eme=Ba(["working","input_required","completed","failed","cancelled"]),im=Ce({taskId:J(),status:eme,ttl:Ln([An(),wS()]),createdAt:J(),lastUpdatedAt:J(),pollInterval:d0(An()),statusMessage:d0(J())}),kd=xr.extend({task:im}),tme=Fs.merge(im),cm=zs.extend({method:je("notifications/tasks/status"),params:tme}),Tg=hr.extend({method:je("tasks/get"),params:ws.extend({taskId:J()})}),Sg=xr.merge(im),Ag=hr.extend({method:je("tasks/result"),params:ws.extend({taskId:J()})}),aWe=xr.loose(),_g=sm.extend({method:je("tasks/list")}),Eg=om.extend({tasks:Qt(im)}),kg=hr.extend({method:je("tasks/cancel"),params:ws.extend({taskId:J()})}),cL=xr.merge(im),uL=Ce({uri:J(),mimeType:d0(J()),_meta:Yn(J(),Qn()).optional()}),dL=uL.extend({text:J()}),RS=J().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),fL=uL.extend({blob:RS}),um=Ba(["user","assistant"]),Id=Ce({audience:Qt(um).optional(),priority:An().min(0).max(1).optional(),lastModified:em.datetime({offset:!0}).optional()}),lL=Ce({...Ed.shape,...am.shape,uri:J(),description:d0(J()),mimeType:d0(J()),annotations:Id.optional(),_meta:d0(ra({}))}),nme=Ce({...Ed.shape,...am.shape,uriTemplate:J(),description:d0(J()),mimeType:d0(J()),annotations:Id.optional(),_meta:d0(ra({}))}),Ig=sm.extend({method:je("resources/list")}),rme=om.extend({resources:Qt(lL)}),Cg=sm.extend({method:je("resources/templates/list")}),ame=om.extend({resourceTemplates:Qt(nme)}),$S=ws.extend({uri:J()}),sme=$S,Pg=hr.extend({method:je("resources/read"),params:sme}),ome=xr.extend({contents:Qt(Ln([dL,fL]))}),ime=zs.extend({method:je("notifications/resources/list_changed"),params:Fs.optional()}),cme=$S,ume=hr.extend({method:je("resources/subscribe"),params:cme}),dme=$S,fme=hr.extend({method:je("resources/unsubscribe"),params:dme}),lme=Fs.extend({uri:J()}),pme=zs.extend({method:je("notifications/resources/updated"),params:lme}),mme=Ce({name:J(),description:d0(J()),required:d0(or())}),bme=Ce({...Ed.shape,...am.shape,description:d0(J()),arguments:d0(Qt(mme)),_meta:d0(ra({}))}),Rg=sm.extend({method:je("prompts/list")}),yme=om.extend({prompts:Qt(bme)}),gme=ws.extend({name:J(),arguments:Yn(J(),J()).optional()}),$g=hr.extend({method:je("prompts/get"),params:gme}),DS=Ce({type:je("text"),text:J(),annotations:Id.optional(),_meta:Yn(J(),Qn()).optional()}),MS=Ce({type:je("image"),data:RS,mimeType:J(),annotations:Id.optional(),_meta:Yn(J(),Qn()).optional()}),OS=Ce({type:je("audio"),data:RS,mimeType:J(),annotations:Id.optional(),_meta:Yn(J(),Qn()).optional()}),hme=Ce({type:je("tool_use"),name:J(),id:J(),input:Yn(J(),Qn()),_meta:Yn(J(),Qn()).optional()}),xme=Ce({type:je("resource"),resource:Ln([dL,fL]),annotations:Id.optional(),_meta:Yn(J(),Qn()).optional()}),wme=lL.extend({type:je("resource_link")}),NS=Ln([DS,MS,OS,wme,xme]),vme=Ce({role:um,content:NS}),Tme=xr.extend({description:J().optional(),messages:Qt(vme)}),Sme=zs.extend({method:je("notifications/prompts/list_changed"),params:Fs.optional()}),Ame=Ce({title:J().optional(),readOnlyHint:or().optional(),destructiveHint:or().optional(),idempotentHint:or().optional(),openWorldHint:or().optional()}),_me=Ce({taskSupport:Ba(["required","optional","forbidden"]).optional()}),pL=Ce({...Ed.shape,...am.shape,description:J().optional(),inputSchema:Ce({type:je("object"),properties:Yn(J(),gr).optional(),required:Qt(J()).optional()}).catchall(Qn()),outputSchema:Ce({type:je("object"),properties:Yn(J(),gr).optional(),required:Qt(J()).optional()}).catchall(Qn()).optional(),annotations:Ame.optional(),execution:_me.optional(),_meta:Yn(J(),Qn()).optional()}),Dg=sm.extend({method:je("tools/list")}),Eme=om.extend({tools:Qt(pL)}),Mg=xr.extend({content:Qt(NS).default([]),structuredContent:Yn(J(),Qn()).optional(),isError:or().optional()}),sWe=Mg.or(xr.extend({toolResult:Qn()})),kme=nm.extend({name:J(),arguments:Yn(J(),Qn()).optional()}),Cd=hr.extend({method:je("tools/call"),params:kme}),Ime=zs.extend({method:je("notifications/tools/list_changed"),params:Fs.optional()}),oWe=Ce({autoRefresh:or().default(!0),debounceMs:An().int().nonnegative().default(300)}),dm=Ba(["debug","info","notice","warning","error","critical","alert","emergency"]),Cme=ws.extend({level:dm}),LS=hr.extend({method:je("logging/setLevel"),params:Cme}),Pme=Fs.extend({level:dm,logger:J().optional(),data:Qn()}),Rme=zs.extend({method:je("notifications/message"),params:Pme}),$me=Ce({name:J().optional()}),Dme=Ce({hints:Qt($me).optional(),costPriority:An().min(0).max(1).optional(),speedPriority:An().min(0).max(1).optional(),intelligencePriority:An().min(0).max(1).optional()}),Mme=Ce({mode:Ba(["auto","required","none"]).optional()}),Ome=Ce({type:je("tool_result"),toolUseId:J().describe("The unique identifier for the corresponding tool call."),content:Qt(NS).default([]),structuredContent:Ce({}).loose().optional(),isError:or().optional(),_meta:Yn(J(),Qn()).optional()}),Nme=vS("type",[DS,MS,OS]),bg=vS("type",[DS,MS,OS,hme,Ome]),Lme=Ce({role:um,content:Ln([bg,Qt(bg)]),_meta:Yn(J(),Qn()).optional()}),Bme=nm.extend({messages:Qt(Lme),modelPreferences:Dme.optional(),systemPrompt:J().optional(),includeContext:Ba(["none","thisServer","allServers"]).optional(),temperature:An().optional(),maxTokens:An().int(),stopSequences:Qt(J()).optional(),metadata:gr.optional(),tools:Qt(pL).optional(),toolChoice:Mme.optional()}),Ume=hr.extend({method:je("sampling/createMessage"),params:Bme}),BS=xr.extend({model:J(),stopReason:d0(Ba(["endTurn","stopSequence","maxTokens"]).or(J())),role:um,content:Nme}),US=xr.extend({model:J(),stopReason:d0(Ba(["endTurn","stopSequence","maxTokens","toolUse"]).or(J())),role:um,content:Ln([bg,Qt(bg)])}),Hme=Ce({type:je("boolean"),title:J().optional(),description:J().optional(),default:or().optional()}),Fme=Ce({type:je("string"),title:J().optional(),description:J().optional(),minLength:An().optional(),maxLength:An().optional(),format:Ba(["email","uri","date","date-time"]).optional(),default:J().optional()}),zme=Ce({type:Ba(["number","integer"]),title:J().optional(),description:J().optional(),minimum:An().optional(),maximum:An().optional(),default:An().optional()}),jme=Ce({type:je("string"),title:J().optional(),description:J().optional(),enum:Qt(J()),default:J().optional()}),qme=Ce({type:je("string"),title:J().optional(),description:J().optional(),oneOf:Qt(Ce({const:J(),title:J()})),default:J().optional()}),Gme=Ce({type:je("string"),title:J().optional(),description:J().optional(),enum:Qt(J()),enumNames:Qt(J()).optional(),default:J().optional()}),Vme=Ln([jme,qme]),Wme=Ce({type:je("array"),title:J().optional(),description:J().optional(),minItems:An().optional(),maxItems:An().optional(),items:Ce({type:je("string"),enum:Qt(J())}),default:Qt(J()).optional()}),Zme=Ce({type:je("array"),title:J().optional(),description:J().optional(),minItems:An().optional(),maxItems:An().optional(),items:Ce({anyOf:Qt(Ce({const:J(),title:J()}))}),default:Qt(J()).optional()}),Kme=Ln([Wme,Zme]),Xme=Ln([Gme,Vme,Kme]),Jme=Ln([Xme,Hme,Fme,zme]),Qme=nm.extend({mode:je("form").optional(),message:J(),requestedSchema:Ce({type:je("object"),properties:Yn(J(),Jme),required:Qt(J()).optional()})}),Yme=nm.extend({mode:je("url"),message:J(),elicitationId:J(),url:J().url()}),ebe=Ln([Qme,Yme]),tbe=hr.extend({method:je("elicitation/create"),params:ebe}),nbe=Fs.extend({elicitationId:J()}),rbe=zs.extend({method:je("notifications/elicitation/complete"),params:nbe}),Og=xr.extend({action:Ba(["accept","decline","cancel"]),content:TS(e=>e===null?void 0:e,Yn(J(),Ln([J(),An(),or(),Qt(J())])).optional())}),abe=Ce({type:je("ref/resource"),uri:J()});var sbe=Ce({type:je("ref/prompt"),name:J()}),obe=ws.extend({ref:Ln([sbe,abe]),argument:Ce({name:J(),value:J()}),context:Ce({arguments:Yn(J(),J()).optional()}).optional()}),Ng=hr.extend({method:je("completion/complete"),params:obe});function mL(e){if(e.params.ref.type!=="ref/prompt")throw new TypeError(`Expected CompleteRequestPrompt, but got ${e.params.ref.type}`)}function bL(e){if(e.params.ref.type!=="ref/resource")throw new TypeError(`Expected CompleteRequestResourceTemplate, but got ${e.params.ref.type}`)}var ibe=xr.extend({completion:ra({values:Qt(J()).max(100),total:d0(An().int()),hasMore:d0(or())})}),cbe=Ce({uri:J().startsWith("file://"),name:J().optional(),_meta:Yn(J(),Qn()).optional()}),ube=hr.extend({method:je("roots/list"),params:ws.optional()}),HS=xr.extend({roots:Qt(cbe)}),dbe=zs.extend({method:je("notifications/roots/list_changed"),params:Fs.optional()}),iWe=Ln([wg,CS,Ng,LS,$g,Rg,Ig,Cg,Pg,ume,fme,Cd,Dg,Tg,Ag,_g,kg]),cWe=Ln([xg,vg,PS,dbe,cm]),uWe=Ln([hg,BS,US,Og,HS,Sg,Eg,kd]),dWe=Ln([wg,Ume,tbe,ube,Tg,Ag,_g,kg]),fWe=Ln([xg,vg,Rme,pme,ime,Ime,Sme,cm,rbe]),lWe=Ln([hg,Xpe,ibe,Tme,yme,rme,ame,ome,Mg,Eme,Sg,Eg,kd]),He=class e extends Error{constructor(t,n,r){super(`MCP error ${t}: ${n}`),this.code=t,this.data=r,this.name="McpError"}static fromError(t,n,r){if(t===Je.UrlElicitationRequired&&r){let a=r;if(a.elicitations)return new SS(a.elicitations,n)}return new e(t,n,r)}},SS=class extends He{constructor(t,n=`URL elicitation${t.length>1?"s":""} required`){super(Je.UrlElicitationRequired,n,{elicitations:t})}get elicitations(){return this.data?.elicitations??[]}};function Ic(e){return e==="completed"||e==="failed"||e==="cancelled"}var gL=Symbol("Let zodToJsonSchema decide on which parser to use");var yL={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},hL=e=>typeof e=="string"?{...yL,name:e}:{...yL,...e};var xL=e=>{let t=hL(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function FS(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Yt(e,t,n,r,a){e[t]=n,FS(e,t,r,a)}var Lg=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function e0(e){if(e.target!=="openAi")return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?Lg(t,e.currentPath):t.join("/")}}function wL(e,t){let n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==pe.ZodAny&&(n.items=ut(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Yt(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Yt(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Yt(n,"minItems",e.exactLength.value,e.exactLength.message,t),Yt(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function vL(e,t){let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?Yt(n,"minimum",r.value,r.message,t):Yt(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Yt(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Yt(n,"maximum",r.value,r.message,t):Yt(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Yt(n,"maximum",r.value,r.message,t));break;case"multipleOf":Yt(n,"multipleOf",r.value,r.message,t);break}return n}function TL(){return{type:"boolean"}}function Bg(e,t){return ut(e.type._def,t)}var SL=(e,t)=>ut(e.innerType._def,t);function zS(e,t,n){let r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,s)=>zS(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return fbe(e,t)}}var fbe=(e,t)=>{let n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(let r of e.checks)switch(r.kind){case"min":Yt(n,"minimum",r.value,r.message,t);break;case"max":Yt(n,"maximum",r.value,r.message,t);break}return n};function AL(e,t){return{...ut(e.innerType._def,t),default:e.defaultValue()}}function _L(e,t){return t.effectStrategy==="input"?ut(e.schema._def,t):e0(t)}function EL(e){return{type:"string",enum:Array.from(e.values)}}var lbe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function kL(e,t){let n=[ut(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ut(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,a=[];return n.forEach(s=>{if(lbe(s))a.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:i,...u}=s;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function IL(e,t){let n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}var jS,Ao={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(jS===void 0&&(jS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),jS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ug(e,t){let n={type:"string"};if(e.checks)for(let r of e.checks)switch(r.kind){case"min":Yt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Yt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":_o(n,"email",r.message,t);break;case"format:idn-email":_o(n,"idn-email",r.message,t);break;case"pattern:zod":aa(n,Ao.email,r.message,t);break}break;case"url":_o(n,"uri",r.message,t);break;case"uuid":_o(n,"uuid",r.message,t);break;case"regex":aa(n,r.regex,r.message,t);break;case"cuid":aa(n,Ao.cuid,r.message,t);break;case"cuid2":aa(n,Ao.cuid2,r.message,t);break;case"startsWith":aa(n,RegExp(`^${qS(r.value,t)}`),r.message,t);break;case"endsWith":aa(n,RegExp(`${qS(r.value,t)}$`),r.message,t);break;case"datetime":_o(n,"date-time",r.message,t);break;case"date":_o(n,"date",r.message,t);break;case"time":_o(n,"time",r.message,t);break;case"duration":_o(n,"duration",r.message,t);break;case"length":Yt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),Yt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{aa(n,RegExp(qS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&_o(n,"ipv4",r.message,t),r.version!=="v4"&&_o(n,"ipv6",r.message,t);break}case"base64url":aa(n,Ao.base64url,r.message,t);break;case"jwt":aa(n,Ao.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&aa(n,Ao.ipv4Cidr,r.message,t),r.version!=="v4"&&aa(n,Ao.ipv6Cidr,r.message,t);break}case"emoji":aa(n,Ao.emoji(),r.message,t);break;case"ulid":{aa(n,Ao.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{_o(n,"binary",r.message,t);break}case"contentEncoding:base64":{Yt(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{aa(n,Ao.base64,r.message,t);break}}break}case"nanoid":aa(n,Ao.nanoid,r.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return n}function qS(e,t){return t.patternStrategy==="escape"?mbe(e):e}var pbe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function mbe(e){let t="";for(let n=0;n<e.length;n++)pbe.has(e[n])||(t+="\\"),t+=e[n];return t}function _o(e,t,n,r){e.format||e.anyOf?.some(a=>a.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Yt(e,"format",t,n,r)}function aa(e,t,n,r){e.pattern||e.allOf?.some(a=>a.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:CL(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Yt(e,"pattern",CL(t,r),n,r)}function CL(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source,a="",s=!1,o=!1,i=!1;for(let u=0;u<r.length;u++){if(s){a+=r[u],s=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){i?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),i=!1):r[u+1]==="-"&&r[u+2]?.match(/[a-z]/)?(a+=r[u],i=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?s=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function Hg(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===pe.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:ut(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??e0(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let n={type:"object",additionalProperties:ut(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===pe.ZodString&&e.keyType._def.checks?.length){let{type:r,...a}=Ug(e.keyType._def,t);return{...n,propertyNames:a}}else{if(e.keyType?._def.typeName===pe.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===pe.ZodBranded&&e.keyType._def.type._def.typeName===pe.ZodString&&e.keyType._def.type._def.checks?.length){let{type:r,...a}=Bg(e.keyType._def,t);return{...n,propertyNames:a}}}return n}function PL(e,t){if(t.mapStrategy==="record")return Hg(e,t);let n=ut(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||e0(t),r=ut(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||e0(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function RL(e){let t=e.values,r=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),a=Array.from(new Set(r.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function $L(e){return e.target==="openAi"?void 0:{not:e0({...e,currentPath:[...e.currentPath,"not"]})}}function DL(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var fm={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function OL(e,t){if(t.target==="openApi3")return ML(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in fm&&(!r._def.checks||!r._def.checks.length))){let r=n.reduce((a,s)=>{let o=fm[s._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){let r=n.reduce((a,s)=>{let o=typeof s._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(s._def.value===null)return[...a,"null"];default:return a}},[]);if(r.length===n.length){let a=r.filter((s,o,i)=>i.indexOf(s)===o);return{type:a.length>1?a:a[0],enum:n.reduce((s,o)=>s.includes(o._def.value)?s:[...s,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(s=>!r.includes(s))],[])};return ML(e,t)}var ML=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>ut(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function NL(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:fm[e.innerType._def.typeName],nullable:!0}:{type:[fm[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let r=ut(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let n=ut(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function LL(e,t){let n={type:"number"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"int":n.type="integer",FS(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?Yt(n,"minimum",r.value,r.message,t):Yt(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Yt(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Yt(n,"maximum",r.value,r.message,t):Yt(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Yt(n,"maximum",r.value,r.message,t));break;case"multipleOf":Yt(n,"multipleOf",r.value,r.message,t);break}return n}function BL(e,t){let n=t.target==="openAi",r={type:"object",properties:{}},a=[],s=e.shape();for(let i in s){let u=s[i];if(u===void 0||u._def===void 0)continue;let d=ybe(u);d&&n&&(u._def.typeName==="ZodOptional"&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),d=!1);let l=ut(u._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});l!==void 0&&(r.properties[i]=l,d||a.push(i))}a.length&&(r.required=a);let o=bbe(e,t);return o!==void 0&&(r.additionalProperties=o),r}function bbe(e,t){if(e.catchall._def.typeName!=="ZodNever")return ut(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function ybe(e){try{return e.isOptional()}catch{return!0}}var UL=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return ut(e.innerType._def,t);let n=ut(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:e0(t)},n]}:e0(t)};var HL=(e,t)=>{if(t.pipeStrategy==="input")return ut(e.in._def,t);if(t.pipeStrategy==="output")return ut(e.out._def,t);let n=ut(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ut(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function FL(e,t){return ut(e.type._def,t)}function zL(e,t){let r={type:"array",uniqueItems:!0,items:ut(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Yt(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Yt(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function jL(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ut(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ut(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ut(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function qL(e){return{not:e0(e)}}function GL(e){return e0(e)}var VL=(e,t)=>ut(e.innerType._def,t);var WL=(e,t,n)=>{switch(t){case pe.ZodString:return Ug(e,n);case pe.ZodNumber:return LL(e,n);case pe.ZodObject:return BL(e,n);case pe.ZodBigInt:return vL(e,n);case pe.ZodBoolean:return TL();case pe.ZodDate:return zS(e,n);case pe.ZodUndefined:return qL(n);case pe.ZodNull:return DL(n);case pe.ZodArray:return wL(e,n);case pe.ZodUnion:case pe.ZodDiscriminatedUnion:return OL(e,n);case pe.ZodIntersection:return kL(e,n);case pe.ZodTuple:return jL(e,n);case pe.ZodRecord:return Hg(e,n);case pe.ZodLiteral:return IL(e,n);case pe.ZodEnum:return EL(e);case pe.ZodNativeEnum:return RL(e);case pe.ZodNullable:return NL(e,n);case pe.ZodOptional:return UL(e,n);case pe.ZodMap:return PL(e,n);case pe.ZodSet:return zL(e,n);case pe.ZodLazy:return()=>e.getter()._def;case pe.ZodPromise:return FL(e,n);case pe.ZodNaN:case pe.ZodNever:return $L(n);case pe.ZodEffects:return _L(e,n);case pe.ZodAny:return e0(n);case pe.ZodUnknown:return GL(n);case pe.ZodDefault:return AL(e,n);case pe.ZodBranded:return Bg(e,n);case pe.ZodReadonly:return VL(e,n);case pe.ZodCatch:return SL(e,n);case pe.ZodPipeline:return HL(e,n);case pe.ZodFunction:case pe.ZodVoid:case pe.ZodSymbol:return;default:return(r=>{})(t)}};function ut(e,t,n=!1){let r=t.seen.get(e);if(t.override){let i=t.override?.(e,t,r,n);if(i!==gL)return i}if(r&&!n){let i=gbe(r,t);if(i!==void 0)return i}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let s=WL(e,e.typeName,t),o=typeof s=="function"?ut(s(),t):s;if(o&&hbe(e,t,o),t.postProcess){let i=t.postProcess(o,e,t);return a.jsonSchema=o,i}return a.jsonSchema=o,o}var gbe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Lg(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),e0(t)):t.$refStrategy==="seen"?e0(t):void 0}},hbe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var GS=(e,t)=>{let n=xL(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[d,l])=>({...u,[d]:ut(l._def,{...n,currentPath:[...n.basePath,n.definitionPath,d]},!0)??e0(n)}),{}):void 0,a=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,s=ut(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??e0(n),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(s.title=o),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));let i=a===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:s}};return n.target==="jsonSchema7"?i.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in i||"oneOf"in i||"allOf"in i||"type"in i&&Array.isArray(i.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),i};function xbe(e){return!e||e==="jsonSchema7"||e==="draft-7"?"draft-7":e==="jsonSchema2019-09"||e==="draft-2020-12"?"draft-2020-12":"draft-7"}function VS(e,t){return Hs(e)?lS(e,{target:xbe(t?.target),io:t?.pipeStrategy??"input"}):GS(e,{strictUnions:t?.strictUnions??!0,pipeStrategy:t?.pipeStrategy??"input"})}function WS(e){let n=Ec(e)?.method;if(!n)throw new Error("Schema is missing a method literal");let r=lg(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function ZS(e,t){let n=_c(e,t);if(!n.success)throw n.error;return n.data}var wbe=6e4,Fg=class{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(xg,n=>{this._oncancel(n)}),this.setNotificationHandler(vg,n=>{this._onprogress(n)}),this.setRequestHandler(wg,n=>({})),this._taskStore=t?.taskStore,this._taskMessageQueue=t?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(Tg,async(n,r)=>{let a=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!a)throw new He(Je.InvalidParams,"Failed to retrieve task: Task not found");return{...a}}),this.setRequestHandler(Ag,async(n,r)=>{let a=async()=>{let s=n.params.taskId;if(this._taskMessageQueue){let i;for(;i=await this._taskMessageQueue.dequeue(s,r.sessionId);){if(i.type==="response"||i.type==="error"){let u=i.message,d=u.id,l=this._requestResolvers.get(d);if(l)if(this._requestResolvers.delete(d),i.type==="response")l(u);else{let p=u,y=new He(p.error.code,p.error.message,p.error.data);l(y)}else{let p=i.type==="response"?"Response":"Error";this._onerror(new Error(`${p} handler missing for request ${d}`))}continue}await this._transport?.send(i.message,{relatedRequestId:r.requestId})}}let o=await this._taskStore.getTask(s,r.sessionId);if(!o)throw new He(Je.InvalidParams,`Task not found: ${s}`);if(!Ic(o.status))return await this._waitForTaskUpdate(s,r.signal),await a();if(Ic(o.status)){let i=await this._taskStore.getTaskResult(s,r.sessionId);return this._clearTaskQueue(s),{...i,_meta:{...i._meta,[kc]:{taskId:s}}}}return await a()};return await a()}),this.setRequestHandler(_g,async(n,r)=>{try{let{tasks:a,nextCursor:s}=await this._taskStore.listTasks(n.params?.cursor,r.sessionId);return{tasks:a,nextCursor:s,_meta:{}}}catch(a){throw new He(Je.InvalidParams,`Failed to list tasks: ${a instanceof Error?a.message:String(a)}`)}}),this.setRequestHandler(kg,async(n,r)=>{try{let a=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!a)throw new He(Je.InvalidParams,`Task not found: ${n.params.taskId}`);if(Ic(a.status))throw new He(Je.InvalidParams,`Cannot cancel task in terminal status: ${a.status}`);await this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",r.sessionId),this._clearTaskQueue(n.params.taskId);let s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new He(Je.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return{_meta:{},...s}}catch(a){throw a instanceof He?a:new He(Je.InvalidRequest,`Failed to cancel task: ${a instanceof Error?a.message:String(a)}`)}}))}async _oncancel(t){if(!t.params.requestId)return;this._requestHandlerAbortControllers.get(t.params.requestId)?.abort(t.params.reason)}_setupTimeout(t,n,r,a,s=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(a,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:s,onTimeout:a})}_resetTimeout(t){let n=this._timeoutInfo.get(t);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(t),He.fromError(Je.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(t){let n=this._timeoutInfo.get(t);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(t))}async connect(t){this._transport=t;let n=this.transport?.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let r=this.transport?.onerror;this._transport.onerror=s=>{r?.(s),this._onerror(s)};let a=this._transport?.onmessage;this._transport.onmessage=(s,o)=>{a?.(s,o),rm(s)||sL(s)?this._onresponse(s):ES(s)?this._onrequest(s,o):aL(s)?this._onnotification(s):this._onerror(new Error(`Unknown message type: ${JSON.stringify(s)}`))},await this._transport.start()}_onclose(){let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let n=He.fromError(Je.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(let r of t.values())r(n)}_onerror(t){this.onerror?.(t)}_onnotification(t){let n=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(t)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(t,n){let r=this._requestHandlers.get(t.method)??this.fallbackRequestHandler,a=this._transport,s=t.params?._meta?.[kc]?.taskId;if(r===void 0){let l={jsonrpc:"2.0",id:t.id,error:{code:Je.MethodNotFound,message:"Method not found"}};s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:l,timestamp:Date.now()},a?.sessionId).catch(p=>this._onerror(new Error(`Failed to enqueue error response: ${p}`))):a?.send(l).catch(p=>this._onerror(new Error(`Failed to send an error response: ${p}`)));return}let o=new AbortController;this._requestHandlerAbortControllers.set(t.id,o);let i=tL(t.params)?t.params.task:void 0,u=this._taskStore?this.requestTaskStore(t,a?.sessionId):void 0,d={signal:o.signal,sessionId:a?.sessionId,_meta:t.params?._meta,sendNotification:async l=>{let p={relatedRequestId:t.id};s&&(p.relatedTask={taskId:s}),await this.notification(l,p)},sendRequest:async(l,p,y)=>{let m={...y,relatedRequestId:t.id};s&&!m.relatedTask&&(m.relatedTask={taskId:s});let g=m.relatedTask?.taskId??s;return g&&u&&await u.updateTaskStatus(g,"input_required"),await this.request(l,p,m)},authInfo:n?.authInfo,requestId:t.id,requestInfo:n?.requestInfo,taskId:s,taskStore:u,taskRequestedTtl:i?.ttl,closeSSEStream:n?.closeSSEStream,closeStandaloneSSEStream:n?.closeStandaloneSSEStream};Promise.resolve().then(()=>{i&&this.assertTaskHandlerCapability(t.method)}).then(()=>r(t,d)).then(async l=>{if(o.signal.aborted)return;let p={result:l,jsonrpc:"2.0",id:t.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:p,timestamp:Date.now()},a?.sessionId):await a?.send(p)},async l=>{if(o.signal.aborted)return;let p={jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(l.code)?l.code:Je.InternalError,message:l.message??"Internal error",...l.data!==void 0&&{data:l.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:p,timestamp:Date.now()},a?.sessionId):await a?.send(p)}).catch(l=>this._onerror(new Error(`Failed to send response: ${l}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let{progressToken:n,...r}=t.params,a=Number(n),s=this._progressHandlers.get(a);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}let o=this._responseHandlers.get(a),i=this._timeoutInfo.get(a);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(a)}catch(u){this._responseHandlers.delete(a),this._progressHandlers.delete(a),this._cleanupTimeout(a),o(u);return}s(r)}_onresponse(t){let n=Number(t.id),r=this._requestResolvers.get(n);if(r){if(this._requestResolvers.delete(n),rm(t))r(t);else{let o=new He(t.error.code,t.error.message,t.error.data);r(o)}return}let a=this._responseHandlers.get(n);if(a===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let s=!1;if(rm(t)&&t.result&&typeof t.result=="object"){let o=t.result;if(o.task&&typeof o.task=="object"){let i=o.task;typeof i.taskId=="string"&&(s=!0,this._taskProgressTokens.set(i.taskId,n))}}if(s||this._progressHandlers.delete(n),rm(t))a(t);else{let o=He.fromError(t.error.code,t.error.message,t.error.data);a(o)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(t,n,r){let{task:a}=r??{};if(!a){try{yield{type:"result",result:await this.request(t,n,r)}}catch(o){yield{type:"error",error:o instanceof He?o:new He(Je.InternalError,String(o))}}return}let s;try{let o=await this.request(t,kd,r);if(o.task)s=o.task.taskId,yield{type:"taskCreated",task:o.task};else throw new He(Je.InternalError,"Task creation did not return a task");for(;;){let i=await this.getTask({taskId:s},r);if(yield{type:"taskStatus",task:i},Ic(i.status)){i.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:s},n,r)}:i.status==="failed"?yield{type:"error",error:new He(Je.InternalError,`Task ${s} failed`)}:i.status==="cancelled"&&(yield{type:"error",error:new He(Je.InternalError,`Task ${s} was cancelled`)});return}if(i.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:s},n,r)};return}let u=i.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(d=>setTimeout(d,u)),r?.signal?.throwIfAborted()}}catch(o){yield{type:"error",error:o instanceof He?o:new He(Je.InternalError,String(o))}}}request(t,n,r){let{relatedRequestId:a,resumptionToken:s,onresumptiontoken:o,task:i,relatedTask:u}=r??{};return new Promise((d,l)=>{let p=T=>{l(T)};if(!this._transport){p(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(t.method),i&&this.assertTaskCapability(t.method)}catch(T){p(T);return}r?.signal?.throwIfAborted();let y=this._requestMessageId++,m={...t,jsonrpc:"2.0",id:y};r?.onprogress&&(this._progressHandlers.set(y,r.onprogress),m.params={...t.params,_meta:{...t.params?._meta||{},progressToken:y}}),i&&(m.params={...m.params,task:i}),u&&(m.params={...m.params,_meta:{...m.params?._meta||{},[kc]:u}});let g=T=>{this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(T)}},{relatedRequestId:a,resumptionToken:s,onresumptiontoken:o}).catch(_=>this._onerror(new Error(`Failed to send cancellation: ${_}`)));let A=T instanceof He?T:new He(Je.RequestTimeout,String(T));l(A)};this._responseHandlers.set(y,T=>{if(!r?.signal?.aborted){if(T instanceof Error)return l(T);try{let A=_c(n,T.result);A.success?d(A.data):l(A.error)}catch(A){l(A)}}}),r?.signal?.addEventListener("abort",()=>{g(r?.signal?.reason)});let h=r?.timeout??wbe,w=()=>g(He.fromError(Je.RequestTimeout,"Request timed out",{timeout:h}));this._setupTimeout(y,h,r?.maxTotalTimeout,w,r?.resetTimeoutOnProgress??!1);let v=u?.taskId;if(v){let T=A=>{let _=this._responseHandlers.get(y);_?_(A):this._onerror(new Error(`Response handler missing for side-channeled request ${y}`))};this._requestResolvers.set(y,T),this._enqueueTaskMessage(v,{type:"request",message:m,timestamp:Date.now()}).catch(A=>{this._cleanupTimeout(y),l(A)})}else this._transport.send(m,{relatedRequestId:a,resumptionToken:s,onresumptiontoken:o}).catch(T=>{this._cleanupTimeout(y),l(T)})})}async getTask(t,n){return this.request({method:"tasks/get",params:t},Sg,n)}async getTaskResult(t,n,r){return this.request({method:"tasks/result",params:t},n,r)}async listTasks(t,n){return this.request({method:"tasks/list",params:t},Eg,n)}async cancelTask(t,n){return this.request({method:"tasks/cancel",params:t},cL,n)}async notification(t,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);let r=n?.relatedTask?.taskId;if(r){let i={...t,jsonrpc:"2.0",params:{...t.params,_meta:{...t.params?._meta||{},[kc]:n.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:i,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(t.method)&&!t.params&&!n?.relatedRequestId&&!n?.relatedTask){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let i={...t,jsonrpc:"2.0"};n?.relatedTask&&(i={...i,params:{...i.params,_meta:{...i.params?._meta||{},[kc]:n.relatedTask}}}),this._transport?.send(i,n).catch(u=>this._onerror(u))});return}let o={...t,jsonrpc:"2.0"};n?.relatedTask&&(o={...o,params:{...o.params,_meta:{...o.params?._meta||{},[kc]:n.relatedTask}}}),await this._transport.send(o,n)}setRequestHandler(t,n){let r=WS(t);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(a,s)=>{let o=ZS(t,a);return Promise.resolve(n(o,s))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,n){let r=WS(t);this._notificationHandlers.set(r,a=>{let s=ZS(t,a);return Promise.resolve(n(s))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}_cleanupTaskProgressHandler(t){let n=this._taskProgressTokens.get(t);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(t))}async _enqueueTaskMessage(t,n,r){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let a=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(t,n,r,a)}async _clearTaskQueue(t,n){if(this._taskMessageQueue){let r=await this._taskMessageQueue.dequeueAll(t,n);for(let a of r)if(a.type==="request"&&ES(a.message)){let s=a.message.id,o=this._requestResolvers.get(s);o?(o(new He(Je.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(s)):this._onerror(new Error(`Resolver missing for request ${s} during task ${t} cleanup`))}}}async _waitForTaskUpdate(t,n){let r=this._options?.defaultTaskPollInterval??1e3;try{let a=await this._taskStore?.getTask(t);a?.pollInterval&&(r=a.pollInterval)}catch{}return new Promise((a,s)=>{if(n.aborted){s(new He(Je.InvalidRequest,"Request cancelled"));return}let o=setTimeout(a,r);n.addEventListener("abort",()=>{clearTimeout(o),s(new He(Je.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(t,n){let r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async a=>{if(!t)throw new Error("No request provided");return await r.createTask(a,t.id,{method:t.method,params:t.params},n)},getTask:async a=>{let s=await r.getTask(a,n);if(!s)throw new He(Je.InvalidParams,"Failed to retrieve task: Task not found");return s},storeTaskResult:async(a,s,o)=>{await r.storeTaskResult(a,s,o,n);let i=await r.getTask(a,n);if(i){let u=cm.parse({method:"notifications/tasks/status",params:i});await this.notification(u),Ic(i.status)&&this._cleanupTaskProgressHandler(a)}},getTaskResult:a=>r.getTaskResult(a,n),updateTaskStatus:async(a,s,o)=>{let i=await r.getTask(a,n);if(!i)throw new He(Je.InvalidParams,`Task "${a}" not found - it may have been cleaned up`);if(Ic(i.status))throw new He(Je.InvalidParams,`Cannot update task "${a}" from terminal status "${i.status}" to "${s}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(a,s,o,n);let u=await r.getTask(a,n);if(u){let d=cm.parse({method:"notifications/tasks/status",params:u});await this.notification(d),Ic(u.status)&&this._cleanupTaskProgressHandler(a)}},listTasks:a=>r.listTasks(a,n)}}};function ZL(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function KL(e,t){let n={...e};for(let r in t){let a=r,s=t[a];if(s===void 0)continue;let o=n[a];ZL(o)&&ZL(s)?n[a]={...o,...s}:n[a]=s}return n}var OH=Hy(D_(),1),NH=Hy(MH(),1);function d9e(){let e=new OH.default({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,NH.default)(e),e}var A3=class{constructor(t){this._ajv=t??d9e()}getValidator(t){let n="$id"in t&&typeof t.$id=="string"?this._ajv.getSchema(t.$id)??this._ajv.compile(t):this._ajv.compile(t);return r=>n(r)?{valid:!0,data:r,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}};var _3=class{constructor(t){this._server=t}requestStream(t,n,r){return this._server.requestStream(t,n,r)}async getTask(t,n){return this._server.getTask({taskId:t},n)}async getTaskResult(t,n,r){return this._server.getTaskResult({taskId:t},n,r)}async listTasks(t,n){return this._server.listTasks(t?{cursor:t}:void 0,n)}async cancelTask(t,n){return this._server.cancelTask({taskId:t},n)}};function LH(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"tools/call":if(!e.tools?.call)throw new Error(`${n} does not support task creation for tools/call (required for ${t})`);break;default:break}}function BH(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${n} does not support task creation for elicitation/create (required for ${t})`);break;default:break}}var E3=class extends Fg{constructor(t,n){super(n),this._serverInfo=t,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(dm.options.map((r,a)=>[r,a])),this.isMessageIgnored=(r,a)=>{let s=this._loggingLevels.get(a);return s?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(s):!1},this._capabilities=n?.capabilities??{},this._instructions=n?.instructions,this._jsonSchemaValidator=n?.jsonSchemaValidator??new A3,this.setRequestHandler(CS,r=>this._oninitialize(r)),this.setNotificationHandler(PS,()=>this.oninitialized?.()),this._capabilities.logging&&this.setRequestHandler(LS,async(r,a)=>{let s=a.sessionId||a.requestInfo?.headers["mcp-session-id"]||void 0,{level:o}=r.params,i=dm.safeParse(o);return i.success&&this._loggingLevels.set(s,i.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new _3(this)}),this._experimental}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=KL(this._capabilities,t)}setRequestHandler(t,n){let a=Ec(t)?.method;if(!a)throw new Error("Schema is missing a method literal");let s;if(Hs(a)){let i=a;s=i._zod?.def?.value??i.value}else{let i=a;s=i._def?.value??i.value}if(typeof s!="string")throw new Error("Schema method literal must be a string");if(s==="tools/call"){let i=async(u,d)=>{let l=_c(Cd,u);if(!l.success){let g=l.error instanceof Error?l.error.message:String(l.error);throw new He(Je.InvalidParams,`Invalid tools/call request: ${g}`)}let{params:p}=l.data,y=await Promise.resolve(n(u,d));if(p.task){let g=_c(kd,y);if(!g.success){let h=g.error instanceof Error?g.error.message:String(g.error);throw new He(Je.InvalidParams,`Invalid task creation result: ${h}`)}return g.data}let m=_c(Mg,y);if(!m.success){let g=m.error instanceof Error?m.error.message:String(m.error);throw new He(Je.InvalidParams,`Invalid tools/call result: ${g}`)}return m.data};return super.setRequestHandler(t,i)}return super.setRequestHandler(t,n)}assertCapabilityForMethod(t){switch(t){case"sampling/createMessage":if(!this._clientCapabilities?.sampling)throw new Error(`Client does not support sampling (required for ${t})`);break;case"elicitation/create":if(!this._clientCapabilities?.elicitation)throw new Error(`Client does not support elicitation (required for ${t})`);break;case"roots/list":if(!this._clientCapabilities?.roots)throw new Error(`Client does not support listing roots (required for ${t})`);break;case"ping":break}}assertNotificationCapability(t){switch(t){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${t})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${t})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${t})`);break;case"notifications/elicitation/complete":if(!this._clientCapabilities?.elicitation?.url)throw new Error(`Client does not support URL elicitation (required for ${t})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){if(this._capabilities)switch(t){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${t})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${t})`);break;case"ping":case"initialize":break}}assertTaskCapability(t){BH(this._clientCapabilities?.tasks?.requests,t,"Client")}assertTaskHandlerCapability(t){this._capabilities&&LH(this._capabilities.tasks?.requests,t,"Server")}async _oninitialize(t){let n=t.params.protocolVersion;return this._clientCapabilities=t.params.capabilities,this._clientVersion=t.params.clientInfo,{protocolVersion:QN.includes(n)?n:AS,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},hg)}async createMessage(t,n){if((t.tools||t.toolChoice)&&!this._clientCapabilities?.sampling?.tools)throw new Error("Client does not support sampling tools capability.");if(t.messages.length>0){let r=t.messages[t.messages.length-1],a=Array.isArray(r.content)?r.content:[r.content],s=a.some(d=>d.type==="tool_result"),o=t.messages.length>1?t.messages[t.messages.length-2]:void 0,i=o?Array.isArray(o.content)?o.content:[o.content]:[],u=i.some(d=>d.type==="tool_use");if(s){if(a.some(d=>d.type!=="tool_result"))throw new Error("The last message must contain only tool_result content if any is present");if(!u)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(u){let d=new Set(i.filter(p=>p.type==="tool_use").map(p=>p.id)),l=new Set(a.filter(p=>p.type==="tool_result").map(p=>p.toolUseId));if(d.size!==l.size||![...d].every(p=>l.has(p)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return t.tools?this.request({method:"sampling/createMessage",params:t},US,n):this.request({method:"sampling/createMessage",params:t},BS,n)}async elicitInput(t,n){switch(t.mode??"form"){case"url":{if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support url elicitation.");let a=t;return this.request({method:"elicitation/create",params:a},Og,n)}case"form":{if(!this._clientCapabilities?.elicitation?.form)throw new Error("Client does not support form elicitation.");let a=t.mode==="form"?t:{...t,mode:"form"},s=await this.request({method:"elicitation/create",params:a},Og,n);if(s.action==="accept"&&s.content&&a.requestedSchema)try{let i=this._jsonSchemaValidator.getValidator(a.requestedSchema)(s.content);if(!i.valid)throw new He(Je.InvalidParams,`Elicitation response content does not match requested schema: ${i.errorMessage}`)}catch(o){throw o instanceof He?o:new He(Je.InternalError,`Error validating elicitation response: ${o instanceof Error?o.message:String(o)}`)}return s}}}createElicitationCompletionNotifier(t,n){if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:t}},n)}async listRoots(t,n){return this.request({method:"roots/list",params:t},HS,n)}async sendLoggingMessage(t,n){if(this._capabilities.logging&&!this.isMessageIgnored(t.level,n))return this.notification({method:"notifications/message",params:t})}async sendResourceUpdated(t){return this.notification({method:"notifications/resources/updated",params:t})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var HH=Symbol.for("mcp.completable");function F_(e){return!!e&&typeof e=="object"&&HH in e}function FH(e){return e[HH]?.complete}var UH;(function(e){e.Completable="McpCompletable"})(UH||(UH={}));var f9e=/^[A-Za-z0-9._-]{1,128}$/;function l9e(e){let t=[];if(e.length===0)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(e.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${e.length})`]};if(e.includes(" ")&&t.push("Tool name contains spaces, which may cause parsing issues"),e.includes(",")&&t.push("Tool name contains commas, which may cause parsing issues"),(e.startsWith("-")||e.endsWith("-"))&&t.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(e.startsWith(".")||e.endsWith("."))&&t.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!f9e.test(e)){let n=e.split("").filter(r=>!/[A-Za-z0-9._-]/.test(r)).filter((r,a,s)=>s.indexOf(r)===a);return t.push(`Tool name contains invalid characters: ${n.map(r=>`"${r}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:t}}return{isValid:!0,warnings:t}}function p9e(e,t){if(t.length>0){console.warn(`Tool name validation warning for "${e}":`);for(let n of t)console.warn(`  - ${n}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function z_(e){let t=l9e(e);return p9e(e,t.warnings),t.isValid}var k3=class{constructor(t){this._mcpServer=t}registerToolTask(t,n,r){let a={taskSupport:"required",...n.execution};if(a.taskSupport==="forbidden")throw new Error(`Cannot register task-based tool '${t}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(t,n.title,n.description,n.inputSchema,n.outputSchema,n.annotations,a,n._meta,r)}};var I3=class{constructor(t,n){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new E3(t,n)}get experimental(){return this._experimental||(this._experimental={tasks:new k3(this)}),this._experimental}async connect(t){return await this.server.connect(t)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(Lc(Dg)),this.server.assertCanSetRequestHandler(Lc(Cd)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(Dg,()=>({tools:Object.entries(this._registeredTools).filter(([,t])=>t.enabled).map(([t,n])=>{let r={name:t,title:n.title,description:n.description,inputSchema:(()=>{let a=_d(n.inputSchema);return a?VS(a,{strictUnions:!0,pipeStrategy:"input"}):m9e})(),annotations:n.annotations,execution:n.execution,_meta:n._meta};if(n.outputSchema){let a=_d(n.outputSchema);a&&(r.outputSchema=VS(a,{strictUnions:!0,pipeStrategy:"output"}))}return r})})),this.server.setRequestHandler(Cd,async(t,n)=>{try{let r=this._registeredTools[t.params.name];if(!r)throw new He(Je.InvalidParams,`Tool ${t.params.name} not found`);if(!r.enabled)throw new He(Je.InvalidParams,`Tool ${t.params.name} disabled`);let a=!!t.params.task,s=r.execution?.taskSupport,o="createTask"in r.handler;if((s==="required"||s==="optional")&&!o)throw new He(Je.InternalError,`Tool ${t.params.name} has taskSupport '${s}' but was not registered with registerToolTask`);if(s==="required"&&!a)throw new He(Je.MethodNotFound,`Tool ${t.params.name} requires task augmentation (taskSupport: 'required')`);if(s==="optional"&&!a&&o)return await this.handleAutomaticTaskPolling(r,t,n);let i=await this.validateToolInput(r,t.params.arguments,t.params.name),u=await this.executeToolHandler(r,i,n);return a||await this.validateToolOutput(r,u,t.params.name),u}catch(r){if(r instanceof He&&r.code===Je.UrlElicitationRequired)throw r;return this.createToolError(r instanceof Error?r.message:String(r))}}),this._toolHandlersInitialized=!0)}createToolError(t){return{content:[{type:"text",text:t}],isError:!0}}async validateToolInput(t,n,r){if(!t.inputSchema)return;let s=_d(t.inputSchema)??t.inputSchema,o=await dg(s,n);if(!o.success){let i="error"in o?o.error:"Unknown error",u=fg(i);throw new He(Je.InvalidParams,`Input validation error: Invalid arguments for tool ${r}: ${u}`)}return o.data}async validateToolOutput(t,n,r){if(!t.outputSchema||!("content"in n)||n.isError)return;if(!n.structuredContent)throw new He(Je.InvalidParams,`Output validation error: Tool ${r} has an output schema but no structured content was provided`);let a=_d(t.outputSchema),s=await dg(a,n.structuredContent);if(!s.success){let o="error"in s?s.error:"Unknown error",i=fg(o);throw new He(Je.InvalidParams,`Output validation error: Invalid structured content for tool ${r}: ${i}`)}}async executeToolHandler(t,n,r){let a=t.handler;if("createTask"in a){if(!r.taskStore)throw new Error("No task store provided.");let o={...r,taskStore:r.taskStore};if(t.inputSchema){let i=a;return await Promise.resolve(i.createTask(n,o))}else{let i=a;return await Promise.resolve(i.createTask(o))}}if(t.inputSchema){let o=a;return await Promise.resolve(o(n,r))}else{let o=a;return await Promise.resolve(o(r))}}async handleAutomaticTaskPolling(t,n,r){if(!r.taskStore)throw new Error("No task store provided for task-capable tool.");let a=await this.validateToolInput(t,n.params.arguments,n.params.name),s=t.handler,o={...r,taskStore:r.taskStore},i=a?await Promise.resolve(s.createTask(a,o)):await Promise.resolve(s.createTask(o)),u=i.task.taskId,d=i.task,l=d.pollInterval??5e3;for(;d.status!=="completed"&&d.status!=="failed"&&d.status!=="cancelled";){await new Promise(y=>setTimeout(y,l));let p=await r.taskStore.getTask(u);if(!p)throw new He(Je.InternalError,`Task ${u} not found during polling`);d=p}return await r.taskStore.getTaskResult(u)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(Lc(Ng)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(Ng,async t=>{switch(t.params.ref.type){case"ref/prompt":return mL(t),this.handlePromptCompletion(t,t.params.ref);case"ref/resource":return bL(t),this.handleResourceCompletion(t,t.params.ref);default:throw new He(Je.InvalidParams,`Invalid completion reference: ${t.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(t,n){let r=this._registeredPrompts[n.name];if(!r)throw new He(Je.InvalidParams,`Prompt ${n.name} not found`);if(!r.enabled)throw new He(Je.InvalidParams,`Prompt ${n.name} disabled`);if(!r.argsSchema)return Fm;let s=Ec(r.argsSchema)?.[t.params.argument.name];if(!F_(s))return Fm;let o=FH(s);if(!o)return Fm;let i=await o(t.params.argument.value,t.params.context);return jH(i)}async handleResourceCompletion(t,n){let r=Object.values(this._registeredResourceTemplates).find(o=>o.resourceTemplate.uriTemplate.toString()===n.uri);if(!r){if(this._registeredResources[n.uri])return Fm;throw new He(Je.InvalidParams,`Resource template ${t.params.ref.uri} not found`)}let a=r.resourceTemplate.completeCallback(t.params.argument.name);if(!a)return Fm;let s=await a(t.params.argument.value,t.params.context);return jH(s)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Lc(Ig)),this.server.assertCanSetRequestHandler(Lc(Cg)),this.server.assertCanSetRequestHandler(Lc(Pg)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Ig,async(t,n)=>{let r=Object.entries(this._registeredResources).filter(([s,o])=>o.enabled).map(([s,o])=>({uri:s,name:o.name,...o.metadata})),a=[];for(let s of Object.values(this._registeredResourceTemplates)){if(!s.resourceTemplate.listCallback)continue;let o=await s.resourceTemplate.listCallback(n);for(let i of o.resources)a.push({...s.metadata,...i})}return{resources:[...r,...a]}}),this.server.setRequestHandler(Cg,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([n,r])=>({name:n,uriTemplate:r.resourceTemplate.uriTemplate.toString(),...r.metadata}))})),this.server.setRequestHandler(Pg,async(t,n)=>{let r=new URL(t.params.uri),a=this._registeredResources[r.toString()];if(a){if(!a.enabled)throw new He(Je.InvalidParams,`Resource ${r} disabled`);return a.readCallback(r,n)}for(let s of Object.values(this._registeredResourceTemplates)){let o=s.resourceTemplate.uriTemplate.match(r.toString());if(o)return s.readCallback(r,o,n)}throw new He(Je.InvalidParams,`Resource ${r} not found`)}),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(Lc(Rg)),this.server.assertCanSetRequestHandler(Lc($g)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(Rg,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,t])=>t.enabled).map(([t,n])=>({name:t,title:n.title,description:n.description,arguments:n.argsSchema?y9e(n.argsSchema):void 0}))})),this.server.setRequestHandler($g,async(t,n)=>{let r=this._registeredPrompts[t.params.name];if(!r)throw new He(Je.InvalidParams,`Prompt ${t.params.name} not found`);if(!r.enabled)throw new He(Je.InvalidParams,`Prompt ${t.params.name} disabled`);if(r.argsSchema){let a=_d(r.argsSchema),s=await dg(a,t.params.arguments);if(!s.success){let u="error"in s?s.error:"Unknown error",d=fg(u);throw new He(Je.InvalidParams,`Invalid arguments for prompt ${t.params.name}: ${d}`)}let o=s.data,i=r.callback;return await Promise.resolve(i(o,n))}else{let a=r.callback;return await Promise.resolve(a(n))}}),this._promptHandlersInitialized=!0)}resource(t,n,...r){let a;typeof r[0]=="object"&&(a=r.shift());let s=r[0];if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);let o=this._createRegisteredResource(t,void 0,n,a,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}else{if(this._registeredResourceTemplates[t])throw new Error(`Resource template ${t} is already registered`);let o=this._createRegisteredResourceTemplate(t,void 0,n,a,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}}registerResource(t,n,r,a){if(typeof n=="string"){if(this._registeredResources[n])throw new Error(`Resource ${n} is already registered`);let s=this._createRegisteredResource(t,r.title,n,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}else{if(this._registeredResourceTemplates[t])throw new Error(`Resource template ${t} is already registered`);let s=this._createRegisteredResourceTemplate(t,r.title,n,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}}_createRegisteredResource(t,n,r,a,s){let o={name:t,title:n,metadata:a,readCallback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({uri:null}),update:i=>{typeof i.uri<"u"&&i.uri!==r&&(delete this._registeredResources[r],i.uri&&(this._registeredResources[i.uri]=o)),typeof i.name<"u"&&(o.name=i.name),typeof i.title<"u"&&(o.title=i.title),typeof i.metadata<"u"&&(o.metadata=i.metadata),typeof i.callback<"u"&&(o.readCallback=i.callback),typeof i.enabled<"u"&&(o.enabled=i.enabled),this.sendResourceListChanged()}};return this._registeredResources[r]=o,o}_createRegisteredResourceTemplate(t,n,r,a,s){let o={resourceTemplate:r,title:n,metadata:a,readCallback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:d=>{typeof d.name<"u"&&d.name!==t&&(delete this._registeredResourceTemplates[t],d.name&&(this._registeredResourceTemplates[d.name]=o)),typeof d.title<"u"&&(o.title=d.title),typeof d.template<"u"&&(o.resourceTemplate=d.template),typeof d.metadata<"u"&&(o.metadata=d.metadata),typeof d.callback<"u"&&(o.readCallback=d.callback),typeof d.enabled<"u"&&(o.enabled=d.enabled),this.sendResourceListChanged()}};this._registeredResourceTemplates[t]=o;let i=r.uriTemplate.variableNames;return Array.isArray(i)&&i.some(d=>!!r.completeCallback(d))&&this.setCompletionRequestHandler(),o}_createRegisteredPrompt(t,n,r,a,s){let o={title:n,description:r,argsSchema:a===void 0?void 0:Ru(a),callback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:i=>{typeof i.name<"u"&&i.name!==t&&(delete this._registeredPrompts[t],i.name&&(this._registeredPrompts[i.name]=o)),typeof i.title<"u"&&(o.title=i.title),typeof i.description<"u"&&(o.description=i.description),typeof i.argsSchema<"u"&&(o.argsSchema=Ru(i.argsSchema)),typeof i.callback<"u"&&(o.callback=i.callback),typeof i.enabled<"u"&&(o.enabled=i.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[t]=o,a&&Object.values(a).some(u=>{let d=u instanceof Na?u._def?.innerType:u;return F_(d)})&&this.setCompletionRequestHandler(),o}_createRegisteredTool(t,n,r,a,s,o,i,u,d){z_(t);let l={title:n,description:r,inputSchema:zH(a),outputSchema:zH(s),annotations:o,execution:i,_meta:u,handler:d,enabled:!0,disable:()=>l.update({enabled:!1}),enable:()=>l.update({enabled:!0}),remove:()=>l.update({name:null}),update:p=>{typeof p.name<"u"&&p.name!==t&&(typeof p.name=="string"&&z_(p.name),delete this._registeredTools[t],p.name&&(this._registeredTools[p.name]=l)),typeof p.title<"u"&&(l.title=p.title),typeof p.description<"u"&&(l.description=p.description),typeof p.paramsSchema<"u"&&(l.inputSchema=Ru(p.paramsSchema)),typeof p.outputSchema<"u"&&(l.outputSchema=Ru(p.outputSchema)),typeof p.callback<"u"&&(l.handler=p.callback),typeof p.annotations<"u"&&(l.annotations=p.annotations),typeof p._meta<"u"&&(l._meta=p._meta),typeof p.enabled<"u"&&(l.enabled=p.enabled),this.sendToolListChanged()}};return this._registeredTools[t]=l,this.setToolRequestHandlers(),this.sendToolListChanged(),l}tool(t,...n){if(this._registeredTools[t])throw new Error(`Tool ${t} is already registered`);let r,a,s,o;if(typeof n[0]=="string"&&(r=n.shift()),n.length>1){let u=n[0];j_(u)?(a=n.shift(),n.length>1&&typeof n[0]=="object"&&n[0]!==null&&!j_(n[0])&&(o=n.shift())):typeof u=="object"&&u!==null&&(o=n.shift())}let i=n[0];return this._createRegisteredTool(t,void 0,r,a,s,o,{taskSupport:"forbidden"},void 0,i)}registerTool(t,n,r){if(this._registeredTools[t])throw new Error(`Tool ${t} is already registered`);let{title:a,description:s,inputSchema:o,outputSchema:i,annotations:u,_meta:d}=n;return this._createRegisteredTool(t,a,s,o,i,u,{taskSupport:"forbidden"},d,r)}prompt(t,...n){if(this._registeredPrompts[t])throw new Error(`Prompt ${t} is already registered`);let r;typeof n[0]=="string"&&(r=n.shift());let a;n.length>1&&(a=n.shift());let s=n[0],o=this._createRegisteredPrompt(t,void 0,r,a,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),o}registerPrompt(t,n,r){if(this._registeredPrompts[t])throw new Error(`Prompt ${t} is already registered`);let{title:a,description:s,argsSchema:o}=n,i=this._createRegisteredPrompt(t,a,s,o,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),i}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(t,n){return this.server.sendLoggingMessage(t,n)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var m9e={type:"object",properties:{}};function qH(e){return e!==null&&typeof e=="object"&&"parse"in e&&typeof e.parse=="function"&&"safeParse"in e&&typeof e.safeParse=="function"}function b9e(e){return"_def"in e||"_zod"in e||qH(e)}function j_(e){return typeof e!="object"||e===null||b9e(e)?!1:Object.keys(e).length===0?!0:Object.values(e).some(qH)}function zH(e){if(e)return j_(e)?Ru(e):e}function y9e(e){let t=Ec(e);return t?Object.entries(t).map(([n,r])=>{let a=CN(r),s=PN(r);return{name:n,description:a,required:!s}}):[]}function Lc(e){let n=Ec(e)?.method;if(!n)throw new Error("Schema is missing a method literal");let r=lg(n);if(typeof r=="string")return r;throw new Error("Schema method literal must be a string")}function jH(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}var Fm={completion:{values:[],hasMore:!1}};import VH from"node:process";var C3=class{append(t){this._buffer=this._buffer?Buffer.concat([this._buffer,t]):t}readMessage(){if(!this._buffer)return null;let t=this._buffer.indexOf(`
`);if(t===-1)return null;let n=this._buffer.toString("utf8",0,t).replace(/\r$/,"");return this._buffer=this._buffer.subarray(t+1),g9e(n)}clear(){this._buffer=void 0}};function g9e(e){return oL.parse(JSON.parse(e))}function GH(e){return JSON.stringify(e)+`
`}var P3=class{constructor(t=VH.stdin,n=VH.stdout){this._stdin=t,this._stdout=n,this._readBuffer=new C3,this._started=!1,this._ondata=r=>{this._readBuffer.append(r),this.processReadBuffer()},this._onerror=r=>{this.onerror?.(r)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(;;)try{let t=this._readBuffer.readMessage();if(t===null)break;this.onmessage?.(t)}catch(t){this.onerror?.(t)}}async close(){this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),this.onclose?.()}send(t){return new Promise(n=>{let r=GH(t);this._stdout.write(r)?n():this._stdout.once("drain",n)})}};t0();import{existsSync as Z9e}from"node:fs";import{homedir as tF}from"node:os";import*as eE from"node:path";var K9e=C.object({});function nF(e){e.tool("has_wallet","Check if pragma wallet is initialized. Returns status of passkey, session key, and config. Use to verify setup before operations.",K9e.shape,async()=>{let t=await J9e();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}function X9e(e){return e.startsWith("~/")?eE.join(tF(),e.slice(2)):e}async function J9e(){let e=process.env.PRAGMA_CONFIG_PATH||eE.join(tF(),".pragma","config.json"),t=X9e(e),n=Z9e(t),r=!1,a=!1;try{r=await qm()}catch{}try{a=await D3()}catch{}let s=_t(),o=s?n&&a:n&&r&&a;return{initialized:o,details:{hasPasskey:s?!0:r,hasSessionKey:a,hasConfig:n},message:o?"Pragma wallet is configured and ready":"Pragma wallet not fully configured. Run /pragma:setup to initialize."}}We();hC();t0();Te();var Rve=C.object({});function HZ(e){e.tool("has_providers","Check which API providers are configured (RPC, bundler, data, quote). Use to verify provider setup before operations that require them.",Rve.shape,async()=>{let t=await $ve();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}async function $ve(){let e=await Ct(),t=process.env.PRAGMA_SIGNER_PATH||"pragma-signer";if(e)return{configured:!0,mode:"x402",services:{rpc:{configured:!0},bundler:{hasAdapters:!0,adapters:["proxy"]},data:{hasAdapters:!0,adapters:["proxy"]},quote:{hasAdapters:!0,adapters:["proxy"]}},message:"x402 mode active - all providers available via proxy",signerPath:t};let n=await q(),r=!1;try{r=await J_("rpc")}catch{}let a=v8("quote"),s=v8("bundler"),o=v8("data"),i=n?.providers?.quote??[],u=n?.providers?.bundler??[],d=n?.providers?.data??[],l=r,p=[];return r&&p.push("RPC"),a.length>0&&p.push(`Quote (${a.length} adapter${a.length>1?"s":""})`),s.length>0&&p.push(`Bundler (${s.length} adapter${s.length>1?"s":""})`),o.length>0&&p.push(`Data (${o.length} adapter${o.length>1?"s":""})`),{configured:l,mode:"byok",services:{rpc:{configured:r},quote:{hasAdapters:a.length>0,adapters:a,activeAdapters:i.length>0?i:void 0},bundler:{hasAdapters:s.length>0,adapters:s,activeAdapters:u.length>0?u:void 0},data:{hasAdapters:o.length>0,adapters:o,activeAdapters:d.length>0?d:void 0}},message:l?`BYOK mode - services configured: ${p.join(", ")}`:"BYOK mode - no providers configured. Run /pragma:providers to set up.",signerPath:t}}t0();Y();var ix=class extends TypeError{constructor(t,n){let r,{message:a,explanation:s,...o}=t,{path:i}=t,u=i.length===0?a:`At path: ${i.join(".")} -- ${a}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}};function Dve(e){return Ll(e)&&typeof e[Symbol.iterator]=="function"}function Ll(e){return typeof e=="object"&&e!==null}function xC(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function FZ(e){let{done:t,value:n}=e.next();return t?void 0:n}function Mve(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:a,branch:s}=t,{type:o}=n,{refinement:i,message:u=`Expected a value of type \`${o}\`${i?` with refinement \`${i}\``:""}, but received: \`${xC(r)}\``}=e;return{value:r,type:o,refinement:i,key:a[a.length-1],path:a,branch:s,...e,message:u}}function*T8(e,t,n,r){Dve(e)||(e=[e]);for(let a of e){let s=Mve(a,t,n,r);s&&(yield s)}}function*cx(e,t,n={}){let{path:r=[],branch:a=[e],coerce:s=!1,mask:o=!1}=n,i={path:r,branch:a};if(s&&(e=t.coercer(e,i),o&&t.type!=="type"&&Ll(t.schema)&&Ll(e)&&!Array.isArray(e)))for(let d in e)t.schema[d]===void 0&&delete e[d];let u="valid";for(let d of t.validator(e,i))d.explanation=n.message,u="not_valid",yield[d,void 0];for(let[d,l,p]of t.entries(e,i)){let y=cx(l,p,{path:d===void 0?r:[...r,d],branch:d===void 0?a:[...a,l],coerce:s,mask:o,message:n.message});for(let m of y)m[0]?(u=m[0].refinement===null||m[0].refinement===void 0?"not_valid":"not_refined",yield[m[0],void 0]):s&&(l=m[1],d===void 0?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):Ll(e)&&(l!==void 0||d in e)&&(e[d]=l))}if(u!=="not_valid")for(let d of t.refiner(e,i))d.explanation=n.message,u="not_refined",yield[d,void 0];u==="valid"&&(yield[void 0,e])}var Bl=class{constructor(t){let{type:n,schema:r,validator:a,refiner:s,coercer:o=u=>u,entries:i=function*(){}}=t;this.type=n,this.schema=r,this.entries=i,this.coercer=o,a?this.validator=(u,d)=>{let l=a(u,d);return T8(l,d,this,u)}:this.validator=()=>[],s?this.refiner=(u,d)=>{let l=s(u,d);return T8(l,d,this,u)}:this.refiner=()=>[]}assert(t,n){return Ove(t,this,n)}create(t,n){return Nve(t,this,n)}is(t){return Bve(t,this)}mask(t,n){return Lve(t,this,n)}validate(t,n={}){return S8(t,this,n)}};function Ove(e,t,n){let r=S8(e,t,{message:n});if(r[0])throw r[0]}function Nve(e,t,n){let r=S8(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Lve(e,t,n){let r=S8(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Bve(e,t){return!S8(e,t)[0]}function S8(e,t,n={}){let r=cx(e,t,n),a=FZ(r);return a[0]?[new ix(a[0],function*(){for(let i of r)i[0]&&(yield i[0])}),void 0]:[void 0,a[1]]}function zZ(e,t){return new Bl({type:e,schema:null,validator:t})}function A8(){return zZ("string",e=>typeof e=="string"||`Expected a string, but received: ${xC(e)}`)}function _8(e,t){return Uve(e,"pattern",n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`)}function Uve(e,t,n){return new Bl({...e,*refiner(r,a){yield*e.refiner(r,a);let s=n(r,a),o=T8(s,a,e,r);for(let i of o)yield{...i,refinement:t}}})}function Hve(e){return typeof e?.prototype?.constructor?.name=="string"}function Fve(e,t){return Hve(e)?new e({message:t}):e({message:t})}var wC=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function E8(e,t="Assertion failed.",n=wC){if(!e)throw t instanceof Error?t:Fve(n,t)}yb();var jZ=Hy(vC(),1);var{memoize:TC}=jZ.default,qZ=/^(?:0x)?[0-9a-f]+$/iu,zve=/^0x[0-9a-f]+$/iu,GZ=/^0x[0-9a-f]{40}$/u,VZ=/^0x[0-9a-fA-F]{40}$/u,jve=_8(A8(),qZ),qve=_8(A8(),zve),Gve=_8(A8(),GZ),Vve=_8(A8(),VZ),SC=e=>typeof e=="string";function A6(e){return SC(e)&&qZ.test(e)}function WZ(e){return SC(e)&&GZ.test(e)}function AC(e){return SC(e)&&VZ.test(e)}function _C(e){E8(A6(e),"Value must be a hexadecimal string.")}function Wve(e){E8(AC(e),"Invalid hex address.");let t=E5(e).toLowerCase(),n=Lo(t),{length:r}=t,a=new Array(r);for(let s=0;s<r;s++){let o=s>>1,i=s&1,u=n[o],d=i===0?u>>4:u&15;a[s]=d>=8?t[s].toUpperCase():t[s]}return`0x${a.join("")}`}var ZZ=TC(Wve);function Zve(e){return AC(e)?ZZ(e)===e:!1}var KZ=TC(Zve);function Kve(e){return WZ(e)||KZ(e)}var Xve=TC(Kve);function EC(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`}function E5(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}var XZ=48,JZ=58,QZ=87;function Jve(){let e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}var Qve=Jve();function Yve(e){return e instanceof Uint8Array}function eTe(e){E8(Yve(e),"Value must be a Uint8Array.")}function q1(e){if(eTe(e),e.length===0)return"0x";let t=Qve(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return EC(n.join(""))}function ux(e){if(e?.toLowerCase?.()==="0x")return new Uint8Array;_C(e);let t=E5(e).toLowerCase(),n=t.length%2===0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let a=0;a<r.length;a++){let s=n.charCodeAt(a*2),o=n.charCodeAt(a*2+1),i=s-(s<JZ?XZ:QZ),u=o-(o<JZ?XZ:QZ);r[a]=i*16+u}return r}var ap=Hy(cee(),1);yb();var Ko={out:"hex"};function Xo(e,t){if(t.out==="hex"){let r=typeof e=="string"?e:q1(e);return r.startsWith("0x")?r:`0x${r}`}return e instanceof Uint8Array?e:ux(e)}var rPe=e=>typeof e=="string"?e:q1(e);var lr=({value:e,size:t})=>e.toString(16).padStart(t*2,"0");function uee(e,t=Ko){let{maxValue:n}=e;if(n<0n)throw new Error("Invalid maxValue: must be greater than or equal to zero");let r=lr({value:n,size:32});return Xo(r,t)}var i7=253402300799;function dee(e,t=Ko){let{timestampAfterThreshold:n,timestampBeforeThreshold:r}=e;if(n<0)throw new Error("Invalid timestampAfterThreshold: must be zero or positive");if(r<0)throw new Error("Invalid timestampBeforeThreshold: must be zero or positive");if(r>i7)throw new Error(`Invalid timestampBeforeThreshold: must be less than or equal to ${i7}`);if(n>i7)throw new Error(`Invalid timestampAfterThreshold: must be less than or equal to ${i7}`);if(r!==0&&n>=r)throw new Error("Invalid thresholds: timestampBeforeThreshold must be greater than timestampAfterThreshold when both are specified");let a=lr({value:n,size:16}),s=lr({value:r,size:16}),o=`0x${a}${s}`;return Xo(o,t)}function fee(e,t=Ko){let{periodAmount:n,periodDuration:r,startDate:a}=e;if(n<=0n)throw new Error("Invalid periodAmount: must be a positive number");if(r<=0)throw new Error("Invalid periodDuration: must be a positive number");if(a<=0)throw new Error("Invalid startDate: must be a positive number");let s=lr({value:n,size:32}),o=lr({value:r,size:32}),i=lr({value:a,size:32}),u=`0x${s}${o}${i}`;return Xo(u,t)}function lee(e,t=Ko){let{calldata:n}=e;if(typeof n=="string"&&!n.startsWith("0x"))throw new Error("Invalid calldata: must be a hex string starting with 0x");return Xo(n,t)}var aPe=253402300799;function pee(e,t=Ko){let{initialAmount:n,maxAmount:r,amountPerSecond:a,startTime:s}=e;if(n<0n)throw new Error("Invalid initialAmount: must be greater than zero");if(r<=0n)throw new Error("Invalid maxAmount: must be a positive number");if(r<n)throw new Error("Invalid maxAmount: must be greater than initialAmount");if(a<=0n)throw new Error("Invalid amountPerSecond: must be a positive number");if(s<=0)throw new Error("Invalid startTime: must be a positive number");if(s>aPe)throw new Error("Invalid startTime: must be less than or equal to 253402300799");let o=lr({value:n,size:32}),i=lr({value:r,size:32}),u=lr({value:a,size:32}),d=lr({value:s,size:32}),l=`0x${o}${i}${u}${d}`;return Xo(l,t)}var sPe=253402300799;function mee(e,t=Ko){let{tokenAddress:n,initialAmount:r,maxAmount:a,amountPerSecond:s,startTime:o}=e;if(!n)throw new Error("Invalid tokenAddress: must be a valid address");let i;if(typeof n=="string"){if(!A6(n)||n.length!==42)throw new Error("Invalid tokenAddress: must be a valid address");i=n}else{if(n.length!==20)throw new Error("Invalid tokenAddress: must be a valid address");i=q1(n)}if(r<0n)throw new Error("Invalid initialAmount: must be greater than zero");if(a<=0n)throw new Error("Invalid maxAmount: must be a positive number");if(a<r)throw new Error("Invalid maxAmount: must be greater than initialAmount");if(s<=0n)throw new Error("Invalid amountPerSecond: must be a positive number");if(o<=0)throw new Error("Invalid startTime: must be a positive number");if(o>sPe)throw new Error("Invalid startTime: must be less than or equal to 253402300799");let u=lr({value:r,size:32}),d=lr({value:a,size:32}),l=lr({value:s,size:32}),p=lr({value:o,size:32}),y=`${i}${u}${d}${l}${p}`;return Xo(y,t)}function bee(e,t=Ko){let{tokenAddress:n,periodAmount:r,periodDuration:a,startDate:s}=e;if(!n)throw new Error("Invalid tokenAddress: must be a valid address");let o;if(typeof n=="string"){if(!A6(n)||n.length!==42)throw new Error("Invalid tokenAddress: must be a valid address");o=n}else{if(n.length!==20)throw new Error("Invalid tokenAddress: must be a valid address");o=q1(n)}if(r<=0n)throw new Error("Invalid periodAmount: must be a positive number");if(a<=0)throw new Error("Invalid periodDuration: must be a positive number");if(s<=0)throw new Error("Invalid startDate: must be a positive number");let i=lr({value:r,size:32}),u=lr({value:a,size:32}),d=lr({value:s,size:32}),l=`${o}${i}${u}${d}`;return Xo(l,t)}var oPe=66;function yee(e,t=Ko){let{nonce:n}=e;if(n instanceof Uint8Array&&n.length===0)throw new Error("Invalid nonce: Uint8Array must not be empty");if(typeof n=="string"&&!n.startsWith("0x"))throw new Error("Invalid nonce: string must have 0x prefix");let r=rPe(n);if(r==="0x")throw new Error("Invalid nonce: must not be empty");if(!A6(r))throw new Error("Invalid nonce: must be a valid BytesLike value");if(r.length>oPe)throw new Error("Invalid nonce: must be 32 bytes or less in length");let o=`0x${r.slice(2).padStart(64,"0")}`;return Xo(o,t)}function gee(e,t=Ko){let{startIndex:n,value:r}=e;if(n<0)throw new Error("Invalid startIndex: must be zero or positive");if(!Number.isInteger(n))throw new Error("Invalid startIndex: must be a whole number");let a;if(typeof r=="string"){if(!r.startsWith("0x"))throw new Error("Invalid value: must be a hex string starting with 0x");a=E5(r)}else a=E5(q1(r));let s=lr({value:n,size:32});return Xo(`0x${s}${a}`,t)}var a2="0x0000000000000000000000000000000000000a11",B6="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",hee="0x88c1d2ecf185adf710588203a5f263f0ff61be0d33da39792cde19ba9aa4331e",iPe="0x80ad7e1b04ee6d994a125f4714ca0720908bd80ed16063ec8aee4b88e9253e2d",cPe="(address,address,bytes32,(address,bytes,bytes)[],uint256,bytes)[]";function xee(e,t=Ko){let n;if(e.length===0)n=new Uint8Array(64),n[31]=32;else{let r=e.map(a=>[a.delegate,a.delegator,a.authority,a.caveats.map(s=>[s.enforcer,s.terms,s.args]),a.salt,a.signature]);n=(0,ap.encodeSingle)(cPe,r)}return Xo(n,t)}function ec(e,t=Ko){let n=(0,ap.encode)(["bytes32","address","address","bytes32","bytes32","uint256"],[hee,e.delegate,e.delegator,e.authority,uPe(e.caveats),e.salt]),r=Lo(n);return Xo(r,t)}function uPe(e){let t=32*e.length,n=new Uint8Array(t);for(let r=0;r<e.length;r++){let a=e[r];if(!a)throw new Error(`Caveat was undefined at index ${r}`);let s=dPe(a);n.set(s,r*32)}return Lo(n)}function dPe(e){let t=typeof e.terms=="string"?ux(e.terms):e.terms,n=Lo(t),r=(0,ap.encode)(["bytes32","address","bytes32"],[iPe,e.enforcer,n]);return Lo(r)}Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();var fPe=Object.defineProperty,Ie=(e,t)=>{for(var n in t)fPe(e,n,{get:t[n],enumerable:!0})},lPe="No caveats found. If you definitely want to create an empty caveat collection, set `allowInsecureUnrestrictedDelegation` to `true`.",pPe=class wee{#e=[];#a=!1;#t;#n;#r;constructor(t,n={},r={},a=[]){this.#t=t,this.#n=n,this.#r=r,this.#e=a}extend(t,n){return new wee(this.#t,this.#n,{...this.#r,[t]:n},this.#e)}addCaveat(t,n){if(typeof t=="object"){let s={args:"0x",...t};return this.#e=[...this.#e,s],this}let r=t,a=this.#r[r];if(typeof a=="function"){let s=a(this.#t,n);return this.#e=[...this.#e,s],this}throw new Error(`Function "${String(r)}" does not exist.`)}build(){if(this.#a)throw new Error("This CaveatBuilder has already been built.");if(this.#e.length===0&&!this.#n.allowInsecureUnrestrictedDelegation)throw new Error(lPe);return this.#a=!0,this.#e}};var mPe="allowedCalldata",bPe=(e,t)=>{let{startIndex:n,value:r}=t,a=gee({startIndex:n,value:r}),{caveatEnforcers:{AllowedCalldataEnforcer:s}}=e;if(!s)throw new Error("AllowedCalldataEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},yPe="allowedMethods",gPe=10,hPe=(e,t)=>{let{selectors:n}=t;if(n.length===0)throw new Error("Invalid selectors: must provide at least one selector");let r=n.map(xPe),a=Ae(r),{caveatEnforcers:{AllowedMethodsEnforcer:s}}=e;if(!s)throw new Error("AllowedMethodsEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}};function xPe(e){if(mn(e)){if(e.length===gPe)return e;throw new Error("Invalid selector: must be a 4 byte hex string, abi function signature, or AbiFunction")}try{return Za(e)}catch(t){throw new Error("Invalid selector: must be a 4 byte hex string, abi function signature, or AbiFunction",{cause:t})}}var wPe="allowedTargets",vPe=(e,t)=>{let{targets:n}=t;if(n.length===0)throw new Error("Invalid targets: must provide at least one target address");if(n.filter(o=>!Se(o,{strict:!1})).length>0)throw new Error("Invalid targets: must be valid addresses");let a=Ae(n),{caveatEnforcers:{AllowedTargetsEnforcer:s}}=e;if(!s)throw new Error("AllowedTargetsEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},TPe="argsEqualityCheck",SPe=(e,t)=>{let{args:n}=t;if(!mn(n))throw new Error("Invalid config: args must be a valid hex string");let{caveatEnforcers:{ArgsEqualityCheckEnforcer:r}}=e;if(!r)throw new Error("ArgsEqualityCheckEnforcer not found in environment");return{enforcer:r,terms:n,args:"0x"}},APe="blockNumber",_Pe=(e,t)=>{let{afterThreshold:n,beforeThreshold:r}=t;if(n===0n&&r===0n)throw new Error("Invalid thresholds: At least one of afterThreshold or beforeThreshold must be specified");if(r!==0n&&n>=r)throw new Error("Invalid thresholds: afterThreshold must be less than beforeThreshold if both are specified");let a=Ae([ge(n,{size:16}),ge(r,{size:16})]),{caveatEnforcers:{BlockNumberEnforcer:s}}=e;if(!s)throw new Error("BlockNumberEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},EPe="deployed",kPe=(e,t)=>{let{contractAddress:n,salt:r,bytecode:a}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid contractAddress: must be a valid Ethereum address");if(!mn(r))throw new Error("Invalid salt: must be a valid hexadecimal string");if(!mn(a))throw new Error("Invalid bytecode: must be a valid hexadecimal string");let s=Ae([n,It(r,{size:32}),a]),{caveatEnforcers:{DeployedEnforcer:o}}=e;if(!o)throw new Error("DeployedEnforcer not found in environment");return{enforcer:o,terms:s,args:"0x"}},IPe="erc1155BalanceChange",CPe=(e,t)=>{let{tokenAddress:n,recipient:r,tokenId:a,balance:s,changeType:o}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(!Se(r,{strict:!1}))throw new Error("Invalid recipient: must be a valid address");if(s<=0n)throw new Error("Invalid balance: must be a positive number");if(a<0n)throw new Error("Invalid tokenId: must be a non-negative number");if(o!==0&&o!==1)throw new Error("Invalid changeType: must be either Increase or Decrease");let i=A0(["uint8","address","address","uint256","uint256"],[o,n,r,a,s]),{caveatEnforcers:{ERC1155BalanceChangeEnforcer:u}}=e;if(!u)throw new Error("ERC1155BalanceChangeEnforcer not found in environment");return{enforcer:u,terms:i,args:"0x"}},PPe="erc20BalanceChange",RPe=(e,t)=>{let{tokenAddress:n,recipient:r,balance:a,changeType:s}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(a<=0n)throw new Error("Invalid balance: must be a positive number");if(s!==0&&s!==1)throw new Error("Invalid changeType: must be either Increase or Decrease");let o=A0(["uint8","address","address","uint256"],[s,n,r,a]),{caveatEnforcers:{ERC20BalanceChangeEnforcer:i}}=e;if(!i)throw new Error("ERC20BalanceChangeEnforcer not found in environment");return{enforcer:i,terms:o,args:"0x"}},vee="erc20PeriodTransfer",$Pe=(e,t)=>{let{tokenAddress:n,periodAmount:r,periodDuration:a,startDate:s}=t,o=bee({tokenAddress:n,periodAmount:r,periodDuration:a,startDate:s}),{caveatEnforcers:{ERC20PeriodTransferEnforcer:i}}=e;if(!i)throw new Error("ERC20PeriodTransferEnforcer not found in environment");return{enforcer:i,terms:o,args:"0x"}},Tee="erc20Streaming",DPe=(e,t)=>{let{tokenAddress:n,initialAmount:r,maxAmount:a,amountPerSecond:s,startTime:o}=t,i=mee({tokenAddress:n,initialAmount:r,maxAmount:a,amountPerSecond:s,startTime:o}),{caveatEnforcers:{ERC20StreamingEnforcer:u}}=e;if(!u)throw new Error("ERC20StreamingEnforcer not found in environment");return{enforcer:u,terms:i,args:"0x"}},See="erc20TransferAmount",MPe=(e,t)=>{let{tokenAddress:n,maxAmount:r}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(r<=0n)throw new Error("Invalid maxAmount: must be a positive number");let a=Ae([n,ge(r,{size:32})]),{caveatEnforcers:{ERC20TransferAmountEnforcer:s}}=e;if(!s)throw new Error("ERC20TransferAmountEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},OPe="erc721BalanceChange",NPe=(e,t)=>{let{tokenAddress:n,recipient:r,amount:a,changeType:s}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(!Se(r,{strict:!1}))throw new Error("Invalid recipient: must be a valid address");if(a<=0n)throw new Error("Invalid balance: must be a positive number");if(s!==0&&s!==1)throw new Error("Invalid changeType: must be either Increase or Decrease");let o=A0(["uint8","address","address","uint256"],[s,n,r,a]),{caveatEnforcers:{ERC721BalanceChangeEnforcer:i}}=e;if(!i)throw new Error("ERC721BalanceChangeEnforcer not found in environment");return{enforcer:i,terms:o,args:"0x"}},Aee="erc721Transfer",LPe=(e,t)=>{let{tokenAddress:n,tokenId:r}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(r<0n)throw new Error("Invalid tokenId: must be a non-negative number");let a=Ae([n,ge(r,{size:32})]),{caveatEnforcers:{ERC721TransferEnforcer:s}}=e;if(!s)throw new Error("ERC721TransferEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},BPe="exactCalldataBatch",UPe=(e,t)=>{let{executions:n}=t;if(n.length===0)throw new Error("Invalid executions: array cannot be empty");for(let s of n){if(!Se(s.target,{strict:!1}))throw new Error("Invalid target: must be a valid address");if(s.value<0n)throw new Error("Invalid value: must be a non-negative number");if(!s.callData.startsWith("0x"))throw new Error("Invalid calldata: must be a hex string starting with 0x")}let r=Zt([{type:"tuple[]",components:[{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"callData"}]}],[n]),{caveatEnforcers:{ExactCalldataBatchEnforcer:a}}=e;if(!a)throw new Error("ExactCalldataBatchEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},HPe="exactCalldata",FPe=(e,t)=>{let{calldata:n}=t,r=lee({calldata:n}),{caveatEnforcers:{ExactCalldataEnforcer:a}}=e;if(!a)throw new Error("ExactCalldataEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},zPe="exactExecutionBatch",jPe=(e,t)=>{let{executions:n}=t;if(n.length===0)throw new Error("Invalid executions: array cannot be empty");for(let s of n){if(!Se(s.target,{strict:!1}))throw new Error("Invalid target: must be a valid address");if(s.value<0n)throw new Error("Invalid value: must be a non-negative number");if(!s.callData.startsWith("0x"))throw new Error("Invalid calldata: must be a hex string starting with 0x")}let r=Zt([{type:"tuple[]",components:[{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"callData"}]}],[n]),{caveatEnforcers:{ExactExecutionBatchEnforcer:a}}=e;if(!a)throw new Error("ExactExecutionBatchEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},qPe="exactExecution",GPe=(e,t)=>{let{execution:n}=t;if(!Se(n.target,{strict:!1}))throw new Error("Invalid target: must be a valid address");if(n.value<0n)throw new Error("Invalid value: must be a non-negative number");if(!n.callData.startsWith("0x"))throw new Error("Invalid calldata: must be a hex string starting with 0x");let r=Ae([n.target,ge(n.value,{size:32}),n.callData]),{caveatEnforcers:{ExactExecutionEnforcer:a}}=e;if(!a)throw new Error("ExactExecutionEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},VPe="id",WPe=(e,t)=>{let{id:n}=t,r;if(typeof n=="number"){if(!Number.isInteger(n))throw new Error("Invalid id: must be an integer");r=BigInt(n)}else if(typeof n=="bigint")r=n;else throw new Error("Invalid id: must be a bigint or number");if(r<0n)throw new Error("Invalid id: must be a non-negative number");if(r>M1)throw new Error("Invalid id: must be less than 2^256");let a=ge(r,{size:32}),{caveatEnforcers:{IdEnforcer:s}}=e;if(!s)throw new Error("IdEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},ZPe="limitedCalls",KPe=(e,t)=>{let{limit:n}=t;if(!Number.isInteger(n))throw new Error("Invalid limit: must be an integer");if(n<=0)throw new Error("Invalid limit: must be a positive integer");let r=It(ge(n),{size:32}),{caveatEnforcers:{LimitedCallsEnforcer:a}}=e;if(!a)throw new Error("LimitedCallsEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},XPe="multiTokenPeriod",JPe=(e,t)=>{if(!t?.tokenConfigs||t.tokenConfigs.length===0)throw new Error("MultiTokenPeriodBuilder: tokenConfigs array cannot be empty");t.tokenConfigs.forEach(s=>{if(!Se(s.token))throw new Error(`Invalid token address: ${String(s.token)}`);if(s.periodAmount<=0)throw new Error("Invalid period amount: must be greater than 0");if(s.periodDuration<=0)throw new Error("Invalid period duration: must be greater than 0")});let n=t.tokenConfigs.reduce((s,{token:o,periodAmount:i,periodDuration:u,startDate:d})=>[...s,It(o,{size:20}),ge(i,{size:32}),ge(u,{size:32}),ge(d,{size:32})],[]),r=Ae(n),{caveatEnforcers:{MultiTokenPeriodEnforcer:a}}=e;if(!a)throw new Error("MultiTokenPeriodEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},QPe="nativeBalanceChange",YPe=(e,t)=>{let{recipient:n,balance:r,changeType:a}=t;if(!Se(n))throw new Error("Invalid recipient: must be a valid Address");if(r<=0n)throw new Error("Invalid balance: must be a positive number");if(a!==0&&a!==1)throw new Error("Invalid changeType: must be either Increase or Decrease");let s=A0(["uint8","address","uint256"],[a,n,r]),{caveatEnforcers:{NativeBalanceChangeEnforcer:o}}=e;if(!o)throw new Error("NativeBalanceChangeEnforcer not found in environment");return{enforcer:o,terms:s,args:"0x"}},eRe="nativeTokenPayment",tRe=(e,t)=>{let{recipient:n,amount:r}=t;if(r<=0n)throw new Error("Invalid amount: must be positive");if(!Se(n))throw new Error("Invalid recipient: must be a valid address");let a=A0(["address","uint256"],[n,r]),{caveatEnforcers:{NativeTokenPaymentEnforcer:s}}=e;if(!s)throw new Error("NativeTokenPaymentEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},_ee="nativeTokenPeriodTransfer",nRe=(e,t)=>{let{periodAmount:n,periodDuration:r,startDate:a}=t,s=fee({periodAmount:n,periodDuration:r,startDate:a}),{caveatEnforcers:{NativeTokenPeriodTransferEnforcer:o}}=e;if(!o)throw new Error("NativeTokenPeriodTransferEnforcer not found in environment");return{enforcer:o,terms:s,args:"0x"}},Eee="nativeTokenStreaming",rRe=(e,t)=>{let{initialAmount:n,maxAmount:r,amountPerSecond:a,startTime:s}=t,o=pee({initialAmount:n,maxAmount:r,amountPerSecond:a,startTime:s}),{caveatEnforcers:{NativeTokenStreamingEnforcer:i}}=e;if(!i)throw new Error("NativeTokenStreamingEnforcer not found in environment");return{enforcer:i,terms:o,args:"0x"}},kee="nativeTokenTransferAmount",aRe=(e,t)=>{let{maxAmount:n}=t;if(n<0n)throw new Error("Invalid maxAmount: must be zero or positive");let r=A0(["uint256"],[n]),{caveatEnforcers:{NativeTokenTransferAmountEnforcer:a}}=e;if(!a)throw new Error("NativeTokenTransferAmountEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},sRe="nonce",oRe=(e,t)=>{let{nonce:n}=t,r=yee({nonce:n}),{caveatEnforcers:{NonceEnforcer:a}}=e;if(!a)throw new Error("NonceEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},Iee="ownershipTransfer",iRe=(e,t)=>{let{contractAddress:n}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid contractAddress: must be a valid address");let r=n,{caveatEnforcers:{OwnershipTransferEnforcer:a}}=e;if(!a)throw new Error("OwnershipTransferEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},cRe="redeemer",uRe=(e,t)=>{let{redeemers:n}=t;if(n.length===0)throw new Error("Invalid redeemers: must specify at least one redeemer address");for(let s of n)if(!Se(s))throw new Error("Invalid redeemers: must be a valid address");let r=Ae(n),{caveatEnforcers:{RedeemerEnforcer:a}}=e;if(!a)throw new Error("RedeemerEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},dRe="specificActionERC20TransferBatch",fRe=(e,t)=>{let{tokenAddress:n,recipient:r,amount:a,target:s,calldata:o}=t;if(!Se(n,{strict:!1}))throw new Error("Invalid tokenAddress: must be a valid address");if(!Se(r,{strict:!1}))throw new Error("Invalid recipient: must be a valid address");if(!Se(s,{strict:!1}))throw new Error("Invalid target: must be a valid address");if(a<=0n)throw new Error("Invalid amount: must be a positive number");let i=Ae([n,r,ge(a,{size:32}),s,o]),{caveatEnforcers:{SpecificActionERC20TransferBatchEnforcer:u}}=e;if(!u)throw new Error("SpecificActionERC20TransferBatchEnforcer not found in environment");return{enforcer:u,terms:i,args:"0x"}},lRe="timestamp",pRe=(e,t)=>{let{afterThreshold:n,beforeThreshold:r}=t,a=dee({timestampAfterThreshold:n,timestampBeforeThreshold:r}),{caveatEnforcers:{TimestampEnforcer:s}}=e;if(!s)throw new Error("TimestampEnforcer not found in environment");return{enforcer:s,terms:a,args:"0x"}},mRe="valueLte",bRe=(e,t)=>{let{maxValue:n}=t,r=uee({maxValue:n}),{caveatEnforcers:{ValueLteEnforcer:a}}=e;if(!a)throw new Error("ValueLteEnforcer not found in environment");return{enforcer:a,terms:r,args:"0x"}},tc=(e,t)=>new pPe(e,t).extend(yPe,hPe).extend(wPe,vPe).extend(EPe,kPe).extend(mPe,bPe).extend(PPe,RPe).extend(OPe,NPe).extend(IPe,CPe).extend(mRe,bRe).extend(ZPe,KPe).extend(VPe,WPe).extend(sRe,oRe).extend(lRe,pRe).extend(APe,_Pe).extend(See,MPe).extend(Tee,DPe).extend(Eee,rRe).extend(Aee,LPe).extend(kee,aRe).extend(QPe,YPe).extend(cRe,uRe).extend(eRe,tRe).extend(TPe,SPe).extend(dRe,fRe).extend(vee,$Pe).extend(_ee,nRe).extend(BPe,UPe).extend(HPe,FPe).extend(qPe,GPe).extend(zPe,jPe).extend(XPe,JPe).extend(Iee,iRe);function yRe(e,t){return tc(e).addCaveat("valueLte",{maxValue:0n}).addCaveat("erc20PeriodTransfer",{tokenAddress:t.tokenAddress,periodAmount:t.periodAmount,periodDuration:t.periodDuration,startDate:t.startDate})}function gRe(e,t){return tc(e).addCaveat("valueLte",{maxValue:0n}).addCaveat("erc20Streaming",{tokenAddress:t.tokenAddress,initialAmount:t.initialAmount,maxAmount:t.maxAmount,amountPerSecond:t.amountPerSecond,startTime:t.startTime})}function hRe(e,t){return tc(e).addCaveat("valueLte",{maxValue:0n}).addCaveat("erc20TransferAmount",{tokenAddress:t.tokenAddress,maxAmount:t.maxAmount})}var LP=(e,t)=>t.every(n=>n in e&&e[n]!==void 0),xRe=e=>LP(e,["tokenAddress","tokenId"]);function wRe(e,t){if(!xRe(t))throw new Error("Invalid ERC721 configuration");return tc(e).addCaveat("erc721Transfer",t)}var vRe=e=>LP(e,["targets","selectors"]);function TRe(e,t){let{targets:n,selectors:r,allowedCalldata:a,exactCalldata:s}=t;if(!vRe(t))throw new Error("Invalid Function Call configuration");if(a&&a.length>0&&s)throw new Error("Cannot specify both allowedCalldata and exactCalldata. Please use only one calldata restriction type.");let o=t.valueLte??{maxValue:0n},i=tc(e).addCaveat("allowedTargets",{targets:n}).addCaveat("allowedMethods",{selectors:r}).addCaveat("valueLte",o);return a&&a.length>0?a.forEach(u=>{i.addCaveat("allowedCalldata",u)}):s&&i.addCaveat("exactCalldata",s),i}function SRe(e,t){let{periodAmount:n,periodDuration:r,startDate:a,allowedCalldata:s,exactCalldata:o}=t;if(s&&s.length>0&&o)throw new Error("Cannot specify both allowedCalldata and exactCalldata. Please use only one calldata restriction type.");let i=tc(e);return s&&s.length>0?s.forEach(u=>{i.addCaveat("allowedCalldata",u)}):o?i.addCaveat("exactCalldata",o):i.addCaveat("exactCalldata",{calldata:"0x"}),i.addCaveat("nativeTokenPeriodTransfer",{periodAmount:n,periodDuration:r,startDate:a}),i}function ARe(e,t){let{initialAmount:n,maxAmount:r,amountPerSecond:a,startTime:s,allowedCalldata:o,exactCalldata:i}=t;if(o&&o.length>0&&i)throw new Error("Cannot specify both allowedCalldata and exactCalldata. Please use only one calldata restriction type.");let u=tc(e);return o&&o.length>0?o.forEach(d=>{u.addCaveat("allowedCalldata",d)}):i?u.addCaveat("exactCalldata",i):u.addCaveat("exactCalldata",{calldata:"0x"}),u.addCaveat("nativeTokenStreaming",{initialAmount:n,maxAmount:r,amountPerSecond:a,startTime:s}),u}function _Re(e,t){let{maxAmount:n,allowedCalldata:r,exactCalldata:a}=t;if(r&&r.length>0&&a)throw new Error("Cannot specify both allowedCalldata and exactCalldata. Please use only one calldata restriction type.");let s=tc(e);return r&&r.length>0?r.forEach(o=>{s.addCaveat("allowedCalldata",o)}):a?s.addCaveat("exactCalldata",a):s.addCaveat("exactCalldata",{calldata:"0x"}),s.addCaveat("nativeTokenTransferAmount",{maxAmount:n}),s}var ERe=e=>LP(e,["contractAddress"]);function kRe(e,t){if(!ERe(t))throw new Error("Invalid ownership transfer configuration");return tc(e).addCaveat("ownershipTransfer",t)}var IRe=(e,t)=>{switch(t.type){case See:return hRe(e,t);case Tee:return gRe(e,t);case vee:return yRe(e,t);case kee:return _Re(e,t);case Eee:return ARe(e,t);case _ee:return SRe(e,t);case Aee:return wRe(e,t);case Iee:return kRe(e,t);case"functionCall":return TRe(e,t);default:let n=t;throw new Error(`Invalid scope type: ${n.type}`)}},CRe=({environment:e,scope:t,caveats:n})=>{let r=IRe(e,t);return n&&("build"in n&&typeof n.build=="function"?n.build().forEach(a=>{r.addCaveat(a)}):Array.isArray(n)&&n.forEach(a=>{try{if("type"in a){let{type:s,...o}=a;r.addCaveat(s,o)}else r.addCaveat(a)}catch(s){throw new Error(`Invalid caveat: ${s.message}`)}})),r.build()};var k7t=Ke(ge("Caveat(address enforcer,bytes terms)"));var Aa=e=>{let t=e.caveats.map(r=>({enforcer:xe(r.enforcer),terms:r.terms,args:r.args})),n=e.salt==="0x"?0n:BigInt(e.salt);return{delegate:xe(e.delegate),delegator:xe(e.delegator),authority:e.authority===void 0?B6:e.authority,caveats:t,salt:n,signature:e.signature}};var PRe=e=>{let t=e.map(Aa);return xee(t)},s2=e=>e.map(n=>PRe(n));var BP={Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]};var H5=e=>{let t=Aa(e);return ec(t)},RRe=e=>e?typeof e=="string"?e:H5(e):B6,L0=e=>({delegate:e.to,delegator:e.from,authority:RRe(e.parentDelegation),caveats:CRe(e),salt:e.salt??"0x",signature:"0x"});var Cee=({delegation:e,delegationManager:t,chainId:n,name:r="DelegationManager",version:a="1",allowInsecureUnrestrictedDelegation:s=!1})=>{let o=Aa({...e,signature:"0x"});if(o.caveats.length===0&&!s)throw new Error("No caveats found. If you definitely want to sign a delegation without caveats, set `allowInsecureUnrestrictedDelegation` to `true`.");return{domain:{chainId:n,name:r,version:a,verifyingContract:t},types:BP,primaryType:"Delegation",message:o}};var $Re=Object.defineProperty,ie=(e,t)=>{for(var n in t)$Re(e,n,{get:t[n],enumerable:!0})},DRe={};ie(DRe,{abi:()=>MRe,bytecode:()=>ORe});var MRe=[{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"FailedInnerCall",inputs:[]}],ORe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212204a050c4fa34153d3fae9d282b8c08f593842bb7e1d0caa440348574559167b6a64736f6c63430008170033",NRe={};ie(NRe,{abi:()=>LRe,bytecode:()=>BRe});var LRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedMethods_",type:"bytes4[]",internalType:"bytes4[]"}],stateMutability:"pure"}],BRe="0x608060405234801561001057600080fd5b506107fc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610512565b50505050505050505050565b005b610076610086366004610512565b6100b4565b61009e6100993660046105df565b610197565b6040516100ab9190610621565b60405180910390f35b856100c08160006102e5565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101228160006102e5565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b506101898c8c89896102fc565b505050505050505050505050565b60606000826101a7600482610685565b1580156101b357508015155b6102135760405162461bcd60e51b815260206004820152602b60248201527f416c6c6f7765644d6574686f6473456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610108565b61021e6004826106af565b67ffffffffffffffff811115610236576102366106c3565b60405190808252806020026020018201604052801561025f578160200160208202803683370190505b50925060005b818110156102dc5785818661027b8260046106d9565b92610288939291906106ec565b61029191610716565b8484815181106102a3576102a3610746565b6001600160e01b031990921660209283029190910190910152826102c68161075c565b93506102d590506004826106d9565b9050610265565b50505092915050565b6001600160f81b0319828116908216145b92915050565b366000610309848461045c565b90945092505050600481101561037e5760405162461bcd60e51b815260206004820152603460248201527f416c6c6f7765644d6574686f6473456e666f726365723a696e76616c69642d656044820152730f0cac6eae8d2dedc5ac8c2e8c25ad8cadccee8d60631b6064820152608401610108565b600061038d60048284866106ec565b61039691610716565b905060006103a48888610197565b805190915060005b818110156103fb578281815181106103c6576103c6610746565b60200260200101516001600160e01b031916846001600160e01b031916036103f357505050505050610456565b6001016103ac565b5060405162461bcd60e51b815260206004820152602960248201527f416c6c6f7765644d6574686f6473456e666f726365723a6d6574686f642d6e6f6044820152681d0b585b1b1bddd95960ba1b6064820152608401610108565b50505050565b600080368161046e60148287896106ec565b61047791610775565b60601c935061048a6034601487896106ec565b610493916107a8565b92506104a285603481896106ec565b949793965094505050565b60008083601f8401126104bf57600080fd5b50813567ffffffffffffffff8111156104d757600080fd5b6020830191508360208285010111156104ef57600080fd5b9250929050565b80356001600160a01b038116811461050d57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561053157600080fd5b8a3567ffffffffffffffff8082111561054957600080fd5b6105558e838f016104ad565b909c509a5060208d013591508082111561056e57600080fd5b61057a8e838f016104ad565b909a50985060408d0135975060608d013591508082111561059a57600080fd5b506105a78d828e016104ad565b90965094505060808b013592506105c060a08c016104f6565b91506105ce60c08c016104f6565b90509295989b9194979a5092959850565b600080602083850312156105f257600080fd5b823567ffffffffffffffff81111561060957600080fd5b610615858286016104ad565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156106635783516001600160e01b0319168352928401929184019160010161063d565b50909695505050505050565b634e487b7160e01b600052601260045260246000fd5b6000826106945761069461066f565b500690565b634e487b7160e01b600052601160045260246000fd5b6000826106be576106be61066f565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156102f6576102f6610699565b600080858511156106fc57600080fd5b8386111561070957600080fd5b5050820193919092039150565b6001600160e01b0319813581811691600485101561073e5780818660040360031b1b83161692505b505092915050565b634e487b7160e01b600052603260045260246000fd5b60006001820161076e5761076e610699565b5060010190565b6bffffffffffffffffffffffff19813581811691601485101561073e5760149490940360031b84901b1690921692915050565b803560208310156102f657600019602084900360031b1b169291505056fea26469706673582212200b708c0be5e7b588370a3a50ea4c9e1f7cb79f4e1abc8d9c979a4f6d6867e5ae64736f6c63430008170033",URe={};ie(URe,{abi:()=>HRe,bytecode:()=>FRe});var HRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedTargets_",type:"address[]",internalType:"address[]"}],stateMutability:"pure"}],FRe="0x608060405234801561001057600080fd5b50610736806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461047b565b50505050505050505050565b005b61007661008636600461047b565b6100b4565b61009e610099366004610548565b61025e565b6040516100ab919061058a565b60405180910390f35b856100c08160006103ae565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101228160006103ae565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b50600061018988886103c5565b5050509050600061019a8e8e61025e565b805190915060005b818110156101ed578281815181106101bc576101bc6105d7565b60200260200101516001600160a01b0316846001600160a01b0316036101e55750505050610250565b6001016101a2565b5060405162461bcd60e51b815260206004820152603160248201527f416c6c6f77656454617267657473456e666f726365723a7461726765742d6164604482015270191c995cdccb5b9bdd0b585b1b1bddd959607a1b6064820152608401610108565b505050505050505050505050565b606060008261026e601482610603565b15801561027a57508015155b6102da5760405162461bcd60e51b815260206004820152602b60248201527f416c6c6f77656454617267657473456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610108565b6102e560148261062d565b67ffffffffffffffff8111156102fd576102fd610641565b604051908082528060200260200182016040528015610326578160200160208202803683370190505b50925060005b818110156103a557858186610342826014610657565b9261034f9392919061066a565b61035891610694565b60601c84848151811061036d5761036d6105d7565b6001600160a01b03909216602092830291909101909101528261038f816106c9565b935061039e9050601482610657565b905061032c565b50505092915050565b6001600160f81b0319828116908216145b92915050565b60008036816103d7601482878961066a565b6103e091610694565b60601c93506103f360346014878961066a565b6103fc916106e2565b925061040b856034818961066a565b949793965094505050565b60008083601f84011261042857600080fd5b50813567ffffffffffffffff81111561044057600080fd5b60208301915083602082850101111561045857600080fd5b9250929050565b80356001600160a01b038116811461047657600080fd5b919050565b60008060008060008060008060008060e08b8d03121561049a57600080fd5b8a3567ffffffffffffffff808211156104b257600080fd5b6104be8e838f01610416565b909c509a5060208d01359150808211156104d757600080fd5b6104e38e838f01610416565b909a50985060408d0135975060608d013591508082111561050357600080fd5b506105108d828e01610416565b90965094505060808b0135925061052960a08c0161045f565b915061053760c08c0161045f565b90509295989b9194979a5092959850565b6000806020838503121561055b57600080fd5b823567ffffffffffffffff81111561057257600080fd5b61057e85828601610416565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156105cb5783516001600160a01b0316835292840192918401916001016105a6565b50909695505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601260045260246000fd5b600082610612576106126105ed565b500690565b634e487b7160e01b600052601160045260246000fd5b60008261063c5761063c6105ed565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156103bf576103bf610617565b6000808585111561067a57600080fd5b8386111561068757600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156106c15780818660140360031b1b83161692505b505092915050565b6000600182016106db576106db610617565b5060010190565b803560208310156103bf57600019602084900360031b1b169291505056fea2646970667358221220192854344f7cbe5e3a46630068ff1c57d1382d110f4c7dae36ce8f18206bd1c864736f6c63430008170033",zRe={};ie(zRe,{abi:()=>jRe,bytecode:()=>qRe});var jRe=[],qRe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088f05df9a321ebbfd15b9ae491704455fd55c5a0ef490ba4f3111c5cd7aa944764736f6c63430008170033",GRe={};ie(GRe,{abi:()=>VRe,bytecode:()=>WRe});var VRe=[],WRe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ba35151db75ea04dd32865d4b2bd18ac453d87dfd60b81ec325260f801c1709564736f6c63430008170033",ZRe={};ie(ZRe,{abi:()=>KRe,bytecode:()=>XRe});var KRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DifferentArgsAndTerms",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"terms",type:"bytes",indexed:!1,internalType:"bytes"},{name:"args",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1}],XRe="0x608060405234801561001057600080fd5b506103b7806100206000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063414c3e3314610051578063a145832a1461006d578063d3eddcc514610051578063ed46336714610051575b600080fd5b61006b61005f366004610249565b50505050505050505050565b005b61006b61007b366004610249565b85600881901b6001600160f81b03198116156100ec5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5088886040516100fd929190610316565b60405180910390208b8b604051610115929190610316565b6040518091039020146101d75783826001600160a01b0316336001600160a01b03167f07fc5f2898fc1f1cf9d6012177b7abb8d010b9e64055979af3a5bcd274e2a11a8e8e8e8e60405161016c949392919061034f565b60405180910390a460405162461bcd60e51b815260206004820152603260248201527f41726773457175616c697479436865636b456e666f726365723a646966666572604482015271656e742d617267732d616e642d7465726d7360701b60648201526084016100e3565b5050505050505050505050565b60008083601f8401126101f657600080fd5b50813567ffffffffffffffff81111561020e57600080fd5b60208301915083602082850101111561022657600080fd5b9250929050565b80356001600160a01b038116811461024457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561026857600080fd5b8a3567ffffffffffffffff8082111561028057600080fd5b61028c8e838f016101e4565b909c509a5060208d01359150808211156102a557600080fd5b6102b18e838f016101e4565b909a50985060408d0135975060608d01359150808211156102d157600080fd5b506102de8d828e016101e4565b90965094505060808b013592506102f760a08c0161022d565b915061030560c08c0161022d565b90509295989b9194979a5092959850565b8183823760009101908152919050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b604081526000610363604083018688610326565b8281036020840152610376818587610326565b97965050505050505056fea264697066735822122078e67ed2011e86335117ad2962f5a7ffbe2179a19bda7b4e0f3c3beff2ca893c64736f6c63430008170033",JRe={};ie(JRe,{abi:()=>QRe,bytecode:()=>YRe});var QRe=[],YRe="0x",e$e={};ie(e$e,{abi:()=>t$e,bytecode:()=>n$e});var t$e=[{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]}],n$e="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122010c6b66ba2fc3a92f070bf47f6d02e68772a73d44eed07c73bca1c9f7fab44e964736f6c63430008170033",r$e={};ie(r$e,{abi:()=>a$e,bytecode:()=>s$e});var a$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"}],s$e="0x",wn={};ie(wn,{abi:()=>o$e,bytecode:()=>i$e});var o$e=[{type:"receive",stateMutability:"payable"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],i$e="0x",c$e={};ie(c$e,{abi:()=>u$e,bytecode:()=>d$e});var u$e=[{type:"constructor",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_swapApiSigner",type:"address",internalType:"address"},{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_metaSwap",type:"address",internalType:"contract IMetaSwap"},{name:"_argsEqualityCheckEnforcer",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"WHITELIST_ENFORCED",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"WHITELIST_NOT_ENFORCED",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"argsEqualityCheckEnforcer",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"isAggregatorAllowed",inputs:[{name:"aggregatorIdHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"allowed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isTokenAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}],outputs:[{name:"allowed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"metaSwap",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IMetaSwap"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSwapApiSigner",inputs:[{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swapApiSigner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"swapByDelegation",inputs:[{name:"_signatureData",type:"tuple",internalType:"struct DelegationMetaSwapAdapter.SignatureData",components:[{name:"apiData",type:"bytes",internalType:"bytes"},{name:"expiration",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"_delegations",type:"tuple[]",internalType:"struct Delegation[]",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"_useTokenWhitelist",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swapTokens",inputs:[{name:"_aggregatorId",type:"string",internalType:"string"},{name:"_tokenFrom",type:"address",internalType:"contract IERC20"},{name:"_tokenTo",type:"address",internalType:"contract IERC20"},{name:"_recipient",type:"address",internalType:"address"},{name:"_amountFrom",type:"uint256",internalType:"uint256"},{name:"_balanceFromBefore",type:"uint256",internalType:"uint256"},{name:"_swapData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateAllowedAggregatorIds",inputs:[{name:"_aggregatorIds",type:"string[]",internalType:"string[]"},{name:"_statuses",type:"bool[]",internalType:"bool[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateAllowedTokens",inputs:[{name:"_tokens",type:"address[]",internalType:"contract IERC20[]"},{name:"_statuses",type:"bool[]",internalType:"bool[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"_token",type:"address",internalType:"contract IERC20"},{name:"_amount",type:"uint256",internalType:"uint256"},{name:"_recipient",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"ChangedAggregatorIdStatus",inputs:[{name:"aggregatorIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"aggregatorId",type:"string",indexed:!1,internalType:"string"},{name:"status",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"ChangedTokenStatus",inputs:[{name:"token",type:"address",indexed:!1,internalType:"contract IERC20"},{name:"status",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SentTokens",inputs:[{name:"token",type:"address",indexed:!0,internalType:"contract IERC20"},{name:"recipient",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SetArgsEqualityCheckEnforcer",inputs:[{name:"newArgsEqualityCheckEnforcer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetMetaSwap",inputs:[{name:"newMetaSwap",type:"address",indexed:!0,internalType:"contract IMetaSwap"}],anonymous:!1},{type:"event",name:"SwapApiSignerUpdated",inputs:[{name:"newSigner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"AggregatorIdIsNotAllowed",inputs:[{name:"aggregatorId",type:"string",internalType:"string"}]},{type:"error",name:"AmountFromMismatch",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"FailedNativeTokenTransfer",inputs:[{name:"recipient",type:"address",internalType:"address"}]},{type:"error",name:"InputLengthsMismatch",inputs:[]},{type:"error",name:"InsufficientTokens",inputs:[]},{type:"error",name:"InvalidApiSignature",inputs:[]},{type:"error",name:"InvalidEmptyDelegations",inputs:[]},{type:"error",name:"InvalidIdenticalTokens",inputs:[]},{type:"error",name:"InvalidSwapFunctionSelector",inputs:[]},{type:"error",name:"InvalidZeroAddress",inputs:[]},{type:"error",name:"MissingArgsEqualityCheckEnforcer",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotLeafDelegator",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"SafeERC20FailedOperation",inputs:[{name:"token",type:"address",internalType:"address"}]},{type:"error",name:"SignatureExpired",inputs:[]},{type:"error",name:"TokenFromIsNotAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}]},{type:"error",name:"TokenFromMismatch",inputs:[]},{type:"error",name:"TokenToIsNotAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],d$e="0x60e06040523480156200001157600080fd5b506040516200306738038062003067833981016040819052620000349162000258565b846001600160a01b0381166200006457604051631e4fbdf760e01b81526000600482015260240160405180910390fd5b6200006f81620001d4565b506001600160a01b03841615806200008e57506001600160a01b038316155b80620000a157506001600160a01b038216155b80620000b457506001600160a01b038116155b15620000d35760405163f6b2911f60e01b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0386811691821790925584821660805283821660a05290821660c0526040517fdeeca532e75e413fdd750935f0d28d3686b7e2074831c42f70db2ca0dc7b32d090600090a26040516001600160a01b038416907fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038316907f5a3c783d657606d324917524307587fd272edc5e8b257da020bb6072226b6b2c90600090a26040516001600160a01b038216907fb21681281e4a8a2f3a982e391c6e8b4638d9ccd60e9fa9715dc26c7e3cd15bbe90600090a25050505050620002d8565b600180546001600160a01b0319169055620001ef81620001f2565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6001600160a01b0381168114620001ef57600080fd5b600080600080600060a086880312156200027157600080fd5b85516200027e8162000242565b6020870151909550620002918162000242565b6040870151909450620002a48162000242565b6060870151909350620002b78162000242565b6080870151909250620002ca8162000242565b809150509295509295909350565b60805160a05160c051612d356200033260003960008181610288015261136801526000818161033201528181610f4601528181610fd601526110010152600081816103a4015281816109120152610cf30152612d356000f3fe6080604052600436106101235760003560e01c8063ab7180f7116100a0578063ea4d3c9b11610064578063ea4d3c9b14610392578063ea9c6555146103c6578063f2fde38b1461040a578063f9eaee0d1461042a578063fcdea7a91461045a57600080fd5b8063ab7180f7146102aa578063b555ddad14610300578063cb2ef5fe14610320578063d691c96414610354578063e30c39781461037457600080fd5b8063715018a6116100e7578063715018a61461020e57806379ba5097146102235780638da5cb5b1461023857806390ef4d1b14610256578063a42ff9311461027657600080fd5b8063059ba4ee1461012f578063178984911461016c5780636451b418146101ac57806367ebd8a2146101ce57806369328dec146101ee57600080fd5b3661012a57005b600080fd5b34801561013b57600080fd5b5060025461014f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561017857600080fd5b5061019c610187366004611e85565b60046020526000908152604090205460ff1681565b6040519015158152602001610163565b3480156101b857600080fd5b506101cc6101c7366004612108565b61047a565b005b3480156101da57600080fd5b506101cc6101e9366004612281565b61098c565b3480156101fa57600080fd5b506101cc61020936600461229e565b610a05565b34801561021a57600080fd5b506101cc610a1d565b34801561022f57600080fd5b506101cc610a31565b34801561024457600080fd5b506000546001600160a01b031661014f565b34801561026257600080fd5b506101cc61027136600461232b565b610a75565b34801561028257600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b3480156102b657600080fd5b506102f36040518060400160405280601c81526020017f546f6b656e2d57686974656c6973742d4e6f742d456e666f726365640000000081525081565b60405161016391906123e6565b34801561030c57600080fd5b506101cc61031b36600461232b565b610bcb565b34801561032c57600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b61036761036236600461243a565b610ce6565b60405161016391906124df565b34801561038057600080fd5b506001546001600160a01b031661014f565b34801561039e57600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b3480156103d257600080fd5b506102f360405180604001604052806018815260200177151bdad95b8b55da1a5d195b1a5cdd0b515b999bdc98d95960421b81525081565b34801561041657600080fd5b506101cc610425366004612281565b610e1f565b34801561043657600080fd5b5061019c610445366004612281565b60036020526000908152604090205460ff1681565b34801561046657600080fd5b506101cc6104753660046124f2565b610e90565b61048b610486846125b4565b6110ba565b6000808080806104a361049e898061262a565b611194565b94509450945094509450600087519050806000036104d45760405163478bfa6560e01b815260040160405180910390fd5b836001600160a01b0316856001600160a01b03160361050657604051634e570e4560e01b815260040160405180910390fd5b61051285858a8a61132c565b600460008760405160200161052791906123e6565b60408051601f198184030181529181528151602092830120835290820192909252016000205460ff16610578578560405163b55e93d160e01b815260040161056f91906123e6565b60405180910390fd5b336001600160a01b03168860008151811061059557610595612670565b6020026020010151602001516001600160a01b0316146105c85760405163a711bbaf60e01b815260040160405180910390fd5b60003063fcdea7a98888888d6105df60018961269c565b815181106105ef576105ef612670565b602002602001015160200151896106058d6115b4565b8a60405160240161061c97969594939291906126af565b60408051601f19818403018152918152602080830180516001600160e01b031660e09590951b94909417909352805160028082526060820190925291945060009350909182015b60608152602001906001900390816106635790505090508960405160200161068b919061270f565b604051602081830303815290604052816000815181106106ad576106ad612670565b6020908102919091010152600060405190808252806020026020018201604052801561073957816020015b6107266040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816106d85790505b5060405160200161074a919061270f565b6040516020818303038152906040528160018151811061076c5761076c612670565b6020908102919091010152604080516002808252606082019092526000918160200160208202803683370190505090506107a4611639565b816000815181106107b7576107b7612670565b6020026020010181815250506107cb611639565b816001815181106107de576107de612670565b602090810291909101015260408051600280825260608201909252600091816020015b60608152602001906001900390816108015790505090506001600160a01b0389166108635761084030886040518060200160405280600081525061164c565b8160008151811061085357610853612670565b60200260200101819052506108d1565b6040513060248201526044810188905260009060640160408051601f198184030181529190526020810180516001600160e01b031663a9059cbb60e01b17905290506108b18a60008361164c565b826000815181106108c4576108c4612670565b6020026020010181905250505b6108dd3060008661164c565b816001815181106108f0576108f0612670565b602090810291909101015260405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061094b90869086908690600401612841565b600060405180830381600087803b15801561096557600080fd5b505af1158015610979573d6000803e3d6000fd5b5050505050505050505050505050505050565b61099461167b565b6001600160a01b0381166109bb5760405163f6b2911f60e01b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0383169081179091556040517fdeeca532e75e413fdd750935f0d28d3686b7e2074831c42f70db2ca0dc7b32d090600090a250565b610a0d61167b565b610a188383836116a8565b505050565b610a2561167b565b610a2f60006117a1565b565b60015433906001600160a01b03168114610a695760405163118cdaa760e01b81526001600160a01b038216600482015260240161056f565b610a72816117a1565b50565b610a7d61167b565b82818114610a9e57604051637e26301b60e11b815260040160405180910390fd5b60005b81811015610bc3576000868683818110610abd57610abd612670565b9050602002810190610acf919061262a565b604051602001610ae09291906128d4565b6040516020818303038152906040528051906020012090506000858584818110610b0c57610b0c612670565b9050602002016020810190610b2191906128f0565b60008381526004602052604090205490915060ff16151581151514610bb9576000828152600460205260409020805460ff1916821515179055817ffe89a7e0da76ce9087f67dbe71c999de74699125edabbdd3ef09b42dafdf9e55898986818110610b8e57610b8e612670565b9050602002810190610ba0919061262a565b84604051610bb09392919061290d565b60405180910390a25b5050600101610aa1565b505050505050565b610bd361167b565b82818114610bf457604051637e26301b60e11b815260040160405180910390fd5b60005b81811015610bc3576000868683818110610c1357610c13612670565b9050602002016020810190610c289190612281565b90506000858584818110610c3e57610c3e612670565b9050602002016020810190610c5391906128f0565b6001600160a01b03831660009081526003602052604090205490915060ff16151581151514610cdc576001600160a01b038216600081815260036020908152604091829020805460ff19168515159081179091558251938452908301527fd0847c60d8132f1d2a3af347506243fa046f163a2c9c6698c43b31e1d7d95bc4910160405180910390a15b5050600101610bf7565b6060336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610d3157604051630692ce8160e21b815260040160405180910390fd5b83600881901b6001600160f81b0319821615610d6c57604051632e5bf3f960e21b81526001600160f81b03198316600482015260240161056f565b6001600160f81b0319811615610da1576040516308c3ee0360e11b81526001600160f81b03198216600482015260240161056f565b600080366000610db189896117ba565b6040805160018082528183019092529498509296509094509250816020015b6060815260200190600190039081610dd0579050509650610df38484848461180b565b87600081518110610e0657610e06612670565b60200260200101819052505050505050505b9392505050565b610e2761167b565b600180546001600160a01b0383166001600160a01b03199091168117909155610e586000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b333014610eb0576040516314e1dbf760e11b815260040160405180910390fd5b600083610ebc896115b4565b610ec6919061269c565b905084811015610ee9576040516378dbf0af60e11b815260040160405180910390fd5b84811115610f0557610f0588610eff878461269c565b886116a8565b6000610f10886115b4565b905060006001600160a01b038a16610f29575085610fff565b604051636eb1769f60e11b81523060048201526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081166024830152600091908c169063dd62ed3e90604401602060405180830381865afa158015610f99573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fbd9190612933565b905087811015610ffd57610ffd6001600160a01b038c167f0000000000000000000000000000000000000000000000000000000000000000600019611841565b505b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316635f575529828e8e8e8c8b8b6040518863ffffffff1660e01b81526004016110569695949392919061294c565b6000604051808303818588803b15801561106f57600080fd5b505af1158015611083573d6000803e3d6000fd5b50505050506000826110948b6115b4565b61109e919061269c565b90506110ab8a828b6116a8565b50505050505050505050505050565b806020015142106110de57604051630819bdcd60e01b815260040160405180910390fd5b6000816000015182602001516040516020016110fb929190612996565b604051602081830303815290604052805190602001209050600061114c827f19457468657265756d205369676e6564204d6573736167653a0a3332000000006000908152601c91909152603c902090565b9050600061115e8285604001516118cb565b6002549091506001600160a01b0380831691161461118e57604051626d46e960e31b815260040160405180910390fd5b50505050565b60606000808083816111a9600482898b6129b8565b6111b2916129e2565b90506001600160e01b03198116635f57552960e01b146111e557604051632033702760e11b815260040160405180910390fd5b60006111f4886004818c6129b8565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505082519293506112419284016020908101925084019050612a62565b60408051600060208201819052959c50939a50919750955082918291829182910160408051601f1981840301815290829052611281918a90602001612af9565b6040516020818303038152906040528060200190518101906112a39190612b28565b98505097505050955095509550508a6001600160a01b0316856001600160a01b0316146112e3576040516356cf902d60e01b815260040160405180910390fd5b801580156112fa5750886112f78484612be6565b14155b1561131857604051632f0e599760e11b815260040160405180910390fd5b839950505050505050509295509295909350565b60006001835161133c919061269c565b905082818151811061135057611350612670565b60200260200101516060015151600014806113d857507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168382815181106113a2576113a2612670565b6020026020010151606001516000815181106113c0576113c0612670565b6020026020010151600001516001600160a01b031614155b156113f65760405163113f78d160e31b815260040160405180910390fd5b8115611518576001600160a01b03851660009081526003602052604090205460ff166114405760405163550a4b9360e01b81526001600160a01b038616600482015260240161056f565b6001600160a01b03841660009081526003602052604090205460ff166114845760405163022330e760e61b81526001600160a01b038516600482015260240161056f565b60405180604001604052806018815260200177151bdad95b8b55da1a5d195b1a5cdd0b515b999bdc98d95960421b8152506040516020016114c591906123e6565b6040516020818303038152906040528382815181106114e6576114e6612670565b60200260200101516060015160008151811061150457611504612670565b6020026020010151604001819052506115ad565b6040518060400160405280601c81526020017f546f6b656e2d57686974656c6973742d4e6f742d456e666f726365640000000081525060405160200161155e91906123e6565b60405160208183030381529060405283828151811061157f5761157f612670565b60200260200101516060015160008151811061159d5761159d612670565b6020026020010151604001819052505b5050505050565b60006001600160a01b0382166115cb575047919050565b6040516370a0823160e01b81523060048201526001600160a01b038316906370a0823190602401602060405180830381865afa15801561160f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116339190612933565b92915050565b6000611647818080806118f5565b905090565b606083838360405160200161166393929190612bf9565b60405160208183030381529060405290509392505050565b6000546001600160a01b03163314610a2f5760405163118cdaa760e01b815233600482015260240161056f565b6001600160a01b03831661173b576000816001600160a01b03168360405160006040518083038185875af1925050503d8060008114611703576040519150601f19603f3d011682016040523d82523d6000602084013e611708565b606091505b5050905080611735576040516312988bef60e21b81526001600160a01b038316600482015260240161056f565b5061174f565b61174f6001600160a01b0384168284611960565b806001600160a01b0316836001600160a01b03167f2c42af0ac449800f98313b961b8c9e7d69c3065be5b86449ed4c358e01d3a7808460405161179491815260200190565b60405180910390a3505050565b600180546001600160a01b0319169055610a72816119bf565b60008036816117cc60148287896129b8565b6117d591612c38565b60601c93506117e86034601487896129b8565b6117f191612c6b565b925061180085603481896129b8565b949793965094505050565b60405181838237600038838387895af1611828573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b604051636eb1769f60e11b81523060048201526001600160a01b0383811660248301526000919085169063dd62ed3e90604401602060405180830381865afa158015611891573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118b59190612933565b905061118e84846118c68585612be6565b611a0f565b6000806000806118db8686611a9f565b9250925092506118eb8282611aec565b5090949350505050565b604080516001600160f81b03198087166020830152851660218201526000602282018190526001600160e01b03198516602683015269ffffffffffffffffffff198416602a830152910160405160208183030381529060405261195790612c89565b95945050505050565b6040516001600160a01b03838116602483015260448201839052610a1891859182169063a9059cbb906064015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050611ba9565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b179052611a608482611c0c565b61118e576040516001600160a01b03848116602483015260006044830152611a9591869182169063095ea7b39060640161198d565b61118e8482611ba9565b60008060008351604103611ad95760208401516040850151606086015160001a611acb88828585611caf565b955095509550505050611ae5565b50508151600091506002905b9250925092565b6000826003811115611b0057611b00612cb0565b03611b09575050565b6001826003811115611b1d57611b1d612cb0565b03611b3b5760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611b4f57611b4f612cb0565b03611b705760405163fce698f760e01b81526004810182905260240161056f565b6003826003811115611b8457611b84612cb0565b03611ba5576040516335e2f38360e21b81526004810182905260240161056f565b5050565b6000611bbe6001600160a01b03841683611d7e565b90508051600014158015611be3575080806020019051810190611be19190612cc6565b155b15610a1857604051635274afe760e01b81526001600160a01b038416600482015260240161056f565b6000806000846001600160a01b031684604051611c299190612ce3565b6000604051808303816000865af19150503d8060008114611c66576040519150601f19603f3d011682016040523d82523d6000602084013e611c6b565b606091505b5091509150818015611c95575080511580611c95575080806020019051810190611c959190612cc6565b80156119575750505050506001600160a01b03163b151590565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611cea5750600091506003905082611d74565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015611d3e573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116611d6a57506000925060019150829050611d74565b9250600091508190505b9450945094915050565b6060610e188383600084600080856001600160a01b03168486604051611da49190612ce3565b60006040518083038185875af1925050503d8060008114611de1576040519150601f19603f3d011682016040523d82523d6000602084013e611de6565b606091505b5091509150611df6868383611e00565b9695505050505050565b606082611e1557611e1082611e5c565b610e18565b8151158015611e2c57506001600160a01b0384163b155b15611e5557604051639996b31560e01b81526001600160a01b038516600482015260240161056f565b5080610e18565b805115611e6c5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b600060208284031215611e9757600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b0381118282101715611ed657611ed6611e9e565b60405290565b60405160c081016001600160401b0381118282101715611ed657611ed6611e9e565b604051601f8201601f191681016001600160401b0381118282101715611f2657611f26611e9e565b604052919050565b60006001600160401b03821115611f4757611f47611e9e565b5060051b60200190565b6001600160a01b0381168114610a7257600080fd5b8035611f7181611f51565b919050565b60006001600160401b03821115611f8f57611f8f611e9e565b50601f01601f191660200190565b600082601f830112611fae57600080fd5b8135611fc1611fbc82611f76565b611efe565b818152846020838601011115611fd657600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261200457600080fd5b81356020612014611fbc83611f2e565b82815260059290921b8401810191818101908684111561203357600080fd5b8286015b848110156120e45780356001600160401b03808211156120575760008081fd5b908801906060828b03601f19018113156120715760008081fd5b612079611eb4565b8784013561208681611f51565b81526040848101358481111561209c5760008081fd5b6120aa8e8b83890101611f9d565b838b0152509184013591838311156120c25760008081fd5b6120d08d8a85880101611f9d565b908201528652505050918301918301612037565b509695505050505050565b8015158114610a7257600080fd5b8035611f71816120ef565b60008060006060848603121561211d57600080fd5b83356001600160401b038082111561213457600080fd5b908501906060828803121561214857600080fd5b909350602090858201358181111561215f57600080fd5b8601601f8101881361217057600080fd5b803561217e611fbc82611f2e565b81815260059190911b8201840190848101908a83111561219d57600080fd5b8584015b83811015612262578035868111156121b857600080fd5b850160c0818e03601f190112156121ce57600080fd5b6121d6611edc565b6121e1898301611f66565b81526121ef60408301611f66565b898201526060820135604082015260808201358881111561220f57600080fd5b61221d8f8b83860101611ff3565b60608301525060a0820135608082015260c0820135888111156122405760008081fd5b61224e8f8b83860101611f9d565b60a0830152508452509186019186016121a1565b50809750505050505050612278604085016120fd565b90509250925092565b60006020828403121561229357600080fd5b8135610e1881611f51565b6000806000606084860312156122b357600080fd5b83356122be81611f51565b92506020840135915060408401356122d581611f51565b809150509250925092565b60008083601f8401126122f257600080fd5b5081356001600160401b0381111561230957600080fd5b6020830191508360208260051b850101111561232457600080fd5b9250929050565b6000806000806040858703121561234157600080fd5b84356001600160401b038082111561235857600080fd5b612364888389016122e0565b9096509450602087013591508082111561237d57600080fd5b5061238a878288016122e0565b95989497509550505050565b60005b838110156123b1578181015183820152602001612399565b50506000910152565b600081518084526123d2816020860160208601612396565b601f01601f19169290920160200192915050565b602081526000610e1860208301846123ba565b60008083601f84011261240b57600080fd5b5081356001600160401b0381111561242257600080fd5b60208301915083602082850101111561232457600080fd5b60008060006040848603121561244f57600080fd5b8335925060208401356001600160401b0381111561246c57600080fd5b612478868287016123f9565b9497909650939450505050565b60008282518085526020808601955060208260051b8401016020860160005b848110156124d257601f198684030189526124c08383516123ba565b988401989250908301906001016124a4565b5090979650505050505050565b602081526000610e186020830184612485565b600080600080600080600080600060e08a8c03121561251057600080fd5b89356001600160401b038082111561252757600080fd5b6125338d838e016123f9565b909b50995060208c0135915061254882611f51565b90975060408b01359061255a82611f51565b90965060608b01359061256c82611f51565b90955060808b0135945060a08b0135935060c08b0135908082111561259057600080fd5b5061259d8c828d016123f9565b915080935050809150509295985092959850929598565b6000606082360312156125c657600080fd5b6125ce611eb4565b82356001600160401b03808211156125e557600080fd5b6125f136838701611f9d565b835260208501356020840152604085013591508082111561261157600080fd5b5061261e36828601611f9d565b60408301525092915050565b6000808335601e1984360301811261264157600080fd5b8301803591506001600160401b0382111561265b57600080fd5b60200191503681900382131561232457600080fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b8181038181111561163357611633612686565b60e0815260006126c260e083018a6123ba565b6001600160a01b0389811660208501528881166040850152871660608401526080830186905260a0830185905282810360c084015261270181856123ba565b9a9950505050505050505050565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b8281101561283457603f19888603018452815160c0860160018060a01b038083511688528089840151168989015260408301516040890152606083015160c060608a015282815180855260e08b01915060e08160051b8c010194508b8301925060005b818110156127f85760df198c870301835283518581511687528d81015160608f8901526127c960608901826123ba565b90506040820151915087810360408901526127e481836123ba565b97505050928c0192918c0191600101612799565b50505050506080820151608088015260a0820151915086810360a088015261282081836123ba565b965050509285019290850190600101612736565b5092979650505050505050565b6060815260006128546060830186612485565b82810360208481019190915285518083528682019282019060005b8181101561288b5784518352938301939183019160010161286f565b5050848103604086015261289f8187612485565b98975050505050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b6020815260006128e86020830184866128ab565b949350505050565b60006020828403121561290257600080fd5b8135610e18816120ef565b6040815260006129216040830185876128ab565b90508215156020830152949350505050565b60006020828403121561294557600080fd5b5051919050565b60808152600061296060808301888a6128ab565b6001600160a01b03871660208401526040830186905282810360608401526129898185876128ab565b9998505050505050505050565b6040815260006129a960408301856123ba565b90508260208301529392505050565b600080858511156129c857600080fd5b838611156129d557600080fd5b5050820193919092039150565b6001600160e01b03198135818116916004851015612a0a5780818660040360031b1b83161692505b505092915050565b6000612a20611fbc84611f76565b9050828152838383011115612a3457600080fd5b610e18836020830184612396565b600082601f830112612a5357600080fd5b610e1883835160208501612a12565b60008060008060808587031215612a7857600080fd5b84516001600160401b0380821115612a8f57600080fd5b818701915087601f830112612aa357600080fd5b612ab288835160208501612a12565b955060208701519150612ac482611f51565b60408701516060880151929550935080821115612ae057600080fd5b50612aed87828801612a42565b91505092959194509250565b60008351612b0b818460208801612396565b835190830190612b1f818360208801612396565b01949350505050565b60008060008060008060008060006101208a8c031215612b4757600080fd5b8951612b5281611f51565b60208b0151909950612b6381611f51565b60408b0151909850612b7481611f51565b8097505060608a0151955060808a0151945060a08a01516001600160401b03811115612b9f57600080fd5b612bab8c828d01612a42565b94505060c08a0151925060e08a0151612bc381611f51565b6101008b0151909250612bd5816120ef565b809150509295985092959850929598565b8082018082111561163357611633612686565b6bffffffffffffffffffffffff198460601b16815282601482015260008251612c29816034850160208701612396565b91909101603401949350505050565b6bffffffffffffffffffffffff198135818116916014851015612a0a5760149490940360031b84901b1690921692915050565b8035602083101561163357600019602084900360031b1b1692915050565b80516020808301519190811015612caa576000198160200360031b1b821691505b50919050565b634e487b7160e01b600052602160045260246000fd5b600060208284031215612cd857600080fd5b8151610e18816120ef565b60008251612cf5818460208701612396565b919091019291505056fea2646970667358221220e6349ea62bd7b0c0d8eed7da3947908c16ca3383370cc10da3a8b2b40c83b05264736f6c63430008170033",f$e={};ie(f$e,{abi:()=>l$e,bytecode:()=>p$e});var l$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"blockAfterThreshold_",type:"uint128",internalType:"uint128"},{name:"blockBeforeThreshold_",type:"uint128",internalType:"uint128"}],stateMutability:"pure"}],p$e="0x608060405234801561001057600080fd5b506104ed806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610345565b50505050505050505050565b005b610076610086366004610345565b6100c2565b61009e610099366004610412565b61023e565b604080516001600160801b0393841681529290911660208301520160405180910390f35b85600881901b6001600160f81b03198116156101335760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806101418d8d61023e565b90925090506001600160801b038216156101b957816001600160801b031643116101b95760405162461bcd60e51b8152602060048201526024808201527f426c6f636b4e756d626572456e666f726365723a6561726c792d64656c6567616044820152633a34b7b760e11b606482015260840161012a565b6001600160801b0381161561022f57806001600160801b0316431061022f5760405162461bcd60e51b815260206004820152602660248201527f426c6f636b4e756d626572456e666f726365723a657870697265642d64656c6560448201526533b0ba34b7b760d11b606482015260840161012a565b50505050505050505050505050565b600080602083146102a25760405162461bcd60e51b815260206004820152602860248201527f426c6f636b4e756d626572456e666f726365723a696e76616c69642d7465726d6044820152670e65ad8cadccee8d60c31b606482015260840161012a565b6102b0601060008587610454565b6102b99161047e565b60801c91506102cb8360108187610454565b6102d49161047e565b60801c90509250929050565b60008083601f8401126102f257600080fd5b50813567ffffffffffffffff81111561030a57600080fd5b60208301915083602082850101111561032257600080fd5b9250929050565b80356001600160a01b038116811461034057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561036457600080fd5b8a3567ffffffffffffffff8082111561037c57600080fd5b6103888e838f016102e0565b909c509a5060208d01359150808211156103a157600080fd5b6103ad8e838f016102e0565b909a50985060408d0135975060608d01359150808211156103cd57600080fd5b506103da8d828e016102e0565b90965094505060808b013592506103f360a08c01610329565b915061040160c08c01610329565b90509295989b9194979a5092959850565b6000806020838503121561042557600080fd5b823567ffffffffffffffff81111561043c57600080fd5b610448858286016102e0565b90969095509350505050565b6000808585111561046457600080fd5b8386111561047157600080fd5b5050820193919092039150565b6fffffffffffffffffffffffffffffffff1981358181169160108510156104af5780818660100360031b1b83161692505b50509291505056fea2646970667358221220e786ddc75b5e54c089f23ff0a2c6c7b67417725b5021ebc3aa3b2726c852e6cb64736f6c63430008170033",m$e={};ie(m$e,{abi:()=>b$e,bytecode:()=>y$e});var b$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"computeAddress",inputs:[{name:"_bytecodeHash",type:"bytes32",internalType:"bytes32"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"expectedAddress_",type:"address",internalType:"address"},{name:"salt_",type:"bytes32",internalType:"bytes32"},{name:"bytecode_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"},{type:"event",name:"DeployedContract",inputs:[{name:"contractAddress",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"SkippedDeployment",inputs:[{name:"contractAddress",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"DeployedEmptyContract",inputs:[{name:"contractAddress",type:"address",internalType:"address"}]}],y$e="0x608060405234801561001057600080fd5b50610748806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063481286e614610083578063a145832a146100b3578063b99deb0e146100c6578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046104fe565b50505050505050505050565b005b6100966100913660046105cb565b6100e8565b6040516001600160a01b0390911681526020015b60405180910390f35b6100816100c13660046104fe565b6100fd565b6100d96100d43660046105ed565b61026d565b6040516100aa9392919061062f565b60006100f48284610353565b90505b92915050565b85600881901b6001600160f81b031981161561016e5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b50600080600061017e8e8e61026d565b919450925090506001600160a01b0383163b156101d9576040516001600160a01b03841681527f641dafeb23238fae3ef71c64fced975da90c34dede63890507f3dda6b1e0dfef9060200160405180910390a1505050610260565b60006101e58284610360565b9050836001600160a01b0316816001600160a01b03161461025b5760405162461bcd60e51b815260206004820152602a60248201527f4465706c6f796564456e666f726365723a6465706c6f7965642d6164647265736044820152690e65adad2e6dac2e8c6d60b31b6064820152608401610165565b505050505b5050505050505050505050565b6000806060603484116102d05760405162461bcd60e51b815260206004820152602560248201527f4465706c6f796564456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b6064820152608401610165565b6102de601460008688610695565b6102e7916106bf565b60601c92506102fa603460148688610695565b610303916106f4565b91506103128460348188610695565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509598949750919550929350505050565b60006100f48383306103e8565b600061036e60008385610412565b9050806001600160a01b03163b6000036103a6576040516352c7cd4960e11b81526001600160a01b0382166004820152602401610165565b6040516001600160a01b03821681527faf3c4b03f515b5a38f3c238fdc24abf10854a2f27f2a85743a71de17e9bc7e7f9060200160405180910390a192915050565b6000604051836040820152846020820152828152600b8101905060ff815360559020949350505050565b60008347101561043e5760405163392efb2b60e21b815247600482015260248101859052604401610165565b815160000361046057604051631328927760e21b815260040160405180910390fd5b8282516020840186f590506001600160a01b03811661049257604051633a0ba96160e11b815260040160405180910390fd5b9392505050565b60008083601f8401126104ab57600080fd5b50813567ffffffffffffffff8111156104c357600080fd5b6020830191508360208285010111156104db57600080fd5b9250929050565b80356001600160a01b03811681146104f957600080fd5b919050565b60008060008060008060008060008060e08b8d03121561051d57600080fd5b8a3567ffffffffffffffff8082111561053557600080fd5b6105418e838f01610499565b909c509a5060208d013591508082111561055a57600080fd5b6105668e838f01610499565b909a50985060408d0135975060608d013591508082111561058657600080fd5b506105938d828e01610499565b90965094505060808b013592506105ac60a08c016104e2565b91506105ba60c08c016104e2565b90509295989b9194979a5092959850565b600080604083850312156105de57600080fd5b50508035926020909101359150565b6000806020838503121561060057600080fd5b823567ffffffffffffffff81111561061757600080fd5b61062385828601610499565b90969095509350505050565b60018060a01b03841681526000602084602084015260606040840152835180606085015260005b8181101561067257858101830151858201608001528201610656565b506000608082860101526080601f19601f83011685010192505050949350505050565b600080858511156106a557600080fd5b838611156106b257600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156106ec5780818660140360031b1b83161692505b505092915050565b803560208310156100f757600019602084900360031b1b169291505056fea264697066735822122012632a27b82f8f9b4b083a1f26c705dcd1ceb840e52519ff7902232eb956870464736f6c63430008170033",g$e={};ie(g$e,{abi:()=>h$e,bytecode:()=>x$e});var h$e=[],x$e="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212201124664c489cae3f1f240552ace1b72f497b65d8c9bdbce66e0c2b36268dcd2c64736f6c63430008170033",w$e={};ie(w$e,{abi:()=>v$e,bytecode:()=>T$e});var v$e=[{type:"receive",stateMutability:"payable"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"InvalidEIP712NameLength",inputs:[]},{type:"error",name:"InvalidEIP712VersionLength",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UnauthorizedCallContext",inputs:[]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],T$e="0x",S$e={};ie(S$e,{abi:()=>A$e,bytecode:()=>_$e});var A$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_recipient",type:"address",internalType:"address"},{name:"_tokenId",type:"uint256",internalType:"uint256"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"tokenId_",type:"uint256",internalType:"uint256"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],_$e="0x608060405234801561001057600080fd5b506109cb806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b99deb0e1161005b578063b99deb0e14610122578063d0a3529f1461016b578063d3eddcc51461017e578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c5578063a145832a146100e1578063b5e54492146100f4575b600080fd5b6100b061009b3660046106cb565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d3366004610749565b50505050505050505050565b005b6100df6100ef366004610749565b610191565b6101146101023660046106cb565b60006020819052908152604090205481565b6040519081526020016100bc565b610135610130366004610816565b610350565b6040805195151586526001600160a01b03948516602087015292909316918401919091526060830152608082015260a0016100bc565b610114610179366004610858565b61045d565b6100df61018c366004610749565b610476565b85600881901b6101a2816000610661565b6102015760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060008060006102118e8e610350565b50935093509350506000610228338585858c610678565b60008181526001602052604090205490915060ff16156102a25760405162461bcd60e51b815260206004820152602f60248201527f4552433131353542616c616e63654368616e6765456e666f726365723a656e6660448201526e1bdc98d95c8b5a5ccb5b1bd8dad959608a1b60648201526084016101f8565b6000818152600160208190526040808320805460ff191690921790915551627eeac760e11b81526001600160a01b0385811660048301526024820185905286169062fdd58e90604401602060405180830381865afa158015610308573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061032c91906108ad565b60009283526020839052604090922091909155505050505050505050505050505050565b600080808080606986146103c05760405162461bcd60e51b815260206004820152603160248201527f4552433131353542616c616e63654368616e6765456e666f726365723a696e766044820152700c2d8d2c85ae8cae4dae65ad8cadccee8d607b1b60648201526084016101f8565b868660008181106103d3576103d36108c6565b909101356001600160f81b031916151595506103f5905060156001888a6108dc565b6103fe91610906565b60601c935061041160296015888a6108dc565b61041a91610906565b60601c925061042d60496029888a6108dc565b6104369161093b565b9150610445866049818a6108dc565b61044e9161093b565b60001c90509295509295909350565b600061046c8686868686610678565b9695505050505050565b60008060008060006104888f8f610350565b9450945094509450945060006104a1338686868d610678565b600081815260016020526040808220805460ff1916905551627eeac760e11b81526001600160a01b03878116600483015260248201879052929350909187169062fdd58e90604401602060405180830381865afa158015610506573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061052a91906108ad565b905086156105bf5760008281526020819052604090205461054c90849061096f565b8110156105ba5760405162461bcd60e51b815260206004820152603660248201527f4552433131353542616c616e63654368616e6765456e666f726365723a65786360448201527565656465642d62616c616e63652d646563726561736560501b60648201526084016101f8565b61064e565b6000828152602081905260409020546105d9908490610982565b81101561064e5760405162461bcd60e51b815260206004820152603a60248201527f4552433131353542616c616e63654368616e6765456e666f726365723a696e7360448201527f756666696369656e742d62616c616e63652d696e63726561736500000000000060648201526084016101f8565b5050505050505050505050505050505050565b6001600160f81b0319828116908216145b92915050565b604080516001600160a01b0396871660208083019190915295871681830152939095166060840152608083019190915260a0808301919091528351808303909101815260c0909101909252815191012090565b6000602082840312156106dd57600080fd5b5035919050565b60008083601f8401126106f657600080fd5b50813567ffffffffffffffff81111561070e57600080fd5b60208301915083602082850101111561072657600080fd5b9250929050565b80356001600160a01b038116811461074457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561076857600080fd5b8a3567ffffffffffffffff8082111561078057600080fd5b61078c8e838f016106e4565b909c509a5060208d01359150808211156107a557600080fd5b6107b18e838f016106e4565b909a50985060408d0135975060608d01359150808211156107d157600080fd5b506107de8d828e016106e4565b90965094505060808b013592506107f760a08c0161072d565b915061080560c08c0161072d565b90509295989b9194979a5092959850565b6000806020838503121561082957600080fd5b823567ffffffffffffffff81111561084057600080fd5b61084c858286016106e4565b90969095509350505050565b600080600080600060a0868803121561087057600080fd5b6108798661072d565b94506108876020870161072d565b93506108956040870161072d565b94979396509394606081013594506080013592915050565b6000602082840312156108bf57600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b600080858511156108ec57600080fd5b838611156108f957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156109335780818660140360031b1b83161692505b505092915050565b8035602083101561067257600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561067257610672610959565b808201808211156106725761067261095956fea264697066735822122095ab63871cc701b6845065f3118822a1bb1778b7d93ba045a40145ebc06f19af64736f6c63430008170033",_0={};ie(_0,{abi:()=>E$e,bytecode:()=>k$e});var E$e=[{type:"constructor",inputs:[{name:"_owner",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"ANY_DELEGATE",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"ROOT_AUTHORITY",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disabledDelegations",inputs:[{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"isDisabled",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDelegationHash",inputs:[{name:"_input",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DisabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"EnabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"RedeemedDelegation",inputs:[{name:"rootDelegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"SetDomain",inputs:[{name:"domainHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"name",type:"string",indexed:!1,internalType:"string"},{name:"domainVersion",type:"string",indexed:!1,internalType:"string"},{name:"chainId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"contractAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"AlreadyDisabled",inputs:[]},{type:"error",name:"AlreadyEnabled",inputs:[]},{type:"error",name:"BatchDataLengthMismatch",inputs:[]},{type:"error",name:"CannotUseADisabledDelegation",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"EmptySignature",inputs:[]},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"InvalidAuthority",inputs:[]},{type:"error",name:"InvalidDelegate",inputs:[]},{type:"error",name:"InvalidDelegator",inputs:[]},{type:"error",name:"InvalidEOASignature",inputs:[]},{type:"error",name:"InvalidERC1271Signature",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],k$e="0x6101606040523480156200001257600080fd5b506040516200334f3803806200334f833981016040819052620000359162000384565b60408051808201825260118152702232b632b3b0ba34b7b726b0b730b3b2b960791b602080830191909152825180840190935260018352603160f81b9083015290826001600160a01b038116620000a757604051631e4fbdf760e01b8152600060048201526024015b60405180910390fd5b620000b28162000204565b506001805460ff60a01b19169055620000cd82600262000222565b61012052620000de81600362000222565b61014052815160208084019190912060e052815190820120610100524660a0526200015b60e05161010051604080516000805160206200332f83398151915260208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60805250503060c0526000620001706200025b565b9050306001600160a01b0316817f04a46d9007577c7ff1e513b900545162ec25d25991ae3dc60cf26ec01a84806d604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b815250604051806040016040528060018152602001603160f81b81525046604051620001f493929190620003fe565b60405180910390a35050620005e5565b600180546001600160a01b03191690556200021f81620002f1565b50565b600060208351101562000242576200023a8362000341565b905062000255565b816200024f8482620004df565b5060ff90505b92915050565b600060c0516001600160a01b0316306001600160a01b031614801562000282575060a05146145b156200028f575060805190565b620002ec60e05161010051604080516000805160206200332f83398151915260208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b905090565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600080829050601f815111156200036f578260405163305a27a960e01b81526004016200009e9190620005ab565b80516200037c82620005c0565b179392505050565b6000602082840312156200039757600080fd5b81516001600160a01b0381168114620003af57600080fd5b9392505050565b6000815180845260005b81811015620003de57602081850181015186830182015201620003c0565b506000602082860101526020601f19601f83011685010191505092915050565b606081526000620004136060830186620003b6565b8281036020840152620004278186620003b6565b915050826040830152949350505050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200046357607f821691505b6020821081036200048457634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620004da576000816000526020600020601f850160051c81016020861015620004b55750805b601f850160051c820191505b81811015620004d657828155600101620004c1565b5050505b505050565b81516001600160401b03811115620004fb57620004fb62000438565b62000513816200050c84546200044e565b846200048a565b602080601f8311600181146200054b5760008415620005325750858301515b600019600386901b1c1916600185901b178555620004d6565b600085815260208120601f198616915b828110156200057c578886015182559484019460019091019084016200055b565b50858210156200059b5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b602081526000620003af6020830184620003b6565b80516020808301519190811015620004845760001960209190910360031b1b16919050565b60805160a05160c05160e051610100516101205161014051612cef620006406000396000611bda01526000611bad01526000611b1201526000611aea01526000611a4501526000611a6f01526000611a990152612cef6000f3fe608060405234801561001057600080fd5b506004361061012c5760003560e01c806383ebb771116100ad578063acb8cc4911610071578063acb8cc491461027f578063cef6d2091461029f578063e30c3978146102b2578063f2fde38b146102c3578063ffa1ad74146102d657600080fd5b806383ebb771146102065780638456cb591461020e57806384b0196e146102165780638da5cb5b14610231578063a3f4df7e1461024257600080fd5b806358909ebc116100f457806358909ebc146101b05780635c975abb146101d157806366134607146101e3578063715018a6146101f657806379ba5097146101fe57600080fd5b80631b13cac2146101315780632d40d0521461014d5780633ed01015146101805780633f4ba83a14610195578063499340471461019d575b600080fd5b61013a60001981565b6040519081526020015b60405180910390f35b61017061015b3660046120e6565b60046020526000908152604090205460ff1681565b6040519015158152602001610144565b61019361018e3660046120ff565b6102fa565b005b6101936103f4565b6101936101ab3660046120ff565b610406565b6101b9610a1181565b6040516001600160a01b039091168152602001610144565b600154600160a01b900460ff16610170565b61013a6101f13660046120ff565b6104f6565b61019361050f565b610193610521565b61013a61056a565b610193610579565b61021e610589565b6040516101449796959493929190612190565b6000546001600160a01b03166101b9565b610272604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b81525081565b6040516101449190612229565b610272604051806040016040528060018152602001603160f81b81525081565b6101936102ad366004612287565b6105cf565b6001546001600160a01b03166101b9565b6101936102d136600461233c565b611891565b610272604051806040016040528060058152602001640312e332e360dc1b81525081565b61030a604082016020830161233c565b6001600160a01b03811633146103335760405163b9f0f17160e01b815260040160405180910390fd5b600061033e836104f6565b60008181526004602052604090205490915060ff1661037057604051637952fbad60e11b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191690556103959084018461233c565b6001600160a01b03166103ae604085016020860161233c565b6001600160a01b0316827f3feadce88fc1b49db633a56fd5307ed6ee18734df83bcc4011daa720c9cd95f1866040516103e79190612484565b60405180910390a4505050565b6103fc611902565b61040461192f565b565b610416604082016020830161233c565b6001600160a01b038116331461043f5760405163b9f0f17160e01b815260040160405180910390fd5b600061044a836104f6565b60008181526004602052604090205490915060ff161561047c57604051625ecddb60e01b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191660011790556104a49084018461233c565b6001600160a01b03166104bd604085016020860161233c565b6001600160a01b0316827fea589ba9473ee1fe77d352c7ed919747715a5d22931b972de9b02a907c66d5dd866040516103e79190612484565b600061050961050483612823565b611984565b92915050565b610517611902565b6104046000611a1f565b60015433906001600160a01b0316811461055e5760405163118cdaa760e01b81526001600160a01b03821660048201526024015b60405180910390fd5b61056781611a1f565b50565b6000610574611a38565b905090565b610581611902565b610404611b63565b60006060806000806000606061059d611ba6565b6105a5611bd3565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b6105d7611c00565b8481811415806105e75750808414155b1561060557604051631bcaf69f60e01b815260040160405180910390fd5b6000816001600160401b0381111561061f5761061f612555565b60405190808252806020026020018201604052801561065257816020015b606081526020019060019003908161063d5790505b5090506000826001600160401b0381111561066f5761066f612555565b6040519080825280602002602001820160405280156106a257816020015b606081526020019060019003908161068d5790505b50905060005b83811015610c815760008a8a838181106106c4576106c461282f565b90506020028101906106d69190612845565b8101906106e3919061288b565b905080516000036107d1576040805160008082526020820190925290610765565b6107526040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816107045790505b508483815181106107785761077861282f565b602090810291909101015260006040519080825280602002602001820160405280156107ae578160200160208202803683370190505b508383815181106107c1576107c161282f565b6020026020010181905250610c78565b808483815181106107e4576107e461282f565b6020026020010181905250600081516001600160401b0381111561080a5761080a612555565b604051908082528060200260200182016040528015610833578160200160208202803683370190505b509050808484815181106108495761084961282f565b6020026020010181905250336001600160a01b0316826000815181106108715761087161282f565b6020026020010151600001516001600160a01b0316141580156108c65750610a116001600160a01b0316826000815181106108ae576108ae61282f565b6020026020010151600001516001600160a01b031614155b156108e457604051632d618d8160e21b815260040160405180910390fd5b60005b8251811015610ab55760008382815181106109045761090461282f565b6020026020010151905061091781611984565b8383815181106109295761092961282f565b60200260200101818152505080602001516001600160a01b03163b6000036109dc57600061099e61099461095b61056a565b86868151811061096d5761096d61282f565b602002602001015160405161190160f01b8152600281019290925260228201526042902090565b8360a00151611c2b565b905081602001516001600160a01b0316816001600160a01b0316146109d657604051630f6d9e4760e21b815260040160405180910390fd5b50610aac565b60006109fb6109e961056a565b85858151811061096d5761096d61282f565b9050600082602001516001600160a01b0316631626ba7e838560a001516040518363ffffffff1660e01b8152600401610a3592919061293b565b602060405180830381865afa158015610a52573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a76919061295c565b6001600160e01b0319169050630b135d3f60e11b8114610aa95760405163155ff42760e01b815260040160405180910390fd5b50505b506001016108e7565b5060005b8251811015610c755760046000838381518110610ad857610ad861282f565b60209081029190910181015182528101919091526040016000205460ff1615610b14576040516302dd502960e11b815260040160405180910390fd5b60018351610b22919061299c565b8114610c2b5781610b348260016129af565b81518110610b4457610b4461282f565b6020026020010151838281518110610b5e57610b5e61282f565b60200260200101516040015114610b8857604051636f6a1b8760e11b815260040160405180910390fd5b600083610b968360016129af565b81518110610ba657610ba661282f565b6020026020010151600001519050610a116001600160a01b0316816001600160a01b031614158015610c075750806001600160a01b0316848381518110610bef57610bef61282f565b6020026020010151602001516001600160a01b031614155b15610c2557604051632d618d8160e21b815260040160405180910390fd5b50610c6d565b60001960001b838281518110610c4357610c4361282f565b60200260200101516040015114610c6d57604051636f6a1b8760e11b815260040160405180910390fd5b600101610ab9565b50505b506001016106a8565b5060005b83811015610ea6576000838281518110610ca157610ca161282f565b6020026020010151511115610e9e5760005b838281518110610cc557610cc561282f565b602002602001015151811015610e9c576000848381518110610ce957610ce961282f565b60200260200101518281518110610d0257610d0261282f565b602002602001015160600151905060005b8151811015610e92576000828281518110610d3057610d3061282f565b6020026020010151600001519050806001600160a01b031663414c3e33848481518110610d5f57610d5f61282f565b602002602001015160200151858581518110610d7d57610d7d61282f565b6020026020010151604001518f8f8a818110610d9b57610d9b61282f565b905060200201358e8e8b818110610db457610db461282f565b9050602002810190610dc69190612845565b8c8c81518110610dd857610dd861282f565b60200260200101518b81518110610df157610df161282f565b60200260200101518e8d81518110610e0b57610e0b61282f565b60200260200101518c81518110610e2457610e2461282f565b602002602001015160200151336040518963ffffffff1660e01b8152600401610e549897969594939291906129c2565b600060405180830381600087803b158015610e6e57600080fd5b505af1158015610e82573d6000803e3d6000fd5b5050505050806001019050610d13565b5050600101610cb3565b505b600101610c85565b5060005b838110156114ca57828181518110610ec457610ec461282f565b602002602001015151600003610f82573363d691c964898984818110610eec57610eec61282f565b90506020020135888885818110610f0557610f0561282f565b9050602002810190610f179190612845565b6040518463ffffffff1660e01b8152600401610f3593929190612a2d565b6000604051808303816000875af1158015610f54573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f7c9190810190612a50565b506114c2565b60005b838281518110610f9757610f9761282f565b60200260200101515181101561116e576000848381518110610fbb57610fbb61282f565b60200260200101518281518110610fd457610fd461282f565b602002602001015160600151905060005b81518110156111645760008282815181106110025761100261282f565b6020026020010151600001519050806001600160a01b031663a145832a8484815181106110315761103161282f565b60200260200101516020015185858151811061104f5761104f61282f565b6020026020010151604001518f8f8a81811061106d5761106d61282f565b905060200201358e8e8b8181106110865761108661282f565b90506020028101906110989190612845565b8c8c815181106110aa576110aa61282f565b60200260200101518b815181106110c3576110c361282f565b60200260200101518e8d815181106110dd576110dd61282f565b60200260200101518c815181106110f6576110f661282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016111269897969594939291906129c2565b600060405180830381600087803b15801561114057600080fd5b505af1158015611154573d6000803e3d6000fd5b5050505050806001019050610fe5565b5050600101610f85565b508281815181106111815761118161282f565b6020026020010151600184838151811061119d5761119d61282f565b6020026020010151516111b0919061299c565b815181106111c0576111c061282f565b6020026020010151602001516001600160a01b031663d691c9648989848181106111ec576111ec61282f565b905060200201358888858181106112055761120561282f565b90506020028101906112179190612845565b6040518463ffffffff1660e01b815260040161123593929190612a2d565b6000604051808303816000875af1158015611254573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261127c9190810190612a50565b5060008382815181106112915761129161282f565b60200260200101515190505b80156114c05760008483815181106112b7576112b761282f565b60200260200101516001836112cc919061299c565b815181106112dc576112dc61282f565b60200260200101516060015190506000815190505b80156114ad5760008261130560018461299c565b815181106113155761131561282f565b6020026020010151600001519050806001600160a01b031663d3eddcc584600185611340919061299c565b815181106113505761135061282f565b6020026020010151602001518560018661136a919061299c565b8151811061137a5761137a61282f565b6020026020010151604001518f8f8a8181106113985761139861282f565b905060200201358e8e8b8181106113b1576113b161282f565b90506020028101906113c39190612845565b8c8c815181106113d5576113d561282f565b602002602001015160018c6113ea919061299c565b815181106113fa576113fa61282f565b60200260200101518e8d815181106114145761141461282f565b602002602001015160018d611429919061299c565b815181106114395761143961282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016114699897969594939291906129c2565b600060405180830381600087803b15801561148357600080fd5b505af1158015611497573d6000803e3d6000fd5b5050505050806114a690612b2f565b90506112f1565b5050806114b990612b2f565b905061129d565b505b600101610eaa565b5060005b838110156117465760008382815181106114ea576114ea61282f565b602002602001015151111561173e57600083828151811061150d5761150d61282f565b60200260200101515190505b801561173c5760008483815181106115335761153361282f565b6020026020010151600183611548919061299c565b815181106115585761155861282f565b60200260200101516060015190506000815190505b80156117295760008261158160018461299c565b815181106115915761159161282f565b6020026020010151600001519050806001600160a01b031663ed463367846001856115bc919061299c565b815181106115cc576115cc61282f565b602002602001015160200151856001866115e6919061299c565b815181106115f6576115f661282f565b6020026020010151604001518f8f8a8181106116145761161461282f565b905060200201358e8e8b81811061162d5761162d61282f565b905060200281019061163f9190612845565b8c8c815181106116515761165161282f565b602002602001015160018c611666919061299c565b815181106116765761167661282f565b60200260200101518e8d815181106116905761169061282f565b602002602001015160018d6116a5919061299c565b815181106116b5576116b561282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016116e59897969594939291906129c2565b600060405180830381600087803b1580156116ff57600080fd5b505af1158015611713573d6000803e3d6000fd5b50505050508061172290612b2f565b905061156d565b50508061173590612b2f565b9050611519565b505b6001016114ce565b5060005b838110156118855760008382815181106117665761176661282f565b602002602001015151111561187d5760005b83828151811061178a5761178a61282f565b60200260200101515181101561187b57336001600160a01b03168483815181106117b6576117b661282f565b602002602001015160018685815181106117d2576117d261282f565b6020026020010151516117e5919061299c565b815181106117f5576117f561282f565b6020026020010151602001516001600160a01b03167f40dadaa36c6c2e3d7317e24757451ffb2d603d875f0ad5e92c5dd156573b187386858151811061183d5761183d61282f565b602002602001015184815181106118565761185661282f565b602002602001015160405161186b9190612b46565b60405180910390a3600101611778565b505b60010161174a565b50505050505050505050565b611899611902565b600180546001600160a01b0383166001600160a01b031990911681179091556118ca6000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b6000546001600160a01b031633146104045760405163118cdaa760e01b8152336004820152602401610555565b611937611c55565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b6000807f88c1d2ecf185adf710588203a5f263f0ff61be0d33da39792cde19ba9aa4331e8360000151846020015185604001516119c48760600151611c7f565b6080808901516040805160208101989098526001600160a01b03968716908801529490931660608601529184015260a083015260c082015260e0015b60408051601f1981840301815291905280516020909101209392505050565b600180546001600160a01b031916905561056781611d4a565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611a9157507f000000000000000000000000000000000000000000000000000000000000000046145b15611abb57507f000000000000000000000000000000000000000000000000000000000000000090565b610574604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b611b6b611c00565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586119673390565b60606105747f00000000000000000000000000000000000000000000000000000000000000006002611d9a565b60606105747f00000000000000000000000000000000000000000000000000000000000000006003611d9a565b600154600160a01b900460ff16156104045760405163d93c066560e01b815260040160405180910390fd5b600080600080611c3b8686611e45565b925092509250611c4b8282611e92565b5090949350505050565b600154600160a01b900460ff1661040457604051638dfc202b60e01b815260040160405180910390fd5b60008082516001600160401b03811115611c9b57611c9b612555565b604051908082528060200260200182016040528015611cc4578160200160208202803683370190505b50905060005b8351811015611d1a57611cf5848281518110611ce857611ce861282f565b6020026020010151611f4f565b828281518110611d0757611d0761282f565b6020908102919091010152600101611cca565b5080604051602001611d2c9190612c33565b60405160208183030381529060405280519060200120915050919050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b606060ff8314611db457611dad83611fb0565b9050610509565b818054611dc090612c69565b80601f0160208091040260200160405190810160405280929190818152602001828054611dec90612c69565b8015611e395780601f10611e0e57610100808354040283529160200191611e39565b820191906000526020600020905b815481529060010190602001808311611e1c57829003601f168201915b50505050509050610509565b60008060008351604103611e7f5760208401516040850151606086015160001a611e7188828585611fef565b955095509550505050611e8b565b50508151600091506002905b9250925092565b6000826003811115611ea657611ea6612ca3565b03611eaf575050565b6001826003811115611ec357611ec3612ca3565b03611ee15760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611ef557611ef5612ca3565b03611f165760405163fce698f760e01b815260048101829052602401610555565b6003826003811115611f2a57611f2a612ca3565b03611f4b576040516335e2f38360e21b815260048101829052602401610555565b5050565b6000807f80ad7e1b04ee6d994a125f4714ca0720908bd80ed16063ec8aee4b88e9253e2d8360000151846020015180519060200120604051602001611a00939291909283526001600160a01b03919091166020830152604082015260600190565b60606000611fbd836120be565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a084111561202a57506000915060039050826120b4565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa15801561207e573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381166120aa575060009250600191508290506120b4565b9250600091508190505b9450945094915050565b600060ff8216601f81111561050957604051632cd44ac360e21b815260040160405180910390fd5b6000602082840312156120f857600080fd5b5035919050565b60006020828403121561211157600080fd5b81356001600160401b0381111561212757600080fd5b820160c0818503121561213957600080fd5b9392505050565b60005b8381101561215b578181015183820152602001612143565b50506000910152565b6000815180845261217c816020860160208601612140565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e060208401526121b160e084018a612164565b83810360408501526121c3818a612164565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b81811015612217578351835292840192918401916001016121fb565b50909c9b505050505050505050505050565b6020815260006121396020830184612164565b60008083601f84011261224e57600080fd5b5081356001600160401b0381111561226557600080fd5b6020830191508360208260051b850101111561228057600080fd5b9250929050565b600080600080600080606087890312156122a057600080fd5b86356001600160401b03808211156122b757600080fd5b6122c38a838b0161223c565b909850965060208901359150808211156122dc57600080fd5b6122e88a838b0161223c565b9096509450604089013591508082111561230157600080fd5b5061230e89828a0161223c565b979a9699509497509295939492505050565b80356001600160a01b038116811461233757600080fd5b919050565b60006020828403121561234e57600080fd5b61213982612320565b6000808335601e1984360301811261236e57600080fd5b83016020810192503590506001600160401b0381111561238d57600080fd5b80360382131561228057600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561247657858403601f19018a52823536899003605e19018112612404578283fd5b880160606001600160a01b0361241983612320565b16865261242887830183612357565b828989015261243a838901828461239c565b92505050604061244c81840184612357565b93508783038289015261246083858361239c565b9d89019d975050509386019350506001016123df565b509198975050505050505050565b6020815260006001600160a01b038061249c85612320565b166020840152806124af60208601612320565b16604084015250604083013560608301526060830135601e198436030181126124d757600080fd5b83016020810190356001600160401b038111156124f357600080fd5b8060051b360382131561250557600080fd5b60c0608085015261251a60e0850182846123c5565b915050608084013560a084015261253460a0850185612357565b848303601f190160c086015261254b83828461239c565b9695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b038111828210171561258d5761258d612555565b60405290565b60405160c081016001600160401b038111828210171561258d5761258d612555565b604051601f8201601f191681016001600160401b03811182821017156125dd576125dd612555565b604052919050565b60006001600160401b038211156125fe576125fe612555565b5060051b60200190565b60006001600160401b0382111561262157612621612555565b50601f01601f191660200190565b600082601f83011261264057600080fd5b813561265361264e82612608565b6125b5565b81815284602083860101111561266857600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261269657600080fd5b813560206126a661264e836125e5565b82815260059290921b840181019181810190868411156126c557600080fd5b8286015b848110156127745780356001600160401b03808211156126e95760008081fd5b908801906060828b03601f19018113156127035760008081fd5b61270b61256b565b612716888501612320565b81526040808501358481111561272c5760008081fd5b61273a8e8b8389010161262f565b838b0152509184013591838311156127525760008081fd5b6127608d8a8588010161262f565b9082015286525050509183019183016126c9565b509695505050505050565b600060c0828403121561279157600080fd5b612799612593565b90506127a482612320565b81526127b260208301612320565b60208201526040820135604082015260608201356001600160401b03808211156127db57600080fd5b6127e785838601612685565b60608401526080840135608084015260a084013591508082111561280a57600080fd5b506128178482850161262f565b60a08301525092915050565b6000610509368361277f565b634e487b7160e01b600052603260045260246000fd5b6000808335601e1984360301811261285c57600080fd5b8301803591506001600160401b0382111561287657600080fd5b60200191503681900382131561228057600080fd5b6000602080838503121561289e57600080fd5b82356001600160401b03808211156128b557600080fd5b818501915085601f8301126128c957600080fd5b81356128d761264e826125e5565b81815260059190911b830184019084810190888311156128f657600080fd5b8585015b8381101561292e578035858111156129125760008081fd5b6129208b89838a010161277f565b8452509186019186016128fa565b5098975050505050505050565b8281526040602082015260006129546040830184612164565b949350505050565b60006020828403121561296e57600080fd5b81516001600160e01b03198116811461213957600080fd5b634e487b7160e01b600052601160045260246000fd5b8181038181111561050957610509612986565b8082018082111561050957610509612986565b60e0815260006129d560e083018b612164565b82810360208401526129e7818b612164565b90508860408401528281036060840152612a0281888a61239c565b608084019690965250506001600160a01b0392831660a0820152911660c09091015295945050505050565b838152604060208201526000612a4760408301848661239c565b95945050505050565b60006020808385031215612a6357600080fd5b82516001600160401b0380821115612a7a57600080fd5b818501915085601f830112612a8e57600080fd5b8151612a9c61264e826125e5565b81815260059190911b83018401908481019088831115612abb57600080fd5b8585015b8381101561292e57805185811115612ad75760008081fd5b8601603f81018b13612ae95760008081fd5b878101516040612afb61264e83612608565b8281528d82848601011115612b105760008081fd5b612b1f838c8301848701612140565b8652505050918601918601612abf565b600081612b3e57612b3e612986565b506000190190565b602080825282516001600160a01b0390811683830152838201518116604080850191909152808501516060808601919091528086015160c06080870152805160e0870181905260009594610100600583901b8901810195919493870193919290890190885b81811015612c055760ff198b8903018352855187815116895289810151858b8b0152612bd9868b0182612164565b918701518a83038b890152919050612bf18183612164565b995050509488019491880191600101612bab565b50505050505050608085015160a085015260a08501519150601f198482030160c0850152612a478183612164565b815160009082906020808601845b83811015612c5d57815185529382019390820190600101612c41565b50929695505050505050565b600181811c90821680612c7d57607f821691505b602082108103612c9d57634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052602160045260246000fdfea2646970667358221220ca409e8c9582544b3b8d8c05ed7b77fb8b148a77f098b1aea58f1517227de31d64736f6c634300081700338b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f",I$e={};ie(I$e,{abi:()=>C$e,bytecode:()=>P$e});var C$e=[{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]}],P$e="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212204f453c45fd8890597438ba3740ed042994be373737c9bd8ac833ff249df3eaab64736f6c63430008170033",R$e={};ie(R$e,{abi:()=>$$e,bytecode:()=>D$e});var $$e=[{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],D$e="0x",c7={};ie(c7,{abi:()=>M$e,bytecode:()=>O$e});var M$e=[{type:"constructor",inputs:[{name:"implementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],stateMutability:"payable"},{type:"fallback",stateMutability:"payable"},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]}],O$e="0x60806040526040516103f03803806103f08339810160408190526100229161025e565b61002c8282610033565b5050610341565b61003c82610091565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b905f90a280511561008557610080828261010c565b505050565b61008d61017f565b5050565b806001600160a01b03163b5f036100cb57604051634c9c8ce360e01b81526001600160a01b03821660048201526024015b60405180910390fd5b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc80546001600160a01b0319166001600160a01b0392909216919091179055565b60605f80846001600160a01b0316846040516101289190610326565b5f60405180830381855af49150503d805f8114610160576040519150601f19603f3d011682016040523d82523d5f602084013e610165565b606091505b5090925090506101768583836101a0565b95945050505050565b341561019e5760405163b398979f60e01b815260040160405180910390fd5b565b6060826101b5576101b0826101ff565b6101f8565b81511580156101cc57506001600160a01b0384163b155b156101f557604051639996b31560e01b81526001600160a01b03851660048201526024016100c2565b50805b9392505050565b80511561020f5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b634e487b7160e01b5f52604160045260245ffd5b5f5b8381101561025657818101518382015260200161023e565b50505f910152565b5f806040838503121561026f575f80fd5b82516001600160a01b0381168114610285575f80fd5b60208401519092506001600160401b03808211156102a1575f80fd5b818501915085601f8301126102b4575f80fd5b8151818111156102c6576102c6610228565b604051601f8201601f19908116603f011681019083821181831017156102ee576102ee610228565b81604052828152886020848701011115610306575f80fd5b61031783602083016020880161023c565b80955050505050509250929050565b5f825161033781846020870161023c565b9190910192915050565b60a38061034d5f395ff3fe6080604052600a600c565b005b60186014601a565b6050565b565b5f604b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc546001600160a01b031690565b905090565b365f80375f80365f845af43d5f803e8080156069573d5ff35b3d5ffdfea2646970667358221220fd2cc92935c943d341edacaf5318a0b9ab0185ce62ef72e95ab393ef358730c464736f6c63430008170033",N$e={};ie(N$e,{abi:()=>L$e,bytecode:()=>B$e});var L$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"dataStart_",type:"uint256",internalType:"uint256"},{name:"value_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"}],B$e="0x608060405234801561001057600080fd5b506106dc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046104a2565b50505050505050505050565b005b6100766100863660046104a2565b6100b5565b61009e61009936600461056f565b610198565b6040516100ac9291906105b1565b60405180910390f35b856100c1816000610265565b6101125760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610123816000610265565b61017d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610109565b5061018a8c8c898961027c565b505050505050505050505050565b6000606060218310156102005760405162461bcd60e51b815260206004820152602a60248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d6044820152697465726d732d73697a6560b01b6064820152608401610109565b61020e602060008587610608565b61021791610632565b91506102268360208187610608565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250949792965091945050505050565b6001600160f81b0319828116908216145b92915050565b6000606036600061028d86866103d6565b93509350505061029d8888610198565b80519195509350816102af8287610650565b11156103155760405162461bcd60e51b815260206004820152602f60248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d60448201526e0c6c2d8d8c8c2e8c25ad8cadccee8d608b1b6064820152608401610109565b61036e8386846103258583610650565b9261033293929190610608565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250889250610427915050565b6103cb5760405162461bcd60e51b815260206004820152602860248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d60448201526763616c6c6461746160c01b6064820152608401610109565b505050505050505050565b60008036816103e86014828789610608565b6103f191610671565b60601c9350610404603460148789610608565b61040d91610632565b925061041c8560348189610608565b949793965094505050565b8051602091820120825192909101919091201490565b60008083601f84011261044f57600080fd5b50813567ffffffffffffffff81111561046757600080fd5b60208301915083602082850101111561047f57600080fd5b9250929050565b80356001600160a01b038116811461049d57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156104c157600080fd5b8a3567ffffffffffffffff808211156104d957600080fd5b6104e58e838f0161043d565b909c509a5060208d01359150808211156104fe57600080fd5b61050a8e838f0161043d565b909a50985060408d0135975060608d013591508082111561052a57600080fd5b506105378d828e0161043d565b90965094505060808b0135925061055060a08c01610486565b915061055e60c08c01610486565b90509295989b9194979a5092959850565b6000806020838503121561058257600080fd5b823567ffffffffffffffff81111561059957600080fd5b6105a58582860161043d565b90969095509350505050565b8281526000602060406020840152835180604085015260005b818110156105e6578581018301518582016060015282016105ca565b506000606082860101526060601f19601f830116850101925050509392505050565b6000808585111561061857600080fd5b8386111561062557600080fd5b5050820193919092039150565b8035602083101561027657600019602084900360031b1b1692915050565b8082018082111561027657634e487b7160e01b600052601160045260246000fd5b6bffffffffffffffffffffffff19813581811691601485101561069e5780818660140360031b1b83161692505b50509291505056fea2646970667358221220040ece6946150f16c5413920be7d1b9c5d49d2aae2b6945d7da6faa6f92f5ef664736f6c63430008170033",U$e={};ie(U$e,{abi:()=>H$e,bytecode:()=>F$e});var H$e=[],F$e="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220e387e66c46ba5a334fec27a4edf89a8be9952b587b8297dbf10cb57e8c1726d964736f6c63430008170033",o2={};ie(o2,{abi:()=>z$e,bytecode:()=>j$e});var z$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedContract_",type:"address",internalType:"address"},{name:"maxTokens_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"spentMap",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],j$e="0x608060405234801561001057600080fd5b5061081e806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780639dd5d9ab14610083578063a145832a146100be578063b99deb0e146100d1578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046105c3565b50505050505050505050565b005b6100ab610091366004610690565b600060208181529281526040808220909352908152205481565b6040519081526020015b60405180910390f35b6100816100cc3660046105c3565b610103565b6100e46100df3660046106ba565b610247565b604080516001600160a01b0390931683526020830191909152016100b5565b8561010f8160006102df565b6101605760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101718160006102df565b6101cb5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610157565b506000806101dc8e8e8b8b8b6102f6565b9150915086856001600160a01b0316336001600160a01b03167fc026e493323d526061a052b5dd562495120e2f648797a48be61966d3a6beec8d858560405161022f929190918252602082015260400190565b60405180910390a45050505050505050505050505050565b600080603483146102a15760405162461bcd60e51b815260206004820152603060248201526000805160206107c983398151915260448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b6064820152608401610157565b6102af6014600085876106fc565b6102b891610726565b60601c91506102ca83601481876106fc565b6102d39161075b565b60001c90509250929050565b6001600160f81b0319828116908216145b92915050565b6000806000366000610308888861050d565b9295509350909150506044811461036c5760405162461bcd60e51b815260206004820152603460248201526000805160206107c98339815191526044820152730d8d2c85acaf0cac6eae8d2dedc5ad8cadccee8d60631b6064820152608401610157565b60006103788b8b610247565b965090506001600160a01b03808216908516146103da5760405162461bcd60e51b815260206004820152602c60248201526000805160206107c983398151915260448201526b1b1a590b58dbdb9d1c9858dd60a21b6064820152608401610157565b63a9059cbb60e01b6103f06004600085876106fc565b6103f991610779565b6001600160e01b031916146104515760405162461bcd60e51b815260206004820152602a60248201526000805160206107c98339815191526044820152691b1a590b5b595d1a1bd960b21b6064820152608401610157565b61045f6044602484866106fc565b6104689161075b565b336000908152602081815260408083208b8452909152812080549091906104909084906107a7565b9250508190559450858511156104ff5760405162461bcd60e51b815260206004820152602e60248201527f45524332305472616e73666572416d6f756e74456e666f726365723a616c6c6f60448201526d1dd85b98d94b595e18d95959195960921b6064820152608401610157565b505050509550959350505050565b600080368161051f60148287896106fc565b61052891610726565b60601c935061053b6034601487896106fc565b6105449161075b565b925061055385603481896106fc565b949793965094505050565b60008083601f84011261057057600080fd5b50813567ffffffffffffffff81111561058857600080fd5b6020830191508360208285010111156105a057600080fd5b9250929050565b80356001600160a01b03811681146105be57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156105e257600080fd5b8a3567ffffffffffffffff808211156105fa57600080fd5b6106068e838f0161055e565b909c509a5060208d013591508082111561061f57600080fd5b61062b8e838f0161055e565b909a50985060408d0135975060608d013591508082111561064b57600080fd5b506106588d828e0161055e565b90965094505060808b0135925061067160a08c016105a7565b915061067f60c08c016105a7565b90509295989b9194979a5092959850565b600080604083850312156106a357600080fd5b6106ac836105a7565b946020939093013593505050565b600080602083850312156106cd57600080fd5b823567ffffffffffffffff8111156106e457600080fd5b6106f08582860161055e565b90969095509350505050565b6000808585111561070c57600080fd5b8386111561071957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156107535780818660140360031b1b83161692505b505092915050565b803560208310156102f057600019602084900360031b1b1692915050565b6001600160e01b031981358181169160048510156107535760049490940360031b84901b1690921692915050565b808201808211156102f057634e487b7160e01b600052601160045260246000fdfe45524332305472616e73666572416d6f756e74456e666f726365723a696e7661a2646970667358221220936350618a5001f34797bf97c50cd107709e028340c60e13df9fe9a2d10d7fb364736f6c63430008170033",UP={};ie(UP,{abi:()=>q$e,bytecode:()=>G$e});var q$e=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],G$e="0x608060405234801561001057600080fd5b50610d12806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063a145832a1161005b578063a145832a1461013e578063b99deb0e14610151578063d3eddcc514610082578063ed4633671461008257600080fd5b8063414c3e33146100825780636a9843f61461009e5780637b91dc78146100d1575b600080fd5b61009c610090366004610a20565b50505050505050505050565b005b6100b16100ac366004610aed565b61018e565b604080519384529115156020840152908201526060015b60405180910390f35b6101166100df366004610b47565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100c8565b61009c61014c366004610a20565b610265565b61016461015f366004610b71565b61034a565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100c8565b6001600160a01b0383166000908152602081815260408083208784528252808320815160a081018352815481526001820154938101939093526002810154918301829052600381015460608401526004015460808301528291829115610203576101f781610416565b9350935093505061025b565b6000806000610212898961034a565b9350935093505060006040518060a00160405280858152602001848152602001838152602001600081526020016000815250905061024f81610416565b97509750975050505050505b9450945094915050565b856102718160006104aa565b6102c25760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6102d38160006104aa565b61032d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016102b9565b5061033c8c8c898989886104c1565b505050505050505050505050565b6000808080607485146103a65760405162461bcd60e51b81526020600482015260306024820152600080516020610cbd83398151915260448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b60648201526084016102b9565b6103b4601460008789610bb3565b6103bd91610bdd565b60601c93506103d0603460148789610bb3565b6103d991610c12565b92506103e9605460348789610bb3565b6103f291610c12565b9150610402607460548789610bb3565b61040b91610c12565b939692955090935050565b60008060008360400151421015610435575060009150819050806104a3565b602084015160408501516104499042610c46565b6104539190610c59565b61045e906001610c7b565b90508084606001511415915060008261047b57846080015161047e565b60005b90508085600001511161049257600061049f565b845161049f908290610c46565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b60003660006104d0878761096a565b929550935090915050604481146105345760405162461bcd60e51b81526020600482015260346024820152600080516020610cbd8339815191526044820152730d8d2c85acaf0cac6eae8d2dedc5ad8cadccee8d60631b60648201526084016102b9565b6000806000806105448d8d61034a565b9350935093509350866001600160a01b0316846001600160a01b0316146105b05760405162461bcd60e51b815260206004820152602c6024820152600080516020610cbd83398151915260448201526b1b1a590b58dbdb9d1c9858dd60a21b60648201526084016102b9565b63a9059cbb60e01b6105c660046000888a610bb3565b6105cf91610c8e565b6001600160e01b031916146106275760405162461bcd60e51b815260206004820152602a6024820152600080516020610cbd8339815191526044820152691b1a590b5b595d1a1bd960b21b60648201526084016102b9565b336000908152602081815260408083208c8452909152812060028101549091036107e157600082116106a55760405162461bcd60e51b81526020600482015260336024820152600080516020610cbd8339815191526044820152726c69642d7a65726f2d73746172742d6461746560681b60648201526084016102b9565b600084116107025760405162461bcd60e51b81526020600482015260366024820152600080516020610cbd8339815191526044820152751b1a590b5e995c9bcb5c195c9a5bd90b585b5bdd5b9d60521b60648201526084016102b9565b600083116107665760405162461bcd60e51b81526020600482015260386024820152600080516020610cbd83398151915260448201527f6c69642d7a65726f2d706572696f642d6475726174696f6e000000000000000060648201526084016102b9565b814210156107cf5760405162461bcd60e51b815260206004820152603060248201527f4552433230506572696f645472616e73666572456e666f726365723a7472616e60448201526f1cd9995c8b5b9bdd0b5cdd185c9d195960821b60648201526084016102b9565b83815560018101839055600281018290555b600080600061082c846040518060a001604052908160008201548152602001600182015481526020016002820154815260200160038201548152602001600482015481525050610416565b919450925090506000610843604460248c8e610bb3565b61084c91610c12565b9050838111156108bb5760405162461bcd60e51b815260206004820152603460248201527f4552433230506572696f645472616e73666572456e666f726365723a7472616e6044820152731cd9995c8b585b5bdd5b9d0b595e18d95959195960621b60648201526084016102b9565b82156108d05760038501829055600060048601555b808560040160008282546108e49190610c7b565b90915550506004850154604080516001600160a01b038c81168252602082018c90529181018a90526060810189905260808101929092524260a08301528f91908f169033907fb2a345c7f80b4be490c405f4a994faf85384dd05da7d70be0801dc31a8c253af9060c00160405180910390a4505050505050505050505050505050505050565b600080368161097c6014828789610bb3565b61098591610bdd565b60601c9350610998603460148789610bb3565b6109a191610c12565b92506109b08560348189610bb3565b949793965094505050565b60008083601f8401126109cd57600080fd5b50813567ffffffffffffffff8111156109e557600080fd5b6020830191508360208285010111156109fd57600080fd5b9250929050565b80356001600160a01b0381168114610a1b57600080fd5b919050565b60008060008060008060008060008060e08b8d031215610a3f57600080fd5b8a3567ffffffffffffffff80821115610a5757600080fd5b610a638e838f016109bb565b909c509a5060208d0135915080821115610a7c57600080fd5b610a888e838f016109bb565b909a50985060408d0135975060608d0135915080821115610aa857600080fd5b50610ab58d828e016109bb565b90965094505060808b01359250610ace60a08c01610a04565b9150610adc60c08c01610a04565b90509295989b9194979a5092959850565b60008060008060608587031215610b0357600080fd5b84359350610b1360208601610a04565b9250604085013567ffffffffffffffff811115610b2f57600080fd5b610b3b878288016109bb565b95989497509550505050565b60008060408385031215610b5a57600080fd5b610b6383610a04565b946020939093013593505050565b60008060208385031215610b8457600080fd5b823567ffffffffffffffff811115610b9b57600080fd5b610ba7858286016109bb565b90969095509350505050565b60008085851115610bc357600080fd5b83861115610bd057600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610c0a5780818660140360031b1b83161692505b505092915050565b803560208310156104bb57600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156104bb576104bb610c30565b600082610c7657634e487b7160e01b600052601260045260246000fd5b500490565b808201808211156104bb576104bb610c30565b6001600160e01b03198135818116916004851015610c0a5760049490940360031b84901b169092169291505056fe4552433230506572696f645472616e73666572456e666f726365723a696e7661a264697066735822122078259b929dc2fea71614ebe238bd74e88ff3ea3542e0d11a18122c300122d3f664736f6c63430008170033",V$e={};ie(V$e,{abi:()=>W$e,bytecode:()=>Z$e});var W$e=[{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],Z$e="0x",K$e={};ie(K$e,{abi:()=>X$e,bytecode:()=>J$e});var X$e=[],J$e="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ac220b672ee89e055a56513b249d66df06ecb6da367b913fa0b7b7f3f838634764736f6c63430008170033",Q$e={};ie(Q$e,{abi:()=>Y$e,bytecode:()=>eDe});var Y$e=[{type:"event",name:"AdminChanged",inputs:[{name:"previousAdmin",type:"address",indexed:!1,internalType:"address"},{name:"newAdmin",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeaconUpgraded",inputs:[{name:"beacon",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"ERC1967InvalidAdmin",inputs:[{name:"admin",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidBeacon",inputs:[{name:"beacon",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]}],eDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220bf999523a2735d33a4f148563c82738a41cc465257ff9df9a8912b831ab5af9564736f6c63430008170033",HP={};ie(HP,{abi:()=>tDe,bytecode:()=>nDe});var tDe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"InvalidEIP712NameLength",inputs:[]},{type:"error",name:"InvalidEIP712VersionLength",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UnauthorizedCallContext",inputs:[]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],nDe="0x6101c060405230610160523480156200001757600080fd5b50604051620031b0380380620031b08339810160408190526200003a91620002b3565b81816040518060400160405280601981526020017f4549503737303253746174656c65737344656c654761746f7200000000000000815250604051806040016040528060018152602001603160f81b8152508181620000a46000836200021560201b90919060201c565b61012052620000b581600162000215565b61014052815160208084019190912060e052815190820120610100524660a0526200014360e05161010051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60805250503060c0528151601f10156200017057604051631ad9af3960e21b815260040160405180910390fd5b601f8151111562000194576040516309203c9d60e41b815260040160405180910390fd5b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a2505050505050620004db565b600060208351101562000235576200022d836200024e565b905062000248565b8162000242848262000399565b5060ff90505b92915050565b600080829050601f8151111562000285578260405163305a27a960e01b81526004016200027c919062000465565b60405180910390fd5b80516200029282620004b6565b179392505050565b6001600160a01b0381168114620002b057600080fd5b50565b60008060408385031215620002c757600080fd5b8251620002d4816200029a565b6020840151909250620002e7816200029a565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200031d57607f821691505b6020821081036200033e57634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111562000394576000816000526020600020601f850160051c810160208610156200036f5750805b601f850160051c820191505b8181101562000390578281556001016200037b565b5050505b505050565b81516001600160401b03811115620003b557620003b5620002f2565b620003cd81620003c6845462000308565b8462000344565b602080601f831160018114620004055760008415620003ec5750858301515b600019600386901b1c1916600185901b17855562000390565b600085815260208120601f198616915b82811015620004365788860151825594840194600190910190840162000415565b5085821015620004555787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620004955785810183015185820160400152820162000477565b506000604082860101526040601f19601f8301168501019250505092915050565b805160208083015191908110156200033e5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051612bb1620005ff60003960008181610471015281816107f7015281816108c20152818161094001528181610aa401528181610b9a01528181610bf201528181610c7401528181610ce601528181610e1001528181610e8f01528181611015015281816112cd01526115ce01526000818161057a015281816109a301528181610a2601528181610b0701528181610ef201526110590152600081816106190152818161073a015281816107960152818161083f01528181610b4601528181610da7015261162101526000611960015260006119330152600061174c015260006117240152600061167f015260006116a9015260006116d30152612bb16000f3fe6080604052600436106101c65760003560e01c806384b0196e116100f7578063d03c791411610095578063ea4d3c9b11610064578063ea4d3c9b14610568578063ed8101b51461059c578063f23a6e61146105bc578063ffa1ad74146105dc57600080fd5b8063d03c791414610500578063d087d28814610520578063d691c96414610535578063e9ae5c531461055557600080fd5b8063b0d691fe116100d1578063b0d691fe1461045f578063bc197c81146104ab578063c399ec88146104cb578063cef6d209146104e057600080fd5b806384b0196e146103b4578063a3f4df7e146103dc578063acb8cc491461043257600080fd5b80633ed01015116101645780634a58db191161013e5780634a58db19146103645780635c1c6dcd1461036c5780637f07bfdc1461037f57806383ebb7711461039f57600080fd5b80633ed0101514610302578063445140b814610324578063499340471461034457600080fd5b80631626ba7e116101a05780631626ba7e1461026e57806319822f7c1461028e5780632b3afd99146102ae5780633e1b0812146102e257600080fd5b806301ffc9a7146101d257806306394d6714610207578063150b7a021461023557600080fd5b366101cd57005b600080fd5b3480156101de57600080fd5b506101f26101ed366004611fb2565b61060d565b60405190151581526020015b60405180910390f35b34801561021357600080fd5b50610227610222366004611ff5565b6106f9565b6040519081526020016101fe565b34801561024157600080fd5b506102556102503660046120fb565b61072e565b6040516001600160e01b031990911681526020016101fe565b34801561027a57600080fd5b506102556102893660046121ae565b61078a565b34801561029a57600080fd5b506102276102a93660046121f9565b6107ea565b3480156102ba57600080fd5b506102277fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156102ee57600080fd5b506102276102fd366004612246565b61089b565b34801561030e57600080fd5b5061032261031d36600461226f565b610935565b005b34801561033057600080fd5b506101f261033f3660046122a9565b610a0d565b34801561035057600080fd5b5061032261035f36600461226f565b610a99565b610322610b3c565b61032261037a3660046122c2565b610be7565b34801561038b57600080fd5b5061032261039a3660046122fc565b610c69565b3480156103ab57600080fd5b50610227610d46565b3480156103c057600080fd5b506103c9610d55565b6040516101fe979695949392919061236e565b3480156103e857600080fd5b506104256040518060400160405280601981526020017f4549503737303253746174656c65737344656c654761746f720000000000000081525081565b6040516101fe9190612407565b34801561043e57600080fd5b50610425604051806040016040528060018152602001603160f81b81525081565b34801561046b57600080fd5b506104937f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016101fe565b3480156104b757600080fd5b506102556104c6366004612499565b610d9b565b3480156104d757600080fd5b50610227610df8565b3480156104ec57600080fd5b506103226104fb36600461258a565b610e84565b34801561050c57600080fd5b506101f261051b3660046122a9565b610f6b565b34801561052c57600080fd5b50610227610ff6565b6105486105433660046121ae565b61104c565b6040516101fe9190612623565b6103226105633660046121ae565b6112c2565b34801561057457600080fd5b506104937f000000000000000000000000000000000000000000000000000000000000000081565b3480156105a857600080fd5b506102276105b7366004611ff5565b6114d3565b3480156105c857600080fd5b506102556105d7366004612687565b611615565b3480156105e857600080fd5b50610425604051806040016040528060058152602001640312e332e360dc1b81525081565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361065857604051634f81d01360e11b815260040160405180910390fd5b6001600160e01b031982166335a4725960e21b148061068757506001600160e01b03198216630a85bd0160e11b145b806106a257506001600160e01b03198216630271189760e51b145b806106bd57506001600160e01b031982166301ffc9a760e01b145b806106d857506001600160e01b03198216630b135d3f60e11b145b806106f357506001600160e01b03198216633992254760e01b145b92915050565b60006106f3610706611672565b61070f846114d3565b60405161190160f01b8152600281019290925260228201526042902090565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361077957604051634f81d01360e11b815260040160405180910390fd5b50630a85bd0160e11b949350505050565b60006001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001630036107d557604051634f81d01360e11b815260040160405180910390fd5b6107e084848461179d565b90505b9392505050565b6000336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461083557604051636b31ba1560e11b815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361087e57604051634f81d01360e11b815260040160405180910390fd5b6108908461088b866106f9565b611816565b90506107e38261185e565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610911573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106f391906126ef565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061096e5750333014155b1561098c57604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed01015906109d8908490600401612837565b600060405180830381600087803b1580156109f257600080fd5b505af1158015610a06573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610a75573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106f39190612908565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ad25750333014155b15610af057604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906349934047906109d8908490600401612837565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163003610b8557604051634f81d01360e11b815260040160405180910390fd5b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b1580156109f257600080fd5b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610c205750333014155b15610c3e57604051630796d94560e01b815260040160405180910390fd5b610c65610c4e602083018361292a565b6020830135610c606040850185612947565b6118f6565b5050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ca25750333014155b15610cc057604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b158015610d2a57600080fd5b505af1158015610d3e573d6000803e3d6000fd5b505050505050565b6000610d50611672565b905090565b600060608060008060006060610d6961192c565b610d71611959565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b60006001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163003610de657604051634f81d01360e11b815260040160405180910390fd5b5063bc197c8160e01b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015610e60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5091906126ef565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ebd5750333014155b15610edb57604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d20990610f31908990899089908990899089906004016129ee565b600060405180830381600087803b158015610f4b57600080fd5b505af1158015610f5f573d6000803e3d6000fd5b50505050505050505050565b600081600881901b603082901b605083901b610f878486611986565b80610f9b5750610f9b84600160f81b611986565b8015610fc15750610fad836000611986565b80610fc15750610fc183600160f81b611986565b8015610fd557506001600160e01b03198216155b8015610fec575069ffffffffffffffffffff198116155b9695505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401610e43565b6060336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461109757604051630692ce8160e21b815260040160405180910390fd5b83600881901b6110ab82600160f81b611986565b15611131573660006110bd8787611998565b90925090506110cd836000611986565b156110e3576110dc8282611a31565b945061112a565b6110f183600160f81b611986565b15611100576110dc8282611af2565b6040516308c3ee0360e11b81526001600160f81b0319841660048201526024015b60405180910390fd5b50506112b9565b61113c826000611986565b15611294576000803660006111518989611c1f565b6040805160018082528183019092529498509296509094509250816020015b606081526020019060019003908161117057905050965060006111938682611986565b156111c7576111a4858585856118f6565b886000815181106111b7576111b7612a57565b602002602001018190525061128a565b6111d586600160f81b611986565b15611265576111e685858585611c70565b896000815181106111f9576111f9612a57565b6020908102919091010152905080611260577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008960008151811061124157611241612a57565b6020026020010151604051611257929190612a6d565b60405180910390a15b61128a565b6040516308c3ee0360e11b81526001600160f81b031987166004820152602401611121565b50505050506112b9565b604051632e5bf3f960e21b81526001600160f81b031983166004820152602401611121565b50509392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906112fb5750333014155b1561131957604051630796d94560e01b815260040160405180910390fd5b82600881901b61132d82600160f81b611986565b156113885736600061133f8686611998565b909250905061134f836000611986565b156113645761135e8282611a31565b50611381565b61137283600160f81b611986565b156111005761135e8282611af2565b5050610a06565b611393826000611986565b15611294576000803660006113a88888611c1f565b93509350935093506113be85600060f81b611986565b156113d5576113cf848484846118f6565b506114ca565b6113e385600160f81b611986565b156114a557604080516001808252818301909252600091816020015b60608152602001906001900390816113ff579050509050600061142486868686611c70565b8360008151811061143757611437612a57565b602090810291909101015290508061149e577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008360008151811061147f5761147f612a57565b6020026020010151604051611495929190612a6d565b60405180910390a15b50506114ca565b6040516308c3ee0360e11b81526001600160f81b031986166004820152602401611121565b50505050610a06565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc18611503602084018461292a565b60208401356115156040860186612947565b604051611523929190612a86565b6040519081900390206115396060870187612947565b604051611547929190612a86565b604051908190039020608087013560a088013560c089013561156c60e08b018b612947565b60405161157a929190612a86565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361166057604051634f81d01360e11b815260040160405180910390fd5b5063f23a6e6160e01b95945050505050565b6000306001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480156116cb57507f000000000000000000000000000000000000000000000000000000000000000046145b156116f557507f000000000000000000000000000000000000000000000000000000000000000090565b610d50604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b6000306001600160a01b03166117e98585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611ca192505050565b6001600160a01b0316036118055750630b135d3f60e11b6107e3565b506001600160e01b03199392505050565b6000806118308361182b610100870187612947565b61179d565b90506374eca2c160e11b6001600160e01b03198216016118545760009150506106f3565b5060019392505050565b80156118f357604051600090339060001990849084818181858888f193505050503d80600081146118ab576040519150601f19603f3d011682016040523d82523d6000602084013e6118b0565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a2505b50565b60405181838237600038838387895af1611913573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b6060610d507f00000000000000000000000000000000000000000000000000000000000000006000611ccb565b6060610d507f00000000000000000000000000000000000000000000000000000000000000006001611ccb565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156119d05763ba597e7e6000526004601cfd5b8315611a27578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c1715611a1e5763ba597e7e6000526004601cfd5b505050826119da575b5050509250929050565b606081806001600160401b03811115611a4c57611a4c612046565b604051908082528060200260200182016040528015611a7f57816020015b6060815260200190600190039081611a6a5790505b50915060005b81811015611aea5736858583818110611aa057611aa0612a57565b9050602002810190611ab29190612a96565b9050611ac4610c4e602083018361292a565b848381518110611ad657611ad6612a57565b602090810291909101015250600101611a85565b505092915050565b606081806001600160401b03811115611b0d57611b0d612046565b604051908082528060200260200182016040528015611b4057816020015b6060815260200190600190039081611b2b5790505b50915060005b81811015611aea5736858583818110611b6157611b61612a57565b9050602002810190611b739190612a96565b90506000611b9e611b87602084018461292a565b6020840135611b996040860186612947565b611c70565b868581518110611bb057611bb0612a57565b6020908102919091010152905080611c15577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110611bf657611bf6612a57565b6020026020010151604051611c0c929190612a6d565b60405180910390a15b5050600101611b46565b6000803681611c316014828789612ab6565b611c3a91612ae0565b60601c9350611c4d603460148789612ab6565b611c5691612b13565b9250611c658560348189612ab6565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080611cb18686611d76565b925092509250611cc18282611dc3565b5090949350505050565b606060ff8314611ce557611cde83611e7c565b90506106f3565b818054611cf190612b31565b80601f0160208091040260200160405190810160405280929190818152602001828054611d1d90612b31565b8015611d6a5780601f10611d3f57610100808354040283529160200191611d6a565b820191906000526020600020905b815481529060010190602001808311611d4d57829003601f168201915b505050505090506106f3565b60008060008351604103611db05760208401516040850151606086015160001a611da288828585611ebb565b955095509550505050611dbc565b50508151600091506002905b9250925092565b6000826003811115611dd757611dd7612b65565b03611de0575050565b6001826003811115611df457611df4612b65565b03611e125760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611e2657611e26612b65565b03611e475760405163fce698f760e01b815260048101829052602401611121565b6003826003811115611e5b57611e5b612b65565b03610c65576040516335e2f38360e21b815260048101829052602401611121565b60606000611e8983611f8a565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611ef65750600091506003905082611f80565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015611f4a573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116611f7657506000925060019150829050611f80565b9250600091508190505b9450945094915050565b600060ff8216601f8111156106f357604051632cd44ac360e21b815260040160405180910390fd5b600060208284031215611fc457600080fd5b81356001600160e01b0319811681146107e357600080fd5b60006101208284031215611fef57600080fd5b50919050565b60006020828403121561200757600080fd5b81356001600160401b0381111561201d57600080fd5b61202984828501611fdc565b949350505050565b6001600160a01b03811681146118f357600080fd5b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b038111828210171561208457612084612046565b604052919050565b600082601f83011261209d57600080fd5b81356001600160401b038111156120b6576120b6612046565b6120c9601f8201601f191660200161205c565b8181528460208386010111156120de57600080fd5b816020850160208301376000918101602001919091529392505050565b6000806000806080858703121561211157600080fd5b843561211c81612031565b9350602085013561212c81612031565b92506040850135915060608501356001600160401b0381111561214e57600080fd5b61215a8782880161208c565b91505092959194509250565b60008083601f84011261217857600080fd5b5081356001600160401b0381111561218f57600080fd5b6020830191508360208285010111156121a757600080fd5b9250929050565b6000806000604084860312156121c357600080fd5b8335925060208401356001600160401b038111156121e057600080fd5b6121ec86828701612166565b9497909650939450505050565b60008060006060848603121561220e57600080fd5b83356001600160401b0381111561222457600080fd5b61223086828701611fdc565b9660208601359650604090950135949350505050565b60006020828403121561225857600080fd5b81356001600160c01b03811681146107e357600080fd5b60006020828403121561228157600080fd5b81356001600160401b0381111561229757600080fd5b820160c081850312156107e357600080fd5b6000602082840312156122bb57600080fd5b5035919050565b6000602082840312156122d457600080fd5b81356001600160401b038111156122ea57600080fd5b8201606081850312156107e357600080fd5b6000806040838503121561230f57600080fd5b823561231a81612031565b946020939093013593505050565b6000815180845260005b8181101561234e57602081850181015186830182015201612332565b506000602082860101526020601f19601f83011685010191505092915050565b60ff60f81b881681526000602060e0602084015261238f60e084018a612328565b83810360408501526123a1818a612328565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156123f5578351835292840192918401916001016123d9565b50909c9b505050505050505050505050565b6020815260006107e36020830184612328565b600082601f83011261242b57600080fd5b813560206001600160401b0382111561244657612446612046565b8160051b61245582820161205c565b928352848101820192828101908785111561246f57600080fd5b83870192505b8483101561248e57823582529183019190830190612475565b979650505050505050565b600080600080600060a086880312156124b157600080fd5b85356124bc81612031565b945060208601356124cc81612031565b935060408601356001600160401b03808211156124e857600080fd5b6124f489838a0161241a565b9450606088013591508082111561250a57600080fd5b61251689838a0161241a565b9350608088013591508082111561252c57600080fd5b506125398882890161208c565b9150509295509295909350565b60008083601f84011261255857600080fd5b5081356001600160401b0381111561256f57600080fd5b6020830191508360208260051b85010111156121a757600080fd5b600080600080600080606087890312156125a357600080fd5b86356001600160401b03808211156125ba57600080fd5b6125c68a838b01612546565b909850965060208901359150808211156125df57600080fd5b6125eb8a838b01612546565b9096509450604089013591508082111561260457600080fd5b5061261189828a01612546565b979a9699509497509295939492505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b8281101561267a57603f19888603018452612668858351612328565b9450928501929085019060010161264c565b5092979650505050505050565b600080600080600060a0868803121561269f57600080fd5b85356126aa81612031565b945060208601356126ba81612031565b9350604086013592506060860135915060808601356001600160401b038111156126e357600080fd5b6125398882890161208c565b60006020828403121561270157600080fd5b5051919050565b6000808335601e1984360301811261271f57600080fd5b83016020810192503590506001600160401b0381111561273e57600080fd5b8036038213156121a757600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561282957858403601f19018a52823536899003605e190181126127b5578283fd5b8801606081356127c481612031565b6001600160a01b031686526127db82880183612708565b82898901526127ed838901828461274d565b9250505060406127ff81840184612708565b93508783038289015261281383858361274d565b9d89019d97505050938601935050600101612790565b509198975050505050505050565b602081526000823561284881612031565b6001600160a01b039081166020848101919091528401359061286982612031565b80821660408501525050604083013560608301526060830135601e1984360301811261289457600080fd5b83016020810190356001600160401b038111156128b057600080fd5b8060051b36038213156128c257600080fd5b60c060808501526128d760e085018284612776565b915050608084013560a08401526128f160a0850185612708565b848303601f190160c0860152610fec83828461274d565b60006020828403121561291a57600080fd5b815180151581146107e357600080fd5b60006020828403121561293c57600080fd5b81356107e381612031565b6000808335601e1984360301811261295e57600080fd5b8301803591506001600160401b0382111561297857600080fd5b6020019150368190038213156121a757600080fd5b6000838385526020808601955060208560051b8301018460005b878110156129e157848303601f190189526129c28288612708565b6129cd85828461274d565b9a86019a94505050908301906001016129a7565b5090979650505050505050565b606081526000612a0260608301888a61298d565b8281036020848101919091528682528791810160005b88811015612a3457833582529282019290820190600101612a18565b508481036040860152612a4881878961298d565b9b9a5050505050505050505050565b634e487b7160e01b600052603260045260246000fd5b8281526040602082015260006107e06040830184612328565b8183823760009101908152919050565b60008235605e19833603018112612aac57600080fd5b9190910192915050565b60008085851115612ac657600080fd5b83861115612ad357600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015611aea5760149490940360031b84901b1690921692915050565b803560208310156106f357600019602084900360031b1b1692915050565b600181811c90821680612b4557607f821691505b602082108103611fef57634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fdfea26469706673582212202a8fc88ef923739742bc7ec1685cd9198a7251cfb58c7e873c821a7e716b2ca664736f6c63430008170033",rDe={};ie(rDe,{abi:()=>aDe,bytecode:()=>sDe});var aDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],sDe="0x608060405234801561001057600080fd5b5061095e806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461017a578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c55780638678d6ef146100e1578063a145832a14610102575b600080fd5b6100b061009b366004610677565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d33660046106f5565b50505050505050505050565b005b6100f46100ef3660046107c2565b61018d565b6040519081526020016100bc565b6100df6101103660046106f5565b6101a2565b6100f4610123366004610677565b60006020819052908152604090205481565b6101486101433660046107fe565b610353565b6040516100bc949392919093151584526001600160a01b03928316602085015291166040830152606082015260800190565b6100df6101883660046106f5565b610440565b600061019a84848461061d565b949350505050565b85600881901b6101b3816000610660565b6102125760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806102208d8d610353565b509250925050600061023333848961061d565b60008181526001602052604090205490915060ff16156102ab5760405162461bcd60e51b815260206004820152602d60248201527f455243323042616c616e63654368616e6765456e666f726365723a656e666f7260448201526c18d95c8b5a5ccb5b1bd8dad959609a1b6064820152608401610209565b6000818152600160208190526040808320805460ff1916909217909155516370a0823160e01b81526001600160a01b0384811660048301528516906370a0823190602401602060405180830381865afa15801561030c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103309190610840565b600092835260208390526040909220919091555050505050505050505050505050565b6000808080604985146103c05760405162461bcd60e51b815260206004820152602f60248201527f455243323042616c616e63654368616e6765456e666f726365723a696e76616c60448201526e0d2c85ae8cae4dae65ad8cadccee8d608b1b6064820152608401610209565b858560008181106103d3576103d3610859565b909101356001600160f81b031916151594506103f5905060156001878961086f565b6103fe91610899565b60601c925061041160296015878961086f565b61041a91610899565b60601c915061042c856029818961086f565b610435916108ce565b939692955090935050565b6000806000806104508e8e610353565b9350935093509350600061046533858a61061d565b600081815260016020526040808220805460ff19169055516370a0823160e01b81526001600160a01b03868116600483015292935090918616906370a0823190602401602060405180830381865afa1580156104c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104e99190610840565b9050851561057c5760008281526020819052604090205461050b908490610902565b8110156105775760405162461bcd60e51b815260206004820152603460248201527f455243323042616c616e63654368616e6765456e666f726365723a65786365656044820152736465642d62616c616e63652d646563726561736560601b6064820152608401610209565b61060b565b600082815260208190526040902054610596908490610915565b81101561060b5760405162461bcd60e51b815260206004820152603860248201527f455243323042616c616e63654368616e6765456e666f726365723a696e73756660448201527f66696369656e742d62616c616e63652d696e63726561736500000000000000006064820152608401610209565b50505050505050505050505050505050565b604080516001600160a01b039485166020808301919091529390941684820152606080850192909252805180850390920182526080909301909252815191012090565b6001600160f81b0319828116908216145b92915050565b60006020828403121561068957600080fd5b5035919050565b60008083601f8401126106a257600080fd5b50813567ffffffffffffffff8111156106ba57600080fd5b6020830191508360208285010111156106d257600080fd5b9250929050565b80356001600160a01b03811681146106f057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561071457600080fd5b8a3567ffffffffffffffff8082111561072c57600080fd5b6107388e838f01610690565b909c509a5060208d013591508082111561075157600080fd5b61075d8e838f01610690565b909a50985060408d0135975060608d013591508082111561077d57600080fd5b5061078a8d828e01610690565b90965094505060808b013592506107a360a08c016106d9565b91506107b160c08c016106d9565b90509295989b9194979a5092959850565b6000806000606084860312156107d757600080fd5b6107e0846106d9565b92506107ee602085016106d9565b9150604084013590509250925092565b6000806020838503121561081157600080fd5b823567ffffffffffffffff81111561082857600080fd5b61083485828601610690565b90969095509350505050565b60006020828403121561085257600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561087f57600080fd5b8386111561088c57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156108c65780818660140360031b1b83161692505b505092915050565b8035602083101561067157600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b81810381811115610671576106716108ec565b80820180821115610671576106716108ec56fea26469706673582212202ee065285e6d78b8f4f72189bef225cff106ed6fed2f250af767e847d4faa24364736f6c63430008170033",oDe={};ie(oDe,{abi:()=>iDe,bytecode:()=>cDe});var iDe=[],cDe="0x60556032600b8282823980515f1a607314602657634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212201dfea0fb90d440a56b093020135bfa0529382b21cf5681ce6bf65b9ef384b15664736f6c63430008170033",uDe={};ie(uDe,{abi:()=>dDe,bytecode:()=>fDe});var dDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_recipient",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],fDe="0x608060405234801561001057600080fd5b5061097c806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461017a578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c55780635f6f02e0146100e1578063a145832a14610102575b600080fd5b6100b061009b366004610686565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d3366004610704565b50505050505050505050565b005b6100f46100ef3660046107d1565b61018d565b6040519081526020016100bc565b6100df610110366004610704565b6101a4565b6100f4610123366004610686565b60006020819052908152604090205481565b61014861014336600461081c565b610357565b6040516100bc949392919093151584526001600160a01b03928316602085015291166040830152606082015260800190565b6100df610188366004610704565b610445565b600061019b85858585610624565b95945050505050565b85600881901b6101b581600061066f565b6102145760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806102228d8d610357565b50925092505060006102363384848a610624565b60008181526001602052604090205490915060ff16156102af5760405162461bcd60e51b815260206004820152602e60248201527f45524337323142616c616e63654368616e6765456e666f726365723a656e666f60448201526d1c98d95c8b5a5ccb5b1bd8dad95960921b606482015260840161020b565b6000818152600160208190526040808320805460ff1916909217909155516370a0823160e01b81526001600160a01b0384811660048301528516906370a0823190602401602060405180830381865afa158015610310573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610334919061085e565b600092835260208390526040909220919091555050505050505050505050505050565b6000808080604985146103c55760405162461bcd60e51b815260206004820152603060248201527f45524337323142616c616e63654368616e6765456e666f726365723a696e766160448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b606482015260840161020b565b858560008181106103d8576103d8610877565b909101356001600160f81b031916151594506103fa905060156001878961088d565b610403916108b7565b60601c925061041660296015878961088d565b61041f916108b7565b60601c9150610431856029818961088d565b61043a916108ec565b939692955090935050565b6000806000806104558e8e610357565b9350935093509350600061046b3385858b610624565b600081815260016020526040808220805460ff19169055516370a0823160e01b81526001600160a01b03868116600483015292935090918616906370a0823190602401602060405180830381865afa1580156104cb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104ef919061085e565b9050851561058357600082815260208190526040902054610511908490610920565b81101561057e5760405162461bcd60e51b815260206004820152603560248201527f45524337323142616c616e63654368616e6765456e666f726365723a65786365604482015274656465642d62616c616e63652d646563726561736560581b606482015260840161020b565b610612565b60008281526020819052604090205461059d908490610933565b8110156106125760405162461bcd60e51b815260206004820152603960248201527f45524337323142616c616e63654368616e6765456e666f726365723a696e737560448201527f6666696369656e742d62616c616e63652d696e63726561736500000000000000606482015260840161020b565b50505050505050505050505050505050565b604080516001600160a01b03958616602080830191909152948616818301529290941660608301526080808301919091528351808303909101815260a0909101909252815191012090565b6001600160f81b0319828116908216145b92915050565b60006020828403121561069857600080fd5b5035919050565b60008083601f8401126106b157600080fd5b50813567ffffffffffffffff8111156106c957600080fd5b6020830191508360208285010111156106e157600080fd5b9250929050565b80356001600160a01b03811681146106ff57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561072357600080fd5b8a3567ffffffffffffffff8082111561073b57600080fd5b6107478e838f0161069f565b909c509a5060208d013591508082111561076057600080fd5b61076c8e838f0161069f565b909a50985060408d0135975060608d013591508082111561078c57600080fd5b506107998d828e0161069f565b90965094505060808b013592506107b260a08c016106e8565b91506107c060c08c016106e8565b90509295989b9194979a5092959850565b600080600080608085870312156107e757600080fd5b6107f0856106e8565b93506107fe602086016106e8565b925061080c604086016106e8565b9396929550929360600135925050565b6000806020838503121561082f57600080fd5b823567ffffffffffffffff81111561084657600080fd5b6108528582860161069f565b90969095509350505050565b60006020828403121561087057600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561089d57600080fd5b838611156108aa57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156108e45780818660140360031b1b83161692505b505092915050565b8035602083101561068057600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156106805761068061090a565b808201808211156106805761068061090a56fea26469706673582212201a908643c89c30b103124ac1346de2de7964be6fc4c537dea357364db407b9ad64736f6c63430008170033",lDe={};ie(lDe,{abi:()=>pDe,bytecode:()=>mDe});var pDe=[{type:"error",name:"ERC7579DecodingError",inputs:[]}],mDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220e31e42482ef7832f3e446f04f27415313e49db77c6e6717169033c8535b19d3764736f6c63430008170033",bDe={};ie(bDe,{abi:()=>yDe,bytecode:()=>gDe});var yDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"permittedContract_",type:"address",internalType:"address"},{name:"permittedTokenId_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"}],gDe="0x608060405234801561001057600080fd5b50610821806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046105ea565b50505050505050505050565b005b6100766100863660046105ea565b6100c1565b61009e6100993660046106bd565b61047c565b604080516001600160a01b03909316835260208301919091520160405180910390f35b856100cd816000610521565b61011e5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61012f816000610521565b6101895760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610115565b506000806101978e8e61047c565b9150915060003660006101aa8c8c610538565b929550935090915050606481101561021b5760405162461bcd60e51b815260206004820152602e60248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d6360448201526d0c2d8d8c8c2e8c25ad8cadccee8d60931b6064820152608401610115565b6000808061022c84600481886106ff565b8101906102399190610729565b919450925090506001600160a01b038316158061025d57506001600160a01b038216155b156102b95760405162461bcd60e51b815260206004820152602660248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d6160448201526564647265737360d01b6064820152608401610115565b60006102c860048287896106ff565b6102d19161076a565b9050886001600160a01b0316876001600160a01b0316146103505760405162461bcd60e51b815260206004820152603360248201527f4552433732315472616e73666572456e666f726365723a756e617574686f72696044820152721e99590b58dbdb9d1c9858dd0b5d185c99d95d606a1b6064820152608401610115565b6001600160e01b031981166323b872dd60e01b1480159061038257506001600160e01b03198116632142170760e11b14155b801561039f57506001600160e01b03198116635c46a7ef60e11b14155b156104015760405162461bcd60e51b815260206004820152602c60248201527f4552433732315472616e73666572456e666f726365723a756e617574686f726960448201526b3d32b216b9b2b632b1ba37b960a11b6064820152608401610115565b8782146104655760405162461bcd60e51b815260206004820152602c60248201527f4552433732315472616e73666572456e666f726365723a756e617574686f726960448201526b1e99590b5d1bdad95b8b5a5960a21b6064820152608401610115565b505050505050505050505050505050505050505050565b600080603483146104e35760405162461bcd60e51b815260206004820152602b60248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610115565b6104f16014600085876106ff565b6104fa9161079a565b60601c915061050c83601481876106ff565b610515916107cd565b60001c90509250929050565b6001600160f81b0319828116908216145b92915050565b600080368161054a60148287896106ff565b6105539161079a565b60601c93506105666034601487896106ff565b61056f916107cd565b925061057e85603481896106ff565b949793965094505050565b60008083601f84011261059b57600080fd5b50813567ffffffffffffffff8111156105b357600080fd5b6020830191508360208285010111156105cb57600080fd5b9250929050565b6001600160a01b03811681146105e757600080fd5b50565b60008060008060008060008060008060e08b8d03121561060957600080fd5b8a3567ffffffffffffffff8082111561062157600080fd5b61062d8e838f01610589565b909c509a5060208d013591508082111561064657600080fd5b6106528e838f01610589565b909a50985060408d0135975060608d013591508082111561067257600080fd5b5061067f8d828e01610589565b90965094505060808b0135925060a08b013561069a816105d2565b915060c08b01356106aa816105d2565b809150509295989b9194979a5092959850565b600080602083850312156106d057600080fd5b823567ffffffffffffffff8111156106e757600080fd5b6106f385828601610589565b90969095509350505050565b6000808585111561070f57600080fd5b8386111561071c57600080fd5b5050820193919092039150565b60008060006060848603121561073e57600080fd5b8335610749816105d2565b92506020840135610759816105d2565b929592945050506040919091013590565b6001600160e01b031981358181169160048510156107925780818660040360031b1b83161692505b505092915050565b6bffffffffffffffffffffffff1981358181169160148510156107925760149490940360031b84901b1690921692915050565b8035602083101561053257600019602084900360031b1b169291505056fea264697066735822122059baae7c286b09a388772bb8a0feea8851f9a4fec98691fdc00e38b6eb1a59b964736f6c63430008170033",u7={};ie(u7,{abi:()=>hDe,bytecode:()=>xDe});var hDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"initialAmount_",type:"uint256",internalType:"uint256"},{name:"maxAmount_",type:"uint256",internalType:"uint256"},{name:"amountPerSecond_",type:"uint256",internalType:"uint256"},{name:"startTime_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"streamingAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"initialAmount",type:"uint256",internalType:"uint256"},{name:"maxAmount",type:"uint256",internalType:"uint256"},{name:"amountPerSecond",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint256",internalType:"uint256"},{name:"spent",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"initialAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"maxAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"amountPerSecond",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startTime",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lastUpdateTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],xDe="0x608060405234801561001057600080fd5b50610b7d806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063d3eddcc51161005b578063d3eddcc514610082578063ed46336714610082578063ee73d772146100fb578063fb7d2c5b1461011c57600080fd5b8063414c3e3314610082578063a145832a1461009e578063b99deb0e146100b1575b600080fd5b61009c610090366004610910565b50505050505050505050565b005b61009c6100ac366004610910565b610189565b6100c46100bf3660046109dd565b61026e565b604080516001600160a01b0390961686526020860194909452928401919091526060830152608082015260a0015b60405180910390f35b61010e610109366004610a1f565b610365565b6040519081526020016100f2565b61016161012a366004610a1f565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100f2565b856101958160006103d0565b6101e65760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101f78160006103d0565b6102515760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101dd565b506102608c8c898989886103e7565b505050505050505050505050565b600080808080609486146102d85760405162461bcd60e51b815260206004820152602b60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b60648201526084016101dd565b6102e660146000888a610a49565b6102ef91610a73565b60601c945061030260346014888a610a49565b61030b91610aa8565b935061031b60546034888a610a49565b61032491610aa8565b925061033460746054888a610a49565b61033d91610aa8565b915061034d60946074888a610a49565b61035691610aa8565b60001c90509295509295909350565b6001600160a01b0382166000908152602081815260408083208484528252808320815160a081018352815481526001820154938101939093526002810154918301919091526003810154606083015260048101546080830152906103c8906107d9565b949350505050565b6001600160f81b0319828116908216145b92915050565b60003660006103f6878761085a565b929550935090915050604481146104675760405162461bcd60e51b815260206004820152602f60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6560448201526e0f0cac6eae8d2dedc5ad8cadccee8d608b1b60648201526084016101dd565b60008060008060006104798e8e61026e565b94509450945094509450838310156104e55760405162461bcd60e51b815260206004820152602960248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6d604482015268185e0b585b5bdd5b9d60ba1b60648201526084016101dd565b6000811161054c5760405162461bcd60e51b815260206004820152602e60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d7a60448201526d65726f2d73746172742d74696d6560901b60648201526084016101dd565b876001600160a01b0316856001600160a01b0316146105bd5760405162461bcd60e51b815260206004820152602760248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d636044820152661bdb9d1c9858dd60ca1b60648201526084016101dd565b63a9059cbb60e01b6105d360046000898b610a49565b6105dc91610ac6565b6001600160e01b031916146106415760405162461bcd60e51b815260206004820152602560248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6d604482015264195d1a1bd960da1b60648201526084016101dd565b336000908152602081815260408083208d84529091528120600481015490910361067e578481556001810184905560028101839055600381018290555b600061068e604460248a8c610a49565b61069791610aa8565b6040805160a081018252845481526001850154602082015260028501549181019190915260038401546060820152600484015460808201529091506106db906107d9565b81111561073c5760405162461bcd60e51b815260206004820152602960248201527f455243323053747265616d696e67456e666f726365723a616c6c6f77616e63656044820152680b595e18d95959195960ba1b60648201526084016101dd565b808260040160008282546107509190610b0a565b90915550506004820154604080516001600160a01b038a81168252602082018a9052818301899052606082018890526080820187905260a08201939093524260c082015290518e928e169133917f30ceca901166c86cac9d1024230d7f5740b26cce6bdd9bad7b1d6e616904ea639181900360e00190a450505050505050505050505050505050565b600081606001514210156107ef57506000919050565b60008260600151426108019190610b1d565b905060008184604001516108159190610b30565b84516108219190610b0a565b90508360200151811115610836575060208301515b8084608001511061084b575060009392505050565b60808401516103c89082610b1d565b600080368161086c6014828789610a49565b61087591610a73565b60601c9350610888603460148789610a49565b61089191610aa8565b92506108a08560348189610a49565b949793965094505050565b60008083601f8401126108bd57600080fd5b50813567ffffffffffffffff8111156108d557600080fd5b6020830191508360208285010111156108ed57600080fd5b9250929050565b80356001600160a01b038116811461090b57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561092f57600080fd5b8a3567ffffffffffffffff8082111561094757600080fd5b6109538e838f016108ab565b909c509a5060208d013591508082111561096c57600080fd5b6109788e838f016108ab565b909a50985060408d0135975060608d013591508082111561099857600080fd5b506109a58d828e016108ab565b90965094505060808b013592506109be60a08c016108f4565b91506109cc60c08c016108f4565b90509295989b9194979a5092959850565b600080602083850312156109f057600080fd5b823567ffffffffffffffff811115610a0757600080fd5b610a13858286016108ab565b90969095509350505050565b60008060408385031215610a3257600080fd5b610a3b836108f4565b946020939093013593505050565b60008085851115610a5957600080fd5b83861115610a6657600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610aa05780818660140360031b1b83161692505b505092915050565b803560208310156103e157600019602084900360031b1b1692915050565b6001600160e01b03198135818116916004851015610aa05760049490940360031b84901b1690921692915050565b634e487b7160e01b600052601160045260246000fd5b808201808211156103e1576103e1610af4565b818103818111156103e1576103e1610af4565b80820281158282048414176103e1576103e1610af456fea2646970667358221220d9282c553e448eac7b4631259f5a457c28077fd4d88ef08db72ec3df532e99ed64736f6c63430008170033",wDe={};ie(wDe,{abi:()=>vDe,bytecode:()=>TDe});var vDe=[{type:"function",name:"validateUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"}],TDe="0x",SDe={};ie(SDe,{abi:()=>ADe,bytecode:()=>_De});var ADe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"callData_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"}],_De="0x608060405234801561001057600080fd5b50610559806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610338565b50505050505050505050565b005b610076610086366004610338565b6100b4565b61009e610099366004610405565b61022b565b6040516100ab9190610447565b60405180910390f35b856100c081600061026b565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61012281600061026b565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b5036600061018a8989610282565b935093505050600061019c8f8f61022b565b905082826040516101ae929190610496565b604051809103902081805190602001201461021a5760405162461bcd60e51b815260206004820152602660248201527f457861637443616c6c64617461456e666f726365723a696e76616c69642d63616044820152656c6c6461746160d01b6064820152608401610108565b505050505050505050505050505050565b606082828080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929695505050505050565b6001600160f81b0319828116908216145b92915050565b600080368161029460148287896104a6565b61029d916104d0565b60601c93506102b06034601487896104a6565b6102b991610505565b92506102c885603481896104a6565b949793965094505050565b60008083601f8401126102e557600080fd5b50813567ffffffffffffffff8111156102fd57600080fd5b60208301915083602082850101111561031557600080fd5b9250929050565b80356001600160a01b038116811461033357600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035757600080fd5b8a3567ffffffffffffffff8082111561036f57600080fd5b61037b8e838f016102d3565b909c509a5060208d013591508082111561039457600080fd5b6103a08e838f016102d3565b909a50985060408d0135975060608d01359150808211156103c057600080fd5b506103cd8d828e016102d3565b90965094505060808b013592506103e660a08c0161031c565b91506103f460c08c0161031c565b90509295989b9194979a5092959850565b6000806020838503121561041857600080fd5b823567ffffffffffffffff81111561042f57600080fd5b61043b858286016102d3565b90969095509350505050565b60006020808352835180602085015260005b8181101561047557858101830151858201604001528201610459565b506000604082860101526040601f19601f8301168501019250505092915050565b8183823760009101908152919050565b600080858511156104b657600080fd5b838611156104c357600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156104fd5780818660140360031b1b83161692505b505092915050565b8035602083101561027c57600019602084900360031b1b169291505056fea26469706673582212207ea2be587c5142bd07609ab1e9e3d82af76502619dbab0e88f14c164094d01e564736f6c63430008170033",EDe={};ie(EDe,{abi:()=>kDe,bytecode:()=>IDe});var kDe=[{type:"function",name:"aggregateSignatures",inputs:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"aggregatedSignature",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"validateSignatures",inputs:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"view"},{type:"function",name:"validateUserOpSignature",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"sigForUserOp",type:"bytes",internalType:"bytes"}],stateMutability:"view"}],IDe="0x",CDe={};ie(CDe,{abi:()=>PDe,bytecode:()=>RDe});var PDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"execution_",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],RDe="0x608060405234801561001057600080fd5b5061062f806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103e9565b50505050505050505050565b005b6100766100863660046103e9565b6100b4565b61009e6100993660046104b6565b610197565b6040516100ab91906104f8565b60405180910390f35b856100c0816000610210565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610122816000610210565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b506101898c8c8989610227565b505050505050505050505050565b604080516060808201835260008083526020830152918101919091526101bd8383610333565b81818080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050506040860152505060208301526001600160a01b0316815292915050565b6001600160f81b0319828116908216145b92915050565b6000803660006102378686610333565b929650909450925090506001600160a01b038416610259601460008a8c61056c565b61026291610596565b60601c14801561028757508261027c603460148a8c61056c565b610285916105cb565b145b80156102cc5750818160405161029e9291906105e9565b6040519081900390206102b4886034818c61056c565b6040516102c29291906105e9565b6040518091039020145b6103295760405162461bcd60e51b815260206004820152602860248201527f4578616374457865637574696f6e456e666f726365723a696e76616c69642d656044820152673c32b1baba34b7b760c11b6064820152608401610108565b5050505050505050565b6000803681610345601482878961056c565b61034e91610596565b60601c935061036160346014878961056c565b61036a916105cb565b9250610379856034818961056c565b949793965094505050565b60008083601f84011261039657600080fd5b50813567ffffffffffffffff8111156103ae57600080fd5b6020830191508360208285010111156103c657600080fd5b9250929050565b80356001600160a01b03811681146103e457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561040857600080fd5b8a3567ffffffffffffffff8082111561042057600080fd5b61042c8e838f01610384565b909c509a5060208d013591508082111561044557600080fd5b6104518e838f01610384565b909a50985060408d0135975060608d013591508082111561047157600080fd5b5061047e8d828e01610384565b90965094505060808b0135925061049760a08c016103cd565b91506104a560c08c016103cd565b90509295989b9194979a5092959850565b600080602083850312156104c957600080fd5b823567ffffffffffffffff8111156104e057600080fd5b6104ec85828601610384565b90969095509350505050565b6000602080835260018060a01b038451166020840152602084015160408401526040840151606080850152805180608086015260005b8181101561054a5782810184015186820160a00152830161052e565b50600060a0828701015260a0601f19601f830116860101935050505092915050565b6000808585111561057c57600080fd5b8386111561058957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105c35780818660140360031b1b83161692505b505092915050565b8035602083101561022157600019602084900360031b1b1692915050565b818382376000910190815291905056fea2646970667358221220e961f8992a129634c5841f6f8ff7eac208b6822d2646363c613c0f46bcd65a0b64736f6c63430008170033",$De={};ie($De,{abi:()=>DDe,bytecode:()=>MDe});var DDe=[{type:"function",name:"implementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"}],MDe="0x",ODe={};ie(ODe,{abi:()=>NDe,bytecode:()=>LDe});var NDe=[{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disabledDelegations",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDelegationHash",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DisabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"EnabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"RedeemedDelegation",inputs:[{name:"rootDelegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"SetDomain",inputs:[{name:"domainHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"name",type:"string",indexed:!1,internalType:"string"},{name:"domainVersion",type:"string",indexed:!1,internalType:"string"},{name:"chainId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"contractAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AlreadyDisabled",inputs:[]},{type:"error",name:"AlreadyEnabled",inputs:[]},{type:"error",name:"BatchDataLengthMismatch",inputs:[]},{type:"error",name:"CannotUseADisabledDelegation",inputs:[]},{type:"error",name:"EmptySignature",inputs:[]},{type:"error",name:"InvalidAuthority",inputs:[]},{type:"error",name:"InvalidDelegate",inputs:[]},{type:"error",name:"InvalidDelegator",inputs:[]},{type:"error",name:"InvalidEOASignature",inputs:[]},{type:"error",name:"InvalidERC1271Signature",inputs:[]}],LDe="0x",FP={};ie(FP,{abi:()=>BDe,bytecode:()=>UDe});var BDe=[{type:"receive",stateMutability:"payable"},{type:"function",name:"addStake",inputs:[{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"delegateAndRevert",inputs:[{name:"target",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"deposits",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}],stateMutability:"view"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getSenderAddress",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getUserOpHash",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"handleAggregatedOps",inputs:[{name:"opsPerAggregator",type:"tuple[]",internalType:"struct IEntryPoint.UserOpsPerAggregator[]",components:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"aggregator",type:"address",internalType:"contract IAggregator"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"handleOps",inputs:[{name:"ops",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"innerHandleOp",inputs:[{name:"callData",type:"bytes",internalType:"bytes"},{name:"opInfo",type:"tuple",internalType:"struct EntryPoint.UserOpInfo",components:[{name:"mUserOp",type:"tuple",internalType:"struct EntryPoint.MemoryUserOp",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"verificationGasLimit",type:"uint256",internalType:"uint256"},{name:"callGasLimit",type:"uint256",internalType:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256",internalType:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256",internalType:"uint256"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"paymaster",type:"address",internalType:"address"},{name:"maxFeePerGas",type:"uint256",internalType:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256",internalType:"uint256"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"prefund",type:"uint256",internalType:"uint256"},{name:"contextOffset",type:"uint256",internalType:"uint256"},{name:"preOpGas",type:"uint256",internalType:"uint256"}]},{name:"context",type:"bytes",internalType:"bytes"}],outputs:[{name:"actualGasCost",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"nonceSequenceNumber",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AccountDeployed",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"factory",type:"address",indexed:!1,internalType:"address"},{name:"paymaster",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeforeExecution",inputs:[],anonymous:!1},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PostOpRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"SignatureAggregatorChanged",inputs:[{name:"aggregator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationEvent",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"paymaster",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"},{name:"actualGasCost",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actualGasUsed",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationPrefundTooLow",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"DelegateAndRevert",inputs:[{name:"success",type:"bool",internalType:"bool"},{name:"ret",type:"bytes",internalType:"bytes"}]},{type:"error",name:"FailedOp",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"}]},{type:"error",name:"FailedOpWithRevert",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"},{name:"inner",type:"bytes",internalType:"bytes"}]},{type:"error",name:"PostOpReverted",inputs:[{name:"returnData",type:"bytes",internalType:"bytes"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]},{type:"error",name:"SenderAddressResult",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"SignatureValidationFailed",inputs:[{name:"aggregator",type:"address",internalType:"address"}]}],UDe="0x60a0604052604051620000129062000051565b604051809103905ff0801580156200002c573d5f803e3d5ffd5b506001600160a01b031660805234801562000045575f80fd5b5060016002556200005f565b6101ff806200374883390190565b6080516136c96200007f5f395f8181610de0015261271501526136c95ff3fe608060405260043610610107575f3560e01c806370a0823111610092578063b760faf911610062578063b760faf914610425578063bb9fe6bf14610438578063c23a5cea1461044c578063dbed18e01461046b578063fc7e286d1461048a575f80fd5b806370a0823114610394578063765e827f146103c8578063850aaf62146103e75780639b249f6914610406575f80fd5b80631b2e01b8116100d85780631b2e01b8146101ae578063205c2878146101e457806322cdde4c1461020357806335567e1a146102225780635287ce1214610280575f80fd5b806242dc531461011b57806301ffc9a71461014d5780630396cb601461017c5780630bd28e3b1461018f575f80fd5b366101175761011533610530565b005b5f80fd5b348015610126575f80fd5b5061013a610135366004612c4f565b610584565b6040519081526020015b60405180910390f35b348015610158575f80fd5b5061016c610167366004612d06565b610702565b6040519015158152602001610144565b61011561018a366004612d2d565b610789565b34801561019a575f80fd5b506101156101a9366004612d66565b610a14565b3480156101b9575f80fd5b5061013a6101c8366004612d7f565b600160209081525f928352604080842090915290825290205481565b3480156101ef575f80fd5b506101156101fe366004612db2565b610a4a565b34801561020e575f80fd5b5061013a61021d366004612ddc565b610b96565b34801561022d575f80fd5b5061013a61023c366004612d7f565b6001600160a01b0382165f9081526001602090815260408083206001600160c01b038516845290915290819020549082901b67ffffffffffffffff19161792915050565b34801561028b575f80fd5b5061033a61029a366004612e13565b6040805160a0810182525f80825260208201819052918101829052606081018290526080810191909152506001600160a01b03165f9081526020818152604091829020825160a0810184528154815260019091015460ff811615159282019290925261010082046001600160701b031692810192909252600160781b810463ffffffff166060830152600160981b900465ffffffffffff16608082015290565b60405161014491905f60a082019050825182526020830151151560208301526001600160701b03604084015116604083015263ffffffff606084015116606083015265ffffffffffff608084015116608083015292915050565b34801561039f575f80fd5b5061013a6103ae366004612e13565b6001600160a01b03165f9081526020819052604090205490565b3480156103d3575f80fd5b506101156103e2366004612e6e565b610bd7565b3480156103f2575f80fd5b50610115610401366004612ec0565b610d4c565b348015610411575f80fd5b50610115610420366004612f10565b610dc7565b610115610433366004612e13565b610530565b348015610443575f80fd5b50610115610e7e565b348015610457575f80fd5b50610115610466366004612e13565b610fa8565b348015610476575f80fd5b50610115610485366004612e6e565b6111c7565b348015610495575f80fd5b506104ed6104a4366004612e13565b5f602081905290815260409020805460019091015460ff81169061010081046001600160701b031690600160781b810463ffffffff1690600160981b900465ffffffffffff1685565b6040805195865293151560208601526001600160701b039092169284019290925263ffffffff909116606083015265ffffffffffff16608082015260a001610144565b5f61053b82346115ce565b9050816001600160a01b03167f2da466a7b24304f47e87fa2e1e5a81b9831ce54fec19055ce277ca2f39ba42c48260405161057891815260200190565b60405180910390a25050565b5f805a90503330146105dd5760405162461bcd60e51b815260206004820152601760248201527f4141393220696e7465726e616c2063616c6c206f6e6c7900000000000000000060448201526064015b60405180910390fd5b8451606081015160a082015181016127100160405a603f028161060257610602612f4e565b0410156106185763deaddead60e01b5f5260205ffd5b87515f90156106a6575f610631845f01515f8c86611600565b9050806106a4575f610644610800611616565b80519091501561069e57845f01516001600160a01b03168a602001517f1c4fada7374c0a9ee8841fc38afe82932dc0f8e69012e927f061a8bae611a201876020015184604051610695929190612faf565b60405180910390a35b60019250505b505b5f88608001515a86030190506106f4828a8a8a8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250879250611641915050565b9a9950505050505050505050565b5f6001600160e01b0319821663307e35b760e11b148061073257506001600160e01b0319821663122a0e9b60e31b145b8061074d57506001600160e01b0319821663cf28ef9760e01b145b8061076857506001600160e01b03198216633e84f02160e01b145b8061078357506301ffc9a760e01b6001600160e01b03198316145b92915050565b335f90815260208190526040902063ffffffff82166107ea5760405162461bcd60e51b815260206004820152601a60248201527f6d757374207370656369667920756e7374616b652064656c617900000000000060448201526064016105d4565b600181015463ffffffff600160781b9091048116908316101561084f5760405162461bcd60e51b815260206004820152601c60248201527f63616e6e6f7420646563726561736520756e7374616b652074696d650000000060448201526064016105d4565b60018101545f9061086f90349061010090046001600160701b0316612fdb565b90505f81116108b55760405162461bcd60e51b81526020600482015260126024820152711b9bc81cdd185ad9481cdc1958da599a595960721b60448201526064016105d4565b6001600160701b038111156108fd5760405162461bcd60e51b815260206004820152600e60248201526d7374616b65206f766572666c6f7760901b60448201526064016105d4565b6040805160a08101825283548152600160208083018281526001600160701b0386811685870190815263ffffffff8a8116606088018181525f60808a0181815233808352828a52918c90209a518b55965199909801805494519151965165ffffffffffff16600160981b0265ffffffffffff60981b1997909416600160781b029690961669ffffffffffffffffffff60781b1991909516610100026effffffffffffffffffffffffffff0019991515999099166effffffffffffffffffffffffffffff1990941693909317979097179190911691909117179055835185815290810192909252917fa5ae833d0bb1dcd632d98a8b70973e8516812898e19bf27b70071ebc8dc52c01910160405180910390a2505050565b335f9081526001602090815260408083206001600160c01b03851684529091528120805491610a4283612fee565b919050555050565b335f9081526020819052604090208054821115610aa95760405162461bcd60e51b815260206004820152601960248201527f576974686472617720616d6f756e7420746f6f206c617267650000000000000060448201526064016105d4565b8054610ab6908390613006565b8155604080516001600160a01b03851681526020810184905233917fd1c19fbcd4551a5edfb66d43d2e337c04837afda3482b42bdf569a8fccdae5fb910160405180910390a25f836001600160a01b0316836040515f6040518083038185875af1925050503d805f8114610b45576040519150601f19603f3d011682016040523d82523d5f602084013e610b4a565b606091505b5050905080610b905760405162461bcd60e51b81526020600482015260126024820152716661696c656420746f20776974686472617760701b60448201526064016105d4565b50505050565b5f610ba0826117f9565b6040805160208101929092523090820152466060820152608001604051602081830303815290604052805190602001209050919050565b610bdf611811565b815f816001600160401b03811115610bf957610bf9612a5a565b604051908082528060200260200182016040528015610c3257816020015b610c1f6129d0565b815260200190600190039081610c175790505b5090505f5b82811015610ca7575f828281518110610c5257610c52613019565b602002602001015190505f80610c8c848a8a87818110610c7457610c74613019565b9050602002810190610c86919061302d565b85611839565b91509150610c9c8483835f611a3b565b505050600101610c37565b506040515f907fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f972908290a15f5b83811015610d2f57610d2381888884818110610cf257610cf2613019565b9050602002810190610d04919061302d565b858481518110610d1657610d16613019565b6020026020010151611bd5565b90910190600101610cd4565b50610d3a8482611e83565b505050610d476001600255565b505050565b5f80846001600160a01b03168484604051610d6892919061304c565b5f60405180830381855af49150503d805f8114610da0576040519150601f19603f3d011682016040523d82523d5f602084013e610da5565b606091505b50915091508181604051632650415560e21b81526004016105d492919061305b565b604051632b870d1b60e11b81525f906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063570e1a3690610e17908690869060040161309d565b6020604051808303815f875af1158015610e33573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e5791906130b0565b604051633653dc0360e11b81526001600160a01b03821660048201529091506024016105d4565b335f90815260208190526040812060018101549091600160781b90910463ffffffff169003610edc5760405162461bcd60e51b815260206004820152600a6024820152691b9bdd081cdd185ad95960b21b60448201526064016105d4565b600181015460ff16610f245760405162461bcd60e51b8152602060048201526011602482015270616c726561647920756e7374616b696e6760781b60448201526064016105d4565b60018101545f90610f4290600160781b900463ffffffff16426130cb565b60018301805460ff65ffffffffffff60981b011916600160981b65ffffffffffff841690810260ff19169190911790915560405190815290915033907ffa9b3c14cc825c412c9ed81b3ba365a5b459439403f18829e572ed53a4180f0a90602001610578565b335f908152602081905260409020600181015461010090046001600160701b03168061100d5760405162461bcd60e51b81526020600482015260146024820152734e6f207374616b6520746f20776974686472617760601b60448201526064016105d4565b6001820154600160981b900465ffffffffffff1661106d5760405162461bcd60e51b815260206004820152601d60248201527f6d7573742063616c6c20756e6c6f636b5374616b65282920666972737400000060448201526064016105d4565b600182015442600160981b90910465ffffffffffff1611156110d15760405162461bcd60e51b815260206004820152601b60248201527f5374616b65207769746864726177616c206973206e6f7420647565000000000060448201526064016105d4565b600182018054610100600160c81b0319169055604080516001600160a01b03851681526020810183905233917fb7c918e0e249f999e965cafeb6c664271b3f4317d296461500e71da39f0cbda3910160405180910390a25f836001600160a01b0316826040515f6040518083038185875af1925050503d805f8114611171576040519150601f19603f3d011682016040523d82523d5f602084013e611176565b606091505b5050905080610b905760405162461bcd60e51b815260206004820152601860248201527f6661696c656420746f207769746864726177207374616b65000000000000000060448201526064016105d4565b6111cf611811565b815f805b8281101561133657368686838181106111ee576111ee613019565b905060200281019061120091906130f1565b9050365f61120e8380613105565b90925090505f6112246040850160208601612e13565b90505f196001600160a01b0382160161127f5760405162461bcd60e51b815260206004820152601760248201527f4141393620696e76616c69642061676772656761746f7200000000000000000060448201526064016105d4565b6001600160a01b0381161561131a576001600160a01b038116632dd8113384846112ac604089018961314a565b6040518563ffffffff1660e01b81526004016112cb94939291906132ab565b5f6040518083038186803b1580156112e1575f80fd5b505afa9250505080156112f2575060015b61131a5760405163086a9f7560e41b81526001600160a01b03821660048201526024016105d4565b6113248287612fdb565b955050600190930192506111d3915050565b505f816001600160401b0381111561135057611350612a5a565b60405190808252806020026020018201604052801561138957816020015b6113766129d0565b81526020019060019003908161136e5790505b5090505f805b8481101561146057368888838181106113aa576113aa613019565b90506020028101906113bc91906130f1565b9050365f6113ca8380613105565b90925090505f6113e06040850160208601612e13565b9050815f5b8181101561144e575f89898151811061140057611400613019565b602002602001015190505f806114228b898987818110610c7457610c74613019565b9150915061143284838389611a3b565b8a61143c81612fee565b9b5050600190930192506113e5915050565b50506001909401935061138f92505050565b506040517fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f972905f90a1505f80805b8581101561158a57368989838181106114a9576114a9613019565b90506020028101906114bb91906130f1565b90506114cd6040820160208301612e13565b6001600160a01b03167f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d60405160405180910390a2365f61150e8380613105565b9092509050805f5b81811015611579576115588885858481811061153457611534613019565b9050602002810190611546919061302d565b8b8b81518110610d1657610d16613019565b6115629088612fdb565b96508761156e81612fee565b985050600101611516565b50506001909301925061148e915050565b506040515f907f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d908290a26115bf8682611e83565b5050505050610d476001600255565b6001600160a01b0382165f908152602081905260408120805482906115f4908590612fdb565b91829055509392505050565b5f805f845160208601878987f195945050505050565b60603d828111156116245750815b604051602082018101604052818152815f602083013e9392505050565b5f805a85519091505f908161165582611f78565b60e08301519091506001600160a01b038116611674578251935061172b565b8093505f8851111561172b57868202955060028a600281111561169957611699613325565b1461172b5760a0830151604051637c627b2160e01b81526001600160a01b03831691637c627b21916116d5908e908d908c908990600401613339565b5f604051808303815f88803b1580156116ec575f80fd5b5087f1935050505080156116fe575060015b61172b575f61170e610800611616565b905080604051632b5e552f60e21b81526004016105d49190613380565b5a60a0840151606085015160808c01519288039990990198019088038082111561175e576064600a828403020498909801975b505060408901518783029650868110156117b75760028b600281111561178657611786613325565b036117a8578096506117978a611fa9565b6117a38a5f898b611ff8565b6117eb565b63deadaa5160e01b5f5260205ffd5b8681036117c486826115ce565b505f808d60028111156117d9576117d9613325565b1490506117e88c828b8d611ff8565b50505b505050505050949350505050565b5f61180382612073565b805190602001209050919050565b600280540361183357604051633ee5aeb560e01b815260040160405180910390fd5b60028055565b5f805f5a845190915061184c8682612128565b61185586610b96565b6020860152604081015161012082015161010083015160a08401516080850151606086015160c0870151861717171717176effffffffffffffffffffffffffffff8111156118e55760405162461bcd60e51b815260206004820152601860248201527f41413934206761732076616c756573206f766572666c6f77000000000000000060448201526064016105d4565b5f6119138460c081015160a08201516080830151606084015160408501516101009095015194010101010290565b90506119228a8a8a8487612234565b9650611935845f015185602001516123c5565b61198b5789604051631101335b60e11b81526004016105d4918152604060208201819052601a908201527f4141323520696e76616c6964206163636f756e74206e6f6e6365000000000000606082015260800190565b825a860311156119e75789604051631101335b60e11b81526004016105d4918152604060208201819052601e908201527f41413236206f76657220766572696669636174696f6e4761734c696d69740000606082015260800190565b60e08401516060906001600160a01b031615611a0e57611a098b8b8b85612411565b975090505b604089018290528060608a015260a08a01355a870301896080018181525050505050505050935093915050565b5f80611a46856125c8565b91509150816001600160a01b0316836001600160a01b031614611aac5785604051631101335b60e11b81526004016105d49181526040602082018190526014908201527320a0991a1039b4b3b730ba3ab9329032b93937b960611b606082015260800190565b8015611b045785604051631101335b60e11b81526004016105d49181526040602082018190526017908201527f414132322065787069726564206f72206e6f7420647565000000000000000000606082015260800190565b5f611b0e856125c8565b925090506001600160a01b03811615611b6a5786604051631101335b60e11b81526004016105d49181526040602082018190526014908201527320a0999a1039b4b3b730ba3ab9329032b93937b960611b606082015260800190565b8115611bcc5786604051631101335b60e11b81526004016105d49181526040602082018190526021908201527f41413332207061796d61737465722065787069726564206f72206e6f742064756060820152606560f81b608082015260a00190565b50505050505050565b5f805a90505f611be6846060015190565b6040519091505f903682611bfd60608a018a61314a565b9150915060605f826003811115611c1357843591505b506372288ed160e01b6001600160e01b0319821601611cc0575f8b8b60200151604051602401611c44929190613392565b60408051601f198184030181529181526020820180516001600160e01b0316638dd7712f60e01b1790525190915030906242dc5390611c8b9084908f908d9060240161345d565b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050925050611d15565b306001600160a01b03166242dc5385858d8b604051602401611ce5949392919061349c565b604051602081830303815290604052915060e01b6020820180516001600160e01b03838183161783525050505091505b60205f8351602085015f305af195505f51985084604052505050505080611e79575f3d80602003611d4a5760205f803e5f5191505b5063deaddead60e01b8103611d9d5787604051631101335b60e11b81526004016105d4918152604060208201819052600f908201526e41413935206f7574206f662067617360881b606082015260800190565b63deadaa5160e01b8103611dec575f86608001515a611dbc9087613006565b611dc69190612fdb565b6040880151909150611dd788611fa9565b611de3885f8385611ff8565b9550611e779050565b855180516020808901519201516001600160a01b0390911691907ff62676f440ff169a3a9afdbf812e89e7f95975ee8e5c31214ffdef631c5f479290611e33610800611616565b604051611e41929190612faf565b60405180910390a35f86608001515a611e5a9087613006565b611e649190612fdb565b9050611e736002888684611641565b9550505b505b5050509392505050565b6001600160a01b038216611ed95760405162461bcd60e51b815260206004820152601860248201527f4141393020696e76616c69642062656e6566696369617279000000000000000060448201526064016105d4565b5f826001600160a01b0316826040515f6040518083038185875af1925050503d805f8114611f22576040519150601f19603f3d011682016040523d82523d5f602084013e611f27565b606091505b5050905080610d475760405162461bcd60e51b815260206004820152601f60248201527f41413931206661696c65642073656e6420746f2062656e65666963696172790060448201526064016105d4565b6101008101516101208201515f9190808203611f95575092915050565b611fa182488301612617565b949350505050565b80518051602080840151928101516040519081526001600160a01b0390921692917f67b4fa9642f42120bf031f3051d1824b0fe25627945b27b8a6a65d5761d5482e910160405180910390a350565b835160e081015181516020808801519301516040516001600160a01b039384169492909316927f49628fd1471006c1482da88028e9ce4dbb080b815c9b0344d39e5a8e6ec1419f916120659189908990899093845291151560208401526040830152606082015260800190565b60405180910390a450505050565b6060813560208301355f61209261208d604087018761314a565b61262e565b90505f6120a561208d606088018861314a565b9050608086013560a087013560c08801355f6120c761208d60e08c018c61314a565b604080516001600160a01b039a909a1660208b015289810198909852606089019690965250608087019390935260a086019190915260c085015260e08401526101008084019190915281518084039091018152610120909201905292915050565b6121356020830183612e13565b6001600160a01b03168152602082810135908201526001600160801b036080808401358281166060850152811c604084015260a084013560c0808501919091528401359182166101008401521c610120820152365f61219760e085018561314a565b9092509050801561221a5760348110156121f35760405162461bcd60e51b815260206004820152601d60248201527f4141393320696e76616c6964207061796d6173746572416e644461746100000060448201526064016105d4565b6121fd8282612640565b60a086015260808501526001600160a01b031660e0840152610b90565b5f60e084018190526080840181905260a084015250505050565b825180515f9190612252888761224d60408b018b61314a565b6126a7565b60e08201515f6001600160a01b038216612293576001600160a01b0383165f9081526020819052604090205487811161228d5780880361228f565b5f5b9150505b60208801516040516306608bdf60e21b81526001600160a01b038516916319822f7c9189916122c9918e919087906004016134d2565b6020604051808303815f8887f193505050508015612304575060408051601f3d908101601f19168201909252612301918101906134f6565b60015b61232f5789612314610800611616565b6040516365c8fd4d60e01b81526004016105d492919061350d565b94506001600160a01b0382166123b8576001600160a01b0383165f9081526020819052604090208054808911156123b2578b604051631101335b60e11b81526004016105d49181526040602082018190526017908201527f41413231206469646e2774207061792070726566756e64000000000000000000606082015260800190565b88900390555b5050505095945050505050565b6001600160a01b0382165f90815260016020908152604080832084821c80855292528220805484916001600160401b03831691908561240383612fee565b909155501495945050505050565b60605f805a855160e08101516001600160a01b0381165f9081526020819052604090208054939450919290919087811015612498578a604051631101335b60e11b81526004016105d4918152604060208201819052601e908201527f41413331207061796d6173746572206465706f73697420746f6f206c6f770000606082015260800190565b878103825f01819055505f84608001519050836001600160a01b03166352b7512c828d8d602001518d6040518563ffffffff1660e01b81526004016124df939291906134d2565b5f604051808303815f8887f19350505050801561251d57506040513d5f823e601f3d908101601f1916820160405261251a9190810190613549565b60015b612548578b61252d610800611616565b6040516365c8fd4d60e01b81526004016105d49291906135c4565b9098509650805a870311156125b9578b604051631101335b60e11b81526004016105d49181526040602082018190526027908201527f41413336206f766572207061796d6173746572566572696669636174696f6e47606082015266185cd31a5b5a5d60ca1b608082015260a00190565b50505050505094509492505050565b5f80825f036125db57505f928392509050565b5f6125e584612961565b9050806040015165ffffffffffff1642118061260c5750806020015165ffffffffffff1642105b905194909350915050565b5f8183106126255781612627565b825b9392505050565b5f604051828085833790209392505050565b5f80806126506014828688613600565b61265991613627565b60601c61266a602460148789613600565b6126739161365c565b60801c61268460346024888a613600565b61268d9161365c565b9194506001600160801b0316925060801c90509250925092565b8015610b90578251516001600160a01b0381163b156127125784604051631101335b60e11b81526004016105d4918152604060208201819052601f908201527f414131302073656e64657220616c726561647920636f6e737472756374656400606082015260800190565b5f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663570e1a36865f01516040015186866040518463ffffffff1660e01b815260040161276992919061309d565b6020604051808303815f8887f1158015612785573d5f803e3d5ffd5b50505050506040513d601f19601f820116820180604052508101906127aa91906130b0565b90506001600160a01b03811661280c5785604051631101335b60e11b81526004016105d4918152604060208201819052601b908201527f4141313320696e6974436f6465206661696c6564206f72204f4f470000000000606082015260800190565b816001600160a01b0316816001600160a01b0316146128765785604051631101335b60e11b81526004016105d491815260406020808301829052908201527f4141313420696e6974436f6465206d7573742072657475726e2073656e646572606082015260800190565b806001600160a01b03163b5f036128d85785604051631101335b60e11b81526004016105d491815260406020808301829052908201527f4141313520696e6974436f6465206d757374206372656174652073656e646572606082015260800190565b5f6128e66014828688613600565b6128ef91613627565b60601c9050826001600160a01b031686602001517fd51a9c61267aa6196961883ecf5ff2da6619c37dac0fa92122513fb32c032d2d83895f015160e001516040516129509291906001600160a01b0392831681529116602082015260400190565b60405180910390a350505050505050565b604080516060810182525f80825260208201819052918101919091528160a081901c65ffffffffffff81165f0361299b575065ffffffffffff5b604080516060810182526001600160a01b03909316835260d09490941c602083015265ffffffffffff16928101929092525090565b6040518060a00160405280612a396040518061014001604052805f6001600160a01b031681526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f6001600160a01b031681526020015f81526020015f81525090565b81526020015f80191681526020015f81526020015f81526020015f81525090565b634e487b7160e01b5f52604160045260245ffd5b60405160a081016001600160401b0381118282101715612a9057612a90612a5a565b60405290565b60405161014081016001600160401b0381118282101715612a9057612a90612a5a565b604051601f8201601f191681016001600160401b0381118282101715612ae157612ae1612a5a565b604052919050565b5f6001600160401b03821115612b0157612b01612a5a565b50601f01601f191660200190565b6001600160a01b0381168114612b23575f80fd5b50565b8035612b3181612b0f565b919050565b5f8183036101c0811215612b48575f80fd5b612b50612a6e565b915061014080821215612b61575f80fd5b612b69612a96565b9150612b7484612b26565b82526020840135602083015260408401356040830152606084013560608301526080840135608083015260a084013560a083015260c084013560c0830152612bbe60e08501612b26565b60e0830152610100848101359083015261012080850135908301529082528201356020820152610160820135604082015261018082013560608201526101a0909101356080820152919050565b5f8083601f840112612c1b575f80fd5b5081356001600160401b03811115612c31575f80fd5b602083019150836020828501011115612c48575f80fd5b9250929050565b5f805f806102008587031215612c63575f80fd5b84356001600160401b0380821115612c79575f80fd5b818701915087601f830112612c8c575f80fd5b8135612c9f612c9a82612ae9565b612ab9565b818152896020838601011115612cb3575f80fd5b816020850160208301375f602083830101528097505050612cd78860208901612b36565b94506101e0870135915080821115612ced575f80fd5b50612cfa87828801612c0b565b95989497509550505050565b5f60208284031215612d16575f80fd5b81356001600160e01b031981168114612627575f80fd5b5f60208284031215612d3d575f80fd5b813563ffffffff81168114612627575f80fd5b80356001600160c01b0381168114612b31575f80fd5b5f60208284031215612d76575f80fd5b61262782612d50565b5f8060408385031215612d90575f80fd5b8235612d9b81612b0f565b9150612da960208401612d50565b90509250929050565b5f8060408385031215612dc3575f80fd5b8235612dce81612b0f565b946020939093013593505050565b5f60208284031215612dec575f80fd5b81356001600160401b03811115612e01575f80fd5b82016101208185031215612627575f80fd5b5f60208284031215612e23575f80fd5b813561262781612b0f565b5f8083601f840112612e3e575f80fd5b5081356001600160401b03811115612e54575f80fd5b6020830191508360208260051b8501011115612c48575f80fd5b5f805f60408486031215612e80575f80fd5b83356001600160401b03811115612e95575f80fd5b612ea186828701612e2e565b9094509250506020840135612eb581612b0f565b809150509250925092565b5f805f60408486031215612ed2575f80fd5b8335612edd81612b0f565b925060208401356001600160401b03811115612ef7575f80fd5b612f0386828701612c0b565b9497909650939450505050565b5f8060208385031215612f21575f80fd5b82356001600160401b03811115612f36575f80fd5b612f4285828601612c0b565b90969095509350505050565b634e487b7160e01b5f52601260045260245ffd5b5f5b83811015612f7c578181015183820152602001612f64565b50505f910152565b5f8151808452612f9b816020860160208601612f62565b601f01601f19169290920160200192915050565b828152604060208201525f611fa16040830184612f84565b634e487b7160e01b5f52601160045260245ffd5b8082018082111561078357610783612fc7565b5f60018201612fff57612fff612fc7565b5060010190565b8181038181111561078357610783612fc7565b634e487b7160e01b5f52603260045260245ffd5b5f823561011e19833603018112613042575f80fd5b9190910192915050565b818382375f9101908152919050565b8215158152604060208201525f611fa16040830184612f84565b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b602081525f611fa1602083018486613075565b5f602082840312156130c0575f80fd5b815161262781612b0f565b65ffffffffffff8181168382160190808211156130ea576130ea612fc7565b5092915050565b5f8235605e19833603018112613042575f80fd5b5f808335601e1984360301811261311a575f80fd5b8301803591506001600160401b03821115613133575f80fd5b6020019150600581901b3603821315612c48575f80fd5b5f808335601e1984360301811261315f575f80fd5b8301803591506001600160401b03821115613178575f80fd5b602001915036819003821315612c48575f80fd5b5f808335601e198436030181126131a1575f80fd5b83016020810192503590506001600160401b038111156131bf575f80fd5b803603821315612c48575f80fd5b5f6101206131eb846131de85612b26565b6001600160a01b03169052565b60208301356020850152613202604084018461318c565b8260408701526132158387018284613075565b92505050613226606084018461318c565b8583036060870152613239838284613075565b925050506080830135608085015260a083013560a085015260c083013560c085015261326860e084018461318c565b85830360e087015261327b838284613075565b9250505061010061328e8185018561318c565b868403838801526132a0848284613075565b979650505050505050565b604080825281018490525f6060600586901b8301810190830187835b8881101561330f57858403605f190183528135368b900361011e190181126132ed575f80fd5b6132f9858c83016131cd565b94505060209283019291909101906001016132c7565b50505082810360208401526132a0818587613075565b634e487b7160e01b5f52602160045260245ffd5b5f6003861061335657634e487b7160e01b5f52602160045260245ffd5b8582526080602083015261336d6080830186612f84565b6040830194909452506060015292915050565b602081525f6126276020830184612f84565b604081525f6133a460408301856131cd565b90508260208301529392505050565b805180516001600160a01b031683526020810151602084015260408101516040840152606081015160608401526080810151608084015260a081015160a084015260c081015160c084015260e081015161341860e08501826001600160a01b03169052565b5061010081810151908401526101209081015190830152602081015161014083015260408101516101608301526060810151610180830152608001516101a090910152565b5f61020080835261347081840187612f84565b905061347f60208401866133b3565b8281036101e08401526134928185612f84565b9695505050505050565b5f6102008083526134b08184018789613075565b90506134bf60208401866133b3565b8281036101e08401526132a08185612f84565b606081525f6134e460608301866131cd565b60208301949094525060400152919050565b5f60208284031215613506575f80fd5b5051919050565b82815260606020820152600d60608201526c10504c8cc81c995d995c9d1959609a1b608082015260a060408201525f611fa160a0830184612f84565b5f806040838503121561355a575f80fd5b82516001600160401b0381111561356f575f80fd5b8301601f8101851361357f575f80fd5b805161358d612c9a82612ae9565b8181528660208385010111156135a1575f80fd5b6135b2826020830160208601612f62565b60209590950151949694955050505050565b82815260606020820152600d60608201526c10504cccc81c995d995c9d1959609a1b608082015260a060408201525f611fa160a0830184612f84565b5f808585111561360e575f80fd5b8386111561361a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156136545780818660140360031b1b83161692505b505092915050565b6fffffffffffffffffffffffffffffffff1981358181169160108510156136545760109490940360031b84901b169092169291505056fea2646970667358221220397996f36f516bad9951ba1f23ade372bdd0ef7639623362f57652a7762031c164736f6c63430008170033608060405234801561000f575f80fd5b506101e28061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063570e1a361461002d575b5f80fd5b61004061003b3660046100e4565b61005c565b6040516001600160a01b03909116815260200160405180910390f35b5f8061006b6014828587610150565b61007491610177565b60601c90505f6100878460148188610150565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92018290525084519495509360209350849250905082850182875af190505f519350806100db575f93505b50505092915050565b5f80602083850312156100f5575f80fd5b823567ffffffffffffffff8082111561010c575f80fd5b818501915085601f83011261011f575f80fd5b81358181111561012d575f80fd5b86602082850101111561013e575f80fd5b60209290920196919550909350505050565b5f808585111561015e575f80fd5b8386111561016a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156101a45780818660140360031b1b83161692505b50509291505056fea264697066735822122078c1aaa9f040f8c523cf2b642dd06415593eec30d2e75021458af7e0c704e6fb64736f6c63430008170033",HDe={};ie(HDe,{abi:()=>FDe,bytecode:()=>zDe});var FDe=[{type:"function",name:"executeUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"}],zDe="0x",jDe={};ie(jDe,{abi:()=>qDe,bytecode:()=>GDe});var qDe=[{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"ids",type:"uint256[]",internalType:"uint256[]"},{name:"values",type:"uint256[]",internalType:"uint256[]"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"onERC1155Received",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],GDe="0x",VDe={};ie(VDe,{abi:()=>WDe,bytecode:()=>ZDe});var WDe=[{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOfBatch",inputs:[{name:"accounts",type:"address[]",internalType:"address[]"},{name:"ids",type:"uint256[]",internalType:"uint256[]"}],outputs:[{name:"",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"account",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"safeBatchTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"ids",type:"uint256[]",internalType:"uint256[]"},{name:"values",type:"uint256[]",internalType:"uint256[]"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"ApprovalForAll",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"TransferBatch",inputs:[{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"ids",type:"uint256[]",indexed:!1,internalType:"uint256[]"},{name:"values",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"TransferSingle",inputs:[{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"id",type:"uint256",indexed:!1,internalType:"uint256"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"URI",inputs:[{name:"value",type:"string",indexed:!1,internalType:"string"},{name:"id",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1}],ZDe="0x",KDe={};ie(KDe,{abi:()=>XDe,bytecode:()=>JDe});var XDe=[{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"}],JDe="0x",QDe={};ie(QDe,{abi:()=>YDe,bytecode:()=>eMe});var YDe=[{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"approveAndCall",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"approveAndCall",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferAndCall",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferAndCall",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFromAndCall",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFromAndCall",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],eMe="0x",tMe={};ie(tMe,{abi:()=>nMe,bytecode:()=>rMe});var nMe=[{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"_newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1}],rMe="0x",aMe={};ie(aMe,{abi:()=>sMe,bytecode:()=>oMe});var sMe=[{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],oMe="0x",iMe={};ie(iMe,{abi:()=>cMe,bytecode:()=>uMe});var cMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"executions_",type:"tuple[]",internalType:"struct Execution[]",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],uMe="0x608060405234801561001057600080fd5b5061083a806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610417565b50505050505050505050565b005b610076610086366004610417565b6100b4565b61009e6100993660046104e4565b6102fd565b6040516100ab9190610526565b60405180910390f35b85600160f81b6001600160f81b03198216146101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6001600160f81b03198116156101835760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b503660006101918989610319565b9150915060006101a18f8f6102fd565b8051909150821461020a5760405162461bcd60e51b815260206004820152602d60248201527f457861637443616c6c646174614261746368456e666f726365723a696e76616c60448201526c69642d62617463682d73697a6560981b606482015260840161010e565b60005b828110156102eb57838382818110610227576102276105e8565b905060200281019061023991906105fe565b61024790604081019061061e565b604051610255929190610665565b604051809103902082828151811061026f5761026f6105e8565b60200260200101516040015180519060200120146102e35760405162461bcd60e51b815260206004820152602b60248201527f457861637443616c6c646174614261746368456e666f726365723a696e76616c60448201526a69642d63616c6c6461746160a81b606482015260840161010e565b60010161020d565b50505050505050505050505050505050565b60606103098383610319565b610312916106e5565b9392505050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156103515763ba597e7e6000526004601cfd5b83156103a8578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c171561039f5763ba597e7e6000526004601cfd5b5050508261035b575b5050509250929050565b60008083601f8401126103c457600080fd5b50813567ffffffffffffffff8111156103dc57600080fd5b6020830191508360208285010111156103f457600080fd5b9250929050565b80356001600160a01b038116811461041257600080fd5b919050565b60008060008060008060008060008060e08b8d03121561043657600080fd5b8a3567ffffffffffffffff8082111561044e57600080fd5b61045a8e838f016103b2565b909c509a5060208d013591508082111561047357600080fd5b61047f8e838f016103b2565b909a50985060408d0135975060608d013591508082111561049f57600080fd5b506104ac8d828e016103b2565b90965094505060808b013592506104c560a08c016103fb565b91506104d360c08c016103fb565b90509295989b9194979a5092959850565b600080602083850312156104f757600080fd5b823567ffffffffffffffff81111561050e57600080fd5b61051a858286016103b2565b90969095509350505050565b600060208083018184528085518083526040925060408601915060408160051b8701018488016000805b848110156105d957898403603f19018652825180516001600160a01b0316855288810151898601528701516060888601819052815190860181905283905b808210156105ac578282018b015187830160800152908a019061058e565b8681016080908101869052988b0198601f909101601f191690960190950194505091870191600101610550565b50919998505050505050505050565b634e487b7160e01b600052603260045260246000fd5b60008235605e1983360301811261061457600080fd5b9190910192915050565b6000808335601e1984360301811261063557600080fd5b83018035915067ffffffffffffffff82111561065057600080fd5b6020019150368190038213156103f457600080fd5b8183823760009101908152919050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff811182821017156106ae576106ae610675565b60405290565b604051601f8201601f1916810167ffffffffffffffff811182821017156106dd576106dd610675565b604052919050565b600067ffffffffffffffff8084111561070057610700610675565b8360051b60206107118183016106b4565b86815291850191818101903684111561072957600080fd5b865b848110156107f8578035868111156107435760008081fd5b880160603682900312156107575760008081fd5b61075f61068b565b610768826103fb565b81528582013586820152604080830135898111156107865760008081fd5b9290920191601f368185011261079c5760008081fd5b83358a8111156107ae576107ae610675565b6107bf818301601f19168a016106b4565b915080825236898287010111156107d65760008081fd5b808986018a84013760009082018901529082015284525091830191830161072b565b5097965050505050505056fea26469706673582212208d28ccd8e989ae016d34ead1b420bc19b8be9eaa747049c2602c587d0a44891264736f6c63430008170033",dMe={};ie(dMe,{abi:()=>fMe,bytecode:()=>lMe});var fMe=[{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"}],lMe="0x",pMe={};ie(pMe,{abi:()=>mMe,bytecode:()=>bMe});var mMe=[{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"}],bMe="0x",yMe={};ie(yMe,{abi:()=>gMe,bytecode:()=>hMe});var gMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"executions_",type:"tuple[]",internalType:"struct Execution[]",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],hMe="0x608060405234801561001057600080fd5b50610870806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103e9565b50505050505050505050565b005b6100766100863660046103e9565b6100b4565b61009e6100993660046104b6565b6102cf565b6040516100ab91906104f8565b60405180910390f35b85600160f81b6001600160f81b03198216146101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6001600160f81b03198116156101835760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b5036600061019189896102eb565b9150915060006101a18f8f6102cf565b8051909150821461020b5760405162461bcd60e51b815260206004820152602e60248201527f4578616374457865637574696f6e4261746368456e666f726365723a696e766160448201526d6c69642d62617463682d73697a6560901b606482015260840161010e565b8060405160200161021c91906104f8565b6040516020818303038152906040528051906020012083836040516020016102459291906105ba565b60405160208183030381529060405280519060200120146102be5760405162461bcd60e51b815260206004820152602d60248201527f4578616374457865637574696f6e4261746368456e666f726365723a696e766160448201526c3634b216b2bc32b1baba34b7b760991b606482015260840161010e565b505050505050505050505050505050565b60606102db83836102eb565b6102e49161071b565b9392505050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156103235763ba597e7e6000526004601cfd5b831561037a578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156103715763ba597e7e6000526004601cfd5b5050508261032d575b5050509250929050565b60008083601f84011261039657600080fd5b50813567ffffffffffffffff8111156103ae57600080fd5b6020830191508360208285010111156103c657600080fd5b9250929050565b80356001600160a01b03811681146103e457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561040857600080fd5b8a3567ffffffffffffffff8082111561042057600080fd5b61042c8e838f01610384565b909c509a5060208d013591508082111561044557600080fd5b6104518e838f01610384565b909a50985060408d0135975060608d013591508082111561047157600080fd5b5061047e8d828e01610384565b90965094505060808b0135925061049760a08c016103cd565b91506104a560c08c016103cd565b90509295989b9194979a5092959850565b600080602083850312156104c957600080fd5b823567ffffffffffffffff8111156104e057600080fd5b6104ec85828601610384565b90969095509350505050565b600060208083018184528085518083526040925060408601915060408160051b8701018488016000805b848110156105ab57898403603f19018652825180516001600160a01b0316855288810151898601528701516060888601819052815190860181905283905b8082101561057e578282018b015187830160800152908a0190610560565b8681016080908101869052988b0198601f909101601f191690960190950194505091870191600101610522565b50919998505050505050505050565b60208082528181018390526000906040808401600586901b8501820187855b8881101561069d57878303603f190184528135368b9003605e190181126105ff57600080fd5b8a0160606001600160a01b03610614836103cd565b168552878201358886015286820135601e1983360301811261063557600080fd5b90910187810191903567ffffffffffffffff81111561065357600080fd5b80360383131561066257600080fd5b8188870152808287015260809150808383880137600086820183015295880195601f01601f19169094019093019250908501906001016105d9565b509098975050505050505050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff811182821017156106e4576106e46106ab565b60405290565b604051601f8201601f1916810167ffffffffffffffff81118282101715610713576107136106ab565b604052919050565b600067ffffffffffffffff80841115610736576107366106ab565b8360051b60206107478183016106ea565b86815291850191818101903684111561075f57600080fd5b865b8481101561082e578035868111156107795760008081fd5b8801606036829003121561078d5760008081fd5b6107956106c1565b61079e826103cd565b81528582013586820152604080830135898111156107bc5760008081fd5b9290920191601f36818501126107d25760008081fd5b83358a8111156107e4576107e46106ab565b6107f5818301601f19168a016106ea565b9150808252368982870101111561080c5760008081fd5b808986018a840137600090820189015290820152845250918301918301610761565b5097965050505050505056fea26469706673582212205e0b91ba43666d3d9ebd5eb11438023697fc7df67dea03687ac126f13d8d464564736f6c63430008170033",xMe={};ie(xMe,{abi:()=>wMe,bytecode:()=>vMe});var wMe=[{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ExecutionFailed",inputs:[]}],vMe="0x6080604052348015600f57600080fd5b50603f80601d6000396000f3fe6080604052600080fdfea264697066735822122070e8319b78da08f58cb6bf69f50e33c8c919ae6c2113f3ef3b34f1da6bf44c5f64736f6c63430008170033",TMe={};ie(TMe,{abi:()=>SMe,bytecode:()=>AMe});var SMe=[{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1}],AMe="0x",_Me={};ie(_Me,{abi:()=>EMe,bytecode:()=>kMe});var EMe=[{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],kMe="0x",IMe={};ie(IMe,{abi:()=>CMe,bytecode:()=>PMe});var CMe=[{type:"function",name:"approve",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getApproved",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"operator",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"ownerOf",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"owner",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ApprovalForAll",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1}],PMe="0x",RMe={};ie(RMe,{abi:()=>$Me,bytecode:()=>DMe});var $Me=[{type:"function",name:"accountId",inputs:[],outputs:[{name:"accountImplementationId",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"installModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"isModuleInstalled",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"additionalContext",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"encodedMode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"uninstallModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"deInitData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"event",name:"ModuleInstalled",inputs:[{name:"moduleTypeId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"module",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"ModuleUninstalled",inputs:[{name:"moduleTypeId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"module",type:"address",indexed:!1,internalType:"address"}],anonymous:!1}],DMe="0x",MMe={};ie(MMe,{abi:()=>OMe,bytecode:()=>NMe});var OMe=[{type:"function",name:"postOp",inputs:[{name:"mode",type:"uint8",internalType:"enum IPaymaster.PostOpMode"},{name:"context",type:"bytes",internalType:"bytes"},{name:"actualGasCost",type:"uint256",internalType:"uint256"},{name:"actualUserOpFeePerGas",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"validatePaymasterUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"maxCost",type:"uint256",internalType:"uint256"}],outputs:[{name:"context",type:"bytes",internalType:"bytes"},{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"}],NMe="0x",LMe={};ie(LMe,{abi:()=>BMe,bytecode:()=>UMe});var BMe=[{type:"function",name:"addStake",inputs:[{name:"_unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],UMe="0x",HMe={};ie(HMe,{abi:()=>FMe,bytecode:()=>zMe});var FMe=[{type:"function",name:"addStake",inputs:[{name:"_unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"delegateAndRevert",inputs:[{name:"target",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getSenderAddress",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getUserOpHash",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"handleAggregatedOps",inputs:[{name:"opsPerAggregator",type:"tuple[]",internalType:"struct IEntryPoint.UserOpsPerAggregator[]",components:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"aggregator",type:"address",internalType:"contract IAggregator"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"handleOps",inputs:[{name:"ops",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AccountDeployed",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"factory",type:"address",indexed:!1,internalType:"address"},{name:"paymaster",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeforeExecution",inputs:[],anonymous:!1},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PostOpRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"SignatureAggregatorChanged",inputs:[{name:"aggregator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationEvent",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"paymaster",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"},{name:"actualGasCost",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actualGasUsed",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationPrefundTooLow",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"DelegateAndRevert",inputs:[{name:"success",type:"bool",internalType:"bool"},{name:"ret",type:"bytes",internalType:"bytes"}]},{type:"error",name:"FailedOp",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"}]},{type:"error",name:"FailedOpWithRevert",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"},{name:"inner",type:"bytes",internalType:"bytes"}]},{type:"error",name:"PostOpReverted",inputs:[{name:"returnData",type:"bytes",internalType:"bytes"}]},{type:"error",name:"SenderAddressResult",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"SignatureValidationFailed",inputs:[{name:"aggregator",type:"address",internalType:"address"}]}],zMe="0x",jMe={};ie(jMe,{abi:()=>qMe,bytecode:()=>GMe});var qMe=[{type:"function",name:"adapters",inputs:[{name:"id",type:"string",internalType:"string"}],outputs:[{name:"",type:"tuple",internalType:"struct IMetaSwap.Adapter",components:[{name:"addr",type:"address",internalType:"address"},{name:"selector",type:"bytes4",internalType:"bytes4"},{name:"data",type:"bytes",internalType:"bytes"}]}],stateMutability:"view"},{type:"function",name:"removeAdapter",inputs:[{name:"aggregatorId",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setAdapter",inputs:[{name:"aggregatorId",type:"string",internalType:"string"},{name:"addr",type:"address",internalType:"address"},{name:"selector",type:"bytes4",internalType:"bytes4"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swap",inputs:[{name:"aggregatorId",type:"string",internalType:"string"},{name:"tokenFrom",type:"address",internalType:"contract IERC20"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}],GMe="0x",i0={};ie(i0,{abi:()=>VMe,bytecode:()=>WMe});var VMe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"addKey",inputs:[{name:"_keyId",type:"string",internalType:"string"},{name:"_x",type:"uint256",internalType:"uint256"},{name:"_y",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getKey",inputs:[{name:"_keyId",type:"string",internalType:"string"}],outputs:[{name:"x_",type:"uint256",internalType:"uint256"},{name:"y_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getKeyIdHashes",inputs:[],outputs:[{name:"",type:"bytes32[]",internalType:"bytes32[]"}],stateMutability:"view"},{type:"function",name:"getKeyIdHashesCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"reinitialize",inputs:[{name:"_version",type:"uint8",internalType:"uint8"},{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"},{name:"_deleteP256Keys",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"removeKey",inputs:[{name:"_keyId",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"_newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateSigners",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddedP256Key",inputs:[{name:"keyIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"keyId",type:"string",indexed:!1,internalType:"string"},{name:"x",type:"uint256",indexed:!1,internalType:"uint256"},{name:"y",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RemovedP256Key",inputs:[{name:"keyIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"x",type:"uint256",indexed:!1,internalType:"uint256"},{name:"y",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"CannotRemoveLastSigner",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InputLengthsMismatch",inputs:[{name:"keyIdsLength",type:"uint256",internalType:"uint256"},{name:"xValuesLength",type:"uint256",internalType:"uint256"},{name:"yValuesLength",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidEmptyKey",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"KeyAlreadyExists",inputs:[{name:"keyIdHash",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"KeyDoesNotExist",inputs:[{name:"keyIdHash",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"KeyNotOnCurve",inputs:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"SignersCannotBeEmpty",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],WMe="0x6101c0604052306080523480156200001657600080fd5b506040516200556538038062005565833981016040819052620000399162000319565b81816040518060400160405280600f81526020016e243cb13934b22232b632a3b0ba37b960891b815250604051806040016040528060018152602001603160f81b815250818162000095600083620001ca60201b90919060201c565b61014052620000a6816001620001ca565b61016052815160208084019190912061010052815190820120610120524660c052620001366101005161012051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60a05250503060e0526200014962000203565b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a250505050505062000541565b6000602083511015620001ea57620001e283620002b7565b9050620001fd565b81620001f78482620003ff565b5060ff90505b92915050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff1615620002545760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b0390811614620002b45780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b600080829050601f81511115620002ee578260405163305a27a960e01b8152600401620002e59190620004cb565b60405180910390fd5b8051620002fb826200051c565b179392505050565b6001600160a01b0381168114620002b457600080fd5b600080604083850312156200032d57600080fd5b82516200033a8162000303565b60208401519092506200034d8162000303565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200038357607f821691505b602082108103620003a457634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620003fa576000816000526020600020601f850160051c81016020861015620003d55750805b601f850160051c820191505b81811015620003f657828155600101620003e1565b5050505b505050565b81516001600160401b038111156200041b576200041b62000358565b62000433816200042c84546200036e565b84620003aa565b602080601f8311600181146200046b5760008415620004525750858301515b600019600386901b1c1916600185901b178555620003f6565b600085815260208120601f198616915b828110156200049c578886015182559484019460019091019084016200047b565b5085821015620004bb5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620004fb57858101830151858201604001528201620004dd565b506000604082860101526040601f19601f8301168501019250505092915050565b80516020808301519190811015620003a45760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051614eeb6200067a6000396000818161068c0152818161091e015281816109cb01528181610abe01528181610b3c01528181610ca001528181610d5501528181610de001528181610e5001528181610f3c01528181610ff701528181611069015281816112c301528181611342015281816113ab015281816114a60152818161156501528181611a1b01528181611d0e01528181611d7c0152612d4e0152600081816107ff01528181610b9f01528181610c2201528181610d030152818161140e01526117ac0152600061275a0152600061272d01526000611f3e01526000611f1601526000611e7101526000611e9b01526000611ec5015260008181612190015281816121b901526126100152614eeb6000f3fe6080604052600436106102765760003560e01c80638da5cb5b1161014f578063c8561e73116100c1578063e9ae5c531161007a578063e9ae5c53146107da578063ea4d3c9b146107ed578063ed8101b514610821578063f23a6e6114610841578063f2fde38b14610861578063ffa1ad741461088157600080fd5b8063c8561e7314610710578063cef6d20914610730578063d087d28814610750578063d37aec9214610765578063d5d33b551461079a578063d691c964146107ba57600080fd5b8063acb8cc4911610113578063acb8cc491461061c578063ad3cb1cc14610649578063b0d691fe1461067a578063b3c65015146106ae578063bc197c81146106db578063c399ec88146106fb57600080fd5b80638da5cb5b1461054d5780638ebf95331461058c578063a24c8f32146105ac578063a3f4df7e146105bf578063aaf10f421461060757600080fd5b8063445140b8116101e85780635c1c6dcd116101ac5780635c1c6dcd146104a8578063715018a6146104bb57806378a68ecf146104d05780637f07bfdc146104f057806383ebb7711461051057806384b0196e1461052557600080fd5b8063445140b81461043857806349934047146104585780634a58db19146104785780634f1ef2861461048057806352d1902d1461049357600080fd5b806319822f7c1161023a57806319822f7c146103605780631c03010a146103805780632b3afd99146103a25780632ffeaad6146103d65780633e1b0812146103f85780633ed010151461041857600080fd5b806301ffc9a71461028257806306394d67146102b7578063074feff3146102e5578063150b7a02146103075780631626ba7e1461034057600080fd5b3661027d57005b600080fd5b34801561028e57600080fd5b506102a261029d366004613d03565b6108b2565b60405190151581526020015b60405180910390f35b3480156102c357600080fd5b506102d76102d2366004613d46565b6108de565b6040519081526020016102ae565b3480156102f157600080fd5b50610305610300366004613ded565b610913565b005b34801561031357600080fd5b50610327610322366004613f5c565b610984565b6040516001600160e01b031990911681526020016102ae565b34801561034c57600080fd5b5061032761035b366004614008565b61099f565b34801561036c57600080fd5b506102d761037b366004614053565b6109be565b34801561038c57600080fd5b50600080516020614e36833981519152546102d7565b3480156103ae57600080fd5b506102d77fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156103e257600080fd5b506103eb610a2e565b6040516102ae91906140a0565b34801561040457600080fd5b506102d76104133660046140d8565b610a97565b34801561042457600080fd5b50610305610433366004614101565b610b31565b34801561044457600080fd5b506102a261045336600461413b565b610c09565b34801561046457600080fd5b50610305610473366004614101565b610c95565b610305610d38565b61030561048e366004614154565b610da2565b34801561049f57600080fd5b506102d7610db8565b6103056104b63660046141a3565b610dd5565b3480156104c757600080fd5b50610305610e45565b3480156104dc57600080fd5b506103056104eb3660046141f6565b610ea8565b3480156104fc57600080fd5b5061030561050b3660046142c8565b610fec565b34801561051c57600080fd5b506102d76110c9565b34801561053157600080fd5b5061053a6110d8565b6040516102ae9796959493929190614344565b34801561055957600080fd5b50600080516020614e16833981519152546001600160a01b03165b6040516001600160a01b0390911681526020016102ae565b34801561059857600080fd5b506103056105a7366004613ded565b61111e565b6103056105ba366004614154565b610daa565b3480156105cb57600080fd5b506105fa6040518060400160405280600f81526020016e243cb13934b22232b632a3b0ba37b960891b81525081565b6040516102ae91906143dd565b34801561061357600080fd5b5061057461123a565b34801561062857600080fd5b506105fa604051806040016040528060018152602001603160f81b81525081565b34801561065557600080fd5b506105fa604051806040016040528060058152602001640352e302e360dc1b81525081565b34801561068657600080fd5b506105747f000000000000000000000000000000000000000000000000000000000000000081565b3480156106ba57600080fd5b506106c361125b565b6040516001600160401b0390911681526020016102ae565b3480156106e757600080fd5b506103276106f636600461446f565b61128e565b34801561070757600080fd5b506102d76112ab565b34801561071c57600080fd5b5061030561072b36600461451c565b611337565b34801561073c57600080fd5b5061030561074b36600461456c565b6113a0565b34801561075c57600080fd5b506102d7611487565b34801561077157600080fd5b50610785610780366004614605565b6114dd565b604080519283526020830191909152016102ae565b3480156107a657600080fd5b506103056107b5366004614605565b61155a565b6107cd6107c8366004614008565b61179f565b6040516102ae9190614646565b6103056107e8366004614008565b611a10565b3480156107f957600080fd5b506105747f000000000000000000000000000000000000000000000000000000000000000081565b34801561082d57600080fd5b506102d761083c366004613d46565b611c13565b34801561084d57600080fd5b5061032761085c3660046146aa565b611d55565b34801561086d57600080fd5b5061030561087c366004614712565b611d71565b34801561088d57600080fd5b506105fa604051806040016040528060058152602001640312e332e360dc1b81525081565b60006108bd82611dd4565b806108d857506001600160e01b031982166307f5828d60e41b145b92915050565b60006108d86108eb611e64565b6108f484611c13565b60405161190160f01b8152600281019290925260228201526042902090565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061094c5750333014155b1561096a57604051630796d94560e01b815260040160405180910390fd5b61097b878787878787876001611f8f565b50505050505050565b600061098e612185565b50630a85bd0160e11b949350505050565b60006109a9612185565b6109b484848461222a565b90505b9392505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610a0957604051636b31ba1560e11b815260040160405180910390fd5b610a11612185565b610a2384610a1e866108de565b61244e565b90506109b782612496565b60606000600080516020614e1683398151915260028101805460408051602080840282018101909252828152939450830182828015610a8c57602002820191906000526020600020905b815481526020019060010190808311610a78575b505050505091505090565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610b0d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d8919061472f565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610b6a5750333014155b15610b8857604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed0101590610bd4908490600401614877565b600060405180830381600087803b158015610bee57600080fd5b505af1158015610c02573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610c71573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d89190614953565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610cce5750333014155b15610cec57604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690634993404790610bd4908490600401614877565b610d40612185565b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b158015610bee57600080fd5b610daa61252d565b610db482826125ea565b5050565b6000610dc2612605565b50600080516020614e5683398151915290565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610e1e57604051636b31ba1560e11b815260040160405180910390fd5b610db4610e2e6020830183614712565b6020830135610e406040850185614970565b61264e565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610e7e5750333014155b15610e9c57604051630796d94560e01b815260040160405180910390fd5b610ea66000612684565b565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805460ff8b81169291600160401b90041680610ef2575080546001600160401b03808416911610155b15610f105760405163f92ee8a960e01b815260040160405180910390fd5b805468ffffffffffffffffff19166001600160401b03831617600160401b178155336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610f6a5750333014155b15610f8857604051630796d94560e01b815260040160405180910390fd5b610f988a8a8a8a8a8a8a8a611f8f565b805460ff60401b191681556040516001600160401b03831681527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15050505050505050505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906110255750333014155b1561104357604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b1580156110ad57600080fd5b505af11580156110c1573d6000803e3d6000fd5b505050505050565b60006110d3611e64565b905090565b6000606080600080600060606110ec612726565b6110f4612753565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff1615906001600160401b03166000811580156111635750825b90506000826001600160401b0316600114801561117f5750303b155b90508115801561118d575080155b156111ab5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff1916600117855583156111d557845460ff60401b1916600160401b1785555b6111e68c8c8c8c8c8c8c6000611f8f565b831561122c57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050505050565b60006110d3600080516020614e56833981519152546001600160a01b031690565b60006110d37ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00546001600160401b031690565b6000611298612185565b5063bc197c8160e01b5b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015611313573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110d3919061472f565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906113705750333014155b1561138e57604051630796d94560e01b815260040160405180910390fd5b61139a84848484612780565b50505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906113d95750333014155b156113f757604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061144d90899089908990899089908990600401614a17565b600060405180830381600087803b15801561146757600080fd5b505af115801561147b573d6000803e3d6000fd5b50505050505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a906044016112f6565b60008080600080516020614e1683398151915290506000816001016000878760405160200161150d929190614a80565b60408051601f198184030181529181528151602092830120835282820193909352908201600020825180840190935280548084526001909101549290910182905297909650945050505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906115935750333014155b156115b157604051630796d94560e01b815260040160405180910390fd5b604051600080516020614e16833981519152906000906115d79085908590602001614a80565b60408051601f198184030181528282528051602091820120600081815260018088018452908490208585019094528354808652930154918401829052935081158015611621575080155b1561164757604051631a36430d60e31b8152600481018590526024015b60405180910390fd5b6002850154600181148015611664575085546001600160a01b0316155b156116825760405163c4c8547360e01b815260040160405180910390fd5b60005b611690600183614aa6565b81101561171557858760020182815481106116ad576116ad614ab9565b90600052602060002001540361170d57600287016116cc600184614aa6565b815481106116dc576116dc614ab9565b90600052602060002001548760020182815481106116fc576116fc614ab9565b600091825260209091200155611715565b600101611685565b508560020180548061172957611729614acf565b60008281526020808220830160001990810183905590920190925586825260018881018252604080842084815590910192909255815185815290810184905286917facf0e8088062f44f734bbcb5223794fd8bb6f6db1c199cb6a72df119d002a71b910160405180910390a25050505050505050565b6060336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146117ea57604051630692ce8160e21b815260040160405180910390fd5b83600881901b6117fe82600160f81b6128fd565b1561187f57366000611810878761290f565b90925090506118208360006128fd565b156118365761182f82826129a8565b9450611878565b61184483600160f81b6128fd565b156118535761182f8282612a69565b6040516308c3ee0360e11b81526001600160f81b03198416600482015260240161163e565b5050611a07565b61188a8260006128fd565b156119e25760008036600061189f8989612b96565b6040805160018082528183019092529498509296509094509250816020015b60608152602001906001900390816118be57905050965060006118e186826128fd565b15611915576118f28585858561264e565b8860008151811061190557611905614ab9565b60200260200101819052506119d8565b61192386600160f81b6128fd565b156119b35761193485858585612be7565b8960008151811061194757611947614ab9565b60209081029190910101529050806119ae577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008960008151811061198f5761198f614ab9565b60200260200101516040516119a5929190614ae5565b60405180910390a15b6119d8565b6040516308c3ee0360e11b81526001600160f81b03198716600482015260240161163e565b5050505050611a07565b604051632e5bf3f960e21b81526001600160f81b03198316600482015260240161163e565b50509392505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614611a5957604051636b31ba1560e11b815260040160405180910390fd5b82600881901b611a6d82600160f81b6128fd565b15611ac857366000611a7f868661290f565b9092509050611a8f8360006128fd565b15611aa457611a9e82826129a8565b50611ac1565b611ab283600160f81b6128fd565b1561185357611a9e8282612a69565b5050610c02565b611ad38260006128fd565b156119e257600080366000611ae88888612b96565b9350935093509350611afe85600060f81b6128fd565b15611b1557611b0f8484848461264e565b50611c0a565b611b2385600160f81b6128fd565b15611be557604080516001808252818301909252600091816020015b6060815260200190600190039081611b3f5790505090506000611b6486868686612be7565b83600081518110611b7757611b77614ab9565b6020908102919091010152905080611bde577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb7600083600081518110611bbf57611bbf614ab9565b6020026020010151604051611bd5929190614ae5565b60405180910390a15b5050611c0a565b6040516308c3ee0360e11b81526001600160f81b03198616600482015260240161163e565b50505050610c02565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc18611c436020840184614712565b6020840135611c556040860186614970565b604051611c63929190614a80565b604051908190039020611c796060870187614970565b604051611c87929190614a80565b604051908190039020608087013560a088013560c0890135611cac60e08b018b614970565b604051611cba929190614a80565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b6000611d5f612185565b5063f23a6e6160e01b95945050505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611daa5750333014155b15611dc857604051630796d94560e01b815260040160405180910390fd5b611dd181612684565b50565b6000611dde612185565b6001600160e01b031982166335a4725960e21b1480611e0d57506001600160e01b03198216630a85bd0160e11b145b80611e2857506001600160e01b03198216630271189760e51b145b80611e4357506001600160e01b031982166301ffc9a760e01b145b806108d8575050630b135d3f60e11b6001600160e01b03198216145b919050565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611ebd57507f000000000000000000000000000000000000000000000000000000000000000046145b15611ee757507f000000000000000000000000000000000000000000000000000000000000000090565b6110d3604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b856001600160a01b038916158015611fa5575080155b8015611fae5750815b15611fcc576040516312da594d60e11b815260040160405180910390fd5b8085141580611fdb5750808314155b1561200a5760405163a297991b60e01b815260048101829052602481018690526044810184905260640161163e565b81156120ff57600080516020614e3683398151915254600080516020614e168339815191529080156120fc5760005b818110156120ed57600083600201828154811061205857612058614ab9565b6000918252602080832090910154808352600180880180845260408086208151808301835281548152938101805485880190815286895293909652869055949093558051925193519194509284927facf0e8088062f44f734bbcb5223794fd8bb6f6db1c199cb6a72df119d002a71b926120db9290918252602082015260400190565b60405180910390a25050600101612039565b506120fc600283016000613cd1565b50505b60005b818110156121705761216889898381811061211f5761211f614ab9565b90506020028101906121319190614970565b89898581811061214357612143614ab9565b9050602002013588888681811061215c5761215c614ab9565b90506020020135612780565b600101612102565b5061217a89612684565b505050505050505050565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148061220c57507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316612200600080516020614e56833981519152546001600160a01b031690565b6001600160a01b031614155b15610ea65760405163703e46dd60e11b815260040160405180910390fd5b60008160418190036122c757600080516020614e16833981519152546001600160a01b03166001600160a01b03166122988686868080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250612c1892505050565b6001600160a01b0316036122b65750630b135d3f60e11b90506109b7565b506001600160e01b031990506109b7565b60608110156122e157506001600160e01b031990506109b7565b600080516020614e1683398151915260006122ff6020828789614afe565b61230891614b28565b60008181526001808501602090815260409283902083518085019094528054808552920154908301529192509015801561234457506020810151155b1561235e57506001600160e01b031993506109b792505050565b8360601480156123b257506123b28888888080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050855160208701519092509050612c42565b156123cb5750630b135d3f60e11b93506109b792505050565b8360601415801561242057506124208888888080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050855160208701519092509050612ce0565b156124395750630b135d3f60e11b93506109b792505050565b506001600160e01b031993506109b792505050565b60008061246883612463610100870187614970565b61222a565b90506374eca2c160e11b6001600160e01b031982160161248c5760009150506108d8565b5060019392505050565b8015611dd157604051600090339060001990849084818181858888f193505050503d80600081146124e3576040519150601f19603f3d011682016040523d82523d6000602084013e6124e8565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a25050565b600080516020614e3683398151915254600080516020614e168339815191529060005b818110156125a05782600101600084600201838154811061257357612573614ab9565b60009182526020808320909101548352820192909252604001812081815560019081019190915501612550565b506125af600283016000613cd1565b81546001600160a01b03191682556040517feb09d532980c3cc73dcad99b80e264204a667a54cbb7b63ec8d68dcb1c7096be90600090a15050565b6125f2612185565b6125fb82612d43565b610db48282612d9a565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610ea65760405163703e46dd60e11b815260040160405180910390fd5b60405181838237600038838387895af161266b573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b600080516020614e3683398151915254600080516020614e16833981519152901580156126b857506001600160a01b038216155b156126d65760405163c4c8547360e01b815260040160405180910390fd5b80546001600160a01b031981166001600160a01b03848116918217845560405192169182907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3505050565b60606110d37f00000000000000000000000000000000000000000000000000000000000000006000612e5c565b60606110d37f00000000000000000000000000000000000000000000000000000000000000006001612e5c565b61278a8282612f07565b6127b1576040516313c3d61f60e01b8152600481018390526024810182905260440161163e565b600084846040516020016127c6929190614a80565b6040516020818303038152906040528051906020012090508484905060000361280257604051637e25658160e11b815260040160405180910390fd5b60008181527fa2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694901602052604090208054600080516020614e1683398151915291901515806128525750600181015415155b15612873576040516361db108160e01b81526004810184905260240161163e565b604080518082018252868152602080820187815260008781526001808801845285822094518555915193820193909355600286018054918201815583529120018490555183907fd00539cb08a7c24166308150d64d603150c01baf89d3d3e4c6063d6db7c6983d906128ec908a908a908a908a90614b46565b60405180910390a250505050505050565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156129475763ba597e7e6000526004601cfd5b831561299e578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156129955763ba597e7e6000526004601cfd5b50505082612951575b5050509250929050565b606081806001600160401b038111156129c3576129c3613e99565b6040519080825280602002602001820160405280156129f657816020015b60608152602001906001900390816129e15790505b50915060005b81811015612a615736858583818110612a1757612a17614ab9565b9050602002810190612a299190614b6d565b9050612a3b610e2e6020830183614712565b848381518110612a4d57612a4d614ab9565b6020908102919091010152506001016129fc565b505092915050565b606081806001600160401b03811115612a8457612a84613e99565b604051908082528060200260200182016040528015612ab757816020015b6060815260200190600190039081612aa25790505b50915060005b81811015612a615736858583818110612ad857612ad8614ab9565b9050602002810190612aea9190614b6d565b90506000612b15612afe6020840184614712565b6020840135612b106040860186614970565b612be7565b868581518110612b2757612b27614ab9565b6020908102919091010152905080612b8c577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110612b6d57612b6d614ab9565b6020026020010151604051612b83929190614ae5565b60405180910390a15b5050600101612abd565b6000803681612ba86014828789614afe565b612bb191614b8d565b60601c9350612bc4603460148789614afe565b612bcd91614b28565b9250612bdc8560348189614afe565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080612c288686612f6a565b925092509250612c388282612fb7565b5090949350505050565b6000806000612c5086613070565b915091506000600288604051602001612c6b91815260200190565b60408051601f1981840301815290829052612c8591614bc0565b602060405180830381855afa158015612ca2573d6000803e3d6000fd5b5050506040513d601f19601f82011682018060405250810190612cc5919061472f565b9050612cd48184848989613092565b98975050505050505050565b600080612cec85613241565b9050612d3986604051602001612d0491815260200190565b60408051601f198184030181529181528301516060840151608085015160a086015160c0870151875160208901518c8c6132bf565b9695505050505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590612d7c5750333014155b15611dd157604051630796d94560e01b815260040160405180910390fd5b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612df4575060408051601f3d908101601f19168201909252612df19181019061472f565b60015b612e1c57604051634c9c8ce360e01b81526001600160a01b038316600482015260240161163e565b600080516020614e568339815191528114612e4d57604051632a87526960e21b81526004810182905260240161163e565b612e57838361345d565b505050565b606060ff8314612e7657612e6f836134b3565b90506108d8565b818054612e8290614bd2565b80601f0160208091040260200160405190810160405280929190818152602001828054612eae90614bd2565b8015612efb5780601f10612ed057610100808354040283529160200191612efb565b820191906000526020600020905b815481529060010190602001808311612ede57829003601f168201915b505050505090506108d8565b60006109b76ffffffffeffffffffffffffffffffffff60601b197fffffffff00000001000000000000000000000000fffffffffffffffffffffffc7f5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b86866134f2565b60008060008351604103612fa45760208401516040850151606086015160001a612f968882858561359d565b955095509550505050612fb0565b50508151600091506002905b9250925092565b6000826003811115612fcb57612fcb614c06565b03612fd4575050565b6001826003811115612fe857612fe8614c06565b036130065760405163f645eedf60e01b815260040160405180910390fd5b600282600381111561301a5761301a614c06565b0361303b5760405163fce698f760e01b81526004810182905260240161163e565b600382600381111561304f5761304f614c06565b03610db4576040516335e2f38360e21b81526004810182905260240161163e565b600080828060200190518101906130879190614c1c565b909590945092505050565b60006130bf60027fffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551614c60565b8411156130ce575060006112a2565b6040805160208101889052908101869052606081018590526080810184905260a0810183905260009060c00160405160208183030381529060405290506000806101006001600160a01b0316836040516131289190614bc0565b600060405180830381855afa9150503d8060008114613163576040519150601f19603f3d011682016040523d82523d6000602084013e613168565b606091505b5080519193509150151582801561317c5750805b156131a35781806020019051810190613195919061472f565b6001149450505050506112a2565b60405163a1f3128160e01b8152600481018b9052602481018a905260448101899052606481018890526084810187905273__$b8f96b288d4d0429e38b8ed50fd423070f$__9063a1f312819060a401602060405180830381865af415801561320f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132339190614953565b9a9950505050505050505050565b6132836040518060e001604052806000815260200160008152602001606081526020016000151581526020016060815260200160608152602001600081525090565b818060200190518101906132979190614cc7565b60c089015260a088015260808701521515606086015260408501526020840152825250919050565b600060258a5110806132f957506132f78a6020815181106132e2576132e2614ab9565b01602001516001600160f81b0319168a61366c565b155b1561330657506000613233565b6000886133128d6136d2565b8960405160200161332593929190614d86565b60408051601f198184030181528282019091526015825274113a3cb832911d113bb2b130baba34371733b2ba1160591b6020830152915061336781838a6138df565b61337657600092505050613233565b60006002836040516133889190614bc0565b602060405180830381855afa1580156133a5573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052508101906133c8919061472f565b9050600060028e836040516020016133e1929190614dc9565b60408051601f19818403018152908290526133fb91614bc0565b602060405180830381855afa158015613418573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525081019061343b919061472f565b905061344a818a8a8a8a613092565b9f9e505050505050505050505050505050565b6134668261398e565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a28051156134ab57612e5782826139f3565b610db4613a60565b606060006134c083613a7f565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600082158015613500575081155b8061350b5750858310155b806135165750858210155b15613523575060006112a2565b6000868061353357613533614c4a565b83840990506000878061354857613548614c4a565b888061355657613556614c4a565b888709898061356757613567614c4a565b878b8061357657613576614c4a565b898a0909089050878061358b5761358b614c4a565b86820891909114979650505050505050565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08411156135d85750600091506003905082613662565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa15801561362c573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811661365857506000925060019150829050613662565b9250600091508190505b9450945094915050565b6000600160f81b83811614613683575060006108d8565b8180156136965750600160fa1b83811614155b156136a3575060006108d8565b600160fb1b838116146136c957600f60fc1b600160fc1b8416016136c9575060006108d8565b50600192915050565b606060006136df83613aa7565b9050600081905060006002825111801561372a575081600283516137039190614aa6565b8151811061371357613713614ab9565b6020910101516001600160f81b031916603d60f81b145b1561373757506002613782565b60018251118015613779575081600183516137529190614aa6565b8151811061376257613762614ab9565b6020910101516001600160f81b031916603d60f81b145b15613782575060015b60008183516137919190614aa6565b90506000816001600160401b038111156137ad576137ad613e99565b6040519080825280601f01601f1916602001820160405280156137d7576020820181803683370190505b50905060005b828110156138d4578481815181106137f7576137f7614ab9565b01602001516001600160f81b031916602b60f81b0361384357602d60f81b82828151811061382757613827614ab9565b60200101906001600160f81b031916908160001a9053506138cc565b84818151811061385557613855614ab9565b01602001516001600160f81b031916602f60f81b0361388557605f60f81b82828151811061382757613827614ab9565b84818151811061389757613897614ab9565b602001015160f81c60f81b8282815181106138b4576138b4614ab9565b60200101906001600160f81b031916908160001a9053505b6001016137dd565b509695505050505050565b825182516000918591859190845b8281101561397f57816139008289614deb565b10613913576000955050505050506109b7565b8361391e8289614deb565b8151811061392e5761392e614ab9565b602001015160f81c60f81b6001600160f81b03191685828151811061395557613955614ab9565b01602001516001600160f81b03191614613977576000955050505050506109b7565b6001016138ed565b50600198975050505050505050565b806001600160a01b03163b6000036139c457604051634c9c8ce360e01b81526001600160a01b038216600482015260240161163e565b600080516020614e5683398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b031684604051613a109190614bc0565b600060405180830381855af49150503d8060008114613a4b576040519150601f19603f3d011682016040523d82523d6000602084013e613a50565b606091505b50915091506112a2858383613acd565b3415610ea65760405163b398979f60e01b815260040160405180910390fd5b600060ff8216601f8111156108d857604051632cd44ac360e21b815260040160405180910390fd5b60606108d882604051806060016040528060408152602001614e76604091396001613b29565b606082613ae257613add82613ca8565b6109b7565b8151158015613af957506001600160a01b0384163b155b15613b2257604051639996b31560e01b81526001600160a01b038516600482015260240161163e565b50806109b7565b60608351600003613b4957506040805160208101909152600081526109b7565b600082613b7a57600385516004613b609190614dfe565b613b6b906002614deb565b613b759190614c60565b613b9f565b600385516002613b8a9190614deb565b613b949190614c60565b613b9f906004614dfe565b90506000816001600160401b03811115613bbb57613bbb613e99565b6040519080825280601f01601f191660200182016040528015613be5576020820181803683370190505b50905060018501602082018788518901602081018051600082525b82841015613c5b576003840193508351603f8160121c168701518653600186019550603f81600c1c168701518653600186019550603f8160061c168701518653600186019550603f8116870151865350600185019450613c00565b905250508515613c9c57600388510660018114613c7f5760028114613c9257613c9a565b603d6001830353603d6002830353613c9a565b603d60018303535b505b50909695505050505050565b805115613cb85780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b5080546000825590600052602060002090810190611dd191905b80821115613cff5760008155600101613ceb565b5090565b600060208284031215613d1557600080fd5b81356001600160e01b0319811681146109b757600080fd5b60006101208284031215613d4057600080fd5b50919050565b600060208284031215613d5857600080fd5b81356001600160401b03811115613d6e57600080fd5b613d7a84828501613d2d565b949350505050565b6001600160a01b0381168114611dd157600080fd5b8035611e5f81613d82565b60008083601f840112613db457600080fd5b5081356001600160401b03811115613dcb57600080fd5b6020830191508360208260051b8501011115613de657600080fd5b9250929050565b60008060008060008060006080888a031215613e0857600080fd5b8735613e1381613d82565b965060208801356001600160401b0380821115613e2f57600080fd5b613e3b8b838c01613da2565b909850965060408a0135915080821115613e5457600080fd5b613e608b838c01613da2565b909650945060608a0135915080821115613e7957600080fd5b50613e868a828b01613da2565b989b979a50959850939692959293505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b0381118282101715613ed757613ed7613e99565b604052919050565b60006001600160401b03821115613ef857613ef8613e99565b50601f01601f191660200190565b600082601f830112613f1757600080fd5b8135613f2a613f2582613edf565b613eaf565b818152846020838601011115613f3f57600080fd5b816020850160208301376000918101602001919091529392505050565b60008060008060808587031215613f7257600080fd5b8435613f7d81613d82565b93506020850135613f8d81613d82565b92506040850135915060608501356001600160401b03811115613faf57600080fd5b613fbb87828801613f06565b91505092959194509250565b60008083601f840112613fd957600080fd5b5081356001600160401b03811115613ff057600080fd5b602083019150836020828501011115613de657600080fd5b60008060006040848603121561401d57600080fd5b8335925060208401356001600160401b0381111561403a57600080fd5b61404686828701613fc7565b9497909650939450505050565b60008060006060848603121561406857600080fd5b83356001600160401b0381111561407e57600080fd5b61408a86828701613d2d565b9660208601359650604090950135949350505050565b6020808252825182820181905260009190848201906040850190845b81811015613c9c578351835292840192918401916001016140bc565b6000602082840312156140ea57600080fd5b81356001600160c01b03811681146109b757600080fd5b60006020828403121561411357600080fd5b81356001600160401b0381111561412957600080fd5b820160c081850312156109b757600080fd5b60006020828403121561414d57600080fd5b5035919050565b6000806040838503121561416757600080fd5b823561417281613d82565b915060208301356001600160401b0381111561418d57600080fd5b61419985828601613f06565b9150509250929050565b6000602082840312156141b557600080fd5b81356001600160401b038111156141cb57600080fd5b8201606081850312156109b757600080fd5b8015158114611dd157600080fd5b8035611e5f816141dd565b600080600080600080600080600060c08a8c03121561421457600080fd5b893560ff8116811461422557600080fd5b985061423360208b01613d97565b975060408a01356001600160401b038082111561424f57600080fd5b61425b8d838e01613da2565b909950975060608c013591508082111561427457600080fd5b6142808d838e01613da2565b909750955060808c013591508082111561429957600080fd5b506142a68c828d01613da2565b90945092506142b9905060a08b016141eb565b90509295985092959850929598565b600080604083850312156142db57600080fd5b82356142e681613d82565b946020939093013593505050565b60005b8381101561430f5781810151838201526020016142f7565b50506000910152565b600081518084526143308160208601602086016142f4565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e0602084015261436560e084018a614318565b8381036040850152614377818a614318565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156143cb578351835292840192918401916001016143af565b50909c9b505050505050505050505050565b6020815260006109b76020830184614318565b600082601f83011261440157600080fd5b813560206001600160401b0382111561441c5761441c613e99565b8160051b61442b828201613eaf565b928352848101820192828101908785111561444557600080fd5b83870192505b848310156144645782358252918301919083019061444b565b979650505050505050565b600080600080600060a0868803121561448757600080fd5b853561449281613d82565b945060208601356144a281613d82565b935060408601356001600160401b03808211156144be57600080fd5b6144ca89838a016143f0565b945060608801359150808211156144e057600080fd5b6144ec89838a016143f0565b9350608088013591508082111561450257600080fd5b5061450f88828901613f06565b9150509295509295909350565b6000806000806060858703121561453257600080fd5b84356001600160401b0381111561454857600080fd5b61455487828801613fc7565b90989097506020870135966040013595509350505050565b6000806000806000806060878903121561458557600080fd5b86356001600160401b038082111561459c57600080fd5b6145a88a838b01613da2565b909850965060208901359150808211156145c157600080fd5b6145cd8a838b01613da2565b909650945060408901359150808211156145e657600080fd5b506145f389828a01613da2565b979a9699509497509295939492505050565b6000806020838503121561461857600080fd5b82356001600160401b0381111561462e57600080fd5b61463a85828601613fc7565b90969095509350505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b8281101561469d57603f1988860301845261468b858351614318565b9450928501929085019060010161466f565b5092979650505050505050565b600080600080600060a086880312156146c257600080fd5b85356146cd81613d82565b945060208601356146dd81613d82565b9350604086013592506060860135915060808601356001600160401b0381111561470657600080fd5b61450f88828901613f06565b60006020828403121561472457600080fd5b81356109b781613d82565b60006020828403121561474157600080fd5b5051919050565b6000808335601e1984360301811261475f57600080fd5b83016020810192503590506001600160401b0381111561477e57600080fd5b803603821315613de657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561486957858403601f19018a52823536899003605e190181126147f5578283fd5b88016060813561480481613d82565b6001600160a01b0316865261481b82880183614748565b828989015261482d838901828461478d565b92505050604061483f81840184614748565b93508783038289015261485383858361478d565b9d89019d975050509386019350506001016147d0565b509198975050505050505050565b602081526000823561488881613d82565b6001600160a01b03908116602084810191909152840135906148a982613d82565b80821660408501525050604083013560608301526060830135601e198436030181126148d457600080fd5b83016020810190356001600160401b038111156148f057600080fd5b8060051b360382131561490257600080fd5b60c0608085015261491760e0850182846147b6565b915050608084013560a084015261493160a0850185614748565b848303601f190160c0860152612d3983828461478d565b8051611e5f816141dd565b60006020828403121561496557600080fd5b81516109b7816141dd565b6000808335601e1984360301811261498757600080fd5b8301803591506001600160401b038211156149a157600080fd5b602001915036819003821315613de657600080fd5b6000838385526020808601955060208560051b8301018460005b87811015614a0a57848303601f190189526149eb8288614748565b6149f685828461478d565b9a86019a94505050908301906001016149d0565b5090979650505050505050565b606081526000614a2b60608301888a6149b6565b8281036020848101919091528682528791810160005b88811015614a5d57833582529282019290820190600101614a41565b508481036040860152614a718187896149b6565b9b9a5050505050505050505050565b8183823760009101908152919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156108d8576108d8614a90565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052603160045260246000fd5b8281526040602082015260006109b46040830184614318565b60008085851115614b0e57600080fd5b83861115614b1b57600080fd5b5050820193919092039150565b803560208310156108d857600019602084900360031b1b1692915050565b606081526000614b5a60608301868861478d565b6020830194909452506040015292915050565b60008235605e19833603018112614b8357600080fd5b9190910192915050565b6bffffffffffffffffffffffff198135818116916014851015612a615760149490940360031b84901b1690921692915050565b60008251614b838184602087016142f4565b600181811c90821680614be657607f821691505b602082108103613d4057634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600080600060608486031215614c3157600080fd5b8351925060208401519150604084015190509250925092565b634e487b7160e01b600052601260045260246000fd5b600082614c7d57634e487b7160e01b600052601260045260246000fd5b500490565b600082601f830112614c9357600080fd5b8151614ca1613f2582613edf565b818152846020838601011115614cb657600080fd5b613d7a8260208301602087016142f4565b600080600080600080600080610100898b031215614ce457600080fd5b88519750602089015196506040890151955060608901516001600160401b0380821115614d1057600080fd5b614d1c8c838d01614c82565b9650614d2a60808c01614948565b955060a08b0151915080821115614d4057600080fd5b614d4c8c838d01614c82565b945060c08b0151915080821115614d6257600080fd5b50614d6f8b828c01614c82565b92505060e089015190509295985092959890939650565b60008451614d988184602089016142f4565b845190830190614dac8183602089016142f4565b8451910190614dbf8183602088016142f4565b0195945050505050565b60008351614ddb8184602088016142f4565b9190910191825250602001919050565b808201808211156108d8576108d8614a90565b80820281158282048414176108d8576108d8614a9056fea2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694900a2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694902360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2fa2646970667358221220d641f685fbc825f5c1c752f10b46c0f81d9143a8b41e10871b92196f03c53fe864736f6c63430008170033",ZMe={};ie(ZMe,{abi:()=>KMe,bytecode:()=>XMe});var KMe=[],XMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212203d81846f7dee1e1b6ac5ec7facf37349f677e4fb70664eb5852e6414aa31b93064736f6c63430008170033",i2={};ie(i2,{abi:()=>JMe,bytecode:()=>QMe});var JMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getIsUsed",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegator",type:"address",internalType:"address"},{name:"_id",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"id_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"UsedId",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"id",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],QMe="0x608060405234801561001057600080fd5b50610518806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063595dce4814610083578063a145832a146100ab578063b99deb0e146100be578063d3eddcc514610067578063ed46336714610067575b600080fd5b610081610075366004610379565b50505050505050505050565b005b610096610091366004610446565b6100df565b60405190151581526020015b60405180910390f35b6100816100b9366004610379565b610116565b6100d16100cc366004610482565b61028c565b6040519081526020016100a2565b6001600160a01b03808416600090815260208181526040808320938616835292905290812061010e90836102ef565b949350505050565b85600881901b6001600160f81b03198116156101875760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101948c8c61028c565b90506101a13385836100df565b156101ee5760405162461bcd60e51b815260206004820152601a60248201527f4964456e666f726365723a69642d616c72656164792d75736564000000000000604482015260640161017e565b336000908152602081815260408083206001600160a01b03881684528252808320600885901c845290915290208054600160ff84161b179055826001600160a01b0316846001600160a01b0316336001600160a01b03167f6286af1aaf28b34723a53056e5608eabb40c823d1ce093ff371cf08c502431d68460405161027691815260200190565b60405180910390a4505050505050505050505050565b6000602082146102de5760405162461bcd60e51b815260206004820152601f60248201527f4964456e666f726365723a696e76616c69642d7465726d732d6c656e67746800604482015260640161017e565b6102e882846104c4565b9392505050565b600881901c600090815260208390526040902054600160ff83161b1615155b92915050565b60008083601f84011261032657600080fd5b50813567ffffffffffffffff81111561033e57600080fd5b60208301915083602082850101111561035657600080fd5b9250929050565b80356001600160a01b038116811461037457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561039857600080fd5b8a3567ffffffffffffffff808211156103b057600080fd5b6103bc8e838f01610314565b909c509a5060208d01359150808211156103d557600080fd5b6103e18e838f01610314565b909a50985060408d0135975060608d013591508082111561040157600080fd5b5061040e8d828e01610314565b90965094505060808b0135925061042760a08c0161035d565b915061043560c08c0161035d565b90509295989b9194979a5092959850565b60008060006060848603121561045b57600080fd5b6104648461035d565b92506104726020850161035d565b9150604084013590509250925092565b6000806020838503121561049557600080fd5b823567ffffffffffffffff8111156104ac57600080fd5b6104b885828601610314565b90969095509350505050565b8035602083101561030e57600019602084900360031b1b169291505056fea26469706673582212204a96dd3b9054d6055c3a36da342d1ecb848915fb596c41cf0571e73299243bf864736f6c63430008170033",c2={};ie(c2,{abi:()=>YMe,bytecode:()=>eOe});var YMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"callCounts",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"count",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"limit_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"IncreasedCount",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"callCount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],eOe="0x608060405234801561001057600080fd5b506104e9806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806319054d8914610067578063414c3e33146100a1578063a145832a146100bd578063b99deb0e146100d0578063d3eddcc5146100a1578063ed463367146100a1575b600080fd5b61008f6100753660046102ec565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100bb6100af36600461035f565b50505050505050505050565b005b6100bb6100cb36600461035f565b6100e3565b61008f6100de36600461042c565b610244565b85600881901b6100f48160006102b9565b6101535760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101608c8c610244565b33600090815260208181526040808320898452909152812080549293509091829061018a9061046e565b91829055509050818111156101ed5760405162461bcd60e51b815260206004820152602360248201527f4c696d6974656443616c6c73456e666f726365723a6c696d69742d657863656560448201526219195960ea1b606482015260840161014a565b604080518381526020810183905287916001600160a01b0387169133917f449da07f2c06c9d1a6b19d2454ffe749e8cf991d22f686e076a1a4844c5ff370910160405180910390a450505050505050505050505050565b6000602082146102a85760405162461bcd60e51b815260206004820152602960248201527f4c696d6974656443616c6c73456e666f726365723a696e76616c69642d7465726044820152680dae65ad8cadccee8d60bb1b606482015260840161014a565b6102b28284610495565b9392505050565b6001600160f81b0319828116908216145b92915050565b80356001600160a01b03811681146102e757600080fd5b919050565b600080604083850312156102ff57600080fd5b610308836102d0565b946020939093013593505050565b60008083601f84011261032857600080fd5b50813567ffffffffffffffff81111561034057600080fd5b60208301915083602082850101111561035857600080fd5b9250929050565b60008060008060008060008060008060e08b8d03121561037e57600080fd5b8a3567ffffffffffffffff8082111561039657600080fd5b6103a28e838f01610316565b909c509a5060208d01359150808211156103bb57600080fd5b6103c78e838f01610316565b909a50985060408d0135975060608d01359150808211156103e757600080fd5b506103f48d828e01610316565b90965094505060808b0135925061040d60a08c016102d0565b915061041b60c08c016102d0565b90509295989b9194979a5092959850565b6000806020838503121561043f57600080fd5b823567ffffffffffffffff81111561045657600080fd5b61046285828601610316565b90969095509350505050565b60006001820161048e57634e487b7160e01b600052601160045260246000fd5b5060010190565b803560208310156102ca57600019602084900360031b1b169291505056fea264697066735822122058fb87f0b8e8aa4745b9ef395d8bd725c313f876828d7be4c479f4049d6644ac64736f6c63430008170033",tOe={};ie(tOe,{abi:()=>nOe,bytecode:()=>rOe});var nOe=[{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"}],rOe="0x",aOe={};ie(aOe,{abi:()=>sOe,bytecode:()=>oOe});var sOe=[],oOe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220f3b6a0af2d4dff4702805c39f40ed768201654e38f4d05a5ef7ae0498666b77964736f6c63430008170033",d7={};ie(d7,{abi:()=>iOe,bytecode:()=>cOe});var iOe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"initialAmount_",type:"uint256",internalType:"uint256"},{name:"maxAmount_",type:"uint256",internalType:"uint256"},{name:"amountPerSecond_",type:"uint256",internalType:"uint256"},{name:"startTime_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"streamingAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"initialAmount",type:"uint256",internalType:"uint256"},{name:"maxAmount",type:"uint256",internalType:"uint256"},{name:"amountPerSecond",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint256",internalType:"uint256"},{name:"spent",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"initialAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"maxAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"amountPerSecond",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startTime",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lastUpdateTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],cOe="0x608060405234801561001057600080fd5b506109a4806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063d3eddcc51161005b578063d3eddcc514610082578063ed46336714610082578063ee73d772146100e9578063fb7d2c5b1461010a57600080fd5b8063414c3e3314610082578063a145832a1461009e578063b99deb0e146100b1575b600080fd5b61009c610090366004610765565b50505050505050505050565b005b61009c6100ac366004610765565b610177565b6100c46100bf366004610832565b61025c565b6040805194855260208501939093529183015260608201526080015b60405180910390f35b6100fc6100f7366004610874565b610338565b6040519081526020016100e0565b61014f610118366004610874565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100e0565b856101838160006103a3565b6101d45760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101e58160006103a3565b61023f5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101cb565b5061024e8c8c898989886103ba565b505050505050505050505050565b6000808080608085146102cb5760405162461bcd60e51b815260206004820152603160248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e766044820152700c2d8d2c85ae8cae4dae65ad8cadccee8d607b1b60648201526084016101cb565b6102d960206000878961089e565b6102e2916108c8565b93506102f260406020878961089e565b6102fb916108c8565b925061030b60606040878961089e565b610314916108c8565b915061032460806060878961089e565b61032d916108c8565b939692955090935050565b6001600160a01b0382166000908152602081815260408083208484528252808320815160a0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301529061039b9061062e565b949350505050565b6001600160f81b0319828116908216145b92915050565b60006103c685856106af565b50509150506000806000806103db8b8b61025c565b93509350935093508383101561044b5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e7660448201526e185b1a590b5b585e0b585b5bdd5b9d608a1b60648201526084016101cb565b600081116104b85760405162461bcd60e51b815260206004820152603460248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e76604482015273616c69642d7a65726f2d73746172742d74696d6560601b60648201526084016101cb565b336000908152602081815260408083208a8452909152812060048101549091036104f5578481556001810184905560028101839055600381018290555b6040805160a081018252825481526001830154602082015260028301549181019190915260038201546060820152600482015460808201526105369061062e565b86111561059d5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a616c6c60448201526e1bddd85b98d94b595e18d959591959608a1b60648201526084016101cb565b858160040160008282546105b191906108fc565b9091555050600481015460408051878152602081018790529081018590526060810184905260808101919091524260a082015288906001600160a01b0389169033907fa4d5df1d290378aabb8f054b2f3100faf35e2266bb7fbe661f947dfc686704ae9060c00160405180910390a4505050505050505050505050565b6000816060015142101561064457506000919050565b6000826060015142610656919061090f565b9050600081846040015161066a9190610922565b845161067691906108fc565b9050836020015181111561068b575060208301515b808460800151106106a0575060009392505050565b608084015161039b908261090f565b60008036816106c1601482878961089e565b6106ca91610939565b60601c93506106dd60346014878961089e565b6106e6916108c8565b92506106f5856034818961089e565b949793965094505050565b60008083601f84011261071257600080fd5b50813567ffffffffffffffff81111561072a57600080fd5b60208301915083602082850101111561074257600080fd5b9250929050565b80356001600160a01b038116811461076057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561078457600080fd5b8a3567ffffffffffffffff8082111561079c57600080fd5b6107a88e838f01610700565b909c509a5060208d01359150808211156107c157600080fd5b6107cd8e838f01610700565b909a50985060408d0135975060608d01359150808211156107ed57600080fd5b506107fa8d828e01610700565b90965094505060808b0135925061081360a08c01610749565b915061082160c08c01610749565b90509295989b9194979a5092959850565b6000806020838503121561084557600080fd5b823567ffffffffffffffff81111561085c57600080fd5b61086885828601610700565b90969095509350505050565b6000806040838503121561088757600080fd5b61089083610749565b946020939093013593505050565b600080858511156108ae57600080fd5b838611156108bb57600080fd5b5050820193919092039150565b803560208310156103b457600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b808201808211156103b4576103b46108e6565b818103818111156103b4576103b46108e6565b80820281158282048414176103b4576103b46108e6565b6bffffffffffffffffffffffff1981358181169160148510156109665780818660140360031b1b83161692505b50509291505056fea264697066735822122052704058a3717c34d4c81be20ba9801f9b76f6f0c65ef9abba014d246806f21f64736f6c63430008170033",uOe={};ie(uOe,{abi:()=>dOe,bytecode:()=>fOe});var dOe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],fOe="0x608060405234801561001057600080fd5b50610263806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063d3eddcc51461008b578063e38ad59014610099578063ed4633671461005c575b600080fd5b61007661006a366004610139565b50505050505050505050565b005b610076610086366004610139565b6100b4565b610076610057366004610139565b6100a260005481565b60405190815260200160405180910390f35b6000805490806100c383610206565b919050555050505050505050505050565b60008083601f8401126100e657600080fd5b50813567ffffffffffffffff8111156100fe57600080fd5b60208301915083602082850101111561011657600080fd5b9250929050565b80356001600160a01b038116811461013457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561015857600080fd5b8a3567ffffffffffffffff8082111561017057600080fd5b61017c8e838f016100d4565b909c509a5060208d013591508082111561019557600080fd5b6101a18e838f016100d4565b909a50985060408d0135975060608d01359150808211156101c157600080fd5b506101ce8d828e016100d4565b90965094505060808b013592506101e760a08c0161011d565b91506101f560c08c0161011d565b90509295989b9194979a5092959850565b60006001820161022657634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220bcf0049f14343021d3eb32b64d949a39aec074b673cc386de61163856ad518a964736f6c63430008170033",lOe={};ie(lOe,{abi:()=>pOe,bytecode:()=>mOe});var pOe=[],mOe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122074ec8ae00f245173ca026cab4a450417e87849694c5e94ec4fdf9b92eee9682e64736f6c63430008170033",bOe={};ie(bOe,{abi:()=>yOe,bytecode:()=>gOe});var yOe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"nonpayable"},{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"FailedInnerCall",inputs:[]}],gOe="0x60a060405234801561001057600080fd5b50604051610fa1380380610fa183398101604081905261002f91610040565b6001600160a01b0316608052610070565b60006020828403121561005257600080fd5b81516001600160a01b038116811461006957600080fd5b9392505050565b608051610efc6100a560003960008181609c0152818160f8015281816102010152818161030201526103f60152610efc6000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610071578063d3eddcc514610084578063ea4d3c9b14610097578063ed463367146100da575b600080fd5b61006f61006a36600461084c565b6100ed565b005b61006f61007f36600461084c565b6101c7565b61006f61009236600461084c565b6102c8565b6100be7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200160405180910390f35b61006f6100e836600461084c565b6103bc565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461013e5760405162461bcd60e51b815260040161013590610918565b60405180910390fd5b6101bb8a8a8a8a6040518060a001604052808c81526020018b8b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018a90526001600160a01b03808a166040830152881660609091015263414c3e3360e01b6104ac565b50505050505050505050565b85600881901b6001600160f81b03198116156101f55760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461023e5760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b16604083015289166060909101526350a2c19560e11b6104ac565b5050505050505050505050565b85600881901b6001600160f81b03198116156102f65760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461033f5760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b166040830152891660609091015263d3eddcc560e01b6104ac565b85600881901b6001600160f81b03198116156103ea5760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146104335760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b166040830152891660609091015263ed46336760e01b5b60006104ba86880188610af1565b905060006104ca85870187610cf3565b905081518160000151106105355760405162461bcd60e51b815260206004820152602c60248201527f4c6f676963616c4f7257726170706572456e666f726365723a696e76616c696460448201526b05acee4deeae05ad2dcc8caf60a31b6064820152608401610135565b60008282600001518151811061054d5761054d610ddb565b602002602001015190506000816000015151905080836020015151146105d15760405162461bcd60e51b815260206004820152603360248201527f4c6f676963616c4f7257726170706572456e666f726365723a696e76616c696460448201527205ac6c2eccac2e85ac2e4cee65ad8cadccee8d606b1b6064820152608401610135565b60005b818110156102bb576106a8836000015182815181106105f5576105f5610ddb565b602002602001015160000151878560000151848151811061061857610618610ddb565b6020026020010151602001518760200151858151811061063a5761063a610ddb565b60200260200101518b600001518c602001518d604001518e606001518f608001516040516024016106719796959493929190610e41565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526106b1565b506001016105d4565b60606106bf838360006106c6565b9392505050565b6060814710156106eb5760405163cd78605960e01b8152306004820152602401610135565b600080856001600160a01b031684866040516107079190610eaa565b60006040518083038185875af1925050503d8060008114610744576040519150601f19603f3d011682016040523d82523d6000602084013e610749565b606091505b5091509150610759868383610763565b9695505050505050565b60608261077857610773826107bf565b6106bf565b815115801561078f57506001600160a01b0384163b155b156107b857604051639996b31560e01b81526001600160a01b0385166004820152602401610135565b50806106bf565b8051156107cf5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b60008083601f8401126107fa57600080fd5b5081356001600160401b0381111561081157600080fd5b60208301915083602082850101111561082957600080fd5b9250929050565b80356001600160a01b038116811461084757600080fd5b919050565b60008060008060008060008060008060e08b8d03121561086b57600080fd5b8a356001600160401b038082111561088257600080fd5b61088e8e838f016107e8565b909c509a5060208d01359150808211156108a757600080fd5b6108b38e838f016107e8565b909a50985060408d0135975060608d01359150808211156108d357600080fd5b506108e08d828e016107e8565b90965094505060808b013592506108f960a08c01610830565b915061090760c08c01610830565b90509295989b9194979a5092959850565b60208082526030908201527f4c6f676963616c4f7257726170706572456e666f726365723a6f6e6c792d646560408201526f3632b3b0ba34b7b716b6b0b730b3b2b960811b606082015260800190565b60208082526025908201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6040820152642d7479706560d81b606082015260800190565b634e487b7160e01b600052604160045260246000fd5b604051602081016001600160401b03811182821017156109e5576109e56109ad565b60405290565b604051606081016001600160401b03811182821017156109e5576109e56109ad565b604080519081016001600160401b03811182821017156109e5576109e56109ad565b604051601f8201601f191681016001600160401b0381118282101715610a5757610a576109ad565b604052919050565b60006001600160401b03821115610a7857610a786109ad565b5060051b60200190565b600082601f830112610a9357600080fd5b81356001600160401b03811115610aac57610aac6109ad565b610abf601f8201601f1916602001610a2f565b818152846020838601011115610ad457600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215610b0357600080fd5b6001600160401b0382351115610b1857600080fd5b8135820183601f820112610b2b57600080fd5b610b3d610b388235610a5f565b610a2f565b81358082526020808301929160051b840101861015610b5b57600080fd5b602083015b6020843560051b850101811015610ce9576001600160401b0381351115610b8657600080fd5b6020813585018803601f19011215610b9d57600080fd5b610ba56109c3565b6001600160401b0360208335870101351115610bc057600080fd5b81358501602081013501603f81018913610bd957600080fd5b610be9610b386020830135610a5f565b602082810135808352908201919060051b83016040018b1015610c0b57600080fd5b604083015b6040602085013560051b850101811015610cd6576001600160401b0381351115610c3957600080fd5b803584016060818e03603f19011215610c5157600080fd5b610c596109eb565b610c6560408301610830565b81526001600160401b0360608301351115610c7f57600080fd5b610c928e60406060850135850101610a82565b60208201526001600160401b0360808301351115610caf57600080fd5b610cc28e60406080850135850101610a82565b604082015284525060209283019201610c10565b5083525050835260209283019201610b60565b5095945050505050565b60006020808385031215610d0657600080fd5b82356001600160401b0380821115610d1d57600080fd5b9084019060408287031215610d3157600080fd5b610d39610a0d565b823581528383013582811115610d4e57600080fd5b80840193505086601f840112610d6357600080fd5b8235610d71610b3882610a5f565b81815260059190911b84018501908581019089831115610d9057600080fd5b8686015b83811015610dc857803586811115610dac5760008081fd5b610dba8c8a838b0101610a82565b845250918701918701610d94565b5095830195909552509695505050505050565b634e487b7160e01b600052603260045260246000fd5b60005b83811015610e0c578181015183820152602001610df4565b50506000910152565b60008151808452610e2d816020860160208601610df1565b601f01601f19169290920160200192915050565b60e081526000610e5460e083018a610e15565b8281036020840152610e66818a610e15565b90508760408401528281036060840152610e808188610e15565b608084019690965250506001600160a01b0392831660a0820152911660c090910152949350505050565b60008251610ebc818460208701610df1565b919091019291505056fea2646970667358221220849f3e028a14dd0caba34e88e124f67834a95e85298a8ec49d35e542d61e676b64736f6c63430008170033",hOe={};ie(hOe,{abi:()=>xOe,bytecode:()=>wOe});var xOe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],wOe="0x608060405234801561001057600080fd5b5061028c806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780637c46d3c814610083578063a145832a1461009e578063d3eddcc5146100b1578063e38ad590146100c4578063ed46336714610067575b600080fd5b610081610075366004610162565b50505050505050505050565b005b61008c60015481565b60405190815260200160405180910390f35b6100816100ac366004610162565b6100cd565b6100816100bf366004610162565b6100ed565b61008c60005481565b6000805490806100dc8361022f565b919050555050505050505050505050565b600180549060006100dc8361022f565b60008083601f84011261010f57600080fd5b50813567ffffffffffffffff81111561012757600080fd5b60208301915083602082850101111561013f57600080fd5b9250929050565b80356001600160a01b038116811461015d57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561018157600080fd5b8a3567ffffffffffffffff8082111561019957600080fd5b6101a58e838f016100fd565b909c509a5060208d01359150808211156101be57600080fd5b6101ca8e838f016100fd565b909a50985060408d0135975060608d01359150808211156101ea57600080fd5b506101f78d828e016100fd565b90965094505060808b0135925061021060a08c01610146565b915061021e60c08c01610146565b90509295989b9194979a5092959850565b60006001820161024f57634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220fbb59fec9ec7bf6cdda251d9d498ff456d0623f22ca1f4ef5f02ab03744fc44c64736f6c63430008170033",vOe={};ie(vOe,{abi:()=>TOe,bytecode:()=>SOe});var TOe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_argsEqualityCheckEnforcer",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"argsEqualityCheckEnforcer",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"ValidatedPayment",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"recipient",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!1,internalType:"address"},{name:"redeemer",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],SOe="0x60c060405234801561001057600080fd5b506040516111b73803806111b783398101604081905261002f9161005e565b6001600160a01b039182166080521660a052610098565b6001600160a01b038116811461005b57600080fd5b50565b6000806040838503121561007157600080fd5b825161007c81610046565b602084015190925061008d81610046565b809150509250929050565b60805160a0516110e66100d16000396000818160a301526103c001526000818161011901528181610273015261065a01526110e66000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063b99deb0e1161005b578063b99deb0e146100e2578063d3eddcc514610082578063ea4d3c9b14610114578063ed4633671461013b57600080fd5b8063414c3e3314610082578063a145832a14610082578063a42ff9311461009e575b600080fd5b61009c6100903660046108d5565b50505050505050505050565b005b6100c57f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020015b60405180910390f35b6100f56100f03660046109a2565b61014e565b604080516001600160a01b0390931683526020830191909152016100d9565b6100c57f000000000000000000000000000000000000000000000000000000000000000081565b61009c6101493660046108d5565b6101fc565b600080603483146101be5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a696e76616c60448201526e0d2c85ae8cae4dae65ad8cadccee8d608b1b60648201526084015b60405180910390fd5b6101cc6014600085876109e4565b6101d591610a0e565b60601c91506101e783601481876109e4565b6101f091610a43565b60001c90509250929050565b85600881901b61020d8160006107ac565b6102675760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101b5565b50336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146102fb5760405162461bcd60e51b815260206004820152603260248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a6f6e6c792d6044820152713232b632b3b0ba34b7b716b6b0b730b3b2b960711b60648201526084016101b5565b6000806103088d8d61014e565b9092509050600061031b8b8d018d610c88565b905060008151116103945760405162461bcd60e51b815260206004820152603f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a696e76616c60448201527f69642d616c6c6f77616e63652d64656c65676174696f6e732d6c656e6774680060648201526084016101b5565b6000816000815181106103a9576103a9610dcd565b6020026020010151606001515111801561043057507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316816000815181106103fb576103fb610dcd565b60200260200101516060015160008151811061041957610419610dcd565b6020026020010151600001516001600160a01b0316145b6104a25760405162461bcd60e51b815260206004820152603c60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a6d6973736960448201527f6e672d61726773457175616c697479436865636b456e666f726365720000000060648201526084016101b5565b86856040516020016104d092919091825260601b6bffffffffffffffffffffffff1916602082015260340190565b604051602081830303815290604052816000815181106104f2576104f2610dcd565b60200260200101516060015160008151811061051057610510610dcd565b602090810291909101015160409081019190915280516001808252818301909252600091816020015b6060815260200190600190039081610539579050509050816040516020016105619190610e33565b6040516020818303038152906040528160008151811061058357610583610dcd565b6020908102919091010152604080516001808252818301909252600091816020015b60608152602001906001900390816105a55790505090506105d68585604051806020016040528060008152506107c3565b816000815181106105e9576105e9610dcd565b60209081029190910101526040805160018082528183019092526000918160200160208202803683370190505090506106206107f2565b8160008151811061063357610633610dcd565b602090810291909101015260405163cef6d20960e01b81526001600160a01b0380881631917f00000000000000000000000000000000000000000000000000000000000000009091169063cef6d2099061069590879086908890600401610fbf565b600060405180830381600087803b1580156106af57600080fd5b505af11580156106c3573d6000803e3d6000fd5b505050506001600160a01b038716316106dc8783611029565b8110156107435760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a7061796d6560448201526e1b9d0b5b9bdd0b5c9958d95a5d9959608a1b60648201526084016101b5565b604080516001600160a01b038d811682528c81166020830152918101899052908916908d9033907fac266e0d9b66169d0dc4479d531985bcec62dfd9d7992d0f6865afdbb7baa5e29060600160405180910390a450505050505050505050505050505050505050565b6001600160f81b0319828116908216145b92915050565b60608383836040516020016107da9392919061104a565b60405160208183030381529060405290509392505050565b600061080081808080610805565b905090565b604080516001600160f81b03198087166020830152851660218201526000602282018190526001600160e01b03198516602683015269ffffffffffffffffffff198416602a830152910160405160208183030381529060405261086790611089565b95945050505050565b60008083601f84011261088257600080fd5b50813567ffffffffffffffff81111561089a57600080fd5b6020830191508360208285010111156108b257600080fd5b9250929050565b80356001600160a01b03811681146108d057600080fd5b919050565b60008060008060008060008060008060e08b8d0312156108f457600080fd5b8a3567ffffffffffffffff8082111561090c57600080fd5b6109188e838f01610870565b909c509a5060208d013591508082111561093157600080fd5b61093d8e838f01610870565b909a50985060408d0135975060608d013591508082111561095d57600080fd5b5061096a8d828e01610870565b90965094505060808b0135925061098360a08c016108b9565b915061099160c08c016108b9565b90509295989b9194979a5092959850565b600080602083850312156109b557600080fd5b823567ffffffffffffffff8111156109cc57600080fd5b6109d885828601610870565b90969095509350505050565b600080858511156109f457600080fd5b83861115610a0157600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610a3b5780818660140360031b1b83161692505b505092915050565b803560208310156107bd57600019602084900360031b1b1692915050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff81118282101715610a9a57610a9a610a61565b60405290565b60405160c0810167ffffffffffffffff81118282101715610a9a57610a9a610a61565b604051601f8201601f1916810167ffffffffffffffff81118282101715610aec57610aec610a61565b604052919050565b600067ffffffffffffffff821115610b0e57610b0e610a61565b5060051b60200190565b600082601f830112610b2957600080fd5b813567ffffffffffffffff811115610b4357610b43610a61565b610b56601f8201601f1916602001610ac3565b818152846020838601011115610b6b57600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f830112610b9957600080fd5b81356020610bae610ba983610af4565b610ac3565b82815260059290921b84018101918181019086841115610bcd57600080fd5b8286015b84811015610c7d57803567ffffffffffffffff80821115610bf25760008081fd5b908801906060828b03601f1901811315610c0c5760008081fd5b610c14610a77565b610c1f8885016108b9565b815260408085013584811115610c355760008081fd5b610c438e8b83890101610b18565b838b015250918401359183831115610c5b5760008081fd5b610c698d8a85880101610b18565b908201528652505050918301918301610bd1565b509695505050505050565b60006020808385031215610c9b57600080fd5b823567ffffffffffffffff80821115610cb357600080fd5b818501915085601f830112610cc757600080fd5b8135610cd5610ba982610af4565b81815260059190911b83018401908481019088831115610cf457600080fd5b8585015b83811015610dc057803585811115610d0f57600080fd5b860160c0818c03601f19011215610d265760008081fd5b610d2e610aa0565b610d398983016108b9565b81526040610d488184016108b9565b8a83015260608084013582840152608091508184013589811115610d6c5760008081fd5b610d7a8f8d83880101610b88565b82850152505060a0808401358284015260c0840135915088821115610d9f5760008081fd5b610dad8e8c84870101610b18565b9083015250845250918601918601610cf8565b5098975050505050505050565b634e487b7160e01b600052603260045260246000fd5b60005b83811015610dfe578181015183820152602001610de6565b50506000910152565b60008151808452610e1f816020860160208601610de3565b601f01601f19169290920160200192915050565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b82811015610f5857603f19888603018452815160c0860160018060a01b038083511688528089840151168989015260408301516040890152606083015160c060608a015282815180855260e08b01915060e08160051b8c010194508b8301925060005b81811015610f1c5760df198c870301835283518581511687528d81015160608f890152610eed6060890182610e07565b9050604082015191508781036040890152610f088183610e07565b97505050928c0192918c0191600101610ebd565b50505050506080820151608088015260a0820151915086810360a0880152610f448183610e07565b965050509285019290850190600101610e5a565b5092979650505050505050565b60008282518085526020808601955060208260051b8401016020860160005b84811015610fb257601f19868403018952610fa0838351610e07565b98840198925090830190600101610f84565b5090979650505050505050565b606081526000610fd26060830186610f65565b82810360208481019190915285518083528682019282019060005b8181101561100957845183529383019391830191600101610fed565b5050848103604086015261101d8187610f65565b98975050505050505050565b808201808211156107bd57634e487b7160e01b600052601160045260246000fd5b6bffffffffffffffffffffffff198460601b1681528260148201526000825161107a816034850160208701610de3565b91909101603401949350505050565b805160208083015191908110156110aa576000198160200360031b1b821691505b5091905056fea264697066735822122085080b51672c95cef1f0b772853b91117f909ad9d873a40d2cad7c2b29f5117c64736f6c63430008170033",zP={};ie(zP,{abi:()=>AOe,bytecode:()=>_Oe});var AOe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],_Oe="0x608060405234801561001057600080fd5b50610b57806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063a145832a1161005b578063a145832a1461013e578063b99deb0e14610151578063d3eddcc514610082578063ed4633671461008257600080fd5b8063414c3e33146100825780636a9843f61461009e5780637b91dc78146100d1575b600080fd5b61009c610090366004610893565b50505050505050505050565b005b6100b16100ac366004610960565b61017f565b604080519384529115156020840152908201526060015b60405180910390f35b6101166100df3660046109ba565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100c8565b61009c61014c366004610893565b610255565b61016461015f3660046109e4565b61033a565b604080519384526020840192909252908201526060016100c8565b6001600160a01b0383166000908152602081815260408083208784528252808320815160a0810183528154815260018201549381019390935260028101549183018290526003810154606084015260040154608083015282918291156101f4576101e8816103f0565b9350935093505061024b565b6000806000610203898961033a565b92509250925060006040518060a00160405280858152602001848152602001838152602001600081526020016000815250905061023f816103f0565b97509750975050505050505b9450945094915050565b85610261816000610484565b6102b25760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6102c3816000610484565b61031d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016102a9565b5061032c8c8c8989898861049b565b505050505050505050505050565b600080806060841461039b5760405162461bcd60e51b81526020600482015260366024820152600080516020610b028339815191526044820152750e474d2dcecc2d8d2c85ae8cae4dae65ad8cadccee8d60531b60648201526084016102a9565b6103a9602060008688610a26565b6103b291610a50565b92506103c2604060208688610a26565b6103cb91610a50565b91506103db606060408688610a26565b6103e491610a50565b60001c90509250925092565b6000806000836040015142101561040f5750600091508190508061047d565b602084015160408501516104239042610a84565b61042d9190610a97565b610438906001610ab9565b905080846060015114159150600082610455578460800151610458565b60005b90508085600001511161046c576000610479565b8451610479908290610a84565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b60006104a785856107dd565b505091505060008060006104bb8a8a61033a565b336000908152602081815260408083208c84529091528120600281015494975092955090935090919003610684576000821161054d5760405162461bcd60e51b81526020600482015260396024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d73746172742d646174650000000000000060648201526084016102a9565b600084116105b15760405162461bcd60e51b815260206004820152603c6024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d706572696f642d616d6f756e740000000060648201526084016102a9565b600083116106155760405162461bcd60e51b815260206004820152603e6024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d706572696f642d6475726174696f6e000060648201526084016102a9565b814210156106725760405162461bcd60e51b81526020600482015260366024820152600080516020610b028339815191526044820152751c8e9d1c985b9cd9995c8b5b9bdd0b5cdd185c9d195960521b60648201526084016102a9565b83815560018101839055600281018290555b60008060006106cf846040518060a0016040529081600082015481526020016001820154815260200160028201548152602001600382015481526020016004820154815250506103f0565b925092509250828811156107395760405162461bcd60e51b815260206004820152603a6024820152600080516020610b0283398151915260448201527f723a7472616e736665722d616d6f756e742d657863656564656400000000000060648201526084016102a9565b811561074e5760038401819055600060048501555b878460040160008282546107629190610ab9565b909155505060028401546004850154604080518a8152602081018a90529081019290925260608201524260808201528a906001600160a01b038b169033907f22e1bbd8bc0380d336958afc37cd8cb128d6c43891ed276162c30e8df467734d9060a00160405180910390a45050505050505050505050505050565b60008036816107ef6014828789610a26565b6107f891610acc565b60601c935061080b603460148789610a26565b61081491610a50565b92506108238560348189610a26565b949793965094505050565b60008083601f84011261084057600080fd5b50813567ffffffffffffffff81111561085857600080fd5b60208301915083602082850101111561087057600080fd5b9250929050565b80356001600160a01b038116811461088e57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156108b257600080fd5b8a3567ffffffffffffffff808211156108ca57600080fd5b6108d68e838f0161082e565b909c509a5060208d01359150808211156108ef57600080fd5b6108fb8e838f0161082e565b909a50985060408d0135975060608d013591508082111561091b57600080fd5b506109288d828e0161082e565b90965094505060808b0135925061094160a08c01610877565b915061094f60c08c01610877565b90509295989b9194979a5092959850565b6000806000806060858703121561097657600080fd5b8435935061098660208601610877565b9250604085013567ffffffffffffffff8111156109a257600080fd5b6109ae8782880161082e565b95989497509550505050565b600080604083850312156109cd57600080fd5b6109d683610877565b946020939093013593505050565b600080602083850312156109f757600080fd5b823567ffffffffffffffff811115610a0e57600080fd5b610a1a8582860161082e565b90969095509350505050565b60008085851115610a3657600080fd5b83861115610a4357600080fd5b5050820193919092039150565b8035602083101561049557600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561049557610495610a6e565b600082610ab457634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561049557610495610a6e565b6bffffffffffffffffffffffff198135818116916014851015610af95780818660140360031b1b83161692505b50509291505056fe4e6174697665546f6b656e506572696f645472616e73666572456e666f726365a2646970667358221220ddbfb33bfc3119eae666e9c14c2e492d38eed690114f0ed176d6eb49d0bc21a364736f6c63430008170033",EOe={};ie(EOe,{abi:()=>kOe,bytecode:()=>IOe});var kOe=[{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"nonceSequenceNumber",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],IOe="0x",U6={};ie(U6,{abi:()=>COe,bytecode:()=>POe});var COe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"currentNonce",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"nonce_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"incrementNonce",inputs:[{name:"_delegationManager",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"UsedNonce",inputs:[{name:"delegationManager",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],POe="0x608060405234801561001057600080fd5b5061050e806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063b99deb0e1161005b578063b99deb0e146100eb578063d3eddcc5146100bc578063ed463367146100bc578063f5743c4c146100fe57600080fd5b80632bd4ed2114610082578063414c3e33146100bc578063a145832a146100d8575b600080fd5b6100aa610090366004610314565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100d66100ca366004610390565b50505050505050505050565b005b6100d66100e6366004610390565b610111565b6100aa6100f936600461045d565b61020f565b6100d661010c36600461049f565b61027d565b85600881901b6101228160006102e1565b6101815760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b50600061018e8c8c61020f565b336000908152602081815260408083206001600160a01b038916845290915290205490915081146102015760405162461bcd60e51b815260206004820152601b60248201527f4e6f6e6365456e666f726365723a696e76616c69642d6e6f6e636500000000006044820152606401610178565b505050505050505050505050565b60006020821461026c5760405162461bcd60e51b815260206004820152602260248201527f4e6f6e6365456e666f726365723a696e76616c69642d7465726d732d6c656e676044820152610e8d60f31b6064820152608401610178565b61027682846104ba565b9392505050565b6001600160a01b038116600081815260208181526040808320338085529083529281902080546001810190915590518181529093917fe02d340254c92bc3ad96f0fceb790db939e11c669c1f4c8a549d248f17130b33910160405180910390a35050565b6001600160f81b0319828116908216145b92915050565b80356001600160a01b038116811461030f57600080fd5b919050565b6000806040838503121561032757600080fd5b610330836102f8565b915061033e602084016102f8565b90509250929050565b60008083601f84011261035957600080fd5b50813567ffffffffffffffff81111561037157600080fd5b60208301915083602082850101111561038957600080fd5b9250929050565b60008060008060008060008060008060e08b8d0312156103af57600080fd5b8a3567ffffffffffffffff808211156103c757600080fd5b6103d38e838f01610347565b909c509a5060208d01359150808211156103ec57600080fd5b6103f88e838f01610347565b909a50985060408d0135975060608d013591508082111561041857600080fd5b506104258d828e01610347565b90965094505060808b0135925061043e60a08c016102f8565b915061044c60c08c016102f8565b90509295989b9194979a5092959850565b6000806020838503121561047057600080fd5b823567ffffffffffffffff81111561048757600080fd5b61049385828601610347565b90969095509350505050565b6000602082840312156104b157600080fd5b610276826102f8565b803560208310156102f257600019602084900360031b1b169291505056fea26469706673582212205626dd2329dbdfa25ba379781a5be6c8fc6ae0eb3a22e9122f5d8207bb7de74564736f6c63430008170033",jP={};ie(jP,{abi:()=>ROe,bytecode:()=>$Oe});var ROe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAllTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"tokens_",type:"address[]",internalType:"address[]"},{name:"periodAmounts_",type:"uint256[]",internalType:"uint256[]"},{name:"periodDurations_",type:"uint256[]",internalType:"uint256[]"},{name:"startDates_",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"pure"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_tokenIndex",type:"uint256",internalType:"uint256"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],$Oe="0x608060405234801561001057600080fd5b5061148b806100206000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063a145832a11610066578063a145832a1461014b578063d3eddcc5146100c4578063da8081c21461015e578063ed463367146100c4578063f5c7d74e146101c357600080fd5b806319de6ebc14610098578063414c3e33146100c4578063733c0d80146100e05780638572e3191461011d575b600080fd5b6100ab6100a6366004610f6f565b6101e4565b6040516100bb9493929190610fed565b60405180910390f35b6100de6100d2366004611094565b50505050505050505050565b005b6100f36100ee366004611161565b6104b6565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100bb565b61013061012b3660046111ad565b61062a565b604080519384529115156020840152908201526060016100bb565b6100de610159366004611094565b6106fc565b61019b61016c366004611237565b600060208190529081526040902080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100bb565b6101d66101d1366004611250565b6107de565b6040519081526020016100bb565b6060808080846101f56074826112a8565b15801561020157508015155b6102265760405162461bcd60e51b815260040161021d906112bc565b60405180910390fd5b600061023360748361130d565b90508067ffffffffffffffff81111561024e5761024e611321565b604051908082528060200260200182016040528015610277578160200160208202803683370190505b5095508067ffffffffffffffff81111561029357610293611321565b6040519080825280602002602001820160405280156102bc578160200160208202803683370190505b5094508067ffffffffffffffff8111156102d8576102d8611321565b604051908082528060200260200182016040528015610301578160200160208202803683370190505b5093508067ffffffffffffffff81111561031d5761031d611321565b604051908082528060200260200182016040528015610346578160200160208202803683370190505b50925060005b818110156104aa576000610361826074611337565b905089818a61037182601461134e565b9261037e93929190611361565b6103879161138b565b60601c88838151811061039c5761039c6113c0565b6001600160a01b039092166020928302919091019091015289896103c183601461134e565b906103cd84603461134e565b926103da93929190611361565b6103e3916113d6565b60001c8783815181106103f8576103f86113c0565b6020908102919091010152898961041083603461134e565b9061041c84605461134e565b9261042993929190611361565b610432916113d6565b60001c868381518110610447576104476113c0565b6020908102919091010152898961045f83605461134e565b9061046b84607461134e565b9261047893929190611361565b610481916113d6565b60001c858381518110610496576104966113c0565b60209081029190910101525060010161034c565b50505092959194509250565b60008080808580158015906104d357506104d16074826112a8565b155b6104ef5760405162461bcd60e51b815260040161021d906112bc565b60006104fc60748361130d565b90508087106105505760405162461bcd60e51b815260206004820152602c602482015260008051602061143683398151915260448201526b05ae8ded6cadc5ad2dcc8caf60a31b606482015260840161021d565b600061055d886074611337565b905089818a61056d82601461134e565b9261057a93929190611361565b6105839161138b565b60601c9650898961059583601461134e565b906105a184603461134e565b926105ae93929190611361565b6105b7916113d6565b955089896105c683603461134e565b906105d284605461134e565b926105df93929190611361565b6105e8916113d6565b945089896105f783605461134e565b9061060384607461134e565b9261061093929190611361565b610619916113d6565b60001c935050505093509350935093565b60008060008060008060006106438d8d8d8d8d8d6107f5565b60008481526020818152604091829020825160a081018452815481526001820154928101929092526002810154928201839052600381015460608301526004015460808201529498509296509094509250156106b2576106a28161083c565b97509750975050505050506106f0565b6040805160a0810182528581526020810185905290810183905260006060820181905260808201526106e38161083c565b9850985098505050505050505b96509650969350505050565b856107088160006108d0565b6107545760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d74797065604482015260640161021d565b86600881901b6107658160006108d0565b6107bf5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161021d565b506107d08c8c8c8c8b8b8b8a6108e7565b505050505050505050505050565b60006107ec85858585610e8b565b95945050505050565b60008080808061080786880188611237565b905060006108168a8a846104b6565b91975095509350905061082b8b828e85610e8b565b955050509650965096509692505050565b6000806000836040015142101561085b575060009150819050806108c9565b6020840151604085015161086f90426113f4565b610879919061130d565b61088490600161134e565b9050808460600151141591506000826108a15784608001516108a4565b60005b9050808560000151116108b85760006108c5565b84516108c59082906113f4565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b6000806000803660006108fa8a8a610ed5565b935093509350935081819050604403610a0657821561096f5760405162461bcd60e51b8152602060048201526038602482015260008051602061143683398151915260448201527f2d76616c75652d696e2d65726332302d7472616e736665720000000000000000606482015260840161021d565b63a9059cbb60e01b610985600460008486611361565b61098e91611407565b6001600160e01b031916146109e35760405162461bcd60e51b815260206004820152602760248201526000805160206114368339815191526044820152660b5b595d1a1bd960ca1b606482015260840161021d565b92935083926109f6604460248385611361565b6109ff916113d6565b9550610acf565b6000819003610a7f5760008311610a735760405162461bcd60e51b815260206004820152603e602482015260008051602061143683398151915260448201527f2d7a65726f2d76616c75652d696e2d6e61746976652d7472616e736665720000606482015260840161021d565b60009450829550610acf565b60405162461bcd60e51b8152602060048201526031602482015260008051602061143683398151915260448201527005ac6c2d8d85ac8c2e8c25ad8cadccee8d607b1b606482015260840161021d565b5060009250610ae3915050888a018a611237565b9050600080600080610af68f8f876104b6565b9350935093509350836001600160a01b0316866001600160a01b031614610b6f5760405162461bcd60e51b815260206004820152602760248201527f4d756c7469546f6b656e506572696f64456e666f726365723a746f6b656e2d6d6044820152660d2e6dac2e8c6d60cb1b606482015260840161021d565b6000610b7d33888c89610e8b565b60008181526020819052604081206002810154929350919003610d1f5760008311610bf15760405162461bcd60e51b8152602060048201526030602482015260008051602061143683398151915260448201526f2d7a65726f2d73746172742d6461746560801b606482015260840161021d565b60008511610c4b5760405162461bcd60e51b815260206004820152603360248201526000805160206114368339815191526044820152720b5e995c9bcb5c195c9a5bd90b585b5bdd5b9d606a1b606482015260840161021d565b60008411610ca75760405162461bcd60e51b8152602060048201526035602482015260008051602061143683398151915260448201527416bd32b93796b832b934b7b216b23ab930ba34b7b760591b606482015260840161021d565b82421015610d0d5760405162461bcd60e51b815260206004820152602d60248201527f4d756c7469546f6b656e506572696f64456e666f726365723a7472616e73666560448201526c1c8b5b9bdd0b5cdd185c9d1959609a1b606482015260840161021d565b84815560018101849055600281018390555b6000806000610d6a846040518060a00160405290816000820154815260200160018201548152602001600282015481526020016003820154815260200160048201548152505061083c565b925092509250828c1115610dda5760405162461bcd60e51b815260206004820152603160248201527f4d756c7469546f6b656e506572696f64456e666f726365723a7472616e7366656044820152701c8b585b5bdd5b9d0b595e18d959591959607a1b606482015260840161021d565b8115610def5760038401819055600060048501555b8b846004016000828254610e03919061134e565b90915550506004840154604080516001600160a01b038e81168252602082018c90529181018a90526060810189905260808101929092524260a08301528f91908f169033907fb2a345c7f80b4be490c405f4a994faf85384dd05da7d70be0801dc31a8c253af9060c00160405180910390a45050505050505050505050505050505050505050565b604080516001600160a01b03958616602080830191909152949095168582015260608501929092526080808501919091528151808503909101815260a09093019052815191012090565b6000803681610ee76014828789611361565b610ef09161138b565b60601c9350610f03603460148789611361565b610f0c916113d6565b9250610f1b8560348189611361565b949793965094505050565b60008083601f840112610f3857600080fd5b50813567ffffffffffffffff811115610f5057600080fd5b602083019150836020828501011115610f6857600080fd5b9250929050565b60008060208385031215610f8257600080fd5b823567ffffffffffffffff811115610f9957600080fd5b610fa585828601610f26565b90969095509350505050565b60008151808452602080850194506020840160005b83811015610fe257815187529582019590820190600101610fc6565b509495945050505050565b6080808252855190820181905260009060209060a0840190828901845b8281101561102f5781516001600160a01b03168452928401929084019060010161100a565b50505083810360208501526110448188610fb1565b91505082810360408401526110598186610fb1565b9050828103606084015261106d8185610fb1565b979650505050505050565b80356001600160a01b038116811461108f57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156110b357600080fd5b8a3567ffffffffffffffff808211156110cb57600080fd5b6110d78e838f01610f26565b909c509a5060208d01359150808211156110f057600080fd5b6110fc8e838f01610f26565b909a50985060408d0135975060608d013591508082111561111c57600080fd5b506111298d828e01610f26565b90965094505060808b0135925061114260a08c01611078565b915061115060c08c01611078565b90509295989b9194979a5092959850565b60008060006040848603121561117657600080fd5b833567ffffffffffffffff81111561118d57600080fd5b61119986828701610f26565b909790965060209590950135949350505050565b600080600080600080608087890312156111c657600080fd5b863595506111d660208801611078565b9450604087013567ffffffffffffffff808211156111f357600080fd5b6111ff8a838b01610f26565b9096509450606089013591508082111561121857600080fd5b5061122589828a01610f26565b979a9699509497509295939492505050565b60006020828403121561124957600080fd5b5035919050565b6000806000806080858703121561126657600080fd5b61126f85611078565b935061127d60208601611078565b93969395505050506040820135916060013590565b634e487b7160e01b600052601260045260246000fd5b6000826112b7576112b7611292565b500690565b6020808252602d9082015260008051602061143683398151915260408201526c05ae8cae4dae65ad8cadccee8d609b1b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b60008261131c5761131c611292565b500490565b634e487b7160e01b600052604160045260246000fd5b80820281158282048414176108e1576108e16112f7565b808201808211156108e1576108e16112f7565b6000808585111561137157600080fd5b8386111561137e57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156113b85780818660140360031b1b83161692505b505092915050565b634e487b7160e01b600052603260045260246000fd5b803560208310156108e157600019602084900360031b1b1692915050565b818103818111156108e1576108e16112f7565b6001600160e01b031981358181169160048510156113b85760049490940360031b84901b169092169291505056fe4d756c7469546f6b656e506572696f64456e666f726365723a696e76616c6964a264697066735822122024c53d9970ff849bf9025e90cc5d34bfc99b0f5ee6a61ef6c48512264a9b0a3164736f6c63430008170033",DOe={};ie(DOe,{abi:()=>MOe,bytecode:()=>OOe});var MOe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],OOe="0x608060405234801561001057600080fd5b50610824806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461016d578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c5578063a145832a146100e1578063a79a0db5146100f4575b600080fd5b6100b061009b366004610568565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d33660046105e6565b50505050505050505050565b005b6100df6100ef3660046105e6565b610180565b6101076101023660046106b3565b6102c6565b6040519081526020016100bc565b610107610123366004610568565b60006020819052908152604090205481565b6101486101433660046106dd565b6102db565b6040805193151584526001600160a01b039092166020840152908201526060016100bc565b6100df61017b3660046105e6565b6103ad565b85600881901b6001600160f81b03198116156101f15760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101fe338661052b565b9050600061020c8d8d6102db565b5060008481526001602052604090205490925060ff161590506102885760405162461bcd60e51b815260206004820152602e60248201527f4e617469766542616c616e63654368616e6765456e666f726365723a656e666f60448201526d1c98d95c8b5a5ccb5b1bd8dad95960921b60648201526084016101e8565b6000918252600160208181526040808520805460ff19169093179092558390529091206001600160a01b039091163190555050505050505050505050565b60006102d2838361052b565b90505b92915050565b60008080603584146103485760405162461bcd60e51b815260206004820152603060248201527f4e617469766542616c616e63654368616e6765456e666f726365723a696e766160448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b60648201526084016101e8565b8484600081811061035b5761035b61071f565b909101356001600160f81b0319161515935061037d9050601560018688610735565b6103869161075f565b60601c91506103988460158188610735565b6103a191610794565b60001c90509250925092565b60008060006103bc8d8d6102db565b92509250925060006103ce338861052b565b6000818152600160205260409020805460ff1916905590508315610482576000818152602081905260409020546104069083906107c8565b836001600160a01b031631101561047d5760405162461bcd60e51b815260206004820152603560248201527f4e617469766542616c616e63654368616e6765456e666f726365723a65786365604482015274656465642d62616c616e63652d646563726561736560581b60648201526084016101e8565b61051b565b60008181526020819052604090205461049c9083906107db565b836001600160a01b031631101561051b5760405162461bcd60e51b815260206004820152603960248201527f4e617469766542616c616e63654368616e6765456e666f726365723a696e737560448201527f6666696369656e742d62616c616e63652d696e6372656173650000000000000060648201526084016101e8565b5050505050505050505050505050565b604080516001600160a01b038416602082015290810182905260009060600160405160208183030381529060405280519060200120905092915050565b60006020828403121561057a57600080fd5b5035919050565b60008083601f84011261059357600080fd5b50813567ffffffffffffffff8111156105ab57600080fd5b6020830191508360208285010111156105c357600080fd5b9250929050565b80356001600160a01b03811681146105e157600080fd5b919050565b60008060008060008060008060008060e08b8d03121561060557600080fd5b8a3567ffffffffffffffff8082111561061d57600080fd5b6106298e838f01610581565b909c509a5060208d013591508082111561064257600080fd5b61064e8e838f01610581565b909a50985060408d0135975060608d013591508082111561066e57600080fd5b5061067b8d828e01610581565b90965094505060808b0135925061069460a08c016105ca565b91506106a260c08c016105ca565b90509295989b9194979a5092959850565b600080604083850312156106c657600080fd5b6106cf836105ca565b946020939093013593505050565b600080602083850312156106f057600080fd5b823567ffffffffffffffff81111561070757600080fd5b61071385828601610581565b90969095509350505050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561074557600080fd5b8386111561075257600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff19813581811691601485101561078c5780818660140360031b1b83161692505b505092915050565b803560208310156102d557600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156102d5576102d56107b2565b808201808211156102d5576102d56107b256fea2646970667358221220b33a5c188759ed62e28774f4ab95ff422856e7b7a36f7de87da5f14ed435ece964736f6c63430008170033",NOe={};ie(NOe,{abi:()=>LOe,bytecode:()=>BOe});var LOe=[{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]}],BOe="0x",UOe={};ie(UOe,{abi:()=>HOe,bytecode:()=>FOe});var HOe=[],FOe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220709bae2a6201f60c7dd916d94e8aed6e76d68870a93207bbf209cbf2ce9581c664736f6c63430008170033",zOe={};ie(zOe,{abi:()=>jOe,bytecode:()=>qOe});var jOe=[{type:"function",name:"onERC721Received",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"}],qOe="0x",GOe={};ie(GOe,{abi:()=>VOe,bytecode:()=>WOe});var VOe=[{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]}],WOe="0x",os={};ie(os,{abi:()=>ZOe,bytecode:()=>KOe});var ZOe=[{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]}],KOe="0x",XOe={};ie(XOe,{abi:()=>JOe,bytecode:()=>QOe});var JOe=[{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],QOe="0x",qP={};ie(qP,{abi:()=>YOe,bytecode:()=>eNe});var YOe=[{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]}],eNe="0x",u2={};ie(u2,{abi:()=>tNe,bytecode:()=>nNe});var tNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowance_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"spentMap",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],nNe="0x608060405234801561001057600080fd5b506105cd806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780639dd5d9ab14610083578063a145832a146100bd578063b99deb0e146100d0578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046103a7565b50505050505050505050565b005b6100ab610091366004610474565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100816100cb3660046103a7565b6100e3565b6100ab6100de36600461049e565b6102c5565b856100ef8160006102da565b6101405760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101518160006102da565b6101ab5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610137565b5060006101b88d8d6102c5565b905060006101c689896102f1565b5050336000908152602081815260408083208c845290915281208054929450909250839183906101f79084906104e0565b92505081905590508281111561026c5760405162461bcd60e51b815260206004820152603460248201527f4e6174697665546f6b656e5472616e73666572416d6f756e74456e666f7263656044820152731c8e985b1b1bddd85b98d94b595e18d95959195960621b6064820152608401610137565b604080518481526020810183905289916001600160a01b0389169133917fc026e493323d526061a052b5dd562495120e2f648797a48be61966d3a6beec8d910160405180910390a4505050505050505050505050505050565b60006102d382840184610501565b9392505050565b6001600160f81b0319828116908216145b92915050565b6000803681610303601482878961051a565b61030c91610544565b60601c935061031f60346014878961051a565b61032891610579565b9250610337856034818961051a565b949793965094505050565b60008083601f84011261035457600080fd5b50813567ffffffffffffffff81111561036c57600080fd5b60208301915083602082850101111561038457600080fd5b9250929050565b80356001600160a01b03811681146103a257600080fd5b919050565b60008060008060008060008060008060e08b8d0312156103c657600080fd5b8a3567ffffffffffffffff808211156103de57600080fd5b6103ea8e838f01610342565b909c509a5060208d013591508082111561040357600080fd5b61040f8e838f01610342565b909a50985060408d0135975060608d013591508082111561042f57600080fd5b5061043c8d828e01610342565b90965094505060808b0135925061045560a08c0161038b565b915061046360c08c0161038b565b90509295989b9194979a5092959850565b6000806040838503121561048757600080fd5b6104908361038b565b946020939093013593505050565b600080602083850312156104b157600080fd5b823567ffffffffffffffff8111156104c857600080fd5b6104d485828601610342565b90969095509350505050565b808201808211156102eb57634e487b7160e01b600052601160045260246000fd5b60006020828403121561051357600080fd5b5035919050565b6000808585111561052a57600080fd5b8386111561053757600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105715780818660140360031b1b83161692505b505092915050565b803560208310156102eb57600019602084900360031b1b169291505056fea2646970667358221220242bcbb545bdb30c0cc3054c27d7e861e0e03c97037d12e0a3a635b723f4c96064736f6c63430008170033",rNe={};ie(rNe,{abi:()=>aNe,bytecode:()=>sNe});var aNe=[],sNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220d7aca7990ce9da4d7914667722de1ec02253803fb163d86029328ca9bb504b0164736f6c63430008170033",oNe={};ie(oNe,{abi:()=>iNe,bytecode:()=>cNe});var iNe=[{type:"fallback",stateMutability:"nonpayable"}],cNe="0x608060405234801561001057600080fd5b5061022e806100206000396000f3fe608060405234801561001057600080fd5b50600036606060a0821461004057604080516000602082015201604051602081830303815290604052905061017b565b600061004f6020828587610186565b610058916101b0565b9050600061006a604060208688610186565b610073916101b0565b90506000610085606060408789610186565b61008e916101b0565b905060006100a060806060888a610186565b6100a9916101b0565b905060006100bb60a06080898b610186565b6100c4916101b0565b60405163a1f3128160e01b8152600481018790526024810186905260448101859052606481018490526084810182905290915073__$b8f96b288d4d0429e38b8ed50fd423070f$__9063a1f312819060a401602060405180830381865af4158015610133573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061015791906101cf565b60408051911515602083015201604051602081830303815290604052955050505050505b915050805190602001f35b6000808585111561019657600080fd5b838611156101a357600080fd5b5050820193919092039150565b803560208310156101c957600019602084900360031b1b165b92915050565b6000602082840312156101e157600080fd5b815180151581146101f157600080fd5b939250505056fea26469706673582212203dafaa4c8f34ad767d36775120cdf65742956a98b33a9913f2e11f858baf2d9e64736f6c63430008170033",uNe={};ie(uNe,{abi:()=>dNe,bytecode:()=>fNe});var dNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"targetContract_",type:"address",internalType:"address"}],stateMutability:"pure"},{type:"event",name:"OwnershipTransferEnforced",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"newOwner",type:"address",indexed:!1,internalType:"address"}],anonymous:!1}],fNe="0x608060405234801561001057600080fd5b506106af806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461049f565b50505050505050505050565b005b61007661008636600461049f565b6100ba565b61009e61009936600461056c565b6101e7565b6040516001600160a01b03909116815260200160405180910390f35b856100c6816000610252565b6101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610128816000610252565b6101825760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b5060006101918d8d8a8a610269565b6040516001600160a01b038083168252919250879186169033907f0f026cada0b544ae1cc47ac006f1f4c3d7e94832af22aa0065351de49f9284d79060200160405180910390a450505050505050505050505050565b60006014821461023e5760405162461bcd60e51b815260206004820152602e602482015260008051602061065a83398151915260448201526d0c85ae8cae4dae65ad8cadccee8d60931b606482015260840161010e565b61024882846105ae565b60601c9392505050565b6001600160f81b0319828116908216145b92915050565b60008036600061027986866103e9565b929550935090915050602481146102db5760405162461bcd60e51b8152602060048201526032602482015260008051602061065a8339815191526044820152710c85acaf0cac6eae8d2dedc5ad8cadccee8d60731b606482015260840161010e565b60006102ea60048284866105e3565b6102f39161060d565b90506001600160e01b0319811663f2fde38b60e01b146103545760405162461bcd60e51b8152602060048201526028602482015260008051602061065a833981519152604482015267190b5b595d1a1bd960c21b606482015260840161010e565b60006103608a8a6101e7565b9050846001600160a01b0316816001600160a01b0316146103c45760405162461bcd60e51b815260206004820152602a602482015260008051602061065a833981519152604482015269190b58dbdb9d1c9858dd60b21b606482015260840161010e565b6103d26024600485876105e3565b6103db9161063b565b9a9950505050505050505050565b60008036816103fb60148287896105e3565b610404916105ae565b60601c93506104176034601487896105e3565b6104209161063b565b925061042f85603481896105e3565b949793965094505050565b60008083601f84011261044c57600080fd5b50813567ffffffffffffffff81111561046457600080fd5b60208301915083602082850101111561047c57600080fd5b9250929050565b80356001600160a01b038116811461049a57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156104be57600080fd5b8a3567ffffffffffffffff808211156104d657600080fd5b6104e28e838f0161043a565b909c509a5060208d01359150808211156104fb57600080fd5b6105078e838f0161043a565b909a50985060408d0135975060608d013591508082111561052757600080fd5b506105348d828e0161043a565b90965094505060808b0135925061054d60a08c01610483565b915061055b60c08c01610483565b90509295989b9194979a5092959850565b6000806020838503121561057f57600080fd5b823567ffffffffffffffff81111561059657600080fd5b6105a28582860161043a565b90969095509350505050565b6bffffffffffffffffffffffff1981358181169160148510156105db5780818660140360031b1b83161692505b505092915050565b600080858511156105f357600080fd5b8386111561060057600080fd5b5050820193919092039150565b6001600160e01b031981358181169160048510156105db5760049490940360031b84901b1690921692915050565b8035602083101561026357600019602084900360031b1b169291505056fe4f776e6572736869705472616e73666572456e666f726365723a696e76616c69a2646970667358221220ca5ae6d7f1b90ba5d22d1aa6d07431cba5451fcdcfda2c53ba5014e9bf6c30cc64736f6c63430008170033",lNe={};ie(lNe,{abi:()=>pNe,bytecode:()=>mNe});var pNe=[{type:"error",name:"SafeERC20FailedDecreaseAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"currentAllowance",type:"uint256",internalType:"uint256"},{name:"requestedDecrease",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SafeERC20FailedOperation",inputs:[{name:"token",type:"address",internalType:"address"}]}],mNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088a0aa059cfc49869da70b79266115a887b85b6bf4a5e84a430f64ac0e13ee7c64736f6c63430008170033",bNe={};ie(bNe,{abi:()=>yNe,bytecode:()=>gNe});var yNe=[{type:"function",name:"createSender",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[{name:"sender",type:"address",internalType:"address"}],stateMutability:"nonpayable"}],gNe="0x608060405234801561000f575f80fd5b506101e28061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063570e1a361461002d575b5f80fd5b61004061003b3660046100e4565b61005c565b6040516001600160a01b03909116815260200160405180910390f35b5f8061006b6014828587610150565b61007491610177565b60601c90505f6100878460148188610150565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92018290525084519495509360209350849250905082850182875af190505f519350806100db575f93505b50505092915050565b5f80602083850312156100f5575f80fd5b823567ffffffffffffffff8082111561010c575f80fd5b818501915085601f83011261011f575f80fd5b81358181111561012d575f80fd5b86602082850101111561013e575f80fd5b60209290920196919550909350505050565b5f808585111561015e575f80fd5b8386111561016a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156101a45780818660140360031b1b83161692505b50509291505056fea264697066735822122078c1aaa9f040f8c523cf2b642dd06415593eec30d2e75021458af7e0c704e6fb64736f6c63430008170033",hNe={};ie(hNe,{abi:()=>xNe,bytecode:()=>wNe});var xNe=[{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]}],wNe="0x",vNe={};ie(vNe,{abi:()=>TNe,bytecode:()=>SNe});var TNe=[{type:"error",name:"SafeCastOverflowedIntDowncast",inputs:[{name:"bits",type:"uint8",internalType:"uint8"},{name:"value",type:"int256",internalType:"int256"}]},{type:"error",name:"SafeCastOverflowedIntToUint",inputs:[{name:"value",type:"int256",internalType:"int256"}]},{type:"error",name:"SafeCastOverflowedUintDowncast",inputs:[{name:"bits",type:"uint8",internalType:"uint8"},{name:"value",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SafeCastOverflowedUintToInt",inputs:[{name:"value",type:"uint256",internalType:"uint256"}]}],SNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122061ebdeb3510df44a7d9170525bd3fc61f93c656e67274c3f3b4aa33ec92dc13864736f6c63430008170033",ANe={};ie(ANe,{abi:()=>_Ne,bytecode:()=>ENe});var _Ne=[],ENe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212203d65f4321e18e96a0e0a3e6a8d19e56735de368638fd48b184c923bf46a5170f64736f6c63430008170033",kNe={};ie(kNe,{abi:()=>INe,bytecode:()=>CNe});var INe=[{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],CNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088910c5f67a05f7b05fc7425f62972b57385080dd0be1e4dea1ea74435bca86f64736f6c63430008170033",sp={};ie(sp,{abi:()=>PNe,bytecode:()=>RNe});var PNe=[{type:"function",name:"computeAddress",inputs:[{name:"_bytecodeHash",type:"bytes32",internalType:"bytes32"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"deploy",inputs:[{name:"_bytecode",type:"bytes",internalType:"bytes"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"event",name:"Deployed",inputs:[{name:"addr",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SimpleFactoryEmptyContract",inputs:[{name:"deployed",type:"address",internalType:"address"}]}],RNe="0x608060405234801561001057600080fd5b506102ef806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063481286e61461003b5780634af63f021461006a575b600080fd5b61004e6100493660046101cc565b61007d565b6040516001600160a01b03909116815260200160405180910390f35b61004e610078366004610204565b610090565b60006100898284610115565b9392505050565b600061009e60008385610122565b9050806001600160a01b03163b6000036100db576040516301e3495560e61b81526001600160a01b03821660048201526024015b60405180910390fd5b6040516001600160a01b038216907ff40fcec21964ffb566044d083b4073f29f7f7929110ea19e1b3ebe375d89055e90600090a292915050565b60006100898383306101a2565b60008347101561014e5760405163392efb2b60e21b8152476004820152602481018590526044016100d2565b815160000361017057604051631328927760e21b815260040160405180910390fd5b8282516020840186f590506001600160a01b03811661008957604051633a0ba96160e11b815260040160405180910390fd5b6000604051836040820152846020820152828152600b8101905060ff815360559020949350505050565b600080604083850312156101df57600080fd5b50508035926020909101359150565b634e487b7160e01b600052604160045260246000fd5b6000806040838503121561021757600080fd5b823567ffffffffffffffff8082111561022f57600080fd5b818501915085601f83011261024357600080fd5b813581811115610255576102556101ee565b604051601f8201601f19908116603f0116810190838211818310171561027d5761027d6101ee565b8160405282815288602084870101111561029657600080fd5b82602086016020830137600060209382018401529896909101359650505050505056fea264697066735822122060b446de0182f6cf23546703f0e9eb0c1da6c4f00138f5d151474f865157cd3164736f6c63430008170033",$Ne={};ie($Ne,{abi:()=>DNe,bytecode:()=>MNe});var DNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedRedeemers_",type:"address[]",internalType:"address[]"}],stateMutability:"pure"}],MNe="0x608060405234801561001057600080fd5b5061064b806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103ae565b50505050505050505050565b005b6100766100863660046103ae565b6100b4565b61009e61009936600461047b565b6101e8565b6040516100ab91906104bd565b60405180910390f35b85600881901b6100c5816000610332565b6101245760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101318c8c6101e8565b805190915060005b81811015610183578281815181106101535761015361050a565b60200260200101516001600160a01b0316856001600160a01b03160361017b575050506101db565b600101610139565b5060405162461bcd60e51b815260206004820152602660248201527f52656465656d6572456e666f726365723a756e617574686f72697a65642d72656044820152653232b2b6b2b960d11b606482015260840161011b565b5050505050505050505050565b606060008280158015906102045750610202601482610536565b155b61025e5760405162461bcd60e51b815260206004820152602560248201527f52656465656d6572456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b606482015260840161011b565b610269601482610560565b67ffffffffffffffff81111561028157610281610574565b6040519080825280602002602001820160405280156102aa578160200160208202803683370190505b50925060005b81811015610329578581866102c682601461058a565b926102d39392919061059d565b6102dc916105c7565b60601c8484815181106102f1576102f161050a565b6001600160a01b039092166020928302919091019091015282610313816105fc565b9350610322905060148261058a565b90506102b0565b50505092915050565b6001600160f81b0319828116908216145b92915050565b60008083601f84011261035b57600080fd5b50813567ffffffffffffffff81111561037357600080fd5b60208301915083602082850101111561038b57600080fd5b9250929050565b80356001600160a01b03811681146103a957600080fd5b919050565b60008060008060008060008060008060e08b8d0312156103cd57600080fd5b8a3567ffffffffffffffff808211156103e557600080fd5b6103f18e838f01610349565b909c509a5060208d013591508082111561040a57600080fd5b6104168e838f01610349565b909a50985060408d0135975060608d013591508082111561043657600080fd5b506104438d828e01610349565b90965094505060808b0135925061045c60a08c01610392565b915061046a60c08c01610392565b90509295989b9194979a5092959850565b6000806020838503121561048e57600080fd5b823567ffffffffffffffff8111156104a557600080fd5b6104b185828601610349565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156104fe5783516001600160a01b0316835292840192918401916001016104d9565b50909695505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601260045260246000fd5b60008261054557610545610520565b500690565b634e487b7160e01b600052601160045260246000fd5b60008261056f5761056f610520565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156103435761034361054a565b600080858511156105ad57600080fd5b838611156105ba57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105f45780818660140360031b1b83161692505b505092915050565b60006001820161060e5761060e61054a565b506001019056fea264697066735822122021c89a0ebcdb2523c453552212243b747d81b7c16f2f3e22d20bb9692240f3a364736f6c63430008170033",ONe={};ie(ONe,{abi:()=>NNe,bytecode:()=>LNe});var NNe=[],LNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212209bac814741dd376ccf59547680acabccb0310545d980db81a1b4c6c7f17cdbc164736f6c63430008170033",d2={};ie(d2,{abi:()=>BNe,bytecode:()=>UNe});var BNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"termsData_",type:"tuple",internalType:"struct SpecificActionERC20TransferBatchEnforcer.TermsData",components:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"recipient",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"firstTarget",type:"address",internalType:"address"},{name:"firstCalldata",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"},{type:"function",name:"usedDelegations",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"DelegationExecuted",inputs:[{name:"delegationManager",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1}],UNe="0x608060405234801561001057600080fd5b50610ccf806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063a145832a14610083578063b99deb0e14610096578063b9cf5249146100bf578063d3eddcc514610067578063ed46336714610067575b600080fd5b610081610075366004610958565b50505050505050505050565b005b610081610091366004610958565b6100fa565b6100a96100a4366004610a25565b6106ce565b6040516100b69190610a67565b60405180910390f35b6100ea6100cd366004610af5565b600060208181529281526040808220909352908152205460ff1681565b60405190151581526020016100b6565b8561010981600160f81b610843565b61015a5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61016b816000610843565b6101c55760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610151565b503360009081526020818152604080832088845290915290205460ff1615610245576040805162461bcd60e51b8152602060048201526024810191909152600080516020610c7a83398151915260448201527f456e666f726365723a64656c65676174696f6e2d616c72656164792d757365646064820152608401610151565b336000908152602081815260408083208884529091528120805460ff191660011790553690610274898961085a565b9092509050600281146102dd5760405162461bcd60e51b815260206004820152603b6024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d62617463682d73697a6500000000006064820152608401610151565b60006102e98f8f6106ce565b905080606001516001600160a01b03168383600081811061030c5761030c610b1f565b905060200281019061031e9190610b35565b61032c906020810190610b55565b6001600160a01b031614158061036957508282600081811061035057610350610b1f565b90506020028101906103629190610b35565b6020013515155b806103c757508060800151805190602001208383600081811061038e5761038e610b1f565b90506020028101906103a09190610b35565b6103ae906040810190610b77565b6040516103bc929190610bbe565b604051809103902014155b156104335760405162461bcd60e51b81526020600482015260426024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d66697273742d7472616e736163746960648201526137b760f11b608482015260a401610151565b80516001600160a01b03168383600181811061045157610451610b1f565b90506020028101906104639190610b35565b610471906020810190610b55565b6001600160a01b03161415806104ae57508282600181811061049557610495610b1f565b90506020028101906104a79190610b35565b6020013515155b806104ee5750828260018181106104c7576104c7610b1f565b90506020028101906104d99190610b35565b6104e7906040810190610b77565b9050604414155b80610554575063a9059cbb60e01b8383600181811061050f5761050f610b1f565b90506020028101906105219190610b35565b61052f906040810190610b77565b61053e91600491600091610bce565b61054791610bf8565b6001600160e01b03191614155b806105bf575080602001516001600160a01b03168383600181811061057b5761057b610b1f565b905060200281019061058d9190610b35565b61059b906040810190610b77565b6105aa91602491600491610bce565b6105b391610c28565b6001600160a01b031614155b8061061857508060400151838360018181106105dd576105dd610b1f565b90506020028101906105ef9190610b35565b6105fd906040810190610b77565b61060c91604491602491610bce565b61061591610c28565b14155b156106855760405162461bcd60e51b81526020600482015260436024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d7365636f6e642d7472616e7361637460648201526234b7b760e91b608482015260a401610151565b6040516001600160a01b03881690899033907f76f83a16f9924b51c0c3ad67a44af3e517fbdec68ffa3729776df2ac0f03144090600090a4505050505050505050505050505050565b61071b6040518060a0016040528060006001600160a01b0316815260200160006001600160a01b031681526020016000815260200160006001600160a01b03168152602001606081525090565b605c8210156107805760405162461bcd60e51b815260206004820152603d6024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d7465726d732d6c656e6774680000006064820152608401610151565b61078e601460008486610bce565b61079791610c46565b60601c81526107aa602860148486610bce565b6107b391610c46565b60601c60208201526107c9604860288486610bce565b6107d291610c28565b60408201526107e5605c60488486610bce565b6107ee91610c46565b606090811c9082015261080482605c8186610bce565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505050608082015292915050565b6001600160f81b0319828116908216145b92915050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156108925763ba597e7e6000526004601cfd5b83156108e9578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156108e05763ba597e7e6000526004601cfd5b5050508261089c575b5050509250929050565b60008083601f84011261090557600080fd5b50813567ffffffffffffffff81111561091d57600080fd5b60208301915083602082850101111561093557600080fd5b9250929050565b80356001600160a01b038116811461095357600080fd5b919050565b60008060008060008060008060008060e08b8d03121561097757600080fd5b8a3567ffffffffffffffff8082111561098f57600080fd5b61099b8e838f016108f3565b909c509a5060208d01359150808211156109b457600080fd5b6109c08e838f016108f3565b909a50985060408d0135975060608d01359150808211156109e057600080fd5b506109ed8d828e016108f3565b90965094505060808b01359250610a0660a08c0161093c565b9150610a1460c08c0161093c565b90509295989b9194979a5092959850565b60008060208385031215610a3857600080fd5b823567ffffffffffffffff811115610a4f57600080fd5b610a5b858286016108f3565b90969095509350505050565b6000602080835260018060a01b038085511660208501528060208601511660408501526040850151606085015280606086015116608085015250608084015160a08085015280518060c086015260005b81811015610ad35782810184015186820160e001528301610ab7565b50600060e0828701015260e0601f19601f830116860101935050505092915050565b60008060408385031215610b0857600080fd5b610b118361093c565b946020939093013593505050565b634e487b7160e01b600052603260045260246000fd5b60008235605e19833603018112610b4b57600080fd5b9190910192915050565b600060208284031215610b6757600080fd5b610b708261093c565b9392505050565b6000808335601e19843603018112610b8e57600080fd5b83018035915067ffffffffffffffff821115610ba957600080fd5b60200191503681900382131561093557600080fd5b8183823760009101908152919050565b60008085851115610bde57600080fd5b83861115610beb57600080fd5b5050820193919092039150565b6001600160e01b03198135818116916004851015610c205780818660040360031b1b83161692505b505092915050565b8035602083101561085457600019602084900360031b1b1692915050565b6bffffffffffffffffffffffff198135818116916014851015610c205760149490940360031b84901b169092169291505056fe5370656369666963416374696f6e45524332305472616e736665724261746368a2646970667358221220e8d1de6d5cca88243b7e7a1d3b3a1ae6b1a75dad78f305486212fafaf9e3ca5264736f6c63430008170033",HNe={};ie(HNe,{abi:()=>FNe,bytecode:()=>zNe});var FNe=[{type:"receive",stateMutability:"payable"},{type:"function",name:"addStake",inputs:[{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"deposits",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}],stateMutability:"view"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],zNe="0x",jNe={};ie(jNe,{abi:()=>qNe,bytecode:()=>GNe});var qNe=[{type:"error",name:"StringsInsufficientHexLength",inputs:[{name:"value",type:"uint256",internalType:"uint256"},{name:"length",type:"uint256",internalType:"uint256"}]}],GNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ce1bfc0cd5aac1e748b751339a93cc065f5fd20fd73be10a7844adf26543eb8164736f6c63430008170033",VNe={};ie(VNe,{abi:()=>WNe,bytecode:()=>ZNe});var WNe=[],ZNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122089188054053227534294662d666312081d2f72553264bdfc0ce4a353c15e0f6364736f6c63430008170033",KNe={};ie(KNe,{abi:()=>XNe,bytecode:()=>JNe});var XNe=[{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"}],JNe="0x",QNe={};ie(QNe,{abi:()=>YNe,bytecode:()=>eLe});var YNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"value_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"}],eLe="0x608060405234801561001057600080fd5b506104f8806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610336565b50505050505050505050565b005b610076610086366004610336565b6100b0565b61009e610099366004610403565b6101f8565b60405190815260200160405180910390f35b856100bc816000610269565b61010d5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61011e816000610269565b6101785760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610104565b5060006101858888610280565b505091505060006101968e8e6101f8565b9050808211156101e85760405162461bcd60e51b815260206004820152601f60248201527f56616c75654c7465456e666f726365723a76616c75652d746f6f2d68696768006044820152606401610104565b5050505050505050505050505050565b6000602082146102585760405162461bcd60e51b815260206004820152602560248201527f56616c75654c7465456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b6064820152608401610104565b6102628284610445565b9392505050565b6001600160f81b0319828116908216145b92915050565b60008036816102926014828789610463565b61029b9161048d565b60601c93506102ae603460148789610463565b6102b791610445565b92506102c68560348189610463565b949793965094505050565b60008083601f8401126102e357600080fd5b50813567ffffffffffffffff8111156102fb57600080fd5b60208301915083602082850101111561031357600080fd5b9250929050565b80356001600160a01b038116811461033157600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035557600080fd5b8a3567ffffffffffffffff8082111561036d57600080fd5b6103798e838f016102d1565b909c509a5060208d013591508082111561039257600080fd5b61039e8e838f016102d1565b909a50985060408d0135975060608d01359150808211156103be57600080fd5b506103cb8d828e016102d1565b90965094505060808b013592506103e460a08c0161031a565b91506103f260c08c0161031a565b90509295989b9194979a5092959850565b6000806020838503121561041657600080fd5b823567ffffffffffffffff81111561042d57600080fd5b610439858286016102d1565b90969095509350505050565b8035602083101561027a57600019602084900360031b1b1692915050565b6000808585111561047357600080fd5b8386111561048057600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156104ba5780818660140360031b1b83161692505b50509291505056fea26469706673582212201b32f956e1bfeecade9436bbfc83066c0610b5679c49ae7d06d58eaeb4e24ff564736f6c63430008170033",tLe={};ie(tLe,{abi:()=>nLe,bytecode:()=>rLe});var nLe=[{type:"function",name:"PAYMASTER_DATA_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PAYMASTER_POSTOP_GAS_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PAYMASTER_VALIDATION_GAS_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],rLe="0x60a7610034600b8282823980515f1a60731461002857634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106046575f3560e01c806325093e1b14604a578063b29a8ff4146063578063ede3150214606a575b5f80fd5b6051602481565b60405190815260200160405180910390f35b6051601481565b605160348156fea2646970667358221220e3e47e9c438ff94c86dca42d7dcd69637923bbba71e55fc90068fd2fbb4991dc64736f6c63430008170033",aLe={};ie(aLe,{abi:()=>sLe,bytecode:()=>oLe});var sLe=[{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]}],oLe="0x",iLe={};ie(iLe,{abi:()=>cLe,bytecode:()=>uLe});var cLe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"timestampAfterThreshold_",type:"uint128",internalType:"uint128"},{name:"timestampBeforeThreshold_",type:"uint128",internalType:"uint128"}],stateMutability:"pure"}],uLe="0x608060405234801561001057600080fd5b506104e7806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461033f565b50505050505050505050565b005b61007661008636600461033f565b6100c2565b61009e61009936600461040c565b61023a565b604080516001600160801b0393841681529290911660208301520160405180910390f35b85600881901b6001600160f81b03198116156101335760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806101418d8d61023a565b90925090506001600160801b038216156101b857816001600160801b031642116101b85760405162461bcd60e51b815260206004820152602260248201527f54696d657374616d70456e666f726365723a6561726c792d64656c656761746960448201526137b760f11b606482015260840161012a565b6001600160801b0381161561022b57806001600160801b0316421061022b5760405162461bcd60e51b8152602060048201526024808201527f54696d657374616d70456e666f726365723a657870697265642d64656c6567616044820152633a34b7b760e11b606482015260840161012a565b50505050505050505050505050565b6000806020831461029c5760405162461bcd60e51b815260206004820152602660248201527f54696d657374616d70456e666f726365723a696e76616c69642d7465726d732d6044820152650d8cadccee8d60d31b606482015260840161012a565b6102a9836010818761044e565b6102b291610478565b60801c90506102c560106000858761044e565b6102ce91610478565b60801c91509250929050565b60008083601f8401126102ec57600080fd5b50813567ffffffffffffffff81111561030457600080fd5b60208301915083602082850101111561031c57600080fd5b9250929050565b80356001600160a01b038116811461033a57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035e57600080fd5b8a3567ffffffffffffffff8082111561037657600080fd5b6103828e838f016102da565b909c509a5060208d013591508082111561039b57600080fd5b6103a78e838f016102da565b909a50985060408d0135975060608d01359150808211156103c757600080fd5b506103d48d828e016102da565b90965094505060808b013592506103ed60a08c01610323565b91506103fb60c08c01610323565b90509295989b9194979a5092959850565b6000806020838503121561041f57600080fd5b823567ffffffffffffffff81111561043657600080fd5b610442858286016102da565b90969095509350505050565b6000808585111561045e57600080fd5b8386111561046b57600080fd5b5050820193919092039150565b6fffffffffffffffffffffffffffffffff1981358181169160108510156104a95780818660100360031b1b83161692505b50509291505056fea2646970667358221220493f1dd46bf21857fc13b6e41e6f29c1c53fbb939ca84fcd1536c7cf1000d18064736f6c63430008170033",dLe={};ie(dLe,{abi:()=>fLe,bytecode:()=>lLe});var fLe=[{type:"fallback",stateMutability:"payable"}],lLe="0x",pLe={};ie(pLe,{abi:()=>mLe,bytecode:()=>bLe});var mLe=[],bLe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122034801a6b4534dfc9cfe9c8b31e018c344c3329b6bf478762f2158ce5781d2b7a64736f6c63430008170033",un={};ie(un,{abi:()=>yLe,bytecode:()=>gLe});var yLe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"MAX_NUMBER_OF_SIGNERS",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"addSigner",inputs:[{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getSigners",inputs:[],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getSignersCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getThreshold",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isSigner",inputs:[{name:"_addr",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"reinitialize",inputs:[{name:"_version",type:"uint64",internalType:"uint64"},{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"},{name:"_clearSigners",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"removeSigner",inputs:[{name:"_oldSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"replaceSigner",inputs:[{name:"_oldSigner",type:"address",internalType:"address"},{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"updateMultiSigParameters",inputs:[{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"},{name:"_clearSigners",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateThreshold",inputs:[{name:"_threshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddedSigner",inputs:[{name:"signer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"RemovedSigner",inputs:[{name:"signer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ReplacedSigner",inputs:[{name:"oldSigner",type:"address",indexed:!0,internalType:"address"},{name:"newSigner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"UpdatedThreshold",inputs:[{name:"threshold",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AlreadyASigner",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InsufficientSigners",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"InvalidSignerAddress",inputs:[]},{type:"error",name:"InvalidThreshold",inputs:[]},{type:"error",name:"NotASigner",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"TooManySigners",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],gLe="0x6101c0604052306080523480156200001657600080fd5b506040516200492838038062004928833981016040819052620000399162000392565b81816040518060400160405280601181526020017026bab63a34a9b4b3a232b632a3b0ba37b960791b815250604051806040016040528060018152602001603160f81b8152508181620000976000836200021f60201b90919060201c565b61014052620000a88160016200021f565b61016052815160208084019190912061010052815190820120610120524660c052620001386101005161012051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60a05250503060e0526200014b62000258565b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a2505050506000620001d66200030c60201b60201c565b600019600282018190556040519081529091507f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d039060200160405180910390a1505050620005ba565b60006020835110156200023f57620002378362000330565b905062000252565b816200024c848262000478565b5060ff90505b92915050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff1615620002a95760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b0390811614620003095780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b7fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c0090565b600080829050601f8151111562000367578260405163305a27a960e01b81526004016200035e919062000544565b60405180910390fd5b8051620003748262000595565b179392505050565b6001600160a01b03811681146200030957600080fd5b60008060408385031215620003a657600080fd5b8251620003b3816200037c565b6020840151909250620003c6816200037c565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c90821680620003fc57607f821691505b6020821081036200041d57634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111562000473576000816000526020600020601f850160051c810160208610156200044e5750805b601f850160051c820191505b818110156200046f578281556001016200045a565b5050505b505050565b81516001600160401b03811115620004945762000494620003d1565b620004ac81620004a58454620003e7565b8462000423565b602080601f831160018114620004e45760008415620004cb5750858301515b600019600386901b1c1916600185901b1785556200046f565b600085815260208120601f198616915b828110156200051557888601518255948401946001909101908401620004f4565b5085821015620005345787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620005745785810183015185820160400152820162000556565b506000604082860101526040601f19601f8301168501019250505092915050565b805160208083015191908110156200041d5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051614235620006f3600039600081816106d8015281816109cd01528181610c2d01528181610cb701528181610d3501528181610e9901528181610f4e01528181610fd90152818161115e0152818161124e015281816113010152818161137301528181611523015281816115a20152818161169d0152818161195501528181611a4b01528181611c6101528181611e64015281816120da0152612d0d01526000818161084a01528181610d9801528181610e1b01528181610efc0152818161160501526116e1015260006129970152600061296a015260006122be01526000612296015260006121f10152600061221b0152600061224501526000818161214801528181612171015261267101526142356000f3fe6080604052600436106102815760003560e01c806394cf795e1161014f578063cef6d209116100c1578063e9ae5c531161007a578063e9ae5c5314610825578063ea4d3c9b14610838578063eb12d61e1461086c578063ed8101b51461088c578063f23a6e61146108ac578063ffa1ad74146108cc57600080fd5b8063cef6d2091461075c578063d087d2881461077c578063d691c96414610791578063d7d7442f146107b1578063e3d9109f146107d1578063e75235b8146107f157600080fd5b8063acb8cc4911610113578063acb8cc4914610668578063ad3cb1cc14610695578063b0d691fe146106c6578063b3c65015146106fa578063bc197c8114610727578063c399ec881461074757600080fd5b806394cf795e1461059a578063a0c1deb4146105bc578063a24c8f32146105de578063a3f4df7e146105f1578063aaf10f421461063b57600080fd5b806349934047116101f357806365ee81d8116101ac57806365ee81d8146104b757806378979a80146104d75780637df73e27146104f75780637f07bfdc1461053d57806383ebb7711461055d57806384b0196e1461057257600080fd5b806349934047146104345780634a58db19146104545780634f1ef2861461045c57806352d1902d1461046f5780635c1c6dcd1461048457806360b5bb3f1461049757600080fd5b806319822f7c1161024557806319822f7c1461036b5780632b3afd991461038b5780633e1b0812146103bf5780633ed01015146103df578063445140b8146103ff5780634891161f1461041f57600080fd5b806301ffc9a71461028d57806306394d67146102c25780630e316ab7146102f0578063150b7a02146103125780631626ba7e1461034b57600080fd5b3661028857005b600080fd5b34801561029957600080fd5b506102ad6102a8366004613309565b6108fd565b60405190151581526020015b60405180910390f35b3480156102ce57600080fd5b506102e26102dd36600461334c565b61098d565b6040519081526020016102b9565b3480156102fc57600080fd5b5061031061030b36600461339d565b6109c2565b005b34801561031e57600080fd5b5061033261032d36600461346f565b610be6565b6040516001600160e01b031990911681526020016102b9565b34801561035757600080fd5b50610332610366366004613522565b610c01565b34801561037757600080fd5b506102e261038636600461356d565b610c20565b34801561039757600080fd5b506102e27fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156103cb57600080fd5b506102e26103da3660046135ba565b610c90565b3480156103eb57600080fd5b506103106103fa3660046135e3565b610d2a565b34801561040b57600080fd5b506102ad61041a36600461361d565b610e02565b34801561042b57600080fd5b506102e2601e81565b34801561044057600080fd5b5061031061044f3660046135e3565b610e8e565b610310610f31565b61031061046a366004613636565b610f9b565b34801561047b57600080fd5b506102e2610fb1565b610310610492366004613685565b610fce565b3480156104a357600080fd5b506103106104b2366004613703565b61103e565b3480156104c357600080fd5b506103106104d236600461375c565b611153565b3480156104e357600080fd5b506103106104f23660046137ba565b6111bc565b34801561050357600080fd5b506102ad61051236600461339d565b6001600160a01b031660009081526000805160206141c0833981519152602052604090205460ff1690565b34801561054957600080fd5b50610310610558366004613836565b6112f6565b34801561056957600080fd5b506102e26113d3565b34801561057e57600080fd5b506105876113e2565b6040516102b997969594939291906138b2565b3480156105a657600080fd5b506105af611428565b6040516102b9919061394b565b3480156105c857600080fd5b506000805160206141a0833981519152546102e2565b6103106105ec366004613636565b610fa3565b3480156105fd57600080fd5b5061062e6040518060400160405280601181526020017026bab63a34a9b4b3a232b632a3b0ba37b960791b81525081565b6040516102b99190613998565b34801561064757600080fd5b5061065061149b565b6040516001600160a01b0390911681526020016102b9565b34801561067457600080fd5b5061062e604051806040016040528060018152602001603160f81b81525081565b3480156106a157600080fd5b5061062e604051806040016040528060058152602001640352e302e360dc1b81525081565b3480156106d257600080fd5b506106507f000000000000000000000000000000000000000000000000000000000000000081565b34801561070657600080fd5b5061070f6114bc565b6040516001600160401b0390911681526020016102b9565b34801561073357600080fd5b50610332610742366004613a2a565b6114ef565b34801561075357600080fd5b506102e261150b565b34801561076857600080fd5b50610310610777366004613ad7565b611597565b34801561078857600080fd5b506102e261167e565b6107a461079f366004613522565b6116d4565b6040516102b99190613b70565b3480156107bd57600080fd5b506103106107cc36600461361d565b61194a565b3480156107dd57600080fd5b506103106107ec366004613bd4565b611a40565b3480156107fd57600080fd5b507fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c02546102e2565b610310610833366004613522565b611c56565b34801561084457600080fd5b506106507f000000000000000000000000000000000000000000000000000000000000000081565b34801561087857600080fd5b5061031061088736600461339d565b611e59565b34801561089857600080fd5b506102e26108a736600461334c565b611fdf565b3480156108b857600080fd5b506103326108c7366004613c0d565b612121565b3480156108d857600080fd5b5061062e604051806040016040528060058152602001640312e332e360dc1b81525081565b600061090761213d565b6001600160e01b031982166335a4725960e21b148061093657506001600160e01b03198216630a85bd0160e11b145b8061095157506001600160e01b03198216630271189760e51b145b8061096c57506001600160e01b031982166301ffc9a760e01b145b8061098757506001600160e01b03198216630b135d3f60e11b145b92915050565b600061098761099a6121e4565b6109a384611fdf565b60405161190160f01b8152600281019290925260228201526042902090565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906109fb5750333014155b15610a1957604051630796d94560e01b815260040160405180910390fd5b6001600160a01b03811660009081526000805160206141c0833981519152602081905260409091205460ff16610a625760405163da0357f760e01b815260040160405180910390fd5b600181015460028201548103610a8b576040516361774dcf60e11b815260040160405180910390fd5b60005b610a99600183613c8b565b811015610b6357836001600160a01b0316836001018281548110610abf57610abf613c9e565b6000918252602090912001546001600160a01b031603610b5b5782600101600183610aea9190613c8b565b81548110610afa57610afa613c9e565b6000918252602090912001546001840180546001600160a01b039092169183908110610b2857610b28613c9e565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550610b63565b600101610a8e565b5081600101805480610b7757610b77613cb4565b60008281526020808220830160001990810180546001600160a01b03191690559092019092556001600160a01b038516808352908490526040808320805460ff191690555190917fb0073c14ccc2332b5b461c0d2fb94366f38d3954a82745e74827aa0811c9f98191a2505050565b6000610bf061213d565b50630a85bd0160e11b949350505050565b6000610c0b61213d565b610c1684848461230f565b90505b9392505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610c6b57604051636b31ba1560e11b815260040160405180910390fd5b610c7361213d565b610c8584610c808661098d565b6124ae565b9050610c19826124f6565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610d06573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109879190613cca565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610d635750333014155b15610d8157604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed0101590610dcd908490600401613e12565b600060405180830381600087803b158015610de757600080fd5b505af1158015610dfb573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610e6a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109879190613eed565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ec75750333014155b15610ee557604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690634993404790610dcd908490600401613e12565b610f3961213d565b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b158015610de757600080fd5b610fa361258e565b610fad828261264b565b5050565b6000610fbb612666565b506000805160206141e083398151915290565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461101757604051636b31ba1560e11b815260040160405180910390fd5b610fad611027602083018361339d565b60208301356110396040850185613f0a565b6126af565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff1615906001600160401b03166000811580156110835750825b90506000826001600160401b0316600114801561109f5750303b155b9050811580156110ad575080155b156110cb5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff1916600117855583156110f557845460ff60401b1916600160401b1785555b61110288888860006126e5565b831561114957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2906020015b60405180910390a15b5050505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061118c5750333014155b156111aa57604051630796d94560e01b815260040160405180910390fd5b6111b6848484846126e5565b50505050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054869190600160401b900460ff1680611204575080546001600160401b03808416911610155b156112225760405163f92ee8a960e01b815260040160405180910390fd5b805468ffffffffffffffffff19166001600160401b03831617600160401b178155336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061127c5750333014155b1561129a57604051630796d94560e01b815260040160405180910390fd5b6112a6868686866126e5565b805460ff60401b191681556040516001600160401b03831681527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a150505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061132f5750333014155b1561134d57604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b1580156113b757600080fd5b505af11580156113cb573d6000803e3d6000fd5b505050505050565b60006113dd6121e4565b905090565b6000606080600080600060606113f6612963565b6113fe612990565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b606060006000805160206141c08339815191526001810180546040805160208084028201810190925282815293945083018282801561149057602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611472575b505050505091505090565b60006113dd6000805160206141e0833981519152546001600160a01b031690565b60006113dd7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00546001600160401b031690565b60006114f961213d565b5063bc197c8160e01b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015611573573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113dd9190613cca565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906115d05750333014155b156115ee57604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061164490899089908990899089908990600401613fb1565b600060405180830381600087803b15801561165e57600080fd5b505af1158015611672573d6000803e3d6000fd5b50505050505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401611556565b6060336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461171f57604051630692ce8160e21b815260040160405180910390fd5b83600881901b61173382600160f81b6129bd565b156117b95736600061174587876129cf565b90925090506117558360006129bd565b1561176b576117648282612a68565b94506117b2565b61177983600160f81b6129bd565b15611788576117648282612b29565b6040516308c3ee0360e11b81526001600160f81b0319841660048201526024015b60405180910390fd5b5050611941565b6117c48260006129bd565b1561191c576000803660006117d98989612c56565b6040805160018082528183019092529498509296509094509250816020015b60608152602001906001900390816117f8579050509650600061181b86826129bd565b1561184f5761182c858585856126af565b8860008151811061183f5761183f613c9e565b6020026020010181905250611912565b61185d86600160f81b6129bd565b156118ed5761186e85858585612ca7565b8960008151811061188157611881613c9e565b60209081029190910101529050806118e8577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb76000896000815181106118c9576118c9613c9e565b60200260200101516040516118df92919061401a565b60405180910390a15b611912565b6040516308c3ee0360e11b81526001600160f81b0319871660048201526024016117a9565b5050505050611941565b604051632e5bf3f960e21b81526001600160f81b0319831660048201526024016117a9565b50509392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906119835750333014155b156119a157604051630796d94560e01b815260040160405180910390fd5b806000036119c25760405163aabd5a0960e01b815260040160405180910390fd5b6000805160206141a0833981519152546000805160206141c083398151915290821115611a025760405163aabd5a0960e01b815260040160405180910390fd5b600281018290556040518281527f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d039060200160405180910390a15050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611a795750333014155b15611a9757604051630796d94560e01b815260040160405180910390fd5b6001600160a01b0381161580611ab657506001600160a01b0381163b15155b15611ad457604051634501a91960e01b815260040160405180910390fd5b6001600160a01b03821660009081526000805160206141c0833981519152602081905260409091205460ff16611b1d5760405163da0357f760e01b815260040160405180910390fd5b6001600160a01b03821660009081526020829052604090205460ff1615611b5757604051631985f4ab60e31b815260040160405180910390fd5b600181015460005b81811015611bf157846001600160a01b0316836001018281548110611b8657611b86613c9e565b6000918252602090912001546001600160a01b031603611be95783836001018281548110611bb657611bb6613c9e565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550611bf1565b600101611b5f565b506001600160a01b03808516600081815260208590526040808220805460ff199081169091559387168083528183208054909516600117909455517f53a7b6f060162826746b07f3ff5cc66b83afad3bc9a57c9f34d7802901c6e8299190a350505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614611c9f57604051636b31ba1560e11b815260040160405180910390fd5b82600881901b611cb382600160f81b6129bd565b15611d0e57366000611cc586866129cf565b9092509050611cd58360006129bd565b15611cea57611ce48282612a68565b50611d07565b611cf883600160f81b6129bd565b1561178857611ce48282612b29565b5050610dfb565b611d198260006129bd565b1561191c57600080366000611d2e8888612c56565b9350935093509350611d4485600060f81b6129bd565b15611d5b57611d55848484846126af565b50611e50565b611d6985600160f81b6129bd565b15611e2b57604080516001808252818301909252600091816020015b6060815260200190600190039081611d855790505090506000611daa86868686612ca7565b83600081518110611dbd57611dbd613c9e565b6020908102919091010152905080611e24577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb7600083600081518110611e0557611e05613c9e565b6020026020010151604051611e1b92919061401a565b60405180910390a15b5050611e50565b6040516308c3ee0360e11b81526001600160f81b0319861660048201526024016117a9565b50505050610dfb565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611e925750333014155b15611eb057604051630796d94560e01b815260040160405180910390fd5b6001600160a01b0381161580611ecf57506001600160a01b0381163b15155b15611eed57604051634501a91960e01b815260040160405180910390fd5b6000805160206141a0833981519152546000805160206141c083398151915290601d1901611f2e57604051630dc92ed360e11b815260040160405180910390fd5b6001600160a01b03821660009081526020829052604090205460ff1615611f6857604051631985f4ab60e31b815260040160405180910390fd5b6001818101805480830182556000918252602080832090910180546001600160a01b0319166001600160a01b038716908117909155808352908490526040808320805460ff191690941790935591517f82b74755d483f0688b80354268454667c377a5684e64a4dbb6820fc11a6276d49190a25050565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1861200f602084018461339d565b60208401356120216040860186613f0a565b60405161202f929190614033565b6040519081900390206120456060870187613f0a565b604051612053929190614033565b604051908190039020608087013560a088013560c089013561207860e08b018b613f0a565b604051612086929190614033565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b600061212b61213d565b5063f23a6e6160e01b95945050505050565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614806121c457507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166121b86000805160206141e0833981519152546001600160a01b031690565b6001600160a01b031614155b156121e25760405163703e46dd60e11b815260040160405180910390fd5b565b6000306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801561223d57507f000000000000000000000000000000000000000000000000000000000000000046145b1561226757507f000000000000000000000000000000000000000000000000000000000000000090565b6113dd604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b7fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c02546000906000805160206141c08339815191529061235090604190614043565b831461236757506001600160e01b03199050610c19565b600061237460418561405a565b600283015490915060008080805b858110156124965760008a8a612399604185614043565b9060416123a786600161407c565b6123b19190614043565b926123be9392919061408f565b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092935061240292508e9150839050612cd8565b9350846001600160a01b0316846001600160a01b031611158061243e57506001600160a01b03841660009081526020899052604090205460ff16155b1561245c57506001600160e01b03199750610c199650505050505050565b82612466816140b9565b9350508583106124885750630b135d3f60e11b9750610c199650505050505050565b509192508291600101612382565b506001600160e01b03199a9950505050505050505050565b6000806124c8836124c3610100870187613f0a565b61230f565b90506374eca2c160e11b6001600160e01b03198216016124ec576000915050610987565b5060019392505050565b801561258b57604051600090339060001990849084818181858888f193505050503d8060008114612543576040519150601f19603f3d011682016040523d82523d6000602084013e612548565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a2505b50565b6000805160206141a0833981519152546000805160206141c08339815191529060005b81811015612608578260000160008460010183815481106125d4576125d4613c9e565b60009182526020808320909101546001600160a01b031683528201929092526040019020805460ff191690556001016125b1565b506126176001830160006132d7565b6000600283018190556040517feb09d532980c3cc73dcad99b80e264204a667a54cbb7b63ec8d68dcb1c7096be9190a15050565b61265361213d565b61265c82612d02565b610fad8282612d59565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146121e25760405163703e46dd60e11b815260040160405180910390fd5b60405181838237600038838387895af16126cc573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b6000805160206141a08339815191525483906000805160206141c08339815191529060008461271d57612718828561407c565b61271f565b835b905085158061272d57508086115b1561274b5760405163aabd5a0960e01b815260040160405180910390fd5b601e81111561276d57604051630dc92ed360e11b815260040160405180910390fd5b84156128015760005b828110156127f257600084600101828154811061279557612795613c9e565b60009182526020808320909101546001600160a01b0316808352908790526040808320805460ff191690555190925082917fb0073c14ccc2332b5b461c0d2fb94366f38d3954a82745e74827aa0811c9f98191a250600101612776565b506128016001840160006132d7565b60005b8481101561292b57600089898381811061282057612820613c9e565b9050602002016020810190612835919061339d565b6001600160a01b03811660009081526020879052604090205490915060ff161561287257604051631985f4ab60e31b815260040160405180910390fd5b6001600160a01b038116158061289157506001600160a01b0381163b15155b156128af57604051634501a91960e01b815260040160405180910390fd5b6001858101805480830182556000918252602080832090910180546001600160a01b0319166001600160a01b038616908117909155808352908890526040808320805460ff191690941790935591517f82b74755d483f0688b80354268454667c377a5684e64a4dbb6820fc11a6276d49190a250600101612804565b50600283018690556040518681527f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d0390602001611140565b60606113dd7f00000000000000000000000000000000000000000000000000000000000000006000612e1b565b60606113dd7f00000000000000000000000000000000000000000000000000000000000000006001612e1b565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c1715612a075763ba597e7e6000526004601cfd5b8315612a5e578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c1715612a555763ba597e7e6000526004601cfd5b50505082612a11575b5050509250929050565b606081806001600160401b03811115612a8357612a836133ba565b604051908082528060200260200182016040528015612ab657816020015b6060815260200190600190039081612aa15790505b50915060005b81811015612b215736858583818110612ad757612ad7613c9e565b9050602002810190612ae991906140d2565b9050612afb611027602083018361339d565b848381518110612b0d57612b0d613c9e565b602090810291909101015250600101612abc565b505092915050565b606081806001600160401b03811115612b4457612b446133ba565b604051908082528060200260200182016040528015612b7757816020015b6060815260200190600190039081612b625790505b50915060005b81811015612b215736858583818110612b9857612b98613c9e565b9050602002810190612baa91906140d2565b90506000612bd5612bbe602084018461339d565b6020840135612bd06040860186613f0a565b612ca7565b868581518110612be757612be7613c9e565b6020908102919091010152905080612c4c577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110612c2d57612c2d613c9e565b6020026020010151604051612c4392919061401a565b60405180910390a15b5050600101612b7d565b6000803681612c68601482878961408f565b612c71916140f2565b60601c9350612c8460346014878961408f565b612c8d91614125565b9250612c9c856034818961408f565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080612ce88686612ec6565b925092509250612cf88282612f13565b5090949350505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590612d3b5750333014155b1561258b57604051630796d94560e01b815260040160405180910390fd5b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612db3575060408051601f3d908101601f19168201909252612db091810190613cca565b60015b612ddb57604051634c9c8ce360e01b81526001600160a01b03831660048201526024016117a9565b6000805160206141e08339815191528114612e0c57604051632a87526960e21b8152600481018290526024016117a9565b612e168383612fcc565b505050565b606060ff8314612e3557612e2e83613022565b9050610987565b818054612e4190614143565b80601f0160208091040260200160405190810160405280929190818152602001828054612e6d90614143565b8015612eba5780601f10612e8f57610100808354040283529160200191612eba565b820191906000526020600020905b815481529060010190602001808311612e9d57829003601f168201915b50505050509050610987565b60008060008351604103612f005760208401516040850151606086015160001a612ef288828585613061565b955095509550505050612f0c565b50508151600091506002905b9250925092565b6000826003811115612f2757612f27614177565b03612f30575050565b6001826003811115612f4457612f44614177565b03612f625760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115612f7657612f76614177565b03612f975760405163fce698f760e01b8152600481018290526024016117a9565b6003826003811115612fab57612fab614177565b03610fad576040516335e2f38360e21b8152600481018290526024016117a9565b612fd582613130565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a280511561301a57612e168282613195565b610fad61320b565b6060600061302f8361322a565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a084111561309c5750600091506003905082613126565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa1580156130f0573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811661311c57506000925060019150829050613126565b9250600091508190505b9450945094915050565b806001600160a01b03163b60000361316657604051634c9c8ce360e01b81526001600160a01b03821660048201526024016117a9565b6000805160206141e083398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b0316846040516131b2919061418d565b600060405180830381855af49150503d80600081146131ed576040519150601f19603f3d011682016040523d82523d6000602084013e6131f2565b606091505b5091509150613202858383613252565b95945050505050565b34156121e25760405163b398979f60e01b815260040160405180910390fd5b600060ff8216601f81111561098757604051632cd44ac360e21b815260040160405180910390fd5b60608261326757613262826132ae565b610c19565b815115801561327e57506001600160a01b0384163b155b156132a757604051639996b31560e01b81526001600160a01b03851660048201526024016117a9565b5080610c19565b8051156132be5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b508054600082559060005260206000209081019061258b91905b8082111561330557600081556001016132f1565b5090565b60006020828403121561331b57600080fd5b81356001600160e01b031981168114610c1957600080fd5b6000610120828403121561334657600080fd5b50919050565b60006020828403121561335e57600080fd5b81356001600160401b0381111561337457600080fd5b61338084828501613333565b949350505050565b6001600160a01b038116811461258b57600080fd5b6000602082840312156133af57600080fd5b8135610c1981613388565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b03811182821017156133f8576133f86133ba565b604052919050565b600082601f83011261341157600080fd5b81356001600160401b0381111561342a5761342a6133ba565b61343d601f8201601f19166020016133d0565b81815284602083860101111561345257600080fd5b816020850160208301376000918101602001919091529392505050565b6000806000806080858703121561348557600080fd5b843561349081613388565b935060208501356134a081613388565b92506040850135915060608501356001600160401b038111156134c257600080fd5b6134ce87828801613400565b91505092959194509250565b60008083601f8401126134ec57600080fd5b5081356001600160401b0381111561350357600080fd5b60208301915083602082850101111561351b57600080fd5b9250929050565b60008060006040848603121561353757600080fd5b8335925060208401356001600160401b0381111561355457600080fd5b613560868287016134da565b9497909650939450505050565b60008060006060848603121561358257600080fd5b83356001600160401b0381111561359857600080fd5b6135a486828701613333565b9660208601359650604090950135949350505050565b6000602082840312156135cc57600080fd5b81356001600160c01b0381168114610c1957600080fd5b6000602082840312156135f557600080fd5b81356001600160401b0381111561360b57600080fd5b820160c08185031215610c1957600080fd5b60006020828403121561362f57600080fd5b5035919050565b6000806040838503121561364957600080fd5b823561365481613388565b915060208301356001600160401b0381111561366f57600080fd5b61367b85828601613400565b9150509250929050565b60006020828403121561369757600080fd5b81356001600160401b038111156136ad57600080fd5b820160608185031215610c1957600080fd5b60008083601f8401126136d157600080fd5b5081356001600160401b038111156136e857600080fd5b6020830191508360208260051b850101111561351b57600080fd5b60008060006040848603121561371857600080fd5b83356001600160401b0381111561372e57600080fd5b61373a868287016136bf565b909790965060209590950135949350505050565b801515811461258b57600080fd5b6000806000806060858703121561377257600080fd5b84356001600160401b0381111561378857600080fd5b613794878288016136bf565b9095509350506020850135915060408501356137af8161374e565b939692955090935050565b6000806000806000608086880312156137d257600080fd5b85356001600160401b0380821682146137ea57600080fd5b9095506020870135908082111561380057600080fd5b5061380d888289016136bf565b9095509350506040860135915060608601356138288161374e565b809150509295509295909350565b6000806040838503121561384957600080fd5b823561385481613388565b946020939093013593505050565b60005b8381101561387d578181015183820152602001613865565b50506000910152565b6000815180845261389e816020860160208601613862565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e060208401526138d360e084018a613886565b83810360408501526138e5818a613886565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156139395783518352928401929184019160010161391d565b50909c9b505050505050505050505050565b6020808252825182820181905260009190848201906040850190845b8181101561398c5783516001600160a01b031683529284019291840191600101613967565b50909695505050505050565b602081526000610c196020830184613886565b600082601f8301126139bc57600080fd5b813560206001600160401b038211156139d7576139d76133ba565b8160051b6139e68282016133d0565b9283528481018201928281019087851115613a0057600080fd5b83870192505b84831015613a1f57823582529183019190830190613a06565b979650505050505050565b600080600080600060a08688031215613a4257600080fd5b8535613a4d81613388565b94506020860135613a5d81613388565b935060408601356001600160401b0380821115613a7957600080fd5b613a8589838a016139ab565b94506060880135915080821115613a9b57600080fd5b613aa789838a016139ab565b93506080880135915080821115613abd57600080fd5b50613aca88828901613400565b9150509295509295909350565b60008060008060008060608789031215613af057600080fd5b86356001600160401b0380821115613b0757600080fd5b613b138a838b016136bf565b90985096506020890135915080821115613b2c57600080fd5b613b388a838b016136bf565b90965094506040890135915080821115613b5157600080fd5b50613b5e89828a016136bf565b979a9699509497509295939492505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b82811015613bc757603f19888603018452613bb5858351613886565b94509285019290850190600101613b99565b5092979650505050505050565b60008060408385031215613be757600080fd5b8235613bf281613388565b91506020830135613c0281613388565b809150509250929050565b600080600080600060a08688031215613c2557600080fd5b8535613c3081613388565b94506020860135613c4081613388565b9350604086013592506060860135915060808601356001600160401b03811115613c6957600080fd5b613aca88828901613400565b634e487b7160e01b600052601160045260246000fd5b8181038181111561098757610987613c75565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052603160045260246000fd5b600060208284031215613cdc57600080fd5b5051919050565b6000808335601e19843603018112613cfa57600080fd5b83016020810192503590506001600160401b03811115613d1957600080fd5b80360382131561351b57600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b88811015613e0457858403601f19018a52823536899003605e19018112613d90578283fd5b880160608135613d9f81613388565b6001600160a01b03168652613db682880183613ce3565b8289890152613dc88389018284613d28565b925050506040613dda81840184613ce3565b935087830382890152613dee838583613d28565b9d89019d97505050938601935050600101613d6b565b509198975050505050505050565b6020815260008235613e2381613388565b6001600160a01b0390811660208481019190915284013590613e4482613388565b80821660408501525050604083013560608301526060830135601e19843603018112613e6f57600080fd5b83016020810190356001600160401b03811115613e8b57600080fd5b8060051b3603821315613e9d57600080fd5b60c06080850152613eb260e085018284613d51565b915050608084013560a0840152613ecc60a0850185613ce3565b848303601f190160c0860152613ee3838284613d28565b9695505050505050565b600060208284031215613eff57600080fd5b8151610c198161374e565b6000808335601e19843603018112613f2157600080fd5b8301803591506001600160401b03821115613f3b57600080fd5b60200191503681900382131561351b57600080fd5b6000838385526020808601955060208560051b8301018460005b87811015613fa457848303601f19018952613f858288613ce3565b613f90858284613d28565b9a86019a9450505090830190600101613f6a565b5090979650505050505050565b606081526000613fc560608301888a613f50565b8281036020848101919091528682528791810160005b88811015613ff757833582529282019290820190600101613fdb565b50848103604086015261400b818789613f50565b9b9a5050505050505050505050565b828152604060208201526000610c166040830184613886565b8183823760009101908152919050565b808202811582820484141761098757610987613c75565b60008261407757634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561098757610987613c75565b6000808585111561409f57600080fd5b838611156140ac57600080fd5b5050820193919092039150565b6000600182016140cb576140cb613c75565b5060010190565b60008235605e198336030181126140e857600080fd5b9190910192915050565b6bffffffffffffffffffffffff198135818116916014851015612b215760149490940360031b84901b1690921692915050565b8035602083101561098757600019602084900360031b1b1692915050565b600181811c9082168061415757607f821691505b60208210810361334657634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600082516140e881846020870161386256feb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c01b005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c00360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbca26469706673582212205fc6fdc85503c31560366339056f5ba5c2624d0697f326aa98f14cda48fe6f7164736f6c63430008170033",hLe={};ie(hLe,{abi:()=>xLe,bytecode:()=>wLe});var xLe=[{type:"function",name:"verify",inputs:[{name:"message",type:"bytes32",internalType:"bytes32"},{name:"r",type:"uint256",internalType:"uint256"},{name:"s",type:"uint256",internalType:"uint256"},{name:"qx",type:"uint256",internalType:"uint256"},{name:"qy",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],wLe="0x610c9761003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100355760003560e01c8063a1f312811461003a575b600080fd5b61004d610048366004610bf0565b610061565b604051901515815260200160405180910390f35b600084158061007e5750600080516020610c428339815191528510155b80610087575083155b806100a05750600080516020610c428339815191528410155b156100ad5750600061020a565b6100fe600160601b63ffffffff60c01b03196bfffffffffffffffffffffffd63ffffffff60c01b03197f5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b8686610213565b151560000361010f5750600061020a565b600061011a856102be565b90506000600080516020610c4283398151915282890990506000600080516020610c42833981519152838909905060006040518060c00160405280888152602001878152602001600160601b63ffffffff60c01b031981526020016bfffffffffffffffffffffffd63ffffffff60c01b031981526020017f6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c29681526020017f4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5815250905060006101ea828585610337565b509050600080516020610c428339815191528a8103820815955050505050505b95945050505050565b600082158015610221575081155b8061022c5750858310155b806102375750858210155b156102445750600061020a565b6000868061025457610254610c2b565b83840990506000878061026957610269610c2b565b888061027757610277610c2b565b888709898061028857610288610c2b565b878b8061029757610297610c2b565b898a090908905087806102ac576102ac610c2b565b86820891909114979650505050505050565b600060405160208152602080820152602060408201528260608201527fffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc63254f6080820152600080516020610c4283398151915260a082015260208160c0836005600019fa610330576107fe60405260206040fd5b5192915050565b600080600160ff1b8415801561034b575083155b1561035d576000809250925050610be8565b60008061080060405101604052604088015161082060405101526108206040510151610466565b6000806000808886600209898182098a8188098b82840992508b8c8d8c8d098f098d8e8b8c096003090895508b8b840993508b8a830994508b8c8260028f03098d8889090896508b8c828e03890887099150508a818c8a8509089450505082890392509650965096509692505050565b9086039086828186890908955086818803888588090894506000806000808a898a0993508a89850992508a84880991508a83890990508a84860996508a8b8860028e03098c858e038e8e8f09080893508a8a8c868e038a080994508a8b84880986089250975097509750979350505050565b60a0898101516080808c01516040519182015291820152600160c0820181905260e0909101526104a760608a01518260018060a08e015160808f0151610384565b95509350955095506104d683838789610100604051019081526020810191909152604081019190915260600152565b6104ed8160a08b015160808c015186868a8c6103f4565b955093509550955061051c83838789610180604051019081526020810191909152604081019190915260600152565b61054c60018060208c015160008d0151610200604051019081526020810191909152604081019190915260600152565b6080890151955060a089015194506105728160208b015160008c01516001808a8c6103f4565b95509350955095506105a183838789610280604051019081526020810191909152604081019190915260600152565b6105b88160a08b015160808c015186868a8c6103f4565b95509350955095506105e783838789610300604051019081526020810191909152604081019190915260600152565b6105fe8160a08b015160808c015186868a8c6103f4565b955093509550955061062d83838789610380604051019081526020810191909152604081019190915260600152565b600089015195506020890151945061064e60608a015182600180898b610384565b955093509550955061067d83838789610400604051019081526020810191909152604081019190915260600152565b6106948160a08b015160808c015186868a8c6103f4565b95509350955095506106c383838789610480604051019081526020810191909152604081019190915260600152565b6106da8160a08b015160808c015186868a8c6103f4565b955093509550955061070983838789610500604051019081526020810191909152604081019190915260600152565b6107208160a08b015160808c015186868a8c6103f4565b955093509550955061074f83838789610580604051019081526020810191909152604081019190915260600152565b6104006040510151955061042060405101519450610440604051015191506104606040510151925061078e8160208b015160008c015186868a8c6103f4565b95509350955095506107bd83838789610600604051019081526020810191909152604081019190915260600152565b6107d48160a08b015160808c015186868a8c6103f4565b955093509550955061080383838789610680604051019081526020810191909152604081019190915260600152565b61081a8160a08b015160808c015186868a8c6103f4565b955093509550955061084983838789610700604051019081526020810191909152604081019190915260600152565b6108608160a08b015160808c015186868a8c6103f4565b95509350955095505061089082828688610780604051019081526020810191909152604081019190915260600152565b600091505b816108d5578286161560010360031b8360011c87161560010360021b018388161560010360011b8460011c891615600103010191508260021c9250610895565b506040805160079290921b82018051602082015192820151606090920151610820850151919750929550919290915b8415610b7d5780866002098181820982818a09838284099250838487880960608f015109848186878e8f09600309089050848885099750848784099650600285039a508485838d0986838409089a5084858387038d088209925050508281848a850908830397508291508790506002098181820982818a09838284099250838487880960608f015109848186878e8f09600309089050848885099750848784099650600285039a508485838d0986838409089a5084858387038d088209925050508281848a850908975050508488161560010360031b8560011c89161560010360021b01858a161560010360011b8660011c8b1615600103010180610a0d575094850394610b72565b60071b828101805160609091015161086085015284610a48579083016020810151604082015160609092015192995097509094509250610b72565b82836108608601518a09848885602001880151090861084085015290830160400151908280838b0984038487840908610840850151610b005780610b005783896002860309925083838409905083818b09610840860152838184099250838487880960608f0151099150838285868d8e09600309089150838784099650838682099550838461084087015160028703098584850908995083848b8603610840880151088309905083848a850982089850505050610b72565b83818209915083818309905083838584890909955083838b0992508361086086015185838a09099650838485846002880309850985838703876108408a01516108408b01510908089950838284099150838482866108608901518d090985610840880151878e89038708090898505050505b8460021c9450610904565b61088060408190526108e085905260208082526108a08190526108c08190526001198301610900526109208390529092508260c0816005600019fa610bc8576107ff60405260206040fd5b808251870995508082518409925080838409925080838809965050505050505b935093915050565b600080600080600060a08688031215610c0857600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b634e487b7160e01b600052601260045260246000fdfeffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551a26469706673582212202032a0a92437c4c7498b5f3dbbeea2851a22a8974a563aed836730aa07e1cdda64736f6c63430008170033";O1();r8();ks();Lh();t8();var GP={};Ie(GP,{read:()=>f7});var f7={};Ie(f7,{getAvailableAmount:()=>vLe});var vLe=async({client:e,contractAddress:t,delegationHash:n,delegationManager:r,terms:a})=>{let[s,o,i]=await se(e,{address:t,abi:UP.abi,functionName:"getAvailableAmount",args:[n,r,a]});return{availableAmount:s,isNewPeriod:o,currentPeriod:i}},VP={};Ie(VP,{read:()=>l7});var l7={};Ie(l7,{getAvailableAmount:()=>TLe});var TLe=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r,terms:a})=>{let o=(await l0(e)).timestamp,i=await se(e,{address:t,abi:u7.abi,functionName:"streamingAllowances",args:[n,r]}),[u,d,l,p,y]=i;if(p!==0n)return{availableAmount:Pee({initialAmount:u,maxAmount:d,amountPerSecond:l,startTime:p,spent:y,currentTimestamp:o})};let m=await se(e,{address:t,abi:u7.abi,functionName:"getTermsInfo",args:[a]}),[,g,h,w,v]=m;return{availableAmount:Pee({initialAmount:g,maxAmount:h,amountPerSecond:w,startTime:v,spent:0n,currentTimestamp:o})}};function Pee(e){if(e.currentTimestamp<e.startTime)return 0n;let t=e.currentTimestamp-e.startTime,n=e.initialAmount+e.amountPerSecond*t;return n>e.maxAmount&&(n=e.maxAmount),e.spent>=n?0n:n-e.spent}var WP={};Ie(WP,{read:()=>p7});var p7={};Ie(p7,{getAvailableAmount:()=>SLe});var SLe=async({client:e,contractAddress:t,delegationHash:n,delegationManager:r,terms:a,args:s})=>{let[o,i,u]=await se(e,{address:t,abi:jP.abi,functionName:"getAvailableAmount",args:[n,r,a,s]});return{availableAmount:o,isNewPeriod:i,currentPeriod:u}},ZP={};Ie(ZP,{read:()=>m7});var m7={};Ie(m7,{getAvailableAmount:()=>ALe});var ALe=async({client:e,contractAddress:t,delegationHash:n,delegationManager:r,terms:a})=>{let[s,o,i]=await se(e,{address:t,abi:zP.abi,functionName:"getAvailableAmount",args:[n,r,a]});return{availableAmount:s,isNewPeriod:o,currentPeriod:i}},KP={};Ie(KP,{read:()=>b7});var b7={};Ie(b7,{getAvailableAmount:()=>_Le});var _Le=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r,terms:a})=>{let o=(await l0(e)).timestamp,i=await se(e,{address:t,abi:d7.abi,functionName:"streamingAllowances",args:[n,r]}),[u,d,l,p,y]=i;if(p!==0n)return{availableAmount:Ree({initialAmount:u,maxAmount:d,amountPerSecond:l,startTime:p,spent:y,currentTimestamp:o})};let m=await se(e,{address:t,abi:d7.abi,functionName:"getTermsInfo",args:[a]}),[g,h,w,v]=m;return{availableAmount:Ree({initialAmount:g,maxAmount:h,amountPerSecond:w,startTime:v,spent:0n,currentTimestamp:o})}};function Ree(e){if(e.currentTimestamp<e.startTime)return 0n;let t=e.currentTimestamp-e.startTime,n=e.initialAmount+e.amountPerSecond*t;return n>e.maxAmount&&(n=e.maxAmount),e.spent>=n?0n:n-e.spent}Y();var Pt=({target:e,value:t=0n,callData:n="0x"})=>({target:e,value:t,callData:n}),nn=(e=>(e.SingleDefault="0x0000000000000000000000000000000000000000000000000000000000000000",e.SingleTry="0x0001000000000000000000000000000000000000000000000000000000000000",e.BatchDefault="0x0100000000000000000000000000000000000000000000000000000000000000",e.BatchTry="0x0101000000000000000000000000000000000000000000000000000000000000",e))(nn||{}),ELe=[{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"callData"}],kLe=e=>A0(["address","uint256","bytes"],[e.target,e.value,e.callData]),ILe=e=>Zt([{components:ELe,name:"executions",type:"tuple[]"}],[e]),y7=e=>{if(e.length===0)throw new Error("Error while getting the execution calldatas, executions is empty");if(e.length===1){let t=e[0];if(!t)throw new Error("Execution not found");return kLe(t)}return ILe(e)},nc=e=>{if(e.length===0)throw new Error("Error while getting the execution calldatas, executionsBatch is empty");return e.map(y7)};var hn={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},H6={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},F5={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},ft={arbitrum:42161,arbitrumNova:42170,base:8453,berachain:80094,bsc:56,gnosis:100,ink:57073,linea:59144,mainnet:1,monad:143,optimism:10,polygon:137,sei:1329,sonic:146,unichain:130,bscTestnet:97,arbitrumSepolia:421614,baseSepolia:84532,berachainBepolia:80069,chiado:10200,citreaTestnet:5115,hoodiTestnet:560048,inkSepolia:763373,lineaSepolia:59141,megaEthTestnet:6342,monadTestnet:10143,optimismSepolia:11155420,polygonAmoy:80002,seiTestnet:1328,sepolia:11155111,sonicTestnet:14601,unichainSepolia:1301,lineaGoerli:59140},$ee={"1.0.0":{[ft.optimism]:F5,[ft.polygon]:F5,[ft.base]:F5,[ft.arbitrum]:F5,[ft.linea]:F5,[ft.sepolia]:{...F5,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[ft.lineaSepolia]:{...F5,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[ft.arbitrum]:H6,[ft.base]:H6,[ft.linea]:H6,[ft.optimism]:H6,[ft.polygon]:H6,[ft.sepolia]:H6,[ft.lineaSepolia]:H6,[ft.baseSepolia]:{...H6,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[ft.mainnet]:hn,[ft.polygon]:hn,[ft.bsc]:hn,[ft.optimism]:hn,[ft.arbitrum]:hn,[ft.ink]:hn,[ft.linea]:hn,[ft.base]:hn,[ft.gnosis]:hn,[ft.berachain]:hn,[ft.unichain]:hn,[ft.arbitrumNova]:hn,[ft.sei]:hn,[ft.sonic]:hn,[ft.monad]:hn,[ft.bscTestnet]:hn,[ft.citreaTestnet]:hn,[ft.megaEthTestnet]:hn,[ft.chiado]:hn,[ft.lineaSepolia]:hn,[ft.berachainBepolia]:hn,[ft.baseSepolia]:hn,[ft.arbitrumSepolia]:hn,[ft.sepolia]:hn,[ft.optimismSepolia]:hn,[ft.unichainSepolia]:hn,[ft.polygonAmoy]:hn,[ft.inkSepolia]:hn,[ft.monadTestnet]:hn,[ft.seiTestnet]:hn,[ft.sonicTestnet]:hn,[ft.hoodiTestnet]:hn}};var XP=[{inputs:[{name:"success",type:"bool"},{name:"ret",type:"bytes"}],name:"DelegateAndRevert",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"},{name:"inner",type:"bytes"}],name:"FailedOpWithRevert",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"PostOpReverted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"PostOpRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"}],name:"UserOperationPrefundTooLow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"delegateAndRevert",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];F0();function Dee(e,t={}){let{forHash:n}=t,{authorization:r,factory:a,factoryData:s}=e;return n&&(a==="0x7702"||a==="0x7702000000000000000000000000000000000000")?r?Ae([r.address,s??"0x"]):"0x7702000000000000000000000000000000000000":a?Ae([a,s??"0x"]):"0x"}F0();h1();Ss();Il();var Mee="0x22e325a297439656";function f2(e,t={}){let{callGasLimit:n,callData:r,maxPriorityFeePerGas:a,maxFeePerGas:s,paymaster:o,paymasterData:i,paymasterPostOpGasLimit:u,paymasterSignature:d,paymasterVerificationGasLimit:l,sender:p,signature:y="0x",verificationGasLimit:m}=e,g=Ae([It(F(m||0n),{size:16}),It(F(n||0n),{size:16})]),h=Dee(e,t),w=Ae([It(F(a||0n),{size:16}),It(F(s||0n),{size:16})]),v=e.nonce??0n,T=o?Ae([o,It(F(l||0n),{size:16}),It(F(u||0n),{size:16}),i||"0x",...d?t.forHash?[Mee]:[d,It(F(Wt(d)),{size:2}),Mee]:[]]):"0x",A=e.preVerificationGas??0n;return{accountGasLimits:g,callData:r,initCode:h,gasFees:w,nonce:v,paymasterAndData:T,preVerificationGas:A,sender:p,signature:y}}Gu();r8();ks();sn();FG();MV();async function JP(e){let{extend:t,nonceKeyManager:n=oI({source:{get(){return Date.now()},set(){}}}),...r}=e,a=!1,s=await e.getAddress();return{...t,...r,address:s,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(o){let i=o?.key??BigInt(await n.consume({address:s,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...o,key:i}):await se(e.client,{abi:ju(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[s,i]})},async isDeployed(){return a?!0:(a=!!await ce(e.client,Is,"getCode")({address:s}),a)},...e.sign?{async sign(o){let[{factory:i,factoryData:u},d]=await Promise.all([this.getFactoryArgs(),e.sign(o)]);return i&&u?L4({address:i,data:u,signature:d}):d}}:{},async signMessage(o){let[{factory:i,factoryData:u},d]=await Promise.all([this.getFactoryArgs(),e.signMessage(o)]);return i&&u&&i!=="0x7702"?L4({address:i,data:u,signature:d}):d},async signTypedData(o){let[{factory:i,factoryData:u},d]=await Promise.all([this.getFactoryArgs(),e.signTypedData(o)]);return i&&u&&i!=="0x7702"?L4({address:i,data:u,signature:d}):d},type:"smart"}}Ve();Il();function Jo(e){let t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=F(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=F(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=F(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=F(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=F(e.paymasterPostOpGasLimit)),typeof e.paymasterSignature<"u"&&(t.paymasterSignature=e.paymasterSignature),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=F(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=F(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=F(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=CLe(e.authorization)),t}function CLe(e){return{address:e.address,chainId:F(e.chainId),nonce:F(e.nonce),r:e.r?F(BigInt(e.r),{size:32}):It("0x",{size:32}),s:e.s?F(BigInt(e.s),{size:32}):It("0x",{size:32}),yParity:e.yParity?F(e.yParity,{size:1}):It("0x",{size:32})}}var dn=async(e,t,n,r)=>{if(r.length===0)throw new Error("RedeemDelegations invalid zero redemptions");let a=[],s=[],o=[];r.forEach(l=>{a.push(l.permissionContext),s.push(l.executions),o.push(l.mode)});let i=s2(a),u=nc(s),{request:d}=await t.simulateContract({account:e.account,address:n,abi:_0.abi,functionName:"redeemDelegations",args:[i,o,u]});return await e.writeContract(d)};var Oee="1.3.0",PLe=new Map,RLe=(e,t)=>`${t}:${e}`;function F6(e,t=Oee){let n=RLe(e,t),r=PLe.get(n);if(r)return r;let a=$ee[t]?.[e];if(!a)throw new Error(`No contracts found for version ${t} chain ${e}`);return $Le(a)}function $Le(e){return{DelegationManager:e.DelegationManager,EntryPoint:e.EntryPoint,SimpleFactory:e.SimpleFactory,implementations:{MultiSigDeleGatorImpl:e.MultiSigDeleGatorImpl,HybridDeleGatorImpl:e.HybridDeleGatorImpl,EIP7702StatelessDeleGatorImpl:e.EIP7702StatelessDeleGatorImpl},caveatEnforcers:{AllowedCalldataEnforcer:e.AllowedCalldataEnforcer,AllowedMethodsEnforcer:e.AllowedMethodsEnforcer,AllowedTargetsEnforcer:e.AllowedTargetsEnforcer,ArgsEqualityCheckEnforcer:e.ArgsEqualityCheckEnforcer,BlockNumberEnforcer:e.BlockNumberEnforcer,DeployedEnforcer:e.DeployedEnforcer,ERC20BalanceChangeEnforcer:e.ERC20BalanceChangeEnforcer,ERC20TransferAmountEnforcer:e.ERC20TransferAmountEnforcer,ERC20StreamingEnforcer:e.ERC20StreamingEnforcer,ERC721BalanceChangeEnforcer:e.ERC721BalanceChangeEnforcer,ERC721TransferEnforcer:e.ERC721TransferEnforcer,ERC1155BalanceChangeEnforcer:e.ERC1155BalanceChangeEnforcer,IdEnforcer:e.IdEnforcer,LimitedCallsEnforcer:e.LimitedCallsEnforcer,NonceEnforcer:e.NonceEnforcer,TimestampEnforcer:e.TimestampEnforcer,ValueLteEnforcer:e.ValueLteEnforcer,NativeTokenTransferAmountEnforcer:e.NativeTokenTransferAmountEnforcer,NativeBalanceChangeEnforcer:e.NativeBalanceChangeEnforcer,NativeTokenStreamingEnforcer:e.NativeTokenStreamingEnforcer,NativeTokenPaymentEnforcer:e.NativeTokenPaymentEnforcer,OwnershipTransferEnforcer:e.OwnershipTransferEnforcer,RedeemerEnforcer:e.RedeemerEnforcer,SpecificActionERC20TransferBatchEnforcer:e.SpecificActionERC20TransferBatchEnforcer,ERC20PeriodTransferEnforcer:e.ERC20PeriodTransferEnforcer,NativeTokenPeriodTransferEnforcer:e.NativeTokenPeriodTransferEnforcer,ExactCalldataBatchEnforcer:e.ExactCalldataBatchEnforcer,ExactCalldataEnforcer:e.ExactCalldataEnforcer,ExactExecutionEnforcer:e.ExactExecutionEnforcer,ExactExecutionBatchEnforcer:e.ExactExecutionBatchEnforcer,MultiTokenPeriodEnforcer:e.MultiTokenPeriodEnforcer}}}var QP={PackedUserOperation:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"entryPoint",type:"address"}]},Nee=({userOperation:e,entryPoint:t,chainId:n,name:r,address:a,version:s="1"})=>{let o=f2({...e,signature:"0x"});return{domain:{chainId:n,name:r,version:s,verifyingContract:a},types:QP,primaryType:"PackedUserOperation",message:{...o,entryPoint:t.address}}};Y();Y();Y();Y();T6();Y();T6();var Lee={};Ie(Lee,{caveatEnforcerActions:()=>qee,erc7710BundlerActions:()=>KLe,erc7710WalletActions:()=>ZLe,erc7715ProviderActions:()=>WLe,getErc20PeriodTransferEnforcerAvailableAmount:()=>Uee,getErc20StreamingEnforcerAvailableAmount:()=>Hee,getMultiTokenPeriodEnforcerAvailableAmount:()=>Fee,getNativeTokenPeriodTransferEnforcerAvailableAmount:()=>zee,getNativeTokenStreamingEnforcerAvailableAmount:()=>jee,isValid7702Implementation:()=>YP,requestExecutionPermissions:()=>Bee,signDelegation:()=>Gee,signDelegationActions:()=>GLe,signUserOperation:()=>Vee,signUserOperationActions:()=>VLe});async function DLe(e,t){if(!t.to)throw new Error("`to` is required. `sendTransactionWithDelegation` cannot be used to deploy contracts.");let n=[Pt({target:t.to,value:t.value,callData:t.data})],r=X({abi:_0.abi,functionName:"redeemDelegations",args:[[t.permissionsContext],["0x0000000000000000000000000000000000000000000000000000000000000000"],nc([n])]}),{value:a,permissionsContext:s,delegationManager:o,...i}=t;return await e.sendTransaction({...i,to:t.delegationManager,data:r})}async function MLe(e,t){if(t.accountMetadata){let{publicClient:n}=t,r={},a=n.chain?.id;if(!a)throw new Error("Chain ID is not set");let{SimpleFactory:s}=F6(a),o=t.accountMetadata.filter(u=>{if(!Tr(u.factory,s))throw new Error(`Invalid accountMetadata: ${u.factory} is not allowed.`);let d=Ae([u.factory,u.factoryData]),l=r[d];return r[d]=!0,!l}),i=(await Promise.all(o.map(async({factory:u,factoryData:d})=>{if(!await n.call({to:u,data:d}).then(()=>!1).catch(()=>!0))return{to:u,value:0n,data:d}}))).filter(u=>u!==void 0);t.calls=[...i,...t.calls]}return e.sendUserOperation(t)}async function Bee(e,t){let n=t.map(OLe),r=await e.request({method:"wallet_requestExecutionPermissions",params:n},{retryCount:0});if(!r)throw new Error("Failed to grant permissions");return r}function OLe(e){let{chainId:t,address:n,expiry:r,isAdjustmentAllowed:a}=e,s=LLe(e.permission.type),o=typeof e.signer=="string"?e.signer:e.signer.data.address,i=[{type:"expiry",isAdjustmentAllowed:a,data:{timestamp:r}}];return{...{...n?{address:n}:{}},chainId:ge(t),permission:s({permission:e.permission,isAdjustmentAllowed:a}),signer:{type:"account",data:{address:o}},rules:i}}function rc(e){return e!=null}function NLe(e,t){if(!rc(e))throw new Error(`Invalid parameters: ${t??"value"} is required`)}function Hi(e,t){if(NLe(e,t),typeof e=="string"){if(!mn(e))throw new Error(`Invalid parameters: ${t??"value"} is not a valid hex value`);return e}return ge(e)}function LLe(e){switch(e){case"native-token-stream":return({permission:t,isAdjustmentAllowed:n})=>BLe({permission:t,isAdjustmentAllowed:n});case"erc20-token-stream":return({permission:t,isAdjustmentAllowed:n})=>ULe({permission:t,isAdjustmentAllowed:n});case"native-token-periodic":return({permission:t,isAdjustmentAllowed:n})=>HLe({permission:t,isAdjustmentAllowed:n});case"erc20-token-periodic":return({permission:t,isAdjustmentAllowed:n})=>FLe({permission:t,isAdjustmentAllowed:n});case"erc20-token-revocation":return({permission:t,isAdjustmentAllowed:n})=>zLe({permission:t,isAdjustmentAllowed:n});default:throw new Error(`Unsupported permission type: ${e}`)}}function BLe({permission:e,isAdjustmentAllowed:t}){let{data:{initialAmount:n,justification:r,maxAmount:a,startTime:s,amountPerSecond:o}}=e,i={...rc(n)&&{initialAmount:Hi(n,"initialAmount")},...rc(a)&&{maxAmount:Hi(a,"maxAmount")},...rc(s)&&{startTime:Number(s)},...r?{justification:r}:{}};return{type:"native-token-stream",data:{amountPerSecond:Hi(o,"amountPerSecond"),...i},isAdjustmentAllowed:t}}function ULe({permission:e,isAdjustmentAllowed:t}){let{data:{tokenAddress:n,amountPerSecond:r,initialAmount:a,startTime:s,maxAmount:o,justification:i}}=e,u={...rc(a)&&{initialAmount:Hi(a,"initialAmount")},...rc(o)&&{maxAmount:Hi(o,"maxAmount")},...rc(s)&&{startTime:Number(s)},...i?{justification:i}:{}};return{type:"erc20-token-stream",data:{tokenAddress:Hi(n,"tokenAddress"),amountPerSecond:Hi(r,"amountPerSecond"),...u},isAdjustmentAllowed:t}}function HLe({permission:e,isAdjustmentAllowed:t}){let{data:{periodAmount:n,periodDuration:r,startTime:a,justification:s}}=e,o={...rc(a)&&{startTime:Number(a)},...s?{justification:s}:{}};return{type:"native-token-periodic",data:{periodAmount:Hi(n,"periodAmount"),periodDuration:Number(r),...o},isAdjustmentAllowed:t}}function FLe({permission:e,isAdjustmentAllowed:t}){let{data:{tokenAddress:n,periodAmount:r,periodDuration:a,startTime:s,justification:o}}=e,i={...rc(s)&&{startTime:Number(s)},...o?{justification:o}:{}};return{type:"erc20-token-periodic",data:{tokenAddress:Hi(n,"tokenAddress"),periodAmount:Hi(r,"periodAmount"),periodDuration:Number(a),...i},isAdjustmentAllowed:t}}function zLe({permission:e,isAdjustmentAllowed:t}){let{data:{justification:n}}=e;return{type:"erc20-token-revocation",data:{...n?{justification:n}:{}},isAdjustmentAllowed:t}}function l2({delegation:e,enforcerAddress:t,enforcerName:n}){let r=e.caveats.filter(o=>o.enforcer.toLowerCase()===t.toLowerCase());if(r.length===0)throw new Error(`No caveat found with enforcer matching ${n}`);if(r.length>1)throw new Error(`Multiple caveats found with enforcer matching ${n}`);let[{terms:a,args:s}]=r;return{terms:a,args:s}}function p2(e){if(!e.DelegationManager)throw new Error("Delegation manager address not found");return e.DelegationManager}function m2({enforcerName:e,environment:t}){let n=t.caveatEnforcers[e];if(!n)throw new Error(`${e} not found in environment`);return n}async function Uee(e,t,n){let r="ERC20PeriodTransferEnforcer",a=p2(t),s=m2({enforcerName:r,environment:t}),o=H5(n.delegation),{terms:i}=l2({delegation:n.delegation,enforcerAddress:s,enforcerName:r});return f7.getAvailableAmount({client:e,contractAddress:s,delegationHash:o,delegationManager:a,terms:i})}async function Hee(e,t,n){let r="ERC20StreamingEnforcer",a=p2(t),s=m2({enforcerName:r,environment:t}),o=H5(n.delegation),{terms:i}=l2({delegation:n.delegation,enforcerAddress:s,enforcerName:r});return l7.getAvailableAmount({client:e,contractAddress:s,delegationManager:a,delegationHash:o,terms:i})}async function Fee(e,t,n){let r="MultiTokenPeriodEnforcer",a=p2(t),s=m2({enforcerName:r,environment:t}),o=H5(n.delegation),{terms:i,args:u}=l2({delegation:n.delegation,enforcerAddress:s,enforcerName:r});return p7.getAvailableAmount({client:e,contractAddress:s,delegationHash:o,delegationManager:a,terms:i,args:u})}async function zee(e,t,n){let r="NativeTokenPeriodTransferEnforcer",a=p2(t),s=m2({enforcerName:r,environment:t}),o=H5(n.delegation),{terms:i}=l2({delegation:n.delegation,enforcerAddress:s,enforcerName:r});return m7.getAvailableAmount({client:e,contractAddress:s,delegationHash:o,delegationManager:a,terms:i})}async function jee(e,t,n){let r="NativeTokenStreamingEnforcer",a=p2(t),s=m2({enforcerName:r,environment:t}),o=H5(n.delegation),{terms:i}=l2({delegation:n.delegation,enforcerAddress:s,enforcerName:r});return b7.getAvailableAmount({client:e,contractAddress:s,delegationManager:a,delegationHash:o,terms:i})}var qee=({environment:e})=>t=>({getErc20PeriodTransferEnforcerAvailableAmount:async n=>Uee(t,e,n),getErc20StreamingEnforcerAvailableAmount:async n=>Hee(t,e,n),getMultiTokenPeriodEnforcerAvailableAmount:async n=>Fee(t,e,n),getNativeTokenPeriodTransferEnforcerAvailableAmount:async n=>zee(t,e,n),getNativeTokenStreamingEnforcerAvailableAmount:async n=>jee(t,e,n)}),jLe="0xef0100";function qLe(e){return e?.length!==48||!e.toLowerCase().startsWith(jLe.toLowerCase())?null:`0x${e.slice(8)}`}async function YP({client:e,accountAddress:t,environment:n}){try{let r=await Is(e,{address:t}),a=qLe(r);if(!a)return!1;let s=n.implementations.EIP7702StatelessDeleGatorImpl;return s?Tr(a,s):!1}catch{return!1}}async function Gee(e,t){let{account:n=e.account,delegation:r,delegationManager:a,chainId:s,name:o="DelegationManager",version:i="1",allowInsecureUnrestrictedDelegation:u=!1}=t;if(!n)throw new z("Account not found. Please provide an account.");let d=at(n),l=Cee({delegation:r,delegationManager:a,chainId:s,name:o,version:i,allowInsecureUnrestrictedDelegation:u});return e.signTypedData({account:d,...l})}function GLe(){return e=>({signDelegation:async t=>Gee(e,{chainId:t.chainId??(()=>{if(!e.chain?.id)throw new z("Chain ID is required. Either provide it in parameters or configure the client with a chain.");return e.chain.id})(),...t})})}async function Vee(e,t){let{account:n=e.account,userOperation:r,entryPoint:a,chainId:s,name:o,address:i,version:u="1"}=t;if(!n)throw new z("Account not found. Please provide an account.");let d=at(n),l=Nee({userOperation:r,entryPoint:a,chainId:s,name:o,address:i,version:u});return e.signTypedData({account:d,...l})}function VLe(){return e=>({signUserOperation:async t=>Vee(e,{chainId:t.chainId??(()=>{if(!e.chain?.id)throw new z("Chain ID is required. Either provide it in parameters or configure the client with a chain.");return e.chain.id})(),...t})})}var WLe=()=>e=>({requestExecutionPermissions:async t=>Bee(e,t)}),ZLe=()=>e=>({sendTransactionWithDelegation:async t=>DLe(e,t)}),KLe=()=>e=>({sendUserOperationWithDelegation:async t=>MLe(e,t)});Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();Y();var eR={};Ie(eR,{getDelegationManager:()=>XLe,getDeposit:()=>JLe,getEntryPoint:()=>QLe,getNonce:()=>YLe,getProxyImplementation:()=>Wee,getProxyVersion:()=>eBe,isValidSignature:()=>tBe});var XLe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:wn.abi,functionName:"delegationManager"}),JLe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:wn.abi,functionName:"getDeposit"}),QLe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:wn.abi,functionName:"entryPoint"}),YLe=async({client:e,contractAddress:t,key:n})=>await se(e,{address:t,abi:wn.abi,functionName:"getNonce",args:n?[n]:void 0}),Wee=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:wn.abi,functionName:"getImplementation"}),eBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:wn.abi,functionName:"getInitializedVersion"}),tBe=async({client:e,contractAddress:t,hash:n,signature:r})=>await se(e,{address:t,abi:wn.abi,functionName:"isValidSignature",args:[n,r]}),nBe=({hash:e,signature:t})=>X({abi:wn.abi,functionName:"isValidSignature",args:[e,t]});async function tR({client:e,contractAddress:t}){let n=await Is(e,{address:t});return!!n&&n!=="0x"}async function Zee({client:e,contractAddress:t,expectedImplementationAddress:n}){return await tR({client:e,contractAddress:t})?await Wee({client:e,contractAddress:t})===n:!1}var g7=({implementationAddress:e,initcode:t})=>_i({abi:c7.abi,args:[e,t],bytecode:c7.bytecode}),Kee=async({client:e,hybridDeleGatorAddress:t,eoaOwner:n,p256Owners:r})=>Fe(e,{address:t,abi:i0.abi,functionName:"initialize",args:[n,r.map(a=>a.keyId),r.map(a=>a.x),r.map(a=>a.y)]}),nR=({eoaOwner:e,p256Owners:t})=>X({abi:i0.abi,functionName:"initialize",args:[e,t.map(n=>n.keyId),t.map(n=>n.x),t.map(n=>n.y)]}),rR={};Ie(rR,{addKey:()=>rBe,initializeHybridDeleGator:()=>nR,reinitializeHybridDeleGator:()=>aBe,removeKey:()=>sBe,updateSigners:()=>oBe});var Xee=async({client:e,hybridDeleGatorAddress:t,p256Owner:n})=>Fe(e,{address:t,abi:i0.abi,functionName:"addKey",args:[n.keyId,n.x,n.y]}),rBe=({p256Owner:e})=>X({abi:i0.abi,functionName:"addKey",args:[e.keyId,e.x,e.y]}),Jee=async({client:e,hybridDeleGatorAddress:t,version:n,eoaOwner:r,p256Owners:a,removeExistingP256Owners:s})=>Fe(e,{address:t,abi:i0.abi,functionName:"reinitialize",args:[n,r,a.map(o=>o.keyId),a.map(o=>o.x),a.map(o=>o.y),s]}),aBe=({version:e,eoaOwner:t,p256Owners:n,removeExistingP256Owners:r})=>X({abi:i0.abi,functionName:"reinitialize",args:[e,t,n.map(a=>a.keyId),n.map(a=>a.x),n.map(a=>a.y),r]}),Qee=async({client:e,hybridDeleGatorAddress:t,keyId:n})=>Fe(e,{address:t,abi:i0.abi,functionName:"removeKey",args:[n]}),sBe=({keyId:e})=>X({abi:i0.abi,functionName:"removeKey",args:[e]}),Yee=async({client:e,hybridDeleGatorAddress:t,eoaOwner:n,p256Owners:r})=>Fe(e,{address:t,abi:i0.abi,functionName:"updateSigners",args:[n,r.map(a=>a.keyId),r.map(a=>a.x),r.map(a=>a.y)]}),oBe=({eoaOwner:e,p256Owners:t})=>X({abi:i0.abi,functionName:"updateSigners",args:[e,t.map(n=>n.keyId),t.map(n=>n.x),t.map(n=>n.y)]}),ete=async({client:e,multiSigDeleGatorAddress:t,owners:n,threshold:r})=>Fe(e,{address:t,abi:un.abi,functionName:"initialize",args:[n,r]}),aR=({owners:e,threshold:t})=>X({abi:un.abi,functionName:"initialize",args:[e,t]}),sR={};Ie(sR,{addSigner:()=>iBe,initializeMultiSigDeleGator:()=>aR,reinitializeMultiSigDeleGator:()=>cBe,removeSigner:()=>uBe,replaceSigner:()=>dBe,updateMultiSigParameters:()=>fBe,updateThreshold:()=>lBe});var tte=async({client:e,multiSigDeleGatorAddress:t,signer:n})=>Fe(e,{address:t,abi:un.abi,functionName:"addSigner",args:[n]}),iBe=({signer:e})=>X({abi:un.abi,functionName:"addSigner",args:[e]}),nte=async({client:e,multiSigDeleGatorAddress:t,version:n,owners:r,threshold:a,removeExistingOwners:s})=>Fe(e,{address:t,abi:un.abi,functionName:"reinitialize",args:[n,r,a,s]}),cBe=({version:e,owners:t,threshold:n,removeExistingOwners:r})=>X({abi:un.abi,functionName:"reinitialize",args:[e,t,n,r]}),rte=async({client:e,multiSigDeleGatorAddress:t,signer:n})=>Fe(e,{address:t,abi:un.abi,functionName:"removeSigner",args:[n]}),uBe=({signer:e})=>X({abi:un.abi,functionName:"removeSigner",args:[e]}),ate=async({client:e,multiSigDeleGatorAddress:t,oldSigner:n,newSigner:r})=>Fe(e,{address:t,abi:un.abi,functionName:"replaceSigner",args:[n,r]}),dBe=({oldSigner:e,newSigner:t})=>X({abi:un.abi,functionName:"replaceSigner",args:[e,t]}),ste=async({client:e,multiSigDeleGatorAddress:t,owners:n,threshold:r,removeExistingOwners:a})=>Fe(e,{address:t,abi:un.abi,functionName:"updateMultiSigParameters",args:[n,r,a]}),fBe=({owners:e,threshold:t,removeExistingOwners:n})=>X({abi:un.abi,functionName:"updateMultiSigParameters",args:[e,t,n]}),ote=async({client:e,multiSigDeleGatorAddress:t,threshold:n})=>Fe(e,{address:t,abi:un.abi,functionName:"updateThreshold",args:[n]}),lBe=({threshold:e})=>X({abi:un.abi,functionName:"updateThreshold",args:[e]}),oR=async({client:e,factoryAddress:t,creationCode:n,salt:r})=>Fe(e,{address:t,abi:sp.abi,functionName:"deploy",args:[n,r]}),iR=(e,t)=>X({abi:sp.abi,functionName:"deploy",args:[e,t]}),ite=async({client:e,factoryAddress:t,creationCode:n,salt:r})=>{let{request:a}=await oR({client:e,factoryAddress:t,creationCode:n,salt:r});return Mt(e,a)},cR={};Ie(cR,{create2Deploy:()=>iR});var uR=async({client:e,contractAddress:t,execution:n})=>Fe(e,{address:t,abi:wn.abi,functionName:"execute",args:[n]}),cte=async({client:e,contractAddress:t,execution:n})=>{let{request:r}=await uR({client:e,contractAddress:t,execution:n});return Mt(e,r)},dR=({execution:e})=>X({abi:wn.abi,functionName:"execute",args:[e]}),fR=async({client:e,contractAddress:t,mode:n,executions:r})=>Fe(e,{address:t,abi:wn.abi,functionName:"execute",args:[n,y7(r)]}),ute=async({client:e,contractAddress:t,mode:n,executions:r})=>{let{request:a}=await fR({client:e,contractAddress:t,mode:n,executions:r});return Mt(e,a)},lR=({mode:e,executions:t})=>X({abi:wn.abi,functionName:"execute",args:[e,y7(t)]}),pR={};Ie(pR,{disableDelegation:()=>pBe,enableDelegation:()=>mBe,execute:()=>dR,executeWithMode:()=>lR,isValidSignature:()=>nBe,upgradeToAndCall:()=>bBe});var mR=async({client:e,delegationManagerAddress:t,delegation:n})=>{let r=wn.abi,a=Aa(n);return Fe(e,{address:t,abi:r,functionName:"disableDelegation",args:[a]})},dte=async({client:e,delegationManagerAddress:t,delegation:n})=>{let{request:r}=await mR({client:e,delegationManagerAddress:t,delegation:n});return Mt(e,r)},pBe=({delegation:e})=>{let t=Aa(e);return X({abi:wn.abi,functionName:"disableDelegation",args:[t]})},bR=async({client:e,delegationManagerAddress:t,delegation:n})=>{let r=wn.abi,a=Aa(n);return Fe(e,{address:t,abi:r,functionName:"enableDelegation",args:[a]})},fte=async({client:e,delegationManagerAddress:t,delegation:n})=>{let{request:r}=await bR({client:e,delegationManagerAddress:t,delegation:n});return Mt(e,r)},mBe=({delegation:e})=>{let t=Aa(e);return X({abi:wn.abi,functionName:"enableDelegation",args:[t]})},yR=async({client:e,contractAddress:t,implementation:n,data:r})=>Fe(e,{address:t,abi:wn.abi,functionName:"upgradeToAndCall",args:[n,r]}),lte=async({client:e,contractAddress:t,implementation:n,data:r})=>{let{request:a}=await yR({client:e,contractAddress:t,implementation:n,data:r});return Mt(e,a)},bBe=({implementation:e,data:t})=>X({abi:wn.abi,functionName:"upgradeToAndCall",args:[e,t]});Y();Y();Y();Y();Y();Y();Y();Y();Y();var pte={};Ie(pte,{DeleGatorCore:()=>Ste,DelegationManager:()=>mte,EIP712:()=>Ete,ERC20PeriodTransferEnforcer:()=>GP,ERC20StreamingEnforcer:()=>VP,ERC20TransferAmountEnforcer:()=>Pte,EntryPoint:()=>Ite,HybridDeleGator:()=>$te,IdEnforcer:()=>Nte,LimitedCallsEnforcer:()=>Bte,MultiSigDeleGator:()=>Hte,MultiTokenPeriodEnforcer:()=>WP,NativeTokenPeriodTransferEnforcer:()=>ZP,NativeTokenStreamingEnforcer:()=>KP,NativeTokenTransferAmountEnforcer:()=>qte,NonceEnforcer:()=>Vte,Ownable2Step:()=>Qte,Pausable:()=>one,SimpleFactory:()=>bne,SpecificActionERC20TransferBatchEnforcer:()=>xne,encodeProxyCreationCode:()=>g7,isContractDeployed:()=>tR,isImplementationExpected:()=>Zee});var mte={};Ie(mte,{constants:()=>bte,encode:()=>yte,execute:()=>wte,read:()=>vte,simulate:()=>Tte});var bte={};Ie(bte,{ANY_BENEFICIARY:()=>a2,DOMAIN_VERSION:()=>hBe,NAME:()=>yBe,ROOT_AUTHORITY:()=>B6,VERSION:()=>gBe});var yBe="DelegationManager",gBe="1.3.0",hBe="1",yte={};Ie(yte,{disableDelegation:()=>wBe,enableDelegation:()=>TBe,redeemDelegations:()=>ABe});var gte=async({client:e,delegationManagerAddress:t,delegation:n})=>{let r=_0.abi,a=Aa(n);return Fe(e,{address:t,abi:r,functionName:"disableDelegation",args:[a]})},xBe=async({client:e,delegationManagerAddress:t,delegation:n})=>{let{request:r}=await gte({client:e,delegationManagerAddress:t,delegation:n});return Mt(e,r)},wBe=({delegation:e})=>{let t=Aa(e);return X({abi:_0.abi,functionName:"disableDelegation",args:[t]})},hte=async({client:e,delegationManagerAddress:t,delegation:n})=>{let r=_0.abi,a=Aa(n);return Fe(e,{address:t,abi:r,functionName:"enableDelegation",args:[a]})},vBe=async({client:e,delegationManagerAddress:t,delegation:n})=>{let{request:r}=await hte({client:e,delegationManagerAddress:t,delegation:n});return Mt(e,r)},TBe=({delegation:e})=>{let t=Aa(e);return X({abi:_0.abi,functionName:"enableDelegation",args:[t]})},xte=async({client:e,delegationManagerAddress:t,delegations:n,modes:r,executions:a})=>{let s=_0.abi;return Fe(e,{address:t,abi:s,functionName:"redeemDelegations",args:[s2(n),r,nc(a)]})},SBe=async({client:e,delegationManagerAddress:t,delegations:n,modes:r,executions:a})=>{let{request:s}=await xte({client:e,delegationManagerAddress:t,delegations:n,modes:r,executions:a});return Mt(e,s)},ABe=({delegations:e,modes:t,executions:n})=>X({abi:_0.abi,functionName:"redeemDelegations",args:[s2(e),t,nc(n)]}),wte={};Ie(wte,{disableDelegation:()=>xBe,enableDelegation:()=>vBe,redeemDelegations:()=>SBe});var vte={};Ie(vte,{disabledDelegations:()=>_Be,getAnyDelegate:()=>EBe,getRootAuthority:()=>kBe});var _Be=async({client:e,contractAddress:t,delegationHash:n})=>await se(e,{address:t,abi:_0.abi,functionName:"disabledDelegations",args:[n]}),EBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:_0.abi,functionName:"ANY_DELEGATE"}),kBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:_0.abi,functionName:"ROOT_AUTHORITY"}),Tte={};Ie(Tte,{disableDelegation:()=>gte,enableDelegation:()=>hte,redeemDelegations:()=>xte});var Ste={};Ie(Ste,{encode:()=>pR,execute:()=>Ate,read:()=>eR,simulate:()=>_te});var Ate={};Ie(Ate,{disableDelegation:()=>dte,enableDelegation:()=>fte,execute:()=>cte,executeWithMode:()=>ute,upgradeToAndCall:()=>lte});var _te={};Ie(_te,{disableDelegation:()=>mR,enableDelegation:()=>bR,execute:()=>uR,executeWithMode:()=>fR,upgradeToAndCall:()=>yR});var Ete={};Ie(Ete,{read:()=>kte});var kte={};Ie(kte,{getContractName:()=>IBe,getContractVersion:()=>CBe,getDomainVersion:()=>PBe});var IBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:[{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"NAME"}),CBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:[{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"VERSION"}),PBe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:[{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"DOMAIN_VERSION"}),Ite={};Ie(Ite,{read:()=>Cte});var Cte={};Ie(Cte,{entryPointGetNonce:()=>gR});var gR=async({client:e,entryPoint:t,contractAddress:n,key:r})=>await se(e,{address:t,abi:FP.abi,functionName:"getNonce",args:[n,r]}),Pte={};Ie(Pte,{read:()=>Rte});var Rte={};Ie(Rte,{getSpentAmount:()=>RBe,getTermsInfo:()=>$Be});var RBe=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r})=>await se(e,{address:t,abi:o2.abi,functionName:"spentMap",args:[n,r]}),$Be=async({client:e,contractAddress:t,terms:n})=>{let[r,a]=await se(e,{address:t,abi:o2.abi,functionName:"getTermsInfo",args:[n]});return{allowedContract:r,maxTokens:a}},$te={};Ie($te,{constants:()=>Ote,encode:()=>rR,read:()=>Dte,simulate:()=>Mte});var Dte={};Ie(Dte,{getKey:()=>DBe,getKeyIdHashes:()=>MBe,getKeyIdHashesCount:()=>OBe});var DBe=async({client:e,hybridDeleGatorAddress:t,keyId:n})=>await se(e,{address:t,abi:i0.abi,functionName:"getKey",args:[n]}),MBe=async({client:e,hybridDeleGatorAddress:t})=>await se(e,{address:t,abi:i0.abi,functionName:"getKeyIdHashes"}),OBe=async({client:e,hybridDeleGatorAddress:t})=>await se(e,{address:t,abi:i0.abi,functionName:"getKeyIdHashesCount"}),Mte={};Ie(Mte,{addKey:()=>Xee,initializeHybridDeleGator:()=>Kee,reinitializeHybridDeleGator:()=>Jee,removeKey:()=>Qee,updateSigners:()=>Yee});var Ote={};Ie(Ote,{ANY_BENEFICIARY:()=>a2,DOMAIN_VERSION:()=>BBe,NAME:()=>NBe,ROOT_AUTHORITY:()=>B6,VERSION:()=>LBe});var NBe="HybridDeleGator",LBe="1.3.0",BBe="1",Nte={};Ie(Nte,{read:()=>Lte});var Lte={};Ie(Lte,{getIsUsed:()=>UBe,getTermsInfo:()=>HBe});var UBe=async({client:e,contractAddress:t,delegationManager:n,delegator:r,id:a})=>await se(e,{address:t,abi:i2.abi,functionName:"getIsUsed",args:[n,r,a]}),HBe=async({client:e,contractAddress:t,terms:n})=>await se(e,{address:t,abi:i2.abi,functionName:"getTermsInfo",args:[n]}),Bte={};Ie(Bte,{read:()=>Ute});var Ute={};Ie(Ute,{callCounts:()=>FBe,getTermsInfo:()=>zBe});var FBe=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r})=>await se(e,{address:t,abi:c2.abi,functionName:"callCounts",args:[n,r]}),zBe=async({client:e,contractAddress:t,terms:n})=>await se(e,{address:t,abi:c2.abi,functionName:"getTermsInfo",args:[n]}),Hte={};Ie(Hte,{constants:()=>jte,encode:()=>sR,read:()=>Fte,simulate:()=>zte});var Fte={};Ie(Fte,{getMaxNumberOfSigners:()=>jBe,getSigners:()=>qBe,getSignersCount:()=>GBe,getThreshold:()=>VBe,isSigner:()=>WBe});var jBe=async({client:e,multiSigDeleGatorAddress:t})=>await se(e,{address:t,abi:un.abi,functionName:"MAX_NUMBER_OF_SIGNERS"}),qBe=async({client:e,multiSigDeleGatorAddress:t})=>await se(e,{address:t,abi:un.abi,functionName:"getSigners"}),GBe=async({client:e,multiSigDeleGatorAddress:t})=>await se(e,{address:t,abi:un.abi,functionName:"getSignersCount"}),VBe=async({client:e,multiSigDeleGatorAddress:t})=>await se(e,{address:t,abi:un.abi,functionName:"getThreshold"}),WBe=async({client:e,multiSigDeleGatorAddress:t,signer:n})=>await se(e,{address:t,abi:un.abi,functionName:"isSigner",args:[n]}),zte={};Ie(zte,{addSigner:()=>tte,initializeMultiSigDeleGator:()=>ete,reinitializeMultiSigDeleGator:()=>nte,removeSigner:()=>rte,replaceSigner:()=>ate,updateMultiSigParameters:()=>ste,updateThreshold:()=>ote});var jte={};Ie(jte,{MAX_NUMBER_OF_SIGNERS:()=>ZBe});var ZBe=30,qte={};Ie(qte,{read:()=>Gte});var Gte={};Ie(Gte,{getSpentAmount:()=>KBe,getTermsInfo:()=>XBe});var KBe=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r})=>await se(e,{address:t,abi:u2.abi,functionName:"spentMap",args:[n,r]}),XBe=async({client:e,contractAddress:t,terms:n})=>await se(e,{address:t,abi:u2.abi,functionName:"getTermsInfo",args:[n]}),Vte={};Ie(Vte,{encode:()=>Wte,execute:()=>Kte,read:()=>Xte,simulate:()=>Jte});var Wte={};Ie(Wte,{incrementNonce:()=>JBe});var JBe=e=>X({abi:U6.abi,functionName:"incrementNonce",args:[e]}),Zte=async({client:e,contractAddress:t,delegationManager:n})=>Fe(e,{address:t,abi:U6.abi,functionName:"incrementNonce",args:[n]}),QBe=async({client:e,contractAddress:t,delegationManager:n})=>{let{request:r}=await Zte({client:e,contractAddress:t,delegationManager:n});return Mt(e,r)},Kte={};Ie(Kte,{incrementNonce:()=>QBe});var Xte={};Ie(Xte,{currentNonce:()=>YBe,getTermsInfo:()=>eUe});var YBe=async({client:e,contractAddress:t,delegationManager:n,delegator:r})=>await se(e,{address:t,abi:U6.abi,functionName:"currentNonce",args:[n,r]}),eUe=async({client:e,contractAddress:t,terms:n})=>await se(e,{address:t,abi:U6.abi,functionName:"getTermsInfo",args:[n]}),Jte={};Ie(Jte,{incrementNonce:()=>Zte});var Qte={};Ie(Qte,{encode:()=>ane,execute:()=>ene,read:()=>Yte,simulate:()=>sne});var Yte={};Ie(Yte,{getOwner:()=>tUe,getPendingOwner:()=>nUe});var tUe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:os.abi,functionName:"owner"}),nUe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:os.abi,functionName:"pendingOwner"}),ene={};Ie(ene,{acceptOwnership:()=>rUe,renounceOwnership:()=>sUe,transferOwnership:()=>iUe});var tne=async({client:e,contractAddress:t})=>Fe(e,{address:t,abi:os.abi,functionName:"acceptOwnership"}),rUe=async({client:e,contractAddress:t})=>{let{request:n}=await tne({client:e,contractAddress:t});return Mt(e,n)},aUe=()=>X({abi:os.abi,functionName:"acceptOwnership"}),nne=async({client:e,contractAddress:t})=>Fe(e,{address:t,abi:os.abi,functionName:"renounceOwnership"}),sUe=async({client:e,contractAddress:t})=>{let{request:n}=await nne({client:e,contractAddress:t});return Mt(e,n)},oUe=()=>X({abi:os.abi,functionName:"renounceOwnership"}),rne=async({client:e,contractAddress:t,account:n})=>Fe(e,{address:t,abi:os.abi,functionName:"transferOwnership",args:[n]}),iUe=async({client:e,contractAddress:t,account:n})=>{let{request:r}=await rne({client:e,contractAddress:t,account:n});return Mt(e,r)},cUe=e=>X({abi:os.abi,functionName:"transferOwnership",args:[e]}),ane={};Ie(ane,{acceptOwnership:()=>aUe,renounceOwnership:()=>oUe,transferOwnership:()=>cUe});var sne={};Ie(sne,{acceptOwnership:()=>tne,renounceOwnership:()=>nne,transferOwnership:()=>rne});var one={};Ie(one,{encode:()=>pne,execute:()=>cne,read:()=>ine,simulate:()=>mne});var ine={};Ie(ine,{isPaused:()=>uUe});var uUe=async({client:e,contractAddress:t})=>await se(e,{address:t,abi:qP.abi,functionName:"paused"}),cne={};Ie(cne,{pause:()=>dUe,unpause:()=>lUe});var une=[{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"}],dne=async({client:e,contractAddress:t})=>Fe(e,{address:t,abi:une,functionName:"pause"}),dUe=async({client:e,contractAddress:t})=>{let{request:n}=await dne({client:e,contractAddress:t});return Mt(e,n)},fUe=()=>X({abi:une,functionName:"pause"}),fne=[{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"}],lne=async({client:e,contractAddress:t})=>Fe(e,{address:t,abi:fne,functionName:"unpause"}),lUe=async({client:e,contractAddress:t})=>{let{request:n}=await lne({client:e,contractAddress:t});return Mt(e,n)},pUe=()=>X({abi:fne,functionName:"unpause"}),pne={};Ie(pne,{pause:()=>fUe,unpause:()=>pUe});var mne={};Ie(mne,{pause:()=>dne,unpause:()=>lne});var bne={};Ie(bne,{encode:()=>cR,execute:()=>yne,read:()=>gne,simulate:()=>hne});var yne={};Ie(yne,{create2Deploy:()=>ite});var gne={};Ie(gne,{getCreate2Address:()=>mUe});var mUe=async(e,t,n,r)=>se(e,{address:t,abi:sp.abi,functionName:"computeAddress",args:[n,r]}),hne={};Ie(hne,{create2Deploy:()=>oR});var xne={};Ie(xne,{read:()=>wne});var wne={};Ie(wne,{getTermsInfo:()=>bUe,usedDelegations:()=>yUe});var bUe=async({client:e,contractAddress:t,terms:n})=>await se(e,{address:t,abi:d2.abi,functionName:"getTermsInfo",args:[n]}),yUe=async({client:e,contractAddress:t,delegationManager:n,delegationHash:r})=>await se(e,{address:t,abi:d2.abi,functionName:"usedDelegations",args:[n,r]});Y();Y();Y();S1();function hR(e){return`0x${ez(e)}`}function vne(e){return tz(e.slice(2))}function xR(e){let t=typeof e=="string"?vne(e):e,n=t.slice(0,32),r=t.slice(32,64);return{r:BigInt(hR(n)),s:BigInt(hR(r))}}var h7=(e=>(e.MultiSig="MultiSig",e.Hybrid="Hybrid",e.Stateless7702="Stateless7702",e))(h7||{});var Tne=async({factory:e,implementations:t,implementation:n,deployParams:r,deploySalt:a})=>{let s,o;switch(n){case"Hybrid":{let[p,y,m,g]=r;if(!t.HybridDeleGatorImpl)throw new Error("HybridDeleGatorImpl address not provided in environment");s=t.HybridDeleGatorImpl;let h=y.map((w,v)=>{let T=m[v],A=g[v];if(!T||!A)throw new Error(`Missing X or Y value for keyId ${w} at index ${v}`);return{keyId:w,x:T,y:A}});o=nR({eoaOwner:p,p256Owners:h});break}case"MultiSig":{let[p,y]=r;if(!t.MultiSigDeleGatorImpl)throw new Error("MultiSigDeleGatorImpl address not provided in environment");s=t.MultiSigDeleGatorImpl,o=aR({owners:p,threshold:y});break}default:throw new Error(`Implementation type '${n}' not supported`)}let i=It(a,{dir:"left",size:32}),u=g7({implementationAddress:s,initcode:o}),d=rI({bytecode:u,from:e,opcode:"CREATE2",salt:i});return{factoryData:iR(u,i),address:d}},wR=e=>"permissionsContext"in e&&"delegationManager"in e,gUe=e=>{let{permissionsContext:t,delegationManager:n,to:r,value:a,data:s}=e,o=Pt({target:r,value:a,callData:s});if(!t)return o;let i=X({abi:_0.abi,functionName:"redeemDelegations",args:[[t],["0x0000000000000000000000000000000000000000000000000000000000000000"],nc([[o]])]});return Pt({target:n,callData:i})},hUe=e=>{if(e.length===1){let r=e[0];if(r&&!wR(r)){let{to:a,value:s,data:o}=r,i=Pt({target:a,value:s,callData:o});return dR({execution:i})}}let t=e.map(r=>{if(wR(r))return gUe(r);let{to:a,value:s,data:o}=r;return Pt({target:a,value:s,callData:o})}),n=e.length===1?"0x0000000000000000000000000000000000000000000000000000000000000000":"0x0100000000000000000000000000000000000000000000000000000000000000";return lR({mode:n,executions:t})},Sne=async(e,t)=>{if(t.length===1){let n=t[0];if(n&&n.to===e&&!wR(n))return n.data??"0x"}return hUe(t)},Ane=115792089210356248762697446949407573529996955224135760342422259061068512044369n,xUe=Ane/2n,_ne=b1("bytes32, uint256, uint256, bytes, bool, string, string, uint256"),wUe=e=>{try{let{challenge:t}=JSON.parse(e);if(t===void 0)throw new Error('No "challenge" found in the input string');return e.split(t)}catch(t){throw new Error('No "challenge" found in the input string',{cause:t})}},vUe=e=>{try{let t=e.indexOf('"type":');if(t===-1)throw new Error('No "type" found in the input string');return BigInt(t)}catch(t){throw new Error('No "type" found in the input string',{cause:t})}};function Ene(e,t,n,r){let a=Ke(A0(["string"],[e])),s=xR(t),{s:o}=s;for(;o>xUe;)o=Ane-o;let{r:i}=s,[u,d]=wUe(n),{userVerified:l}=SUe(r),p=vUe(n);return Zt(_ne,[a,i,o,r,l,u,d,p])}var TUe=32;function SUe(e){let t=bn(e),r=new Uint8Array(t)[TUe];if(r===void 0)throw new Error("Authenticator flags not found in authenticator data");return{userVerified:(r&4)!==0}}var kne=e=>{let t=Ke(A0(["string"],["AuthenticatorData"])),a=Ae([t,"0x05","0x00000000"]),s=Ke(A0(["string"],[e])),o=57896044605178124381348723474703786764998477612067880171211129530534256022184n;return Zt(_ne,[s,o,o,a,!0,'{"type":"webauthn.get","challenge":"','","origin":"passkey-domain","crossOrigin":false}',1n])};Y();Y();var AUe=["ECDSA"],Ine=({signatures:e})=>{if(e.length===0)return"0x";for(let{type:n}of e)if(!AUe.includes(n))throw new Error(`Invalid signature type: ${n}`);let t=[...e].sort((n,r)=>n.signer.localeCompare(r.signer));return Ae(t.map(({signature:n})=>n))},vR="0x000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000011b",TR=e=>({signMessage:e.walletClient.signMessage,signTypedData:async t=>e.walletClient.signTypedData(t),getStubSignature:async()=>vR}),SR=e=>({signMessage:e.account.signMessage,signTypedData:e.account.signTypedData,getStubSignature:async()=>vR}),_Ue=e=>{if("walletClient"in e)return TR(e);if("account"in e){let{signMessage:i,signTypedData:u,getStubSignature:d}=SR(e);if(!i)throw new Error("Account does not support signMessage");if(!u)throw new Error("Account does not support signTypedData");return{signMessage:i,signTypedData:u,getStubSignature:d}}let{keyId:t,webAuthnAccount:n}=e;if(n.type!=="webAuthn")throw new Error("Account is not a webAuthn account");let r=({signature:i,webauthn:u})=>Ene(t,i,u.clientDataJSON,u.authenticatorData);return{signMessage:async i=>n.signMessage(i).then(r),signTypedData:async i=>n.signTypedData(i).then(r),getStubSignature:async()=>kne(t)}},EUe=e=>{let t=e.map(s=>{let o,i,u;if("walletClient"in s){let{signMessage:d,signTypedData:l}=TR(s);o=d,i=l,u=s.walletClient.account.address}else{let{signMessage:d,signTypedData:l}=SR(s);if(!d)throw new Error("Account does not support signMessage");if(!l)throw new Error("Account does not support signTypedData");o=d,i=l,u=s.account.address}return{address:u,individualSignMessage:o,individualSignTypedData:i}});return{signMessage:async s=>{let o=t.map(async({individualSignMessage:u,address:d})=>({signature:await u(s),signer:d,type:"ECDSA"})),i=await Promise.all(o);return Ine({signatures:i})},signTypedData:async s=>{let o=t.map(async({individualSignTypedData:u,address:d})=>({signature:await u(s),signer:d,type:"ECDSA"})),i=await Promise.all(o);return Ine({signatures:i})},getStubSignature:async()=>Ae(t.map(()=>vR))}},kUe=e=>{if("walletClient"in e)return TR(e);if("account"in e){let{signMessage:t,signTypedData:n,getStubSignature:r}=SR(e);if(!t)throw new Error("Account does not support signMessage");if(!n)throw new Error("Account does not support signTypedData");return{signMessage:t,signTypedData:n,getStubSignature:r}}throw new Error("Invalid signer config")},IUe=e=>{let{implementation:t}=e;if(t==="Hybrid")return _Ue(e.signer);if(t==="MultiSig")return EUe(e.signer);if(t==="Stateless7702")return kUe(e.signer);throw new Error(`Implementation type '${t}' not supported`)},CUe="0.7";async function Cne(e){let{client:t,client:{chain:n},implementation:r}=e;if(!n)throw new Error("Chain not specified");let a=IUe({implementation:r,signer:e.signer}),s=e.environment??F6(n.id),o,i;if(e.address)i=void 0,o=e.address;else{if(r==="Stateless7702")throw new Error("Stateless7702 does not support counterfactual accounts");let T=await Tne({factory:s.SimpleFactory,implementations:s.implementations,implementation:r,deployParams:e.deployParams,deploySalt:e.deploySalt});o=T.address,i=T.factoryData}let u={abi:XP,address:s.EntryPoint,version:CUe},{abi:d,contractName:l}={Hybrid:{contractName:"HybridDeleGator",abi:i0.abi},MultiSig:{contractName:"MultiSigDeleGator",abi:un.abi},Stateless7702:{contractName:"EIP7702StatelessDeleGator",abi:HP.abi}}[r],v=await JP({abi:d,client:t,entryPoint:u,environment:s,getAddress:async()=>o,getFactoryArgs:async()=>{if(i===void 0)throw new Error("Deploy params were not provided, so factory args cannot be inferred");return{factoryData:i,factory:s.SimpleFactory}},encodeCalls:async T=>Sne(o,T),getNonce:async()=>gR({client:t,entryPoint:s.EntryPoint,contractAddress:o,key:0n}),signUserOperation:async T=>{let{chainId:A}=T,_=f2({sender:o,...T,signature:"0x"});return await a.signTypedData({domain:{chainId:A??n.id,name:l,version:"1",verifyingContract:o},types:QP,primaryType:"PackedUserOperation",message:{..._,entryPoint:u.address}})},signDelegation:async T=>{let{delegation:A,chainId:_}=T,E=Aa({...A,signature:"0x"});return a.signTypedData({domain:{chainId:_??n.id,name:"DelegationManager",version:"1",verifyingContract:s.DelegationManager},types:BP,primaryType:"Delegation",message:E})},...a});return r==="Stateless7702"?{...v,isDeployed:async()=>YP({client:t,accountAddress:o,environment:s})}:v}Y();Y();var PUe=10143,E0=()=>F6(PUe),x7=BigInt("40000000000000000"),op=BigInt("500000000000000000"),Pne=BigInt("50000000000000000"),AR={swap:BigInt("140000000000000000"),transfer:BigInt("40000000000000000"),wrap:BigInt("40000000000000000"),unwrap:BigInt("40000000000000000"),stake:BigInt("70000000000000000"),unstake:BigInt("75000000000000000")},Jr=300,B0="0x0000000000000000000000000000000000000000",Ue={delegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",enforcers:{nonce:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",timestamp:"0x1046bb45C8d673d4ea75321280DB34899413c069",limitedCalls:"0x04658B29F6b82ed55274221a06Fc97D318E25416",allowedCalldata:"0xc2b0d624c1c4319760C96503BA27C347F3260f55"}},b2="0xE1302607a3251AF54c3a6e69318d6aa07F5eB46c",z5="0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",ip="0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",z6="0x92Bf12322527cAA612fd31a0e810472BBB106A8F",j6={APPROVE:0,TRADING:1,ERC20_TRANSFER:2,NATIVE_TRANSFER:3},cp="0x095ea7b3",Rne="0xa9059cbb";var up={dexRouter:"0x0000000000001fF3684f28c67538d4D072C22734",leverUpDiamond:"0xea1b8E4aB7f14F7dCA68c5B214303B13078FC5ec",nadfunRouter:"0x6F6B8F1a20703309951a5127c45B49b1CD981A22"};var RUe={Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}]},$Ue="DelegationManager",DUe="1";function k0(e,t,n){let r=n??Ue.delegationManager,a=e.caveats.map(o=>({enforcer:xe(o.enforcer),terms:o.terms})),s=String(e.salt);return{domain:{name:$Ue,version:DUe,chainId:t,verifyingContract:r},types:RUe,primaryType:"Delegation",message:{delegate:xe(e.delegate),delegator:xe(e.delegator),authority:e.authority,caveats:a,salt:s}}}t0();var $ne=115792089210356248762697446949407573529996955224135760342422259061068512044369n,MUe=$ne/2n,OUe=b1("bytes32, uint256, uint256, bytes, bool, string, string, uint256");function Dne(){let e=Ke(A0(["string"],["AuthenticatorData"]));return Ae([e,"0x05","0x00000000"])}function Mne(e){let t=bn(e),n=Buffer.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),r='{"type":"webauthn.get","challenge":"',a='","origin":"pragma.xyz","crossOrigin":false}';return{full:r+n+a,prefix:r,suffix:a}}async function One(e,t){let n=new TextEncoder().encode(t),r=new Uint8Array(await crypto.subtle.digest("SHA-256",n)),a=bn(e),s=new Uint8Array(a.length+r.length);s.set(a,0),s.set(r,a.length);let o=new Uint8Array(await crypto.subtle.digest("SHA-256",s));return ge(o)}function Nne(e){let t=bn(e);if(t.length!==64)throw new Error(`Invalid signature length: expected 64 bytes, got ${t.length}`);let n=t.slice(0,32),r=t.slice(32,64);return{r:BigInt(ge(n)),s:BigInt(ge(r))}}function Lne(e){return e>MUe?$ne-e:e}function NUe(e,t,n,r,a,s,o,i){return Zt(OUe,[e,t,n,r,a,s,o,i])}async function Bne(e){let t=await Uc();if(!t)throw new Error("No passkey found. Create one first with createPasskey()");let{x:n,y:r}=Vd(t);return{keyId:e,x:n,y:r}}function LUe(e,t){let n=e.toString(16).padStart(64,"0"),r=t.toString(16).padStart(64,"0");return`0x${n}${r}`}async function _R(e,t,n){let r=Dne(),{full:a}=Mne(e),s=await One(r,a),o=await $3(s,n??"Sign transaction"),{r:i,s:u}=Nne(o);u=Lne(u);let d=LUe(i,u),l=a.indexOf('"challenge"'),p=a.indexOf('"type"');return{signature:d,webauthn:{authenticatorData:r,clientDataJSON:a,challengeIndex:l>=0?l+13:void 0,typeIndex:p>=0?p:void 0,userVerificationRequired:!0},raw:{id:t,type:"public-key",authenticatorAttachment:"platform",response:{authenticatorData:bn(r).buffer,clientDataJSON:new TextEncoder().encode(a).buffer,signature:bn(d).buffer}}}}function BUe(e){if(typeof e=="string")return jo(e);if("raw"in e)return typeof e.raw=="string"?jo({raw:e.raw}):jo({raw:ge(e.raw)});throw new Error("Invalid SignableMessage format")}async function UUe(e,t){let n=await Uc();if(!n)throw new Error("No passkey found. Create one first with createPasskey()");return{id:e,type:"webAuthn",publicKey:n,sign:async({hash:a})=>await _R(a,e,t),signMessage:async({message:a})=>{let s=BUe(a);return await _R(s,e,t)},signTypedData:async a=>{let s=z1({domain:a.domain,types:a.types,primaryType:a.primaryType,message:a.message});return await _R(s,e,t)}}}async function Une(e,t){let n=await UUe(e,t),r=ge(e);return{webAuthnAccount:n,keyId:r}}async function Hne(){let e=await Uc();if(!e)throw new Error("No passkey found");return`pragma-${Ke(e).slice(2,18)}`}async function _n(e,t,n,r){let a=k0(e,t),s=z1({domain:a.domain,types:a.types,primaryType:a.primaryType,message:{delegate:a.message.delegate,delegator:a.message.delegator,authority:a.message.authority,caveats:a.message.caveats.map(w=>({enforcer:w.enforcer,terms:w.terms})),salt:BigInt(a.message.salt)}}),o=Dne(),{prefix:i,suffix:u,full:d}=Mne(s),l=await One(o,d),p=await $3(l,r??"Sign delegation"),{r:y,s:m}=Nne(p);m=Lne(m);let g=ge(n),h=Ke(A0(["string"],[g]));return NUe(h,y,m,o,!0,i,u,1n)}t0();mt();Te();We();function HUe(e,t){return[es,[ge(e)],[t.x],[t.y]]}async function j5(e,t){let n=t?.rpcOverride??await we(e),r=Ee(e.network.chainId,n),a=_e({chain:r,transport:gt(n,t?.rpcOverride?{}:Ot(e))}),s=await Hne(),o=await Bne(s),i=t?.touchIdMessage??"Sign transaction",u=await Une(s,i),d=F6(e.network.chainId),l=await Cne({client:a,implementation:h7.Hybrid,signer:u,deployParams:HUe(s,o),deploySalt:"0x",environment:d});return{smartAccount:l,address:xe(await l.getAddress()),keyId:s,p256Owner:o,publicClient:a,chain:r,environment:d}}async function y2(e){try{let n=await e.smartAccount.isDeployed?.();if(typeof n=="boolean")return n}catch{}let t=await e.publicClient.getBytecode({address:e.address});return!!t&&t!=="0x"}async function Fne(e){let t=await e.smartAccount.getFactoryArgs?.();return t?{factory:t.factory,factoryData:t.factoryData}:null}async function zne(e){return await e.smartAccount.getNonce?.()??0n}function jne(e){return e.smartAccount.entryPoint.address}Te();m0();var FUe=500000n,zUe=200000n,jUe=150n;function qne(e,t){let n=e>0n?e*jUe/100n:0n;return n>t?n:t}function q6(e){if(!(!e||e==="0x"))try{let t=BigInt(e);return t>0n?t:void 0}catch{return}}function Gne(e){return Jo({...e,paymaster:void 0,paymasterData:void 0,signature:"0x"})}function Vne(e,t){t.callGasLimit&&t.callGasLimit>0n&&(e.callGasLimit=t.callGasLimit),t.verificationGasLimit&&t.verificationGasLimit>0n&&(e.verificationGasLimit=t.verificationGasLimit),t.preVerificationGas&&t.preVerificationGas>0n&&(e.preVerificationGas=t.preVerificationGas),t.paymasterPostOpGasLimit&&(e.paymasterPostOpGasLimit=t.paymasterPostOpGasLimit),t.paymasterVerificationGasLimit&&(e.paymasterVerificationGasLimit=t.paymasterVerificationGasLimit),t.paymaster?(e.paymaster=t.paymaster,e.paymasterData=t.paymasterData??"0x"):(e.paymaster=`0x${t.paymasterAndData.slice(2,42)}`,e.paymasterData=`0x${t.paymasterAndData.slice(42)}`)}async function Wne(e,t,n,r){return xt(async()=>{let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-SESSION-KEY":r}},body:JSON.stringify({jsonrpc:"2.0",method:"pm_sponsorUserOperation",params:[t,n],id:1})});if(!a.ok)throw new Error(`Paymaster request failed: ${a.status}`);let s=await a.json();if(s.error)throw new Error(`Paymaster error: ${s.error.message}`);let o=s.result;if(!o)throw new Error("Pimlico paymaster did not return a result");let i=o.paymasterAndData;if((!i||i==="0x")&&o.paymaster&&o.paymasterData&&(i=`${o.paymaster}${o.paymasterData.slice(2)}`),!i||i==="0x")throw new Error("Pimlico paymaster response missing paymasterAndData");return{paymasterAndData:i,paymaster:o.paymaster,paymasterData:o.paymasterData,preVerificationGas:q6(o.preVerificationGas),verificationGasLimit:q6(o.verificationGasLimit),callGasLimit:q6(o.callGasLimit),paymasterPostOpGasLimit:q6(o.paymasterPostOpGasLimit),paymasterVerificationGasLimit:q6(o.paymasterVerificationGasLimit)}},{operationName:"paymaster-sponsor"})}async function qUe(e,t){return xt(async()=>{let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t&&{"X-SESSION-KEY":t}},body:JSON.stringify({jsonrpc:"2.0",method:"pimlico_getUserOperationGasPrice",params:[],id:1})});if(!n.ok)throw new Error(`Gas price request failed: ${n.status}`);let r=await n.json();if(r.error)throw new Error(`Gas price error: ${r.error.message}`);let a=r.result?.fast??r.result?.standard;if(!a)throw new Error("No gas price data returned");return{maxFeePerGas:BigInt(a.maxFeePerGas),maxPriorityFeePerGas:BigInt(a.maxPriorityFeePerGas)}},{operationName:"bundler-gas-price"})}async function GUe(e,t,n,r){return xt(async()=>{let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-SESSION-KEY":r}},body:JSON.stringify({jsonrpc:"2.0",method:"eth_estimateUserOperationGas",params:[t,n],id:1})});if(!a.ok)throw new Error(`Gas estimation failed: ${a.status}`);let s=await a.json();if(s.error)throw new Error(`Gas estimation error: ${s.error.message}`);let o=s.result??{};return{callGasLimit:q6(o.callGasLimit),verificationGasLimit:q6(o.verificationGasLimit??o.verificationGas),preVerificationGas:q6(o.preVerificationGas)}},{operationName:"bundler-estimate-gas"})}async function VUe(e,t,n,r){let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-SESSION-KEY":r}},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendUserOperation",params:[t,n],id:1})});if(!a.ok)throw new Error(`Send UserOp failed: ${a.status}`);let s=await a.json();if(s.error)throw new Error(`UserOp error: ${s.error.message}`);if(!s.result)throw new Error("No userOpHash returned");return s.result}async function WUe(e,t,n=6e4,r){let a=Date.now();for(;Date.now()-a<n;){let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-SESSION-KEY":r}},body:JSON.stringify({jsonrpc:"2.0",method:"eth_getUserOperationReceipt",params:[t],id:1})});if(s.ok){let o=await s.json();if(o.result)return{transactionHash:o.result.receipt?.transactionHash??o.result.transactionHash}}await new Promise(o=>setTimeout(o,2e3))}throw new Error(`Timeout waiting for UserOp ${t}`)}async function Zne(e,t,n,r){if(!r?.skipInitialChecks&&await y2(e))return{success:!0,alreadyDeployed:!0};let a;try{a=await Ol(t)}catch(A){return{success:!1,error:A instanceof Error?A.message:"Failed to get bundler URL"}}let s=await Fne(e);if(!s)return{success:!1,error:"Failed to get factory args for deployment"};let o=jne(e),i=r?.skipInitialChecks?0n:await zne(e),u=await qUe(a,n),d={sender:e.address,nonce:i,factory:s.factory,factoryData:s.factoryData,callData:"0x",callGasLimit:0n,verificationGasLimit:0n,preVerificationGas:0n,maxFeePerGas:u.maxFeePerGas,maxPriorityFeePerGas:u.maxPriorityFeePerGas,signature:"0x"},l={...d},p=await Wne(a,Gne(d),o,n);Vne(l,p);let y=!1,m=(A,_)=>{!_||_<=0n||l[A]!==_&&(l[A]=_,y=!0)};if(!l.callGasLimit||l.callGasLimit===0n||!l.verificationGasLimit||l.verificationGasLimit===0n)try{let A=Jo({...l,signature:"0x"}),_=await GUe(a,A,o,n);m("callGasLimit",_.callGasLimit),m("verificationGasLimit",_.verificationGasLimit),m("preVerificationGas",_.preVerificationGas)}catch(A){console.warn("Failed to estimate HybridDelegator gas via bundler",A)}let g=qne(l.verificationGasLimit,FUe);l.verificationGasLimit<g&&m("verificationGasLimit",g);let h=qne(l.preVerificationGas,zUe);l.preVerificationGas<h&&m("preVerificationGas",h),y&&(p=await Wne(a,Gne(l),o,n),Vne(l,p));let w=await e.smartAccount.signUserOperation(l),v=Jo({...l,signature:w}),T=await VUe(a,v,o,n);try{let A=await WUe(a,T,6e4,n);return{success:!0,userOpHash:T,transactionHash:A.transactionHash}}catch(A){return await y2(e)?{success:!0,userOpHash:T}:{success:!1,userOpHash:T,error:A instanceof Error?A.message:"Deployment failed"}}}M0();Te();mt();function ZUe(){return process.env.PRAGMA_SIGNER_TYPE==="file"}var KUe=C.object({rpc:C.string().url().optional().describe("RPC endpoint URL. Required for BYOK mode. Omit for x402 mode (auto-configured)."),chainId:C.number().optional().describe("Chain ID (auto-detected from RPC if not provided)")});function Kne(e){e.tool("setup_wallet","Initialize a new pragma wallet with passkey and smart account. This creates a P-256 key in Keychain (via Touch ID) and deploys a smart account. Private keys NEVER leave your device. Required before any trading operations.",KUe.shape,async t=>{let n=await JUe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function XUe(e){let{chainId:t}=e;try{let n=await q();if(n){let o=await ht();if(o){let i=Qe(n.network.chainId);return{success:!0,message:"Session key already configured",wallet:{smartAccountAddress:n.wallet?.smartAccountAddress??"not set \u2014 provide via delegation",sessionKeyAddress:o.address,keyId:"file-based",signingMethod:"secp256k1 (file-based)",chainId:n.network.chainId,chainName:i.displayName}}}}if(t=t??143,!cC(t)){let o=uC().join(", ");return{success:!1,message:"Chain not supported",error:`Chain ${t} is not supported. Supported chains: ${o}`}}let r=Qe(t),a=n||lC(t);a.network.chainId=t,await Ml(a);let s=await ht();return s||(s=oC(),await iC(s)),{success:!0,message:`Session key created on ${r.displayName}. Provide your Smart Account address to continue setup via delegation.`,wallet:{smartAccountAddress:"not set \u2014 provide via delegation",sessionKeyAddress:s.address,keyId:"file-based",signingMethod:"secp256k1 (file-based)",chainId:t,chainName:r.displayName}}}catch(n){return Xne(n)}}async function JUe(e){if(ZUe())return XUe(e);let{rpc:t}=e,{chainId:n}=e;try{let r=await q();if(r&&Pe(r)){let m=Qe(r.network.chainId);return{success:!0,message:"Wallet already configured",wallet:{smartAccountAddress:r.wallet.smartAccountAddress,sessionKeyAddress:r.wallet.sessionKeyAddress,keyId:r.wallet.keyId||"unknown",signingMethod:"P-256 (Touch ID)",chainId:r.network.chainId,chainName:m.displayName}}}if(t){let m=await vZ(t,n??0);if(!m.valid)return{success:!1,message:n?"RPC validation failed":"Failed to connect to RPC",error:m.error||"Could not connect to RPC endpoint"};let g=m.actualChainId??n;if(!g)return{success:!1,message:"Failed to detect chain ID",error:"RPC did not return a valid chain ID"};n=g}else n=n??143;if(!cC(n)){let m=uC().join(", ");return{success:!1,message:"Chain not supported",error:`Chain ${n} is not supported. Supported chains: ${m}`}}let a=Qe(n),s=r||lC(n);s.network.chainId=n;let o,i=!1;if(await qm()){let m=await Uc();if(!m)return{success:!1,message:"Failed to retrieve existing passkey",error:"Passkey exists but could not retrieve public key"};o=m}else o=await Z_("Create pragma wallet"),i=!0;let u=Vd(o);console.error(`P-256 Public Key ${i?"created":"retrieved"}:`),console.error(`  X: 0x${u.x.toString(16).slice(0,16)}...`),console.error(`  Y: 0x${u.y.toString(16).slice(0,16)}...`);let d=t?void 0:a.publicRpc,l=await j5(s,{rpcOverride:d}),p=await ht();if(p||(p=oC(),await iC(p)),!(!i&&await y2(l))){let m=i?{skipInitialChecks:!0}:void 0,g=await Zne(l,s,p.address,m);if(!g.success)return{success:!1,message:"Smart account deployment failed",error:g.error||"Unknown deployment error"}}return s.wallet={smartAccountAddress:l.address,sessionKeyAddress:p.address,keyId:l.keyId},await Ml(s),{success:!0,message:`Wallet created on ${a.displayName}`,wallet:{smartAccountAddress:l.address,sessionKeyAddress:p.address,keyId:l.keyId,signingMethod:"P-256 (Touch ID)",chainId:n,chainName:a.displayName}}}catch(r){return Xne(r)}}function Xne(e){let t=e instanceof Error?e.message:"Unknown error";return t.includes("Touch ID")||t.includes("biometric")?{success:!1,message:"Touch ID authentication required",error:"Please authenticate with Touch ID to create your wallet"}:t.includes("not available")?{success:!1,message:"Secure Enclave not available",error:"This device does not support Touch ID. macOS with Touch ID is required."}:t.includes("DEPRECATED")?{success:!1,message:"Using outdated code",error:t}:{success:!1,message:"Setup failed",error:t}}Y();Te();We();mt();Y();Y();var q5=[{address:"0x0000000000000000000000000000000000000000",symbol:"MON",name:"Monad",decimals:18,kind:"native",categories:["official","verified","native"]},{address:"0x3bd359c1119da7da1d913d1c4d2b7c461115433a",symbol:"WMON",name:"Wrapped MON",decimals:18,kind:"wrappedNative",categories:["official","verified","wrapped"]},{address:"0x754704bc059f8c67012fed69bc8a327a5aafb603",symbol:"USDC",name:"USD Coin",decimals:6,kind:"erc20",categories:["verified","stable"]},{address:"0xe7cd86e13ac4309349f30b3435a9d337750fc82d",symbol:"USDT0",name:"Tether USD (Stargate)",decimals:6,kind:"erc20",categories:["verified","stable"]},{address:"0x00000000efe302beaa2b3e6e1b18d08d69a9012a",symbol:"AUSD",name:"Agora USD",decimals:6,kind:"erc20",categories:["verified","stable"]},{address:"0x0c65a0bc65a5d819235b71f554d210d3f80e0852",symbol:"aprMON",name:"aPriori Staked MON",decimals:18,kind:"erc20",categories:["verified","lst"]},{address:"0x8498312a6b3cbd158bf0c93abdcf29e6e4f55081",symbol:"gMON",name:"Magma Staked MON",decimals:18,kind:"erc20",categories:["verified","lst"]},{address:"0xa3227c5969757783154c60bf0bc1944180ed81b9",symbol:"sMON",name:"Staked MON",decimals:18,kind:"erc20",categories:["verified","lst"]},{address:"0x1b68626dca36c7fe922fd2d55e4f631d962de19c",symbol:"shMON",name:"Shmonad Staked MON",decimals:18,kind:"erc20",categories:["verified","lst"]},{address:"0xee8c0e9f1bffb4eb878d8f15f368a02a35481242",symbol:"WETH",name:"Wrapped Ether",decimals:18,kind:"erc20",categories:["verified","bridged"]},{address:"0x0555e30da8f98308edb960aa94c0db47230d2b9c",symbol:"WBTC",name:"Wrapped Bitcoin",decimals:8,kind:"erc20",categories:["verified","bridged"]},{address:"0x10aeaf63194db8d453d4d85a06e5efe1dd0b5417",symbol:"wstETH",name:"Wrapped stETH",decimals:18,kind:"erc20",categories:["verified","bridged"]},{address:"0xea17e5a9efebf1477db45082d67010e2245217f1",symbol:"SOL",name:"Solana",decimals:9,kind:"erc20",categories:["verified","bridged"]},{address:"0xe85411c030fb32a9d8b14bbbc6cb19417391f711",symbol:"suBTC",name:"Synthetic Bitcoin",decimals:18,kind:"erc20",categories:["verified","synthetic"]},{address:"0x1c22531aa9747d76fff8f0a43b37954ca67d28e0",symbol:"suETH",name:"Synthetic Ether",decimals:18,kind:"erc20",categories:["verified","synthetic"]},{address:"0x350035555e10d9afaf1566aaebfced5ba6c27777",symbol:"CHOG",name:"Chog",decimals:18,kind:"erc20",categories:["verified","meme"]},{address:"0xb5f73846a656232d5d251ab1048bca88d1507777",symbol:"MCA",name:"Moyaki Cats",decimals:18,kind:"erc20",categories:["verified","meme"]},{address:"0x3842751a46d23b41a47e702473dff316e6237777",symbol:"143",name:"143",decimals:18,kind:"erc20",categories:["verified","meme"]},{address:"0x788571e0e5067adea87e6ba22a2b738ffdf48888",symbol:"UNIT",name:"Unit Protocol",decimals:18,kind:"erc20",categories:["verified"]},{address:"0x227aa9ab56564fa381b0d4d9cc4323d0c4adb669",symbol:"ANAGO",name:"Anago",decimals:18,kind:"erc20",categories:["top-contracts"]},{address:"0x0a332311633c0625f63cfc51ee33fc49826e0a3c",symbol:"APR",name:"aPriori",decimals:18,kind:"erc20",categories:["top-contracts"]},{address:"0x103222f020e98bba0ad9809a011fdf8e6f067496",symbol:"earnAUSD",name:"earnAUSD",decimals:6,kind:"erc20",categories:["verified","stable"]},{address:"0x1001ff13bf368aa4fa85f21043648079f00e1001",symbol:"LV",name:"LeverUp",decimals:18,kind:"erc20",categories:["defi"]},{address:"0x1aD7052BB331A0529c1981c3EC2bC4663498A110",symbol:"ALLOCA",name:"ALLOCA",decimals:18,kind:"erc20",categories:["defi"]},{address:"0x91ce820dD39A2B5639251E8c7837998530Fe7777",symbol:"MOTION",name:"Motion",decimals:18,kind:"erc20",categories:["verified","meme"]}];function Jne(e){return q5.find(t=>t.symbol.toLowerCase()===e.toLowerCase())}function Qne(e){return q5.find(t=>t.address.toLowerCase()===e.toLowerCase())}We();var QUe=300*1e3,dp=q5,g2,h2=new Map,x2=new Map;function YUe(){h2.clear(),x2.clear();for(let e of dp)h2.set(e.symbol.toLowerCase(),e),x2.set(e.address.toLowerCase(),e)}YUe();function eHe(e){if(!e.address)return null;try{let t=xe(e.address),n;if(typeof e.decimals=="string"?n=parseInt(e.decimals,10):typeof e.decimals=="number"?n=e.decimals:n=18,!Number.isFinite(n)||n<0||n>77)return null;let r=e.symbol?.trim(),a=e.name?.trim();if(!r)return null;let s=e.logoURI??e.logoUrl??e.logo_uri??e.image_uri??void 0,o="erc20";return t==="0x0000000000000000000000000000000000000000"?o="native":r.toUpperCase()==="WMON"&&(o="wrappedNative"),{address:t,symbol:r,name:a||r,decimals:n,kind:o,categories:e.categories||[],logoURI:s?.trim()}}catch{return null}}async function w7(e){let t=Date.now();if(g2&&t-g2.fetchedAt<QUe)return g2.tokens;try{let n=await _5("data",e);if(!n.url)return console.warn("[tokens] No Data API endpoint configured"),dp;let r=`${n.url}/tokens/category/verified`,a=await dt(r,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)return console.warn(`[tokens] Data API error: ${a.status}`),dp;let s=await a.json(),o=[];o.push(dp[0]);for(let i of s){let u=eHe(i);u&&u.address!=="0x0000000000000000000000000000000000000000"&&o.push(u)}g2={fetchedAt:t,tokens:o},h2.clear(),x2.clear();for(let i of o)h2.set(i.symbol.toLowerCase(),i),x2.set(i.address.toLowerCase(),i);return console.error(`[tokens] Loaded ${o.length} verified tokens from Data API`),o}catch(n){return console.warn("[tokens] Failed to load from Data API:",n instanceof Error?n.message:"Unknown error"),dp}}function fp(e){let t=Jne(e);return t||h2.get(e.toLowerCase())}function v7(e){let t=Qne(e);return t||x2.get(e.toLowerCase())}function Yne(){return g2?.tokens||dp}We();mt();m0();function aHe(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e,10);if(Number.isFinite(t)&&t>=0&&t<=77)return t}return null}function sHe(e,t){return e===B0?"native":t.toUpperCase()==="WMON"?"wrappedNative":"erc20"}function i0e(e){if(!e.address)return null;try{let t=xe(e.address),n=aHe(e.decimals)??18,r=e.symbol?.trim(),a=e.name?.trim();if(!r)return null;let s=e.logoURI??e.logoUrl??e.logo_uri??e.image_uri;return{address:t,symbol:r,name:a||r,decimals:n,kind:sHe(t,r),categories:e.categories||[],logoURI:s?.trim()}}catch{return null}}async function T7(e,t){if(!await Ct()){let{executeDataRequest:s}=await Promise.resolve().then(()=>(PR(),CR)),o=await s({path:e,chainId:t});return o.success?o.data??null:null}let r=await _5("data",t);if(!r.url)return null;let a=await O0(async()=>{let s=await dt(`${r.url}${e}`,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`Data API error (${s.status})`);return await s.json()},{operationName:`data-${e}`});return a.success?a.data??null:null}async function oHe(e,t){try{let n=await T7(`/token/${e}`,t);return n?i0e(n):null}catch(n){return console.warn("[data] Token fetch error:",n instanceof Error?n.message:"Unknown error"),null}}function iHe(e,t){if(!e||e.length===0)return null;let n=t.toUpperCase(),r=e.find(a=>a.symbol?.toUpperCase()===n);return i0e(r??e[0])}async function cHe(e,t){try{let n=await T7(`/tokens?find=${encodeURIComponent(e)}`,t);return iHe(n??[],e)}catch{return null}}async function is(e,t){let n=e.trim(),r=fp(n);if(r)return r;if(n.startsWith("0x")&&n.length===42){let s=v7(n);if(s)return s;let o=await oHe(n,t);return o||null}let a=await cHe(n,t);return a||null}async function c0e(e,t,n){let r=await n.readContract({address:t,abi:Xe,functionName:"balanceOf",args:[e]}),a=await n.readContract({address:t,abi:Xe,functionName:"decimals"});return{balance:le(r,a),balanceWei:r}}async function o0e(e,t,n,r,a){let s=le(n,r),o;try{o=await w2(t,a)}catch{}let i=parseFloat(s),u=o?i*o:void 0;return{entry:{symbol:e,address:t,balance:s,balanceWei:n,decimals:r,usdValue:u,usdPrice:o},usdValue:u??0}}function uHe(e){if(!e)return[];if(Array.isArray(e))return e;let t=e.data?.current_portfolio;return t?t.map(n=>{let r=parseFloat(n.quantity??"1"),a=n.usd_value;return{address:n.address,symbol:n.symbol,balance:n.quantity,decimals:n.decimals,usd_per_token:a&&r>0?String(a/r):void 0}}):[]}async function u0e(e,t,n){let r=[],a=0;try{let i=await n.getBalance({address:e});if(i>0n){let{entry:u,usdValue:d}=await o0e("MON",B0,i,18,t);r.push(u),a+=d}}catch(i){console.warn("[data] Native balance fetch error:",i instanceof Error?i.message:"Unknown error")}let o=Qe(t).tokens.wmon;if(o)try{let i=await n.readContract({address:o,abi:Xe,functionName:"balanceOf",args:[e]});if(i>0n){let{entry:u,usdValue:d}=await o0e("WMON",o,i,18,t);r.push(u),a+=d}}catch(i){console.warn("[data] WMON balance fetch error:",i instanceof Error?i.message:"Unknown error")}try{let i=await T7(`/portfolio/${e}`,t),u=uHe(i),d=new Set([B0.toLowerCase(),o?.toLowerCase()].filter(Boolean));for(let l of u){if(!l.address||!l.symbol||d.has(l.address.toLowerCase()))continue;let p=l.balance;if(!p)continue;let y=l.decimals??18,m=parseFloat(p),g=BigInt(Math.floor(m*10**y)),h=l.usd_per_token?m*parseFloat(l.usd_per_token):void 0;r.push({symbol:l.symbol,address:l.address,balance:p,balanceWei:g,decimals:y,usdValue:h}),h&&(a+=h)}}catch(i){console.warn("[data] Portfolio fetch error:",i instanceof Error?i.message:"Unknown error")}return{address:e,totalUsdValue:a,tokenCount:r.length,balances:r}}async function w2(e,t){try{let n=await T7(`/token/${e}`,t);return n?.usd_per_token?parseFloat(n.usd_per_token):void 0}catch{return}}var dHe="0x0000000000000000000000000000000000000000",fHe=C.object({token:C.string().describe("Token symbol or address to check balance for. Examples: 'MON', 'USDC', 'WMON', or contract address '0x754704Bc...'. CRITICAL: Call this FIRST before any swap/stake/wrap/transfer when user says 'all', 'half', 'max', 'quarter', or any percentage amount."),address:C.string().optional().describe("Address to check balance for. If not provided, uses user's smart account. Use when user asks about another wallet, e.g., 'check 0x123's MON balance'.")});function d0e(e){e.tool("get_balance","Get balance for specific token with USD value. CRITICAL: Call this FIRST before any swap/stake/wrap/transfer when user says 'all', 'half', 'max', 'quarter', or any percentage amount. For full portfolio, use get_all_balances instead.",fHe.shape,async t=>{let n=await lHe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function lHe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=e.address?xe(e.address):t.wallet.smartAccountAddress,r=t.network.chainId,a=Qe(r),s=await is(e.token,r);if(!s)return{success:!1,message:"Token not found",error:`Could not find token '${e.token}'. It may not be a valid token on Monad or the symbol is incorrect.`};let o=await we(t);if(!o)return{success:!1,message:"RPC not configured",error:"Please configure RPC provider"};let i=Ee(r,o),u=_e({chain:i,transport:gt(o,Ot(t))}),d=s.address.toLowerCase()===dHe.toLowerCase(),l,p;if(d){let h=await u.getBalance({address:n});p=h,l=le(h,18)}else{let h=await c0e(n,s.address,u);l=h.balance,p=h.balanceWei}let y,m;try{y=await w2(s.address,r),y&&(m=parseFloat(l)*y)}catch{}return parseFloat(l)===0?{success:!0,message:`You have 0 ${s.symbol}`,wallet:{address:n,chainId:r,chainName:a.displayName},token:{symbol:s.symbol,address:s.address,balance:"0",balanceWei:"0",decimals:s.decimals}}:{success:!0,message:m?`You have ${l} ${s.symbol} ($${m.toFixed(2)})`:`You have ${l} ${s.symbol}`,wallet:{address:n,chainId:r,chainName:a.displayName},token:{symbol:s.symbol,address:s.address,balance:l,balanceWei:p.toString(),decimals:s.decimals,usdValue:m?`$${m.toFixed(2)}`:void 0,usdPrice:y?`$${y.toFixed(6)}`:void 0}}}catch(t){return{success:!1,message:"Failed to fetch balance",error:t instanceof Error?t.message:"Unknown error"}}}Y();We();Te();mt();var pHe=C.object({address:C.string().optional().describe("Address to fetch portfolio for. If not provided, uses user's smart account. Use when user asks about another wallet, e.g., 'show 0x123's portfolio'.")});function f0e(e){e.tool("get_all_balances","Get complete portfolio with all token balances and USD values. Shows total portfolio value. Use for 'show my balances', 'portfolio', 'what do I have'. For single token balance, use get_balance instead.",pHe.shape,async t=>{let n=await mHe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function mHe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=e.address?xe(e.address):t.wallet.smartAccountAddress,r=t.network.chainId,a=Qe(r),s=await we(t);if(!s)return{success:!1,message:"RPC not configured",error:"Please configure RPC provider"};let o=Ee(r,s),i=_e({chain:o,transport:gt(s,Ot(t))}),u=await u0e(n,r,i);if(u.tokenCount===0)return{success:!0,message:"No tokens found",wallet:{address:n,chainId:r,chainName:a.displayName},portfolio:{totalUsdValue:"$0.00",tokenCount:0,balances:[]}};let d=u.balances.map(l=>({symbol:l.symbol,balance:l.balance,address:l.address,usdValue:l.usdValue?`$${l.usdValue.toFixed(2)}`:void 0}));return{success:!0,message:`Fetched ${u.tokenCount} token balance(s)`,wallet:{address:n,chainId:r,chainName:a.displayName},portfolio:{totalUsdValue:`$${u.totalUsdValue.toFixed(2)}`,tokenCount:u.tokenCount,balances:d}}}catch(t){return{success:!1,message:"Failed to fetch portfolio",error:t instanceof Error?t.message:"Unknown error"}}}Y();We();Te();mt();Y();mt();We();m0();var bHe="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",yHe=300*1e3,G5=new Map;function gHe(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`quote-${e}-${t}`}function hHe(){let e=Date.now();for(let[t,n]of G5.entries())n.expiresAt<e&&G5.delete(t)}function S7(e){return e.toLowerCase()===B0.toLowerCase()?bHe:xe(e)}function l0e(e){return{quoteId:gHe(),fromToken:{address:e.request.fromToken,symbol:e.request.fromSymbol,decimals:e.request.fromDecimals},toToken:{address:e.request.toToken,symbol:e.request.toSymbol,decimals:e.request.toDecimals},amountIn:le(e.amountInWei,e.request.fromDecimals),amountInWei:e.amountInWei,expectedOutput:le(e.expectedOutputWei,e.request.toDecimals),expectedOutputWei:e.expectedOutputWei,minOutput:le(e.minOutputWei,e.request.toDecimals),minOutputWei:e.minOutputWei,priceImpact:0,route:e.route,gasEstimate:e.gasEstimate,expiresAt:Date.now()+yHe,aggregator:e.aggregator,aggregatorAddress:e.routerAddress,_calldata:e.calldata,_router:e.routerAddress,_value:e.value}}function xHe(e,t,n){let r=[e];if(n&&n.length>0)for(let a of n)a.source&&!r.includes(a.source)&&r.push(`[${a.source}]`);return r.push(t),r}async function p0e(e){if(hHe(),!await Ct())return wHe(e);let n=await _5("quote",e.chainId);if(!Qe(e.chainId).aggregators?.router)throw new Error(`Swap not supported on chain ${e.chainId}`);let a=new URL(n.url);a.searchParams.set("sellToken",S7(e.fromToken)),a.searchParams.set("buyToken",S7(e.toToken)),a.searchParams.set("sellAmount",e.amount.toString()),a.searchParams.set("taker",e.sender),a.searchParams.set("slippageBps",e.slippageBps.toString());let s=await xt(async()=>{let u=await dt(a.toString(),{method:"GET"});if(!u.ok)throw new Error(`Quote API error (${u.status}): ${await u.text()}`);return await u.json()},{operationName:"quote-x402"});if(s.message)throw new Error(`Quote API: ${s.message}`);if(!s.liquidityAvailable)return console.error("[quote] No liquidity available for this swap"),null;if(!s.transaction?.to||!s.transaction?.data)throw new Error("Invalid response from quote API: missing transaction data");let o=xe(s.transaction.to),i=l0e({request:e,amountInWei:BigInt(s.sellAmount),expectedOutputWei:BigInt(s.buyAmount),minOutputWei:BigInt(s.minBuyAmount),route:xHe(e.fromSymbol,e.toSymbol,s.route?.fills),gasEstimate:BigInt(s.transaction.gas||"300000"),aggregator:"pragma",routerAddress:o,calldata:s.transaction.data,value:BigInt(s.transaction.value||"0")});return G5.set(i.quoteId,i),i}async function wHe(e){let{executeQuoteWithFallback:t}=await Promise.resolve().then(()=>(PR(),CR)),n=await t({sellToken:S7(e.fromToken),buyToken:S7(e.toToken),sellAmount:e.amount.toString(),sender:e.sender,slippageBps:e.slippageBps,chainId:e.chainId});if(!n.success||!n.data)throw new Error(n.error||"Quote failed");let r=n.data;if(!r.liquidityAvailable)return console.error("[quote] No liquidity available for this swap"),null;let a=l0e({request:e,amountInWei:e.amount,expectedOutputWei:BigInt(r.buyAmount),minOutputWei:BigInt(r.minBuyAmount),route:[e.fromSymbol,`[${n.provider}]`,e.toSymbol],gasEstimate:BigInt(r.gas||"300000"),aggregator:n.provider,routerAddress:r.router,calldata:r.calldata,value:BigInt(r.value||"0")});return G5.set(a.quoteId,a),a}function G6(e){let t=G5.get(e);return t?ac(t)?(G5.delete(e),null):t:null}function V5(e){let t=G5.get(e);return!t||!t._calldata||!t._router?null:{calldata:t._calldata,router:t._router,value:t._value}}function ac(e){return Date.now()>=e.expiresAt}Te();var vHe=500;async function A7(e){let t=await q();if(!t?.network)throw new Error("Network not configured. Run setup_wallet first.");let n=await p0e({...e,recipient:e.sender,slippageBps:e.slippageBps??vHe,chainId:t.network.chainId});if(!n)throw new Error("No liquidity available for this swap pair");return{quote:n,aggregator:n.aggregator,fallbackUsed:!1}}var m0e=5;async function THe(e){try{return{quote:await A7(e)}}catch(t){return{quote:null,error:t instanceof Error?t.message:"Unknown error"}}}async function SHe(e){let t=new Array(e.length);for(let n=0;n<e.length;n+=m0e){let a=e.slice(n,n+m0e).map(async(o,i)=>{let u=n+i,d={fromSymbol:o.fromSymbol,toSymbol:o.toSymbol,amount:o.amount.toString()},{quote:l,error:p}=await THe(o);return{index:u,request:d,quote:l,error:p}}),s=await Promise.all(a);for(let o of s)t[o.index]=o}return t}async function b0e(e){if(e.length===0)return{totalRequested:0,totalSucceeded:0,totalFailed:0,results:[]};let t=await SHe(e),n=t.filter(r=>r.quote!==null).length;return{totalRequested:e.length,totalSucceeded:n,totalFailed:e.length-n,results:t}}Y();Te();mt();We();async function y0e(e,t){try{let n=await q();if(!n)return null;let r=await we(n),a=Ee(t,r),s=_e({chain:a,transport:gt(r,Ot(n))}),[o,i,u]=await Promise.all([s.readContract({address:e,abi:Xe,functionName:"name"}),s.readContract({address:e,abi:Xe,functionName:"symbol"}),s.readContract({address:e,abi:Xe,functionName:"decimals"})]);return{address:e,name:o,symbol:i,decimals:u,kind:"erc20"}}catch{return null}}var AHe=500,_He=5e3,g0e=10,EHe=C.object({fromToken:C.string().describe("Token to sell (symbol or address)"),toToken:C.string().describe("Token to buy (symbol or address)"),amount:C.string().describe("Amount to swap"),slippageBps:C.number().optional().describe("Slippage in basis points")}),kHe=C.object({fromToken:C.string().optional().describe("Token to sell (symbol like 'MON' or 'WMON', or address). Use for single quote."),toToken:C.string().optional().describe("Token to buy (symbol like 'USDC' or address). Use for single quote."),amount:C.string().optional().describe("Amount to swap in human-readable format (e.g., '1.5' for 1.5 tokens). Use for single quote."),slippageBps:C.number().optional().describe("Slippage tolerance in basis points (100 = 1%, default 500 = 5%, max 5000 = 50%). Note: Some aggregators bake slippage into the quote at this stage."),quotes:C.array(EHe).max(g0e).optional().describe(`Array of quote requests for batch mode (max ${g0e}). More efficient for multiple swaps.`)}).refine(e=>{let t=e.fromToken&&e.toToken&&e.amount,n=e.quotes&&e.quotes.length>0;return t&&!n||!t&&n},{message:"Provide either (fromToken, toToken, amount) for single quote OR quotes array for batch"}),IHe="0x0000000000000000000000000000000000000000";async function h0e(e,t){let n=await is(e,t);if(n)return n;let r=e.trim();return r.startsWith("0x")&&r.length===42?y0e(r,t):null}function x0e(e){if(e.categories?.includes("verified")??!1)return null;let n=`${e.address.slice(0,6)}...${e.address.slice(-4)}`;return`Warning: ${e.symbol} (${n}) is not a verified token. Please verify the contract address before swapping.`}function w0e(e){let t=kHe._def.schema;e.tool("get_swap_quote","Get a swap quote from DEX aggregator. Returns expected output, price impact, and route. Quote is valid for ~5 minutes. Always show the quote to the user before executing.",t.shape,async n=>{let r=await RHe(n);return{content:[{type:"text",text:JSON.stringify(r,null,2)}]}})}async function v0e(e,t,n,r,a){let s=await h0e(e,a);if(!s)return{error:`Could not resolve token: ${e}`};let o=await h0e(t,a);if(!o)return{error:`Could not resolve token: ${t}`};let i;try{i=ye(n,s.decimals)}catch{return{error:`Could not parse amount: ${n}`}}let u=Math.max(0,Math.min(r??AHe,_He));return{resolved:{fromToken:s,toToken:o,amountWei:i,slippageBps:u,originalAmount:n}}}async function CHe(e,t,n){let{fromToken:r,toToken:a,amountWei:s,slippageBps:o,originalAmount:i}=e,u=await A7({fromToken:r.address,toToken:a.address,amount:s,sender:t,slippageBps:o,fromDecimals:r.decimals,toDecimals:a.decimals,fromSymbol:r.symbol,toSymbol:a.symbol}),d=u.quote,l=r.categories?.includes("verified")??!1,p=a.categories?.includes("verified")??!1,y=x0e(r),m=x0e(a);y&&n.push(y),m&&n.push(m),u.fallbackUsed&&n.push(`Note: Using fallback aggregator - ${u.fallbackReason||"Primary unavailable"}`);let g=Math.max(0,Math.floor((d.expiresAt-Date.now())/1e3));return{success:!0,message:`Quote for ${i} ${r.symbol} \u2192 ${a.symbol}`,quote:{quoteId:d.quoteId,fromToken:`${r.symbol} (${r.address.slice(0,10)}...)`,toToken:`${a.symbol} (${a.address.slice(0,10)}...)`,amountIn:`${d.amountIn} ${r.symbol}`,expectedOutput:`${d.expectedOutput} ${a.symbol}`,minOutput:`${d.minOutput} ${a.symbol}`,slippage:`${(o/100).toFixed(1)}%`,slippageBps:o,priceImpact:`${d.priceImpact.toFixed(2)}%`,route:d.route,expiresIn:`${g} seconds`,gasEstimate:`${d.gasEstimate.toString()} gas`,aggregator:d.aggregator,tokenVerification:{fromToken:{verified:l,status:l?"verified":"unverified"},toToken:{verified:p,status:p?"verified":"unverified"}}},warning:n.length>0?n.join(" | "):void 0}}async function PHe(e,t,n,r){let a=[];for(let m=0;m<e.length;m++){let g=e[m],h=await v0e(g.fromToken,g.toToken,g.amount,g.slippageBps,n);"error"in h?a.push({index:m,input:null,error:h.error,originalRequest:g}):a.push({index:m,input:h.resolved,originalRequest:g})}let s=[],o=new Map;for(let m of a)m.input&&(o.set(s.length,m.index),s.push({fromToken:m.input.fromToken.address,toToken:m.input.toToken.address,amount:m.input.amountWei,sender:t,slippageBps:m.input.slippageBps,fromDecimals:m.input.fromToken.decimals,toDecimals:m.input.toToken.decimals,fromSymbol:m.input.fromToken.symbol,toSymbol:m.input.toToken.symbol}));let i=await b0e(s),u=[],d=new Array(e.length);for(let m of a)m.input||(d[m.index]={success:!1,fromToken:m.originalRequest.fromToken,toToken:m.originalRequest.toToken,error:m.error});for(let m=0;m<i.results.length;m++){let g=i.results[m],h=o.get(m),w=a.find(v=>v.index===h);if(g.quote){let v=g.quote.quote;u.push(v.quoteId),d[h]={success:!0,quoteId:v.quoteId,fromToken:`${v.fromToken.symbol} (${v.fromToken.address.slice(0,10)}...)`,toToken:`${v.toToken.symbol} (${v.toToken.address.slice(0,10)}...)`,amountIn:`${v.amountIn} ${v.fromToken.symbol}`,expectedOutput:`${v.expectedOutput} ${v.toToken.symbol}`,minOutput:`${v.minOutput} ${v.toToken.symbol}`,priceImpact:`${v.priceImpact.toFixed(2)}%`}}else d[h]={success:!1,fromToken:w.originalRequest.fromToken,toToken:w.originalRequest.toToken,error:g.error||"Quote failed"}}let l=a.filter(m=>!m.input).length,p=i.totalFailed+l,y=e.length-p;return{success:y>0,message:y===e.length?`All ${e.length} quotes fetched successfully`:`${y}/${e.length} quotes succeeded`,mode:"batch",summary:{totalRequested:e.length,totalSucceeded:y,totalFailed:p},quoteIds:u,quotes:d,warning:r}}async function RHe(e){try{let t=e.fromToken&&e.toToken&&e.amount,n=e.quotes&&e.quotes.length>0;if(t&&n||!t&&!n)return{success:!1,message:"Invalid parameters",error:"Provide either (fromToken, toToken, amount) for single quote OR quotes array for batch"};let r=await q();if(!r||!Pe(r))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let a=r.wallet.smartAccountAddress,s=r.network.chainId,o=await we(r);if(await w7(s),t){let i=await v0e(e.fromToken,e.toToken,e.amount,e.slippageBps,s);if("error"in i)return{success:!1,message:"Token resolution failed",error:i.error};let u=[];try{let d=Ee(s,o),p=await _e({chain:d,transport:gt(o,Ot(r))}).getBalance({address:a});i.resolved.fromToken.address===IHe&&p<i.resolved.amountWei&&u.push(`Insufficient balance: you have ${(Number(p)/1e18).toFixed(4)} ${i.resolved.fromToken.symbol} but want to swap ${e.amount} ${i.resolved.fromToken.symbol}`)}catch{}return await CHe(i.resolved,a,u)}else return await PHe(e.quotes,a,s)}catch(t){let n=t instanceof Error?t.message:"Unknown error";return{success:!1,message:n.includes("API error")?"Quote API error":"Failed to get quote",error:n}}}Y();Y();var v2="0x0000000000000000000000000000000000000000000000000000000000000000",$He="0x095ea7b3",DHe="0xa9059cbb",MHe="0xd0e30db0",OHe="0x2e1a7d4d",_7={approve:{spender:4,amount:36},transfer:{recipient:4,amount:36}};function NHe(e,t){return[{startIndex:_7.approve.spender,value:It(e,{size:32})},{startIndex:_7.approve.amount,value:It(ge(t),{size:32})}]}function LHe(e,t){return[{startIndex:_7.transfer.recipient,value:It(e,{size:32})},{startIndex:_7.transfer.amount,value:It(ge(t),{size:32})}]}function _a(e,t){return[{type:"timestamp",afterThreshold:0,beforeThreshold:t},{type:"nonce",nonce:ge(e)},{type:"limitedCalls",limit:1}]}function cs(e){let{tokenAddress:t,spender:n,amount:r,delegator:a,sessionKey:s,nonce:o,chainId:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=NHe(n,r),l={type:"functionCall",targets:[xe(t)],selectors:[$He],allowedCalldata:d},p=_a(o,u),y=E0(),m=L0({environment:y,scope:l,from:a,to:s,caveats:p,salt:v2}),g=k0(m,i,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:u}}function T0e(e){let{aggregator:t,destination:n,delegator:r,sessionKey:a,nonce:s,chainId:o,transactionData:i,nativeValueAmount:u}=e,d=Math.floor(Date.now()/1e3)+Jr,l=i&&i.length>=10?i.slice(0,10):"0x00000000",p={maxValue:u??0n},y={type:"functionCall",targets:[xe(t)],selectors:[l],valueLte:p},m=_a(s,d),g=E0(),h=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(s)])),w=L0({environment:g,scope:y,from:r,to:a,caveats:m,salt:h}),v=k0(w,o,Ue.delegationManager);return{delegation:w,typedData:v,expiresAt:d}}function E7(e){let{tokenAddress:t,recipient:n,amount:r,delegator:a,sessionKey:s,nonce:o,chainId:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=LHe(n,r),l={type:"functionCall",targets:[xe(t)],selectors:[DHe],allowedCalldata:d},p=_a(o,u),y=E0(),m=L0({environment:y,scope:l,from:a,to:s,caveats:p,salt:v2}),g=k0(m,i,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:u}}function k7(e){let{recipient:t,amount:n,delegator:r,sessionKey:a,nonce:s,chainId:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u={type:"nativeTokenTransferAmount",maxAmount:n},d=_a(s,i),l=E0(),p=L0({environment:l,scope:u,from:r,to:a,caveats:d,salt:v2}),y=k0(p,o,Ue.delegationManager);return{delegation:p,typedData:y,expiresAt:i}}function S0e(e){let{wmonAddress:t,amount:n,delegator:r,sessionKey:a,nonce:s,chainId:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u={type:"functionCall",targets:[xe(t)],selectors:[MHe],valueLte:{maxValue:n}},d=_a(s,i),l=E0(),p=L0({environment:l,scope:u,from:r,to:a,caveats:d,salt:v2}),y=k0(p,o,Ue.delegationManager);return{delegation:p,typedData:y,expiresAt:i}}function A0e(e){let{wmonAddress:t,delegator:n,sessionKey:r,nonce:a,chainId:s}=e,o=Math.floor(Date.now()/1e3)+Jr,i={type:"functionCall",targets:[xe(t)],selectors:[OHe]},u=_a(a,o),d=E0(),l=L0({environment:d,scope:i,from:n,to:r,caveats:u,salt:v2}),p=k0(l,s,Ue.delegationManager);return{delegation:l,typedData:p,expiresAt:o}}function _0e(e){let{router:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o,value:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=o.slice(0,10),l={type:"functionCall",targets:[xe(t)],selectors:[d],valueLte:{maxValue:i}},p=_a(a,u),y=E0(),m=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),g=L0({environment:y,scope:l,from:n,to:r,caveats:p,salt:m}),h=k0(g,s,Ue.delegationManager);return{delegation:g,typedData:h,expiresAt:u}}function E0e(e){let{router:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u=o.slice(0,10),d={type:"functionCall",targets:[xe(t)],selectors:[u]},l=_a(a,i),p=E0(),y=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),m=L0({environment:p,scope:d,from:n,to:r,caveats:l,salt:y}),g=k0(m,s,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:i}}function k0e(e){let{router:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o,value:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=o.slice(0,10),l={type:"functionCall",targets:[xe(t)],selectors:[d],valueLte:{maxValue:i}},p=_a(a,u),y=E0(),m=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),g=L0({environment:y,scope:l,from:n,to:r,caveats:p,salt:m}),h=k0(g,s,Ue.delegationManager);return{delegation:g,typedData:h,expiresAt:u}}function I0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o,value:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=o.slice(0,10),l=i+BigInt(1e15),p={type:"functionCall",targets:[xe(t)],selectors:[d],valueLte:{maxValue:l}},y=_a(a,u),m=E0(),g=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),h=L0({environment:m,scope:p,from:n,to:r,caveats:y,salt:g}),w=k0(h,s,Ue.delegationManager);return{delegation:h,typedData:w,expiresAt:u}}function C0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u=o.slice(0,10),d={type:"functionCall",targets:[xe(t)],selectors:[u]},l=_a(a,i),p=E0(),y=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),m=L0({environment:p,scope:d,from:n,to:r,caveats:l,salt:y}),g=k0(m,s,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:i}}function P0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o,value:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=o.slice(0,10),l=i+BigInt(1e15),p={type:"functionCall",targets:[xe(t)],selectors:[d],valueLte:{maxValue:l}},y=_a(a,u),m=E0(),g=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),h=L0({environment:m,scope:p,from:n,to:r,caveats:y,salt:g}),w=k0(h,s,Ue.delegationManager);return{delegation:h,typedData:w,expiresAt:u}}function R0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o,value:i}=e,u=Math.floor(Date.now()/1e3)+Jr,d=o.slice(0,10),l=i+BigInt(1e15),p={type:"functionCall",targets:[xe(t)],selectors:[d],valueLte:{maxValue:l}},y=_a(a,u),m=E0(),g=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),h=L0({environment:m,scope:p,from:n,to:r,caveats:y,salt:g}),w=k0(h,s,Ue.delegationManager);return{delegation:h,typedData:w,expiresAt:u}}function $0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u=o.slice(0,10),d={type:"functionCall",targets:[xe(t)],selectors:[u]},l=_a(a,i),p=E0(),y=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),m=L0({environment:p,scope:d,from:n,to:r,caveats:l,salt:y}),g=k0(m,s,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:i}}function D0e(e){let{diamond:t,delegator:n,sessionKey:r,nonce:a,chainId:s,calldata:o}=e,i=Math.floor(Date.now()/1e3)+Jr,u=o.slice(0,10),d={type:"functionCall",targets:[xe(t)],selectors:[u]},l=_a(a,i),p=E0(),y=Ke(Ae([F(Date.now(),{size:32}),F(Math.floor(Math.random()*1e18),{size:32}),ge(a)])),m=L0({environment:p,scope:d,from:n,to:r,caveats:l,salt:y}),g=k0(m,s,Ue.delegationManager);return{delegation:m,typedData:g,expiresAt:i}}var BHe=[{inputs:[{name:"delegationManager",type:"address"},{name:"delegator",type:"address"}],name:"currentNonce",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}];async function UHe(e,t){return await e.readContract({address:Ue.enforcers.nonce,abi:BHe,functionName:"currentNonce",args:[Ue.delegationManager,t]})}async function Tn(e,t){return UHe(e,t)}M0();Te();mt();We();Ar();Y();var HHe=80000000000000000n,O0e=20000000000000000n,FHe=100000000000000000n,zHe=10000000000000000000n;function lo(e){return AR[e]}function jHe(e){if(e.length===0)return x7;let t=0n;for(let n of e)t+=AR[n];return t+O0e}function qHe(e){return e<=0?0n:HHe*BigInt(e)+O0e}function M0e(e,t){let r=t-e+FHe,a=op,s=zHe;return r<a?a:r>s?s:r}async function T2(e,t,n,r){let a=await t.getBalance({address:xe(e)}),s,o;if(n&&r&&r>0){let d=Array(r).fill(n);s=jHe(d),o=M0e(a,s)}else r&&r>0?(s=qHe(r),o=M0e(a,s)):(s=x7,o=op);let i=a<s,u=a<Pne?"userOp":"delegation";return{address:e,balance:a,balanceFormatted:Ge(a),needsFunding:i,requiredBalance:s,requiredBalanceFormatted:Ge(s),recommendedFundingAmount:o,fundingMethod:u}}function G0(e){return`${Ge(e)} MON`}var GHe=500;async function N0e(e,t=GHe){let n=await q();if(!n?.wallet)throw new Error("Wallet not configured. Please run setup_wallet first.");let r=n.wallet.smartAccountAddress,a=n.wallet.sessionKeyAddress,s=n.network.chainId,o=await we(n),i=Ee(s,o),u=_e({chain:i,transport:Ze(o,n)}),d=await ht();if(!d)throw new Error("Session key not found.");let l=await u.getBalance({address:a}),p=lo("swap")*BigInt(e.length);if(l<p)throw new Error(`Session key balance too low for ${e.length} swaps. Have: ${G0(l)}, Need ~${G0(p)}. Please fund session key first.`);let y=await VHe(e,t,r,a,s,u),m=await WHe(y,s,n.wallet.keyId),g=on(d),h=Tt({account:g,chain:i,transport:Ze(o,n)});return{results:await ZHe(m,h,u),totalDelegations:m.reduce((v,T)=>v+T.delegations.length,0)}}async function VHe(e,t,n,r,a,s){let o=[],i=new Map,u=await Tn(s,n);for(let d of e){let l=await G6(d);if(!l||ac(l))throw new Error(`Quote ${d} invalid or expired.`);let p=await V5(d);if(!p)throw new Error(`Execution data missing for ${d}`);let y=[],m=l.fromToken.address.toLowerCase()===B0.toLowerCase();if(!m){let w=`${l.fromToken.address}-${p.router}`,v=i.get(w);v===void 0&&(v=await s.readContract({address:l.fromToken.address,abi:Xe,functionName:"allowance",args:[n,p.router]}),i.set(w,v)),v<l.amountInWei?(v>0n&&y.push({delegation:cs({tokenAddress:l.fromToken.address,spender:p.router,amount:0n,delegator:n,sessionKey:r,nonce:u,chainId:a}).delegation,execution:{target:l.fromToken.address,value:0n,callData:X({abi:Xe,functionName:"approve",args:[p.router,0n]})},kind:"approve"}),y.push({delegation:cs({tokenAddress:l.fromToken.address,spender:p.router,amount:l.amountInWei,delegator:n,sessionKey:r,nonce:u,chainId:a}).delegation,execution:{target:l.fromToken.address,value:0n,callData:X({abi:Xe,functionName:"approve",args:[p.router,l.amountInWei]})},kind:"approve"}),i.set(w,0n)):i.set(w,v-l.amountInWei)}let g=m?p.value||l.amountInWei:0n,h=T0e({aggregator:p.router,destination:n,delegator:n,sessionKey:r,nonce:u,chainId:a,transactionData:p.calldata,nativeValueAmount:g});y.push({delegation:h.delegation,execution:{target:p.router,value:g,callData:p.calldata},kind:"swap"}),o.push({quote:l,delegations:y,executionData:p})}return o}async function WHe(e,t,n){for(let r of e)for(let a of r.delegations){let s=a.kind==="approve"?`Approve ${r.quote.amountIn} ${r.quote.fromToken.symbol}`:`Swap ${r.quote.amountIn} ${r.quote.fromToken.symbol} \u2192 ${r.quote.expectedOutput} ${r.quote.toToken.symbol}`,o=await _n(a.delegation,t,n,s);a.delegation.signature=o}return e}async function ZHe(e,t,n){let r=[],a=[];for(let s of e)for(let o of s.delegations)r.push({permissionContext:[o.delegation],executions:[Pt({target:o.execution.target,value:o.execution.value,callData:o.execution.callData})],mode:nn.SingleDefault});if(r.length===0)return[];try{let s=await dn(t,n,Ue.delegationManager,r),o=await Xt(n,s);for(let i of e)o.status==="reverted"?a.push({quoteId:i.quote.quoteId,success:!1,error:"Batch transaction reverted on-chain",txHash:s,quote:i.quote}):a.push({quoteId:i.quote.quoteId,success:!0,txHash:s,quote:i.quote})}catch(s){for(let o of e)a.push({quoteId:o.quote.quoteId,success:!1,error:s.message||"Batch broadcast failed",quote:o.quote})}return a}Y();import{existsSync as Ea,mkdirSync as A2,readFileSync as lp,writeFileSync as W5,appendFileSync as B0e,readdirSync as KHe,rmSync as L0e,renameSync as XHe}from"node:fs";import{homedir as JHe}from"node:os";import*as rr from"node:path";var Hn="0x0000000000000000000000000000000000000000",I7="0xf817257fed379853cDe0fa4F97AB987181B1E5Ea",U0e={[Hn.toLowerCase()]:18,"0x3bd359c1119da7da1d913d1c4d2b7c461115433a":18,"0x91b81bfbe3a747230f0529aa28d8b2bc898e6d56":18,"0x754704bc059f8c67012fed69bc8a327a5aafb603":6,"0xfd44b35139ae53fff7d8f2a9869c503d987f00d1":18},_2={MON:{tokens:[Hn,"0x3bd359C1119dA7Da1D913D1C4D2B7c461115433A","0x91b81bfbe3A747230F0529Aa28d8b2Bc898E6D56"],canonicalDecimals:18},USD:{tokens:["0x754704Bc059F8C67012fEd69BC8A327a5aafb603","0xFD44B35139Ae53FFF7d8F2A9869c503D987f00d1"],canonicalDecimals:6}},E2={MON:Hn,WMON:"0x3bd359C1119dA7Da1D913D1C4D2B7c461115433A",LVMON:"0x91b81bfbe3A747230F0529Aa28d8b2Bc898E6D56",USDC:"0x754704Bc059F8C67012fEd69BC8A327a5aafb603",LVUSD:"0xFD44B35139Ae53FFF7d8F2A9869c503D987f00d1"};function RR(){let e=rr.join(JHe(),".pragma"),t=rr.join(e,"agents");return Ea(t)||A2(t,{recursive:!0}),t}var QHe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i;function us(e){if(!QHe.test(e))throw new Error("Invalid agent ID format: must be a UUID");let t=RR(),n=rr.resolve(t,e);if(!n.startsWith(t))throw new Error("Invalid agent ID: path traversal detected");return n}async function $R(e){let t=us(e.id);if(Ea(t))throw new Error(`Agent directory already exists: ${e.id}`);A2(t,{recursive:!0});let n=Date.now(),r=e.budget.tokenLimits?Object.fromEntries(Object.entries(e.budget.tokenLimits).map(([o,i])=>[o.toLowerCase(),i.toString()])):void 0,a={id:e.id,walletId:e.walletId,walletAddress:e.walletAddress,agentType:e.agentType,taskId:e.taskId,status:"pending",budget:{monAllocated:e.budget.monAllocated.toString(),monSpent:"0",tokenSpent:{},tokenLimits:r,tokenFlows:{},groupBudgets:e.budget.groupBudgets?Object.fromEntries(Object.entries(e.budget.groupBudgets).map(([o,i])=>[o,i.toString()])):void 0,allowedGroups:e.budget.allowedGroups,allowedTokens:e.budget.allowedTokens},trades:{executed:0,maxAllowed:e.maxCalls},createdAt:n,lastActivityAt:n,expiresAt:e.expiresAt,errors:[]},s=rr.join(t,"state.json");W5(s,JSON.stringify(a,null,2))}async function c0(e){let t=rr.join(us(e),"state.json");if(!Ea(t))return null;try{let n=lp(t,"utf-8"),r=JSON.parse(n);if(r.budget.tokenSpent||(r.budget.tokenSpent={},r.budget.usdcSpent&&r.budget.usdcSpent!=="0"&&(r.budget.tokenSpent[I7.toLowerCase()]=r.budget.usdcSpent)),!r.budget.tokenFlows&&r.budget.tokenSpent){r.budget.tokenFlows={};for(let[o,i]of Object.entries(r.budget.tokenSpent))r.budget.tokenFlows[o]={out:i,in:"0"}}let a=Date.now()>r.expiresAt,s=r.status==="pending"||r.status==="running"||r.status==="paused";return a&&s&&(r.status="failed",r.lastActivityAt=Date.now(),W5(t,JSON.stringify(r,null,2))),r}catch{return null}}async function Fi(e,t){let n=await c0(e);if(!n)throw new Error(`Agent state not found: ${e}`);let r={...n,...t,budget:t.budget?{...n.budget,...t.budget,tokenSpent:{...n.budget.tokenSpent,...t.budget.tokenSpent||{}},tokenLimits:t.budget.tokenLimits?{...n.budget.tokenLimits,...t.budget.tokenLimits}:n.budget.tokenLimits,tokenFlows:t.budget.tokenFlows?{...n.budget.tokenFlows,...t.budget.tokenFlows}:n.budget.tokenFlows,groupBudgets:t.budget.groupBudgets?{...n.budget.groupBudgets,...t.budget.groupBudgets}:n.budget.groupBudgets}:n.budget,trades:t.trades?{...n.trades,...t.trades}:n.trades,lastActivityAt:Date.now()},a=rr.join(us(e),"state.json");W5(a,JSON.stringify(r,null,2))}async function DR(e,t){let n=us(e),r=rr.join(n,"trades.jsonl");B0e(r,JSON.stringify(t)+`
`);let a=rr.join(n,"state.json");if(Ea(a)){let s=JSON.parse(lp(a,"utf-8"));s.trades.executed+=1,s.lastActivityAt=Date.now(),W5(a,JSON.stringify(s,null,2))}}async function MR(e){let t=rr.join(us(e),"trades.jsonl");if(!Ea(t))return[];try{return lp(t,"utf-8").trim().split(`
`).filter(Boolean).map(a=>JSON.parse(a))}catch{return[]}}async function OR(e,t){let n=rr.join(us(e),"delegation.json");W5(n,JSON.stringify(t,null,2))}async function pp(e){let t=rr.join(us(e),"delegation.json");if(!Ea(t))return null;try{let n=lp(t,"utf-8");return JSON.parse(n)}catch{return null}}async function Z5(e,t,n){let r=await c0(e);if(!r)throw new Error(`Agent state not found: ${e}`);r.errors.push({timestamp:Date.now(),message:t,recoverable:n}),r.errors.length>100&&(r.errors=r.errors.slice(-100));let a=rr.join(us(e),"state.json");W5(a,JSON.stringify(r,null,2))}async function NR(e,t,n){let r=await c0(e);if(!r)throw new Error(`Agent state not found: ${e}`);let a=t.toLowerCase(),o=(BigInt(r.budget.tokenSpent[a]||"0")+n).toString(),i=a===Hn.toLowerCase();await Fi(e,{budget:{...r.budget,monSpent:i?(BigInt(r.budget.monSpent)+n).toString():r.budget.monSpent,tokenSpent:{...r.budget.tokenSpent,[a]:o}}})}async function LR(e){let t=await c0(e);if(!t)return null;let n={},r=Hn.toLowerCase();for(let[s,o]of Object.entries(t.budget.tokenSpent)){let i=t.budget.tokenLimits?.[s];n[s]={spent:BigInt(o),limit:i?BigInt(i):null}}let a=n[r];return n[r]={spent:a?.spent??BigInt(t.budget.monSpent),limit:BigInt(t.budget.monAllocated)},n}async function sc(){let e=RR();if(!Ea(e))return[];let t=KHe(e,{withFileTypes:!0}),n=[];for(let r of t)if(r.isDirectory()&&r.name!=="archive"){let a=await c0(r.name);a&&n.push(a)}return n}async function BR(){let e=await sc(),t=0n;for(let n of e)(n.status==="running"||n.status==="pending"||n.status==="paused")&&(t+=BigInt(n.budget.monAllocated));return t}async function UR(){let e=await sc(),t=0n;for(let n of e)(n.status==="running"||n.status==="pending"||n.status==="paused")&&n.budget.groupBudgets?.USD&&(t+=BigInt(n.budget.groupBudgets.USD));return t}async function mp(e){let t=us(e);if(!Ea(t))return;let n=rr.join(RR(),"archive");Ea(n)||A2(n,{recursive:!0});let r=rr.join(n,e);Ea(r)&&L0e(r,{recursive:!0,force:!0});try{XHe(t,r)}catch{L0e(t,{recursive:!0,force:!0})}}function k2(e){let t=rr.join(us(e),"state.json");return Ea(t)}async function K5(e,t){let n=await c0(e);if(!n)throw new Error(`Agent state not found: ${e}`);let r=n.budget.tokenFlows?{...n.budget.tokenFlows}:{},a=0n;for(let{token:s,amount:o}of t.outflows){let i=s.toLowerCase(),u=r[i]||{out:"0",in:"0"};r[i]={out:(BigInt(u.out)+o).toString(),in:u.in};let d=BigInt(n.budget.tokenSpent[i]||"0");n.budget.tokenSpent[i]=(d+o).toString(),i===Hn.toLowerCase()&&(a+=o)}for(let{token:s,amount:o}of t.inflows){let i=s.toLowerCase(),u=r[i]||{out:"0",in:"0"};r[i]={out:u.out,in:(BigInt(u.in)+o).toString()}}await Fi(e,{budget:{...n.budget,monSpent:(BigInt(n.budget.monSpent)+a).toString(),tokenSpent:n.budget.tokenSpent,tokenFlows:r}})}function S2(e,t,n){let r=U0e[t.toLowerCase()];return r===void 0||r===n?e:r>n?e/10n**BigInt(r-n):e*10n**BigInt(n-r)}function C7(e,t){let n=_2[t];if(!n)return 0n;let{tokens:r,canonicalDecimals:a}=n,s=e.budget.tokenFlows;if(!s){let i=0n;for(let u of r){let d=u.toLowerCase(),l=BigInt(e.budget.tokenSpent[d]||"0");i+=S2(l,d,a)}return i}let o=0n;for(let i of r){let u=i.toLowerCase(),d=s[u];if(d){let l=BigInt(d.out),p=BigInt(d.in),y=S2(l,u,a),m=S2(p,u,a);o+=y-m}}return o}function P7(e){let t=e.toLowerCase();for(let[n,r]of Object.entries(_2))if(r.tokens.some(a=>a.toLowerCase()===t))return n;return null}function YHe(e){let t=e.toLowerCase();for(let[n,r]of Object.entries(E2))if(r.toLowerCase()===t)return n;return null}function eFe(e){return e.map(t=>{let n=YHe(t);return n?`${n} (${t})`:t}).join(", ")}function R7(e,t){let n=e.budget.allowedTokens&&e.budget.allowedTokens.length>0,r=e.budget.allowedGroups&&e.budget.allowedGroups.length>0;if(!n&&!r)return{allowed:!0};let a=t.toLowerCase();if(a===Hn.toLowerCase()&&BigInt(e.budget.monAllocated)>0n)return{allowed:!0};let s=e.budget.tokenFlows?.[a];if(s&&BigInt(s.in)>0n)return{allowed:!0};if(n)return e.budget.allowedTokens.some(i=>i.toLowerCase()===a)?{allowed:!0}:{allowed:!1,reason:`Token ${t} not in allowedTokens [${eFe(e.budget.allowedTokens)}] and has no prior inflows`};let o=P7(t);return o&&e.budget.allowedGroups.includes(o)?{allowed:!0}:{allowed:!1,reason:`Token not in allowed groups [${e.budget.allowedGroups.join(", ")}] and has no prior inflows`}}function tFe(e,t){if(e.budget.groupBudgets?.[t])return BigInt(e.budget.groupBudgets[t]);if(t==="MON")return BigInt(e.budget.monAllocated);if(t==="USD"){let n=_2.USD.tokens[0].toLowerCase(),r=e.budget.tokenLimits?.[n];if(r)return BigInt(r)}return null}function HR(e,t,n){let r=P7(t);if(!r)return{allowed:!0};let{canonicalDecimals:a}=_2[r],s=tFe(e,r);if(s===null)return{allowed:!0};let o=S2(n,t,a),i=C7(e,r),u=i>0n?i:0n,d=s-u;return o>d?{allowed:!1,reason:`${r} group budget exceeded: need ${o} but only ${d} remaining (consumed: ${u}, budget: ${s}) [canonical ${a} decimals]`}:{allowed:!0}}async function FR(e){let t=await c0(e);if(!t)return null;let n=t.budget.tokenFlows;if(!n)return null;let r={};for(let[a,s]of Object.entries(n)){let o=BigInt(s.out),i=BigInt(s.in);r[a]={out:o,in:i,net:i-o,group:P7(a)}}return r}function H0e(e){return rr.join(us(e),"tracked-positions.json")}function zi(e){let t=H0e(e);if(!Ea(t))return[];try{return JSON.parse(lp(t,"utf-8"))}catch{return[]}}function X5(e,t){let n=H0e(e),r=us(e);Ea(r)||A2(r,{recursive:!0}),W5(n,JSON.stringify(t,null,2))}function $7(e,t){let n=zi(e);n.push(t),X5(e,n)}function I2(e,t){let r=zi(e).filter(a=>a.tradeHash!==t);X5(e,r)}function D7(e,t,n,r){let a=zi(e),s=a.find(o=>o.tradeHash===t);s&&(s.status=n,r!==void 0&&(s.detectedGoneAt=r),X5(e,a))}function zR(e,t,n){let r=zi(e);t>=0&&t<r.length&&(r[t].tradeHash=n,X5(e,r))}function F0e(e){return rr.join(us(e),"journal.jsonl")}function ka(e,t){let n=F0e(e),r=us(e);Ea(r)||A2(r,{recursive:!0}),B0e(n,JSON.stringify(t)+`
`)}function jR(e,t=0,n=50,r){let a=F0e(e);if(!Ea(a))return{entries:[],total:0};try{let o=lp(a,"utf-8").trim().split(`
`).filter(Boolean).map(u=>JSON.parse(u));return r?.tag&&(o=o.filter(u=>u.tag===r.tag)),{entries:o.slice(t,t+n),total:o.length}}catch{return{entries:[],total:0}}}T6();t0();import{randomUUID as nFe}from"node:crypto";function z0e(){let e=nFe(),t=h8(),n=ma(t);return{id:e,address:n.address,privateKey:t}}async function j0e(e){await Q_(e.id,e.privateKey)}async function qR(e){let t=await Y_(e);if(!t)return null;let n=ma(t);return{id:e,address:n.address,privateKey:t}}function GR(e){return ma(e.privateKey)}async function VR(){let e=z0e();return await j0e(e),e}import{existsSync as q0e,mkdirSync as sFe,readFileSync as G0e,writeFileSync as V0e,openSync as oFe,closeSync as iFe,unlinkSync as W0e,statSync as cFe,constants as WR}from"node:fs";import{homedir as uFe}from"node:os";import*as ZR from"node:path";function KR(){let e=ZR.join(uFe(),".pragma");return q0e(e)||sFe(e,{recursive:!0}),ZR.join(e,"wallet-pool.json")}function Z0e(){return KR()+".lock"}var dFe=3e4;function fFe(e){try{return process.kill(e,0),!0}catch{return!1}}function lFe(e){try{let t=G0e(e,"utf-8"),n=parseInt(t,10);if(Number.isNaN(n)||!fFe(n))return!0;let r=cFe(e);return Date.now()-r.mtimeMs>dFe}catch{return!0}}async function pFe(e=5e3,t=50){let n=Z0e(),r=Date.now();for(;Date.now()-r<e;)try{let a=oFe(n,WR.O_CREAT|WR.O_EXCL|WR.O_WRONLY);V0e(a,process.pid.toString()),iFe(a);return}catch(a){if(a.code==="EEXIST"){if(lFe(n)){try{W0e(n)}catch{}continue}await new Promise(s=>setTimeout(s,t));continue}throw a}throw new Error(`Failed to acquire wallet pool lock after ${e}ms`)}function mFe(){let e=Z0e();try{W0e(e)}catch{}}async function XR(e){await pFe();try{return await e()}finally{mFe()}}function C2(){let e=KR();if(!q0e(e))return{wallets:[],version:1};try{let t=G0e(e,"utf-8");return JSON.parse(t)}catch{return{wallets:[],version:1}}}function JR(e){let t=KR();V0e(t,JSON.stringify(e,null,2))}async function K0e(){return XR(async()=>{let e=C2(),t=0,n=0,r=!1;for(let a of e.wallets)if(a.status==="active")if(!a.assignedTo)a.status="idle",a.lastUsedAt=Date.now(),t++,r=!0;else{let s=a.assignedTo.replace("subagent-","");k2(s)||(a.status="idle",a.assignedTo=null,a.lastUsedAt=Date.now(),n++,r=!0)}return r&&(e.version++,JR(e)),{inconsistenciesFixed:t,orphansFixed:n}})}async function QR(e){return await K0e(),XR(async()=>{let t=C2(),n=t.wallets.find(r=>r.status==="idle");if(!n){let r=await VR(),a=Date.now();n={id:r.id,address:r.address,status:"idle",assignedTo:null,createdAt:a,lastUsedAt:a},t.wallets.push(n)}return n.status="active",n.assignedTo=e,n.lastUsedAt=Date.now(),t.version++,JR(t),n})}async function Ia(e){return XR(async()=>{let t=C2(),n=t.wallets.find(r=>r.id===e);if(!n)throw new Error(`Wallet not found in pool: ${e}`);n.status="idle",n.assignedTo=null,n.lastUsedAt=Date.now(),t.version++,JR(t)})}function M7(e){let t=C2();return e?t.wallets.filter(n=>n.status===e):t.wallets}async function oc(e){return qR(e)}import{existsSync as X0e,readFileSync as bFe,writeFileSync as J0e,unlinkSync as fkt}from"node:fs";import{homedir as yFe}from"node:os";import*as P2 from"node:path";function YR(e){let t=P2.join(yFe(),".pragma","agents",e);return P2.join(t,"loop.json")}function O7(e,t){let n=YR(e),r=P2.dirname(n);if(!X0e(r))throw new Error(`Agent directory not found: ${e}`);let a={...t,createdAt:Date.now()};J0e(n,JSON.stringify(a,null,2))}function R2(e){let t=YR(e);if(!X0e(t))return null;try{let n=bFe(t,"utf-8");return JSON.parse(n)}catch{return null}}function Q0e(e,t){let n=R2(e);if(!n)throw new Error(`Loop config not found for agent: ${e}`);let r={...n,...t,lastCheckedAt:Date.now()},a=YR(e);J0e(a,JSON.stringify(r,null,2))}function e$(e){R2(e)&&Q0e(e,{active:!1})}function t$(e,t,n=0){O7(e,{type:"continuous",active:!0,mission:t,maxIterations:n,currentIteration:0,until:["budget_exhausted","delegation_expired","user_cancelled"]})}function n$(e,t,n,r=0){O7(e,{type:"condition",active:!0,condition:t,mission:n,maxIterations:r,currentIteration:0})}function r$(e,t,n,r=0){O7(e,{type:"interval",active:!0,intervalMinutes:t,mission:n,maxIterations:r,currentIteration:0})}Te();mt();We();Ar();Y();function Y0e(e){return e.length===0?"0x":Ae(e)}function gFe(e){return e.length===0?"0x":`0x${e.map(n=>n.slice(2).toLowerCase()).join("")}`}function hFe(){return{caveats:[{enforcer:z5,terms:Y0e([cp]),args:"0x"}]}}function xFe(e,t){return{caveats:[{enforcer:ip,terms:gFe(e),args:"0x"},{enforcer:z5,terms:Y0e(t),args:"0x"}]}}function wFe(e){return Zt([{type:"tuple[]",components:[{name:"caveats",type:"tuple[]",components:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"},{name:"args",type:"bytes"}]}]}],[e.map(t=>({caveats:t.caveats.map(n=>({enforcer:n.enforcer,terms:n.terms,args:n.args}))}))])}function vFe(e,t=[]){return Zt([{type:"tuple",components:[{name:"groupIndex",type:"uint256"},{name:"caveatArgs",type:"bytes[]"}]}],[{groupIndex:BigInt(e),caveatArgs:t}])}function N7(e,t){let n=[hFe(),xFe(e,t)];return{enforcer:b2,terms:wFe(n),args:"0x"}}function $2(e,t){let n=e.caveats.find(r=>r.enforcer.toLowerCase()===b2.toLowerCase());if(n){let r=t===0?["0x"]:["0x","0x"];n.args=vFe(t,r)}}Y();Y();mt();Te();We();m0();var bp={143:{lens:"0x7e78A8DE94f21804F7a17F4E8BF9EC2c872187ea",router:"0x6F6B8F1a20703309951a5127c45B49b1CD981A22"}},D2=[{name:"getInitialBuyAmountOut",type:"function",stateMutability:"view",inputs:[{name:"amountIn",type:"uint256"}],outputs:[{name:"amountOut",type:"uint256"}]},{name:"getAmountOut",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"},{name:"amountIn",type:"uint256"},{name:"isBuy",type:"bool"}],outputs:[{name:"router",type:"address"},{name:"amountOut",type:"uint256"}]},{name:"getAmountIn",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"},{name:"amountOut",type:"uint256"},{name:"isBuy",type:"bool"}],outputs:[{name:"router",type:"address"},{name:"amountIn",type:"uint256"}]},{name:"getProgress",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"}],outputs:[{name:"",type:"uint256"}]},{name:"isGraduated",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"}],outputs:[{name:"",type:"bool"}]},{name:"isLocked",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"}],outputs:[{name:"",type:"bool"}]},{name:"availableBuyTokens",type:"function",stateMutability:"view",inputs:[{name:"token",type:"address"}],outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}]}],a$=[{name:"buy",type:"function",stateMutability:"payable",inputs:[{name:"params",type:"tuple",components:[{name:"amountOutMin",type:"uint256"},{name:"token",type:"address"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}]}],outputs:[{name:"",type:"uint256"}]},{name:"sell",type:"function",stateMutability:"nonpayable",inputs:[{name:"params",type:"tuple",components:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"token",type:"address"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}]}],outputs:[{name:"",type:"uint256"}]}];var ere=[{name:"create",type:"function",stateMutability:"payable",inputs:[{name:"params",type:"tuple",components:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"tokenURI",type:"string"},{name:"amountOut",type:"uint256"},{name:"salt",type:"bytes32"},{name:"actionId",type:"uint8"}]}],outputs:[{name:"token",type:"address"}]}];var tre=10000000000000000000n,nre=300*1e3,rre=300,ic=500,V6=5e3,are=1e4;async function L7(){let e=await q();if(!e)throw new Error("Config not loaded. Run setup_wallet first.");let t=await we(e),n=Ee(e.network.chainId,t);return _e({chain:n,transport:gt(t,Ot(e))})}function W6(e){let t=bp[e];if(!t)throw new Error(`nad.fun not supported on chain ${e}`);return t}async function ji(e,t=143){let n=await L7(),r=W6(t),a=h5({address:r.lens,abi:D2,client:n}),s=h5({address:e,abi:Xe,client:n}),[o,i,u,d,l]=await xt(async()=>Promise.all([a.read.isGraduated([e]),a.read.isLocked([e]),a.read.getProgress([e]),s.read.symbol().catch(()=>{}),s.read.name().catch(()=>{})]),{operationName:"nadfun-status"}),p=o?"dex":"bonding_curve",y=Number(u),m=`${(y/100).toFixed(1)}%`,g={token:e,tokenSymbol:d,tokenName:l,isGraduated:o,isLocked:i,progress:y,progressPercent:m,tradingVenue:p};if(!o&&!i)try{let[h,w]=await xt(async()=>a.read.availableBuyTokens([e]),{operationName:"nadfun-available"});g.availableTokensWei=h,g.requiredMonWei=w,g.availableTokens=le(h,18),g.requiredMon=le(w,18)}catch(h){console.error("[nadfun] Could not fetch availability:",h)}return g}async function sre(e,t,n,r=143){let a=await L7(),s=W6(r),o=h5({address:s.lens,abi:D2,client:a}),[i,u]=await xt(async()=>o.read.getAmountOut([e,t,n]),{operationName:"nadfun-quote"});return{router:i,amountOut:u}}async function ore(e,t,n,r=143){let a=await L7(),s=W6(r),o=h5({address:s.lens,abi:D2,client:a}),[i,u]=await xt(async()=>o.read.getAmountIn([e,t,n]),{operationName:"nadfun-quote-reverse"});return{router:i,amountIn:u}}function ire(e){return e>=are*.9}async function cre(e,t=143){let n=await L7(),r=W6(t),a=h5({address:r.lens,abi:D2,client:n});return await xt(async()=>a.read.getInitialBuyAmountOut([e]),{operationName:"nadfun-initial-buy-quote"})}var Z6=new Map;function TFe(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`nadfun-${e}-${t}`}function SFe(){let e=Date.now();for(let[t,n]of Z6.entries())n.expiresAt<e&&Z6.delete(t)}function AFe(e,t,n,r){return X({abi:a$,functionName:"buy",args:[{amountOutMin:e,token:t,to:n,deadline:r}]})}function _Fe(e,t,n,r,a){return X({abi:a$,functionName:"sell",args:[{amountIn:e,amountOutMin:t,token:n,to:r,deadline:a}]})}async function ure(e){SFe();let{token:t,amount:n,isBuy:r,slippageBps:a=ic,chainId:s,sender:o,tokenSymbol:i="TOKEN",tokenDecimals:u=18,exactOutput:d=!1}=e;if(a<0||a>V6)throw new Error(`Slippage must be between 0 and ${V6} bps`);let l=await ji(t,s);if(l.isGraduated)throw new Error("Token has graduated to DEX. Use regular swap tools (get_swap_quote + execute_swap) instead.");if(l.isLocked)throw new Error("Token is locked during graduation process. Cannot trade until graduation completes.");let p,y,m;if(d){let W=await ore(t,n,r,s);p=W.router,y=W.amountIn,m=n}else{let W=await sre(t,n,r,s);p=W.router,y=n,m=W.amountOut}let g=W6(s);p.toLowerCase()!==g.router.toLowerCase()&&console.error(`[nadfun] Using Lens-returned router: ${p} (expected ${g.router})`);let h=BigInt(1e4-a),w=m*h/BigInt(1e4),v=d?y*BigInt(1e4+a)/BigInt(1e4):y,T=BigInt(Math.floor(Date.now()/1e3)+rre),A,_;r?(A=AFe(w,t,o,T),_=v):(A=_Fe(v,w,t,o,T),_=0n);let E=r?"BUY":"SELL",O=TFe(),$=l.tokenSymbol||i,B={quoteId:O,token:t,tokenSymbol:$,tokenDecimals:u,direction:E,amountIn:r?le(v,18):le(v,u),amountInWei:v,expectedOutput:r?le(m,u):le(m,18),expectedOutputWei:m,minOutput:r?le(w,u):le(w,18),minOutputWei:w,slippageBps:a,progress:l.progress,progressPercent:l.progressPercent,router:p,expiresAt:Date.now()+nre,chainId:s,_calldata:A,_value:_};Z6.set(O,B);let{_calldata:V,_value:D,...G}=B,N;return ire(l.progress)&&(N=`Token is ${l.progressPercent} toward graduation. Large buys may trigger graduation.`),{quote:G,warning:N}}function po(e){let t=Z6.get(e);if(!t)return null;if(mo(t))return Z6.delete(e),null;let{_calldata:n,_value:r,...a}=t;return a}function qi(e){let t=Z6.get(e);return!t||!t._calldata?null:mo(t)?(Z6.delete(e),null):{calldata:t._calldata,router:t.router,value:t._value,direction:t.direction}}function mo(e){return Date.now()>=e.expiresAt}function dre(e){let t=e.expiresAt-Date.now();return Math.max(0,Math.floor(t/1e3))}function Gi(e){Z6.delete(e)}Y();var Kn="0xea1b8E4aB7f14F7dCA68c5B214303B13078FC5ec",s$="0x2880aB155794e7179c9eE2e38200202908C17B43",V0="0x754704Bc059F8C67012fEd69BC8A327a5aafb603",g0="0xFD44B35139Ae53FFF7d8F2A9869c503D987f00d1",h0="0x91b81bfbe3A747230F0529Aa28d8b2Bc898E6D56";var Qr="0x3bd359C1119dA7Da1D913D1C4D2B7c461115433A";var o$=8500n,bo=[500,750,1001];var fre=500,lre=300,pre=50,mre="https://hermes.pyth.network",bre=[{type:"function",inputs:[{type:"address",name:"user"},{type:"address",name:"pairBase"}],name:"getPositionsV2",outputs:[{components:[{type:"bytes32",name:"positionHash"},{type:"string",name:"pair"},{type:"address",name:"pairBase"},{type:"address",name:"tokenIn"},{type:"address",name:"marginToken"},{type:"bool",name:"isLong"},{type:"uint96",name:"margin"},{type:"uint128",name:"qty"},{type:"uint128",name:"entryPrice"},{type:"uint128",name:"stopLoss"},{type:"uint128",name:"takeProfit"},{type:"uint96",name:"openFee"},{type:"uint96",name:"executionFee"},{type:"int256",name:"fundingFee"},{type:"uint32",name:"timestamp"},{type:"uint96",name:"holdingFee"}],type:"tuple[]",name:""}],stateMutability:"view"}],M2=[{inputs:[{components:[{type:"address",name:"pairBase"},{type:"bool",name:"isLong"},{type:"address",name:"tokenIn"},{type:"address",name:"lvToken"},{type:"uint96",name:"amountIn"},{type:"uint128",name:"qty"},{type:"uint128",name:"price"},{type:"uint128",name:"stopLoss"},{type:"uint128",name:"takeProfit"},{type:"uint24",name:"broker"}],name:"data",type:"tuple"},{type:"bytes[]",name:"priceUpdateData"}],name:"openMarketTradeWithPyth",outputs:[{type:"bytes32",name:"tradeHash"}],stateMutability:"payable",type:"function"},{name:"closeTrade",type:"function",stateMutability:"nonpayable",inputs:[{name:"tradeHash",type:"bytes32"}],outputs:[]},{name:"addMargin",type:"function",stateMutability:"payable",inputs:[{name:"tradeHash",type:"bytes32"},{name:"token",type:"address"},{name:"amount",type:"uint96"}],outputs:[]},{name:"updateTradeTpAndSl",type:"function",stateMutability:"nonpayable",inputs:[{name:"tradeHash",type:"bytes32"},{name:"takeProfit",type:"uint128"},{name:"stopLoss",type:"uint128"}],outputs:[]}],B7=[{inputs:[{components:[{type:"address",name:"pairBase"},{type:"bool",name:"isLong"},{type:"address",name:"tokenIn"},{type:"address",name:"lvToken"},{type:"uint96",name:"amountIn"},{type:"uint128",name:"qty"},{type:"uint128",name:"price"},{type:"uint128",name:"stopLoss"},{type:"uint128",name:"takeProfit"},{type:"uint24",name:"broker"}],name:"data",type:"tuple"},{type:"bytes[]",name:"priceUpdateData"}],name:"openLimitOrderWithPyth",outputs:[{type:"bytes32",name:"orderHash"}],stateMutability:"payable",type:"function"},{name:"cancelLimitOrder",type:"function",stateMutability:"nonpayable",inputs:[{name:"orderHash",type:"bytes32"}],outputs:[]},{name:"batchCancelLimitOrders",type:"function",stateMutability:"nonpayable",inputs:[{name:"orderHashes",type:"bytes32[]"}],outputs:[]}],yre=[{type:"function",inputs:[{type:"address",name:"user"},{type:"address",name:"pairBase"}],name:"getLimitOrders",outputs:[{components:[{type:"bytes32",name:"orderHash"},{type:"string",name:"pair"},{type:"address",name:"pairBase"},{type:"bool",name:"isLong"},{type:"address",name:"tokenIn"},{type:"address",name:"lvToken"},{type:"uint96",name:"amountIn"},{type:"uint128",name:"qty"},{type:"uint128",name:"limitPrice"},{type:"uint128",name:"stopLoss"},{type:"uint128",name:"takeProfit"},{type:"uint24",name:"broker"},{type:"uint32",name:"timestamp"}],type:"tuple[]",name:""}],stateMutability:"view"}],i$=[{type:"function",name:"getPairHoldingFeeRate",inputs:[{type:"address",name:"pairBase"},{type:"bool",name:"isLong"}],outputs:[{type:"uint256",name:""}],stateMutability:"view"}],gre=[{type:"function",name:"lastLongAccFundingFeePerShare",inputs:[{type:"address",name:"pairBase"}],outputs:[{type:"int256",name:""}],stateMutability:"view"}],hre=[{type:"function",name:"getMarketInfo",inputs:[{type:"address",name:"pairBase"}],outputs:[{type:"address",name:"pairBase"},{type:"uint256",name:"longQty"},{type:"uint256",name:"shortQty"},{type:"uint256",name:"longNotional"},{type:"uint256",name:"shortNotional"},{type:"int256",name:"currentFundingFeePerSec"}],stateMutability:"view"}],c$=[{name:"getUpdateFee",type:"function",stateMutability:"view",inputs:[{name:"updateData",type:"bytes[]"}],outputs:[{name:"fee",type:"uint256"}]}],Fn=[{pair:"BTC/USD",pairBase:"0xcf5a6076cfa32686c0df13abada2b40dec133f1d",pythId:"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43",category:"Crypto"},{pair:"ETH/USD",pairBase:"0xb5a30b0fdc5ea94a52fdc42e3e9760cb8449fb37",pythId:"0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace",category:"Crypto"},{pair:"MON/USD",pairBase:"0x3bd359c1119da7da1d913d1c4d2b7c461115433a",pythId:"0x31491744e2dbf6df7fcf4ac0820d18a609b49076d45066d3568424e62f686cd1",category:"Crypto"},{pair:"SOL/USD",pairBase:"0x0a3ec4fc70eaf64faf6eeda4e9b2bd4742a78546",pythId:"0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d",category:"Crypto"},{pair:"XRP/USD",pairBase:"0xaeb724422620edb430dcaf22aeeff2e9388a578c",pythId:"0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8",category:"Crypto"},{pair:"QQQ/USD",pairBase:"0xb589511c51d1ffda5d943ac1c9733e112abeff7b",pythId:"0x9695e2b96ea7b3859da9ed25b7a46a920a776e2fdae19a7bcfdf2b219230452d",category:"Indices"},{pair:"SPY/USD",pairBase:"0xcb8900160bd4a86d3b80f5ad5a44ee15823b0592",pythId:"0x19e09bb805456ada3979a7d1cbb4b6d63babc3a0f8e8a9509f68afa5c4c11cd5",category:"Indices"},{pair:"AAPL/USD",pairBase:"0x3a54a9a690616fbc26cfc409bf11f89d51f1d57a",pythId:"0x49f6b65cb1de6b10eaf75e7c03ca029c306d0357e91b5311b175084a5ad55688",category:"Stocks"},{pair:"AMZN/USD",pairBase:"0x6c755094f1cdd95e2e4170549dc12e7555151536",pythId:"0xb5d0e0fa58a1f8b81498ae670ce93c872d14434b72c364885d4fa1b257cbb07a",category:"Stocks"},{pair:"TSLA/USD",pairBase:"0x0a8f1f385fed9c77a2e0daa363ccc865e971bdbe",pythId:"0x16dad506d7db8da01c87581c87ca897a012a153557d4d578c3b9c9e1bc0632f1",category:"Stocks"},{pair:"NVDA/USD",pairBase:"0xe108948b9667048232851f26a1427d3a908b22da",pythId:"0xb1073854ed24cbc755dc527418f52b7d271f6cc967bbf8d8129112b18860a593",category:"Stocks"},{pair:"META/USD",pairBase:"0x0057355892fab25ddc63a7482ec1696d6ada6703",pythId:"0x78a3e3b8e676a8f73c439f5d749737034b139bbbe899ba5775216fba596607fe",category:"Stocks"},{pair:"MSFT/USD",pairBase:"0xb2023082f01404dd0ce6937cab03c4f5d6db9ba8",pythId:"0xd0ca23c1cc005e004ccf1db5bf76aeb6a49218f43dac3d4b275e92de12ded4d1",category:"Stocks"},{pair:"GOOG/USD",pairBase:"0x9a4f772de1a5f6df5913fa2c98dd7177eaa23dc2",pythId:"0xe65ff435be42630439c96396653a342829e877e2aafaeaf1a10d0ee5fd2cf3f2",category:"Stocks"},{pair:"EUR/USD",pairBase:"0xa9226449042e36bf6865099eec57482aa55e3ad0",pythId:"0xa995d00bb36a63cef7fd2c287dc105fc8f3d93779f062f09551b0af3e81ec30b",category:"Forex"},{pair:"USD/JPY",pairBase:"0x35b8bafff3570683af968b8d36b91b1a19465141",pythId:"0xef2c98c804ba503c6a707e38be4dfbb16683775f195b091252bf24693042fd52",category:"Forex"},{pair:"XAU/USD",pairBase:"0x7c687a3207cd9c05b4b11d8dd7ac337919c22001",pythId:"0x765d2ba906dbc32ca17cc11f5310a89e9ee1f6420508c63861f2f8ba4ee34bb2",category:"Commodities"},{pair:"XAG/USD",pairBase:"0x5ccc5c04130d272bf07d6e066f4cae40cfc03136",pythId:"0xf2fb02c32b055c805e7238d628e5e9dadef274376114eb1f012337cabe93871e",category:"Commodities"},{pair:"500BTC/USD",pairBase:"0x0000000000000000000000000000000000000003",pythId:"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43",category:"Crypto",isHighLeverage:!0},{pair:"500ETH/USD",pairBase:"0x0000000000000000000000000000000000000004",pythId:"0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace",category:"Crypto",isHighLeverage:!0}];m0();async function K6(e){let t=new URL(`${mre}/v2/updates/price/latest`);return e.forEach(n=>t.searchParams.append("ids[]",n)),await xt(async()=>{let n=await fetch(t.toString());if(!n.ok)throw new Error(`Pyth API error: ${n.statusText}`);return await n.json()},{operationName:"fetch-pyth-price"})}Y();Te();mt();We();m0();var EFe=["MON","LVMON"];function xre(e){return EFe.includes(e)}function Qo(e){return bo.includes(e)}function X6(e){return e<pre?fre:lre}function Ca(e){return e==="USDC"?6:18}async function yp(e){let t=await we(e),n=e.network?.chainId||143,r=Ee(n,t);return await Ct()?_e({chain:r,transport:gt(t,Ot(e))}):_e({chain:r,transport:gt(t)})}async function J5(e,t){let n=await q();if(!n||!Pe(n))throw new Error("Wallet not configured.");let r=await yp(n),a=[],s=t?Fn.filter(o=>t.includes(o.pair)):Fn;for(let o of s){let i=await xt(async()=>r.readContract({address:Kn,abi:bre,functionName:"getPositionsV2",args:[e,o.pairBase]}),{operationName:`leverup-get-positions-${o.pair}`});if(i&&i.length>0){let d=(await K6([o.pythId])).parsed?.[0]?.price;if(!d)continue;let l=BigInt(d.price)*10n**BigInt(18+d.expo);for(let p of i){let y=p,m=kFe(y,l);a.push({position:y,analysis:m})}}}return a}async function J6(e,t,n,r,a="MON"){let s=Fn.find(D=>D.pair===`${e}/USD`||D.pair===e);if(!s)throw new Error(`Unsupported pair: ${e}`);let o=[s.pythId],i=Fn.find(D=>D.pair==="MON/USD");xre(a)&&i&&o.push(i.pythId);let u=await K6(o),d=u.parsed?.find(D=>`0x${D.id}`===s.pythId)?.price;if(!d)throw new Error("Could not fetch asset price from Pyth");let l=BigInt(d.price)*10n**BigInt(18+d.expo),p;if(xre(a)){let D=u.parsed?.find(W=>`0x${W.id}`===i?.pythId)?.price;if(!D)throw new Error("Could not fetch MON price from Pyth");let G=BigInt(D.price)*10n**BigInt(18+D.expo);p=ye(n,18)*G/10n**18n}else p=ye(n,18);let y=p*BigInt(r),m=y*10n**10n/l,g=y*45n/100000n,w=p*o$/10000n-g,v;t?v=l-w*10n**10n/m:v=l+w*10n**10n/m;let T=t?(l-v)*10000n/l:(v-l)*10000n/l,A=le(p,18),_=Number(le(y,18)),E=Number(A),O=200,$=10,B=[],V=!1;return _<O&&(B.push(`Position size is below the protocol minimum of $200.00 USD (Current: $${_.toFixed(2)}). This will be rejected by the contract.`),V=!0),E<$&&B.push(`Margin is below the recommended $10.00 USD (Current: $${E.toFixed(2)}). This may work but is not recommended.`),s.isHighLeverage&&!Qo(r)&&(B.push(`${s.pair} is a high-leverage (Zero-Fee) pair that ONLY supports ${bo.join(", ")}x leverage. Current leverage (${r}x) will be rejected by the protocol.`),V=!0),{symbol:s.pair,isLong:t,leverage:r,entryPrice:Number(le(l,18)).toFixed(2),marginAmount:`${n} ${a}`,marginUsd:E.toFixed(2),positionSize:le(m,10),positionValueUsd:_.toFixed(2),liqPrice:Number(le(v,18)).toFixed(2),openFee:Number(le(g,18)).toFixed(4),healthFactor:Math.max(0,Math.min(100,Number(T))),distanceToLiq:`${(Number(T)/100).toFixed(2)}%`,meetsMinimums:!V,warnings:B,isHighLeveragePair:s.isHighLeverage??!1,maxTpPercent:X6(r),canAddMargin:!Qo(r)}}function kFe(e,t){let{isLong:n,entryPrice:r,qty:a,margin:s,openFee:o,holdingFee:i,fundingFee:u}=e,d=n?(t-r)*a/10n**10n:(r-t)*a/10n**10n,l=o+i+u,p=d-l,m=s*o$/10000n-l,g=n?r-m*10n**10n/a:r+m*10n**10n/a,h=n?(t-g)*10000n/t:(g-t)*10000n/t;return{unrealizedPnL:`$${Number(le(p,18)).toFixed(2)}`,pnlPercentage:`${(Number(p*10000n/s)/100).toFixed(2)}%`,liqPrice:Number(le(g,18)).toFixed(2),distanceToLiq:`${(Number(h)/100).toFixed(2)}%`,healthFactor:Math.max(0,Math.min(100,Number(h))),isLiquidatable:h<=0}}async function vre(e){let t=await q();if(!t||!Pe(t))throw new Error("Wallet not configured.");let n=await yp(t);return(await Promise.all(Fn.map(async a=>{try{let s=await xt(async()=>n.readContract({address:Kn,abi:yre,functionName:"getLimitOrders",args:[e,a.pairBase]}),{operationName:`leverup-get-limit-orders-${a.pair}`});return s&&s.length>0?s.map(o=>({...o,pair:a.pair})):[]}catch{return[]}}))).flat()}async function O2(e,t,n,r,a,s="MON"){let o=await J6(e,t,n,r,s),i=ye(a,18),u=ye(o.entryPrice,18),d,l;if(t)if(d=i<u,d){let y=(u-i)*10000n/u;l=`Valid: Trigger price is ${(Number(y)/100).toFixed(2)}% below current market.`}else l=`Invalid: Long limit orders require trigger price BELOW current market ($${o.entryPrice}).`;else if(d=i>u,d){let y=(i-u)*10000n/u;l=`Valid: Trigger price is ${(Number(y)/100).toFixed(2)}% above current market.`}else l=`Invalid: Short limit orders require trigger price ABOVE current market ($${o.entryPrice}).`;let p=[...o.warnings];return d||p.unshift(l),{...o,triggerPrice:a,triggerPriceUsd:`$${Number(a).toFixed(2)}`,currentPrice:o.entryPrice,isTriggerValid:d,triggerValidationMessage:l,warnings:p,meetsMinimums:o.meetsMinimums&&d}}function U7(e,t){let n=e*t;return`${(Number(n)/1e10*100).toFixed(6)}%`}function Tre(e){return e>0n?"longs pay":e<0n?"shorts pay":"neutral"}function IFe(e){let t=e;return{longQty:t[1],shortQty:t[2],currentFundingFeePerSec:t[5]}}function wre(e,t){let n=e*t,r=n<0n?-n:n;return`${n<0n?"-":"+"}${(Number(r)/1e18*100).toFixed(4)}%`}function CFe(e){let{longQty:t,shortQty:n,currentFundingFeePerSec:r}=e,a=le(t,10),s=le(n,10),o,i;if(t===0n&&n===0n)o="0:0",i="balanced";else if(n===0n)o="100% longs",i="longs";else if(t===0n)o="100% shorts",i="shorts";else{let u=Number(t)/Number(n);u>1.1?(o=`${u.toFixed(2)}:1 long-heavy`,i="longs"):u<.9?(o=`1:${(1/u).toFixed(2)} short-heavy`,i="shorts"):(o=`${u.toFixed(2)}:1 balanced`,i="balanced")}return{longQty:a,shortQty:s,oiRatio:o,dominantSide:i,currentFundingRate8h:wre(r,28800n),currentFundingRate1h:wre(r,3600n),fundingRateDirection:Tre(r)}}async function Sre(e){let t=await q();if(!t)throw new Error("Config not loaded. Run setup_wallet first.");let n=await yp(t),r=Fn.filter(o=>!o.isHighLeverage);if(e){let o=e.toUpperCase().trim();if(r=r.filter(i=>i.pair.toUpperCase().startsWith(o)||i.pair.toUpperCase()===`${o}/USD`||i.pair.toUpperCase().includes(o)),r.length===0)throw new Error(`No LeverUp pair found for '${e}'. Use leverup_list_pairs to see available markets.`)}let s=(await Promise.all(r.map(async o=>{try{let[i,u,d,l]=await Promise.all([xt(async()=>n.readContract({address:Kn,abi:i$,functionName:"getPairHoldingFeeRate",args:[o.pairBase,!0]}),{operationName:`funding-long-${o.pair}`}),xt(async()=>n.readContract({address:Kn,abi:i$,functionName:"getPairHoldingFeeRate",args:[o.pairBase,!1]}),{operationName:`funding-short-${o.pair}`}),xt(async()=>n.readContract({address:Kn,abi:gre,functionName:"lastLongAccFundingFeePerShare",args:[o.pairBase]}),{operationName:`acc-funding-${o.pair}`}),xt(async()=>n.readContract({address:Kn,abi:hre,functionName:"getMarketInfo",args:[o.pairBase]}),{operationName:`market-info-${o.pair}`}).catch(()=>null)]),p=i,y=u,m=d,g={symbol:o.pair,category:o.category,pairBase:o.pairBase,holdingFeeRatePerSecond:{long:p,short:y},holdingFeeRate8h:{long:U7(p,28800n),short:U7(y,28800n)},holdingFeeRate1h:{long:U7(p,3600n),short:U7(y,3600n)},accumulatedFunding:m,fundingDirection:Tre(m)};if(l){let h=IFe(l);g.marketInfo=CFe(h)}return g}catch{return null}}))).filter(o=>o!==null);return s.sort((o,i)=>o.category!==i.category?o.category.localeCompare(i.category):o.symbol.localeCompare(i.symbol)),s}m0();async function N2(e,t){let n=Fn.find(T=>T.pair===`${e.symbol}/USD`||T.pair===e.symbol);if(!n)throw new Error(`Unsupported pair: ${e.symbol}`);let r=await yp(t),a=[n.pythId],s=Fn.find(T=>T.pair==="MON/USD");(e.collateralToken==="MON"||e.collateralToken==="LVMON")&&s&&a.push(s.pythId);let i=(await K6(a)).binary.data.map(T=>T.startsWith("0x")?T:`0x${T}`),u=await xt(async()=>r.readContract({address:s$,abi:c$,functionName:"getUpdateFee",args:[i]}),{operationName:"leverup-pyth-fee"}),d,l;switch(e.collateralToken){case"USDC":d=V0,l=g0;break;case"LVUSD":d=g0,l=g0;break;case"LVMON":d=h0,l=h0;break;default:d=Qr,l=h0;break}let y=e.amountIn*BigInt(e.leverage)*45n/100000n,m=e.amountIn+y,g={pairBase:xe(n.pairBase),isLong:e.isLong,tokenIn:d,lvToken:l,amountIn:m,qty:e.qty,price:e.price,stopLoss:e.stopLoss||0n,takeProfit:e.takeProfit||0n,broker:0},h=X({abi:M2,functionName:"openMarketTradeWithPyth",args:[g,i]}),v=e.collateralToken==="MON"?u+m:u;return{to:Kn,data:h,value:v,tokenIn:d,amountIn:m}}async function L2(e){let t=X({abi:M2,functionName:"closeTrade",args:[e]});return{to:Kn,data:t,value:0n}}function B2(e,t,n,r){let a=X({abi:M2,functionName:"addMargin",args:[e,t,n]});return{to:Kn,data:a,value:r?n:0n,tokenIn:t,amountIn:n}}function U2(e,t,n){let r=X({abi:M2,functionName:"updateTradeTpAndSl",args:[e,t,n]});return{to:Kn,data:r,value:0n}}async function H2(e,t){let n=Fn.find(T=>T.pair===`${e.symbol}/USD`||T.pair===e.symbol);if(!n)throw new Error(`Unsupported pair: ${e.symbol}`);let r=await yp(t),a=[n.pythId],s=Fn.find(T=>T.pair==="MON/USD");(e.collateralToken==="MON"||e.collateralToken==="LVMON")&&s&&a.push(s.pythId);let i=(await K6(a)).binary.data.map(T=>T.startsWith("0x")?T:`0x${T}`),u=await xt(async()=>r.readContract({address:s$,abi:c$,functionName:"getUpdateFee",args:[i]}),{operationName:"leverup-limit-pyth-fee"}),d,l;switch(e.collateralToken){case"USDC":d=V0,l=g0;break;case"LVUSD":d=g0,l=g0;break;case"LVMON":d=h0,l=h0;break;default:d=Qr,l=h0;break}let y=e.amountIn*BigInt(e.leverage)*45n/100000n,m=e.amountIn+y,g={pairBase:xe(n.pairBase),isLong:e.isLong,tokenIn:d,lvToken:l,amountIn:m,qty:e.qty,price:e.triggerPrice,stopLoss:e.stopLoss||0n,takeProfit:e.takeProfit||0n,broker:0},h=X({abi:B7,functionName:"openLimitOrderWithPyth",args:[g,i]}),v=e.collateralToken==="MON"?u+m:u;return{to:Kn,data:h,value:v,tokenIn:d,amountIn:m}}function F2(e){let t=X({abi:B7,functionName:"cancelLimitOrder",args:[e]});return{to:Kn,data:t,value:0n}}function z2(e){let t=X({abi:B7,functionName:"batchCancelLimitOrders",args:[e]});return{to:Kn,data:t,value:0n}}function PFe(e,t){return e>t?e-t:t-e}var H7={MON:Hn,USDC:V0,LVUSD:g0,LVMON:h0};function RFe(e,t){return zo({abi:Xe,logs:e.logs,eventName:"Transfer"}).filter(r=>r.args.to?.toLowerCase()===t.toLowerCase()).map(r=>({token:r.address,amount:r.args.value}))}var $Fe=qu("event Transfer(address indexed from, address indexed to, uint256 value)");async function _re(){let e=await q();if(!e)return null;let t=await we(e),n=e.network?.chainId??143,r=Ee(n,t);return _e({chain:r,transport:Ze(t,e)})}var Are=200n;async function Ere(e,t,n,r){let a=r==="latest"?await e.getBlockNumber():r;if(a<n)return[];let s=[];for(let o=n;o<=a;o+=Are){let i=o+Are-1n,u=i>a?a:i,d=await e.getLogs({event:$Fe,args:{from:up.leverUpDiamond,to:t},fromBlock:o,toBlock:u});for(let l of d)s.push({token:l.address,amount:l.args.value})}return s}async function DFe(e,t){let n=await _re();if(!n)return[];let r=8,a=2e3;for(let s=0;s<r;s++){await new Promise(o=>setTimeout(o,a));try{let o=await Ere(n,t,e+1n,"latest");if(o.length>0)return o}catch{}}return[]}async function kre(e,t,n){let r=await _re();if(!r)return[];let a=3;for(let s=0;s<a;s++)try{return await Ere(r,n,e,t)}catch{s<a-1&&await new Promise(o=>setTimeout(o,1e3*(s+1)))}return[]}async function ds(e,t,n,r){let a=await q();if(!a?.wallet)return{success:!1,error:"Wallet not configured"};let s=await c0(e);if(!s)return{success:!1,error:`Agent not found: ${e}`};if(s.status!=="running")return{success:!1,error:`Agent not running (status: ${s.status})`};if(Date.now()>s.expiresAt)return await Fi(e,{status:"failed"}),{success:!1,error:"Delegation expired"};if(s.trades.executed>=s.trades.maxAllowed)return await Fi(e,{status:"completed"}),{success:!1,error:"Max trades reached"};let o=await pp(e);if(!o?.rootDelegation||!o?.signedDelegation)return{success:!1,error:"Missing delegation chain in storage"};if(!r?.skipBudgetTracking){if(t.value>0n){let D=BigInt(s.budget.monAllocated),G=BigInt(s.budget.monSpent);if(G+t.value>D)return{success:!1,error:`Insufficient MON budget. Allocated: ${D}, Spent: ${G}, Required: ${t.value}. Note: LeverUp trades require native MON for Pyth oracle fees even with ERC20 collateral. Ensure budgetMon >= 1 when creating sub-agents.`};let N=R7(s,Hn);if(!N.allowed)return{success:!1,error:`Native MON not allowed: ${N.reason}`}}if(r?.tokenFlows)for(let{token:D,amount:G}of r.tokenFlows.outflows){if(D.toLowerCase()===Hn.toLowerCase())continue;let N=HR(s,D,G);if(!N.allowed)return{success:!1,error:`Budget exceeded: ${N.reason}`};let W=R7(s,D);if(!W.allowed)return{success:!1,error:`Token not allowed: ${W.reason}`}}}let i=await oc(s.walletId);if(!i)return{success:!1,error:"Sub-agent wallet not found in Keychain"};let u=a.network.chainId,d=await we(a),l=Ee(u,d),p=Qe(u),y=_e({chain:l,transport:Ze(d,a)}),m=await y.getBalance({address:i.address});if(m<10000000000000000n)return{success:!1,error:`Sub-agent wallet needs gas. Balance: ${m} wei. Fund with fund_sub_agent tool.`};let g=GR(i),h=Tt({account:g,chain:l,transport:Ze(d,a)}),w=structuredClone(o.rootDelegation),v=structuredClone(o.signedDelegation),A=t.callData.toLowerCase().startsWith(cp.toLowerCase())?j6.APPROVE:j6.TRADING;$2(w,A),$2(v,A);let _=[v,w],E;function O(D){return`${p.blockExplorer}/tx/${D}`}function $(){let D={outflows:[...r?.tokenFlows?.outflows||[]],inflows:[...r?.tokenFlows?.inflows||[]]};return t.value>0n&&!D.outflows.some(G=>G.token.toLowerCase()===Hn.toLowerCase())&&D.outflows.push({token:Hn,amount:t.value}),D}async function B(){r?.skipTradeLogging||await DR(e,{timestamp:Date.now(),action:n.action,protocol:n.protocol,details:n.details,txHash:E,success:!0}),r?.skipBudgetTracking||(r?.tokenFlows?await K5(e,$()):t.value>0n&&await NR(e,Hn,t.value))}function V(D){return D instanceof Error&&(D.name==="WaitForTransactionReceiptTimeoutError"||D.message.includes("Timed out while waiting for transaction"))}try{E=await dn(h,y,Ue.delegationManager,[{permissionContext:_,executions:[Pt({target:t.target,value:t.value,callData:t.callData})],mode:nn.SingleDefault}]);let D=await Xt(y,E);return D.status==="reverted"?(await Z5(e,"Transaction reverted on-chain",!0),{success:!1,txHash:E,error:"Transaction reverted on-chain"}):(await B(),{success:!0,txHash:E,explorerUrl:O(E),receipt:D})}catch(D){let G=D instanceof Error?D.message:"Unknown error";if(V(D)&&E)try{await new Promise(W=>setTimeout(W,1e4));let N=await y.getTransactionReceipt({hash:E});return N?.status==="success"?(await B(),{success:!0,txHash:E,explorerUrl:O(E),receipt:N}):N?.status==="reverted"?(await Z5(e,"Transaction reverted (recovered from timeout)",!0),{success:!1,txHash:E,error:"Transaction reverted on-chain"}):(await Z5(e,`Timeout: tx ${E} submitted but unconfirmed`,!0),{success:!1,txHash:E,error:`Timeout: tx submitted (${E}) but unconfirmed`})}catch{return await Z5(e,`Timeout + recovery failed: ${G}`,!0),{success:!1,txHash:E,error:`Timeout: recovery failed (${E})`}}return await Z5(e,G,!0),{success:!1,txHash:E,error:G}}}function Ire(e){let t=e.toLowerCase();return Object.values(up).some(n=>n.toLowerCase()===t)}async function MFe(e,t,n,r,a){try{let s=await e.readContract({address:t,abi:Xe,functionName:"allowance",args:[n,r]});return{hasApproval:s>=a,currentAllowance:s}}catch{return{hasApproval:!1,currentAllowance:0n}}}async function OFe(e,t,n){if(!Ire(n))return{success:!1,error:`Spender ${n} is not whitelisted for autonomous approvals. Whitelisted: ${Object.entries(up).map(([s,o])=>`${s}: ${o}`).join(", ")}`};let r=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),a=X({abi:Xe,functionName:"approve",args:[n,r]});return await ds(e,{target:t,value:0n,callData:a},{action:"other",protocol:"other",details:{operation:"approve",token:t,spender:n}},{skipBudgetTracking:!0,skipTradeLogging:!0})}async function j2(e,t,n,r,a,s,o){let i=await q();if(!i?.wallet)return{success:!1,error:"Wallet not configured"};if(t.toLowerCase()===Hn.toLowerCase())return await ds(e,a,s,o);if(!Ire(n))return{success:!1,error:`Spender ${n} is not whitelisted for autonomous approvals.`};let u=i.network.chainId,d=await we(i),l=Ee(u,d),p=_e({chain:l,transport:Ze(d,i)}),y=i.wallet.smartAccountAddress,{hasApproval:m}=await MFe(p,t,y,n,r);if(!m){let g=await OFe(e,t,n);if(!g.success)return{success:!1,error:`Approval failed: ${g.error}`};await new Promise(h=>setTimeout(h,1e3))}return await ds(e,a,s,o)}async function Cre(e,t){let n=po(t);if(!n)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};if(mo(n))return Gi(t),{success:!1,message:"Quote expired",error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(n.direction!=="BUY")return{success:!1,message:"Wrong quote type",error:"This quote is for selling, not buying. Use nadfun_sell instead."};let r=qi(t);if(!r)return{success:!1,message:"Execution data missing",error:"Execution data missing. Please get a fresh quote."};let a={outflows:[{token:Hn,amount:r.value}],inflows:[{token:n.token,amount:n.expectedOutputWei}]},s=await ds(e,{target:r.router,value:r.value,callData:r.calldata},{action:"buy",protocol:"nadfun",details:{token:n.tokenSymbol,tokenOutAddress:n.token,amountIn:n.amountIn,amountOut:n.expectedOutput}},{tokenFlows:a});if(!s.success)return{success:!1,message:"Autonomous buy failed",error:s.error};Gi(t);try{await ka(e,{ts:Date.now(),type:"trade_buy",pair:`${n.tokenSymbol}/MON`,margin:n.amountIn,text:`Bought ${n.expectedOutput} ${n.tokenSymbol} for ${n.amountIn} MON`,txHash:s.txHash,protocol:"nadfun"})}catch{}return{success:!0,message:`Successfully bought ${n.expectedOutput} ${n.tokenSymbol} for ${n.amountIn} MON (autonomous)`,transaction:{hash:s.txHash,explorerUrl:s.explorerUrl},trade:{tokenSymbol:n.tokenSymbol,monSpent:n.amountIn,tokensReceived:n.expectedOutput,progress:n.progressPercent}}}async function Pre(e,t){let n=po(t);if(!n)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};if(mo(n))return Gi(t),{success:!1,message:"Quote expired",error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(n.direction!=="SELL")return{success:!1,message:"Wrong quote type",error:"This quote is for buying, not selling. Use nadfun_buy instead."};let r=qi(t);if(!r)return{success:!1,message:"Execution data missing",error:"Execution data missing. Please get a fresh quote."};let a=ye(n.amountIn,18),s={outflows:[{token:n.token,amount:a}],inflows:[{token:Hn,amount:n.expectedOutputWei}]},o=await j2(e,n.token,r.router,a,{target:r.router,value:0n,callData:r.calldata},{action:"sell",protocol:"nadfun",details:{token:n.tokenSymbol,tokenInAddress:n.token,amountIn:n.amountIn,amountOut:n.expectedOutput}},{tokenFlows:s});if(!o.success)return{success:!1,message:"Autonomous sell failed",error:o.error};Gi(t);try{await ka(e,{ts:Date.now(),type:"trade_sell",pair:`${n.tokenSymbol}/MON`,margin:n.amountIn,text:`Sold ${n.amountIn} ${n.tokenSymbol} for ${n.expectedOutput} MON`,txHash:o.txHash,protocol:"nadfun"})}catch{}return{success:!0,message:`Successfully sold ${n.amountIn} ${n.tokenSymbol} for ${n.expectedOutput} MON (autonomous)`,transaction:{hash:o.txHash,explorerUrl:o.explorerUrl},trade:{tokenSymbol:n.tokenSymbol,tokensSold:n.amountIn,monReceived:n.expectedOutput,progress:n.progressPercent}}}async function Rre(e,t){let n=await L2(t),r=await ds(e,{target:n.to,value:n.value,callData:n.data},{action:"close",protocol:"leverup",details:{positionId:t}});if(!r.success)return{success:!1,message:"Autonomous close failed",error:r.error};if(r.receipt)try{let s=(await q())?.wallet?.smartAccountAddress;if(s){let o=await DFe(r.receipt.blockNumber,s);o.length>0&&await K5(e,{outflows:[],inflows:o})}}catch{}try{await I2(e,t)}catch{}try{await ka(e,{ts:Date.now(),type:"trade_close",tradeHash:t,text:`Closed position ${t.slice(0,10)}...`,txHash:r.txHash,protocol:"leverup"})}catch{}return{success:!0,message:`Successfully closed position ${t.slice(0,10)}... (autonomous)`,txHash:r.txHash,explorerUrl:r.explorerUrl}}async function $re(e,t,n,r){if(n===void 0&&r===void 0)return{success:!1,message:"Invalid parameters",error:"At least one of takeProfit or stopLoss must be provided."};if(r&&r!=="0"){let d=await c0(e),l=await pp(e);if(d&&l?.rootDelegation){let p=l.rootDelegation.delegator,m=(await J5(p)).find(g=>g.position.positionHash===t);if(m){let g=Number(le(m.position.entryPrice,18)),h=Number(r),w=m.position.isLong,v=w&&h>=g,T=!w&&h<=g;if(v){let A=(g*.99).toFixed(2);return{success:!1,message:"Invalid SL direction",error:`Invalid SL for LONG: SL ($${h}) must be below entry ($${g.toFixed(2)}). LeverUp requires SL in loss direction. Suggested: $${A}`}}if(T){let A=(g*1.01).toFixed(2);return{success:!1,message:"Invalid SL direction",error:`Invalid SL for SHORT: SL ($${h}) must be above entry ($${g.toFixed(2)}). LeverUp requires SL in loss direction. Suggested: $${A}`}}}}}let a=n?ye(n,18):0n,s=r?ye(r,18):0n,o=U2(t,a,s),i=await ds(e,{target:o.to,value:o.value,callData:o.data},{action:"other",protocol:"leverup",details:{operation:"updateTpSl",positionId:t,takeProfit:n||"unchanged",stopLoss:r||"unchanged"}});if(!i.success)return{success:!1,message:"Autonomous TP/SL update failed",error:i.error};let u=[];return n&&u.push(n==="0"?"TP disabled":`TP=$${n}`),r&&u.push(r==="0"?"SL disabled":`SL=$${r}`),{success:!0,message:`Successfully updated ${u.join(", ")} (autonomous)`,txHash:i.txHash,explorerUrl:i.explorerUrl}}async function Dre(e,t){if(t.length===0)return{success:!1,message:"No orders to cancel",error:"Please provide at least one order hash."};let n=t.length===1?F2(t[0]):z2(t),r=await ds(e,{target:n.to,value:n.value,callData:n.data},{action:"other",protocol:"leverup",details:{operation:"cancelLimitOrder",orderCount:String(t.length)}});if(!r.success)return{success:!1,message:"Autonomous cancel failed",error:r.error};if(r.receipt)try{let s=(await q())?.wallet?.smartAccountAddress;if(s){let o=RFe(r.receipt,s);o.length>0&&await K5(e,{outflows:[],inflows:o})}}catch{}try{await ka(e,{ts:Date.now(),type:"cancel_order",text:`Cancelled ${t.length} limit order(s)`,txHash:r.txHash,protocol:"leverup"})}catch{}return{success:!0,message:t.length===1?"Successfully cancelled limit order (autonomous)":`Successfully cancelled ${t.length} limit orders (autonomous)`,txHash:r.txHash,explorerUrl:r.explorerUrl}}async function Mre(e,t,n,r="MON"){let a=r==="MON",s=Ca(r),o=ye(n,s);function i(m){switch(m){case"MON":return Qr;case"USDC":return V0;case"LVUSD":return g0;case"LVMON":return h0}}let u=i(r),d=B2(t,u,o,a),p={outflows:[{token:a?Hn:u,amount:o}],inflows:[]},y;return a?y=await ds(e,{target:d.to,value:d.value,callData:d.data},{action:"other",protocol:"leverup",details:{operation:"addMargin",positionId:t,amount:n,collateral:r}},{tokenFlows:p}):y=await j2(e,u,d.to,o,{target:d.to,value:d.value,callData:d.data},{action:"other",protocol:"leverup",details:{operation:"addMargin",positionId:t,amount:n,collateral:r}},{tokenFlows:p}),y.success?{success:!0,message:`Successfully added ${n} ${r} margin (autonomous)`,txHash:y.txHash,explorerUrl:y.explorerUrl}:{success:!1,message:"Autonomous add margin failed",error:y.error}}async function Ore(e,t,n,r){let a=await q();if(!a?.wallet)return{success:!1,message:"Wallet not configured",error:"Wallet not configured"};let s=a.network.chainId,o=t.toUpperCase()==="MON"||t.toLowerCase()===Hn.toLowerCase(),i,u,d;if(o)i="MON",u=18,d=Hn;else{let w=await is(t,s);if(!w)return{success:!1,message:"Token not found",error:`Token not found: ${t}. Please provide a valid symbol or address.`};i=w.symbol,u=w.decimals,d=w.address}let l=ye(r,u),p,y,m;o?(p=n,y=l,m="0x"):(p=d,y=0n,m=X({abi:Xe,functionName:"transfer",args:[n,l]}));let h=await ds(e,{target:p,value:y,callData:m},{action:"other",protocol:"other",details:{operation:"transfer",token:i,recipient:n,amount:r}},{tokenFlows:{outflows:[{token:d,amount:l}],inflows:[]}});return h.success?{success:!0,message:`Successfully transferred ${r} ${i} (autonomous)`,txHash:h.txHash,explorerUrl:h.explorerUrl,transfer:{token:i,recipient:n,amount:r,isNative:o}}:!o&&(h.error?.includes("allowance")||h.error?.includes("approve"))?{success:!1,message:"Token approval needed",error:`${i} approval required. Use assistant mode first.`}:{success:!1,message:"Autonomous transfer failed",error:h.error}}var Nre=[{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256"}],outputs:[],stateMutability:"nonpayable"}];async function Lre(e,t){let n=await q();if(!n?.wallet)return{success:!1,message:"Wallet not configured",error:"Wallet not configured"};let a=Qe(n.network.chainId).tokens.wmon;if(!a)return{success:!1,message:"WMON not configured",error:"WMON address not configured for this chain"};let s=ye(t,18),o=X({abi:Nre,functionName:"deposit"}),u=await ds(e,{target:a,value:s,callData:o},{action:"other",protocol:"other",details:{operation:"wrap",amount:t}},{tokenFlows:{outflows:[{token:Hn,amount:s}],inflows:[{token:a,amount:s}]}});return u.success?{success:!0,message:`Successfully wrapped ${t} MON \u2192 WMON (autonomous)`,txHash:u.txHash,explorerUrl:u.explorerUrl,wrap:{direction:"wrap",amount:t}}:{success:!1,message:"Autonomous wrap failed",error:u.error}}async function Bre(e,t){let n=await q();if(!n?.wallet)return{success:!1,message:"Wallet not configured",error:"Wallet not configured"};let a=Qe(n.network.chainId).tokens.wmon;if(!a)return{success:!1,message:"WMON not configured",error:"WMON address not configured for this chain"};let s=ye(t,18),o=X({abi:Nre,functionName:"withdraw",args:[s]}),u=await ds(e,{target:a,value:0n,callData:o},{action:"other",protocol:"other",details:{operation:"unwrap",amount:t}},{tokenFlows:{outflows:[{token:a,amount:s}],inflows:[{token:Hn,amount:s}]}});return u.success?{success:!0,message:`Successfully unwrapped ${t} WMON \u2192 MON (autonomous)`,txHash:u.txHash,explorerUrl:u.explorerUrl,wrap:{direction:"unwrap",amount:t}}:{success:!1,message:"Autonomous unwrap failed",error:u.error}}async function Ure(e,t,n=500){let r=await q();if(!r?.wallet)return{success:!1,message:"Wallet not configured",results:[],summary:{total:0,successful:0,failed:0},error:"Wallet not configured"};let a=Qe(r.network.chainId),s=[];for(let u of t){let d=await G6(u);if(!d){s.push({quoteId:u,success:!1,error:"Quote not found or expired. Please get a fresh quote."});continue}if(ac(d)){s.push({quoteId:u,success:!1,error:"Quote has expired. Please get a fresh quote."});continue}let l=await V5(u);if(!l){s.push({quoteId:u,success:!1,error:"Execution data missing. Please get a fresh quote."});continue}let p=d.fromToken.address.toLowerCase()===Hn.toLowerCase(),y=p?l.value||d.amountInWei:0n,m={outflows:[{token:d.fromToken.address,amount:p?y:d.amountInWei}],inflows:[{token:d.toToken.address,amount:d.expectedOutputWei}]},g;if(p?g=await ds(e,{target:l.router,value:y,callData:l.calldata},{action:"buy",protocol:"dex",details:{fromToken:d.fromToken.symbol,toToken:d.toToken.symbol,amountIn:d.amountIn,amountOut:d.expectedOutput}},{tokenFlows:m}):g=await j2(e,d.fromToken.address,l.router,d.amountInWei,{target:l.router,value:0n,callData:l.calldata},{action:"buy",protocol:"dex",details:{fromToken:d.fromToken.symbol,toToken:d.toToken.symbol,amountIn:d.amountIn,amountOut:d.expectedOutput}},{tokenFlows:m}),!g.success){s.push({quoteId:u,success:!1,error:g.error});continue}try{await ka(e,{ts:Date.now(),type:"swap",pair:`${d.fromToken.symbol}/${d.toToken.symbol}`,margin:d.amountIn,text:`Swapped ${d.amountIn} ${d.fromToken.symbol} for ${d.expectedOutput} ${d.toToken.symbol}`,txHash:g.txHash,protocol:"dex"})}catch{}s.push({quoteId:u,success:!0,txHash:g.txHash,explorerUrl:g.explorerUrl,swap:{fromToken:d.fromToken.symbol,toToken:d.toToken.symbol,amountIn:`${d.amountIn} ${d.fromToken.symbol}`,amountOut:`${d.expectedOutput} ${d.toToken.symbol}`}})}let o=s.filter(u=>u.success).length,i=s.filter(u=>!u.success).length;return{success:o>0,message:`Executed ${o}/${t.length} swaps (autonomous)`,results:s,summary:{total:t.length,successful:o,failed:i}}}async function Hre(e,t){let n=await q();if(!n?.wallet)return{success:!1,message:"Wallet not configured",error:"Wallet not configured"};let r=t.collateralToken||"MON",a=Fn.find(w=>w.pair===`${t.symbol}/USD`||w.pair===t.symbol);if(!a)return{success:!1,message:"Unsupported pair",error:`Pair not supported: ${t.symbol}. Check leverup_list_pairs for available pairs.`};if(a.isHighLeverage&&!Qo(t.leverage))return{success:!1,message:"Invalid leverage for Zero-Fee pair",error:`${a.pair} ONLY supports ${bo.join(", ")}x leverage. Requested: ${t.leverage}x.`};let s;try{s=await J6(t.symbol,t.isLong,t.marginAmount,t.leverage,r)}catch(w){return{success:!1,message:"Quote failed",error:w instanceof Error?w.message:"Failed to get quote"}}let o=parseFloat(s.entryPrice);if(t.takeProfit){let w=parseFloat(t.takeProfit),v=X6(t.leverage),T=t.isLong?(w-o)/o*100:(o-w)/o*100;if(T<=0){let A=t.isLong?"above":"below";return{success:!1,message:"Invalid TP",error:`For ${t.isLong?"Long":"Short"}, TP must be ${A} entry price ($${o}).`}}if(T>v)return{success:!1,message:"TP exceeds max",error:`Max TP for ${t.leverage}x is ${v}%. Requested: ${T.toFixed(1)}%.`}}if(t.stopLoss){let w=parseFloat(t.stopLoss);if(t.isLong?w>=o:w<=o){let T=t.isLong?"below":"above";return{success:!1,message:"Invalid SL",error:`For ${t.isLong?"Long":"Short"}, SL must be ${T} entry price ($${o}).`}}}let i=BigInt(t.slippageBps??100),u=ye(s.entryPrice,18),d=t.isLong?u*(10000n+i)/10000n:u*(10000n-i)/10000n,l=ye(t.marginAmount,Ca(r)),p=ye(s.positionSize,10),y;try{y=await N2({symbol:t.symbol,isLong:t.isLong,amountIn:l,leverage:t.leverage,qty:p,price:d,collateralToken:r,stopLoss:t.stopLoss?ye(t.stopLoss,18):0n,takeProfit:t.takeProfit?ye(t.takeProfit,18):0n},n)}catch(w){return{success:!1,message:"Execution build failed",error:w instanceof Error?w.message:"Failed to build execution"}}let m=H7[r],g={outflows:[{token:m,amount:l}],inflows:[]},h;if(r==="MON")h=await ds(e,{target:y.to,value:y.value,callData:y.data},{action:"open",protocol:"leverup",details:{symbol:t.symbol,side:t.isLong?"LONG":"SHORT",leverage:String(t.leverage),margin:t.marginAmount,collateral:r}},{tokenFlows:g});else{let w=H7[r];h=await j2(e,w,y.to,l,{target:y.to,value:y.value,callData:y.data},{action:"open",protocol:"leverup",details:{symbol:t.symbol,side:t.isLong?"LONG":"SHORT",leverage:String(t.leverage),margin:t.marginAmount,collateral:r}},{tokenFlows:g})}if(!h.success)return{success:!1,message:"Autonomous open failed",error:h.error};try{await ka(e,{ts:Date.now(),type:"trade_open",pair:a.pair,side:t.isLong?"LONG":"SHORT",margin:t.marginAmount,leverage:String(t.leverage),text:`Opened ${t.leverage}x ${t.isLong?"Long":"Short"} ${t.symbol} with ${t.marginAmount} ${r}`,txHash:h.txHash,protocol:"leverup"})}catch{}try{let w=n.wallet?.smartAccountAddress,v=a.pair,A=(await J5(w,[v])).find(_=>_.position.pair===v&&_.position.isLong===t.isLong&&PFe(_.position.margin,l)*100n<=l*5n);$7(e,{tradeHash:A?.position.positionHash,pair:v,side:t.isLong?"LONG":"SHORT",margin:l.toString(),collateralToken:m,leverage:t.leverage,entryPrice:s.entryPrice,stopLoss:t.stopLoss||"0",takeProfit:t.takeProfit||"0",openedAt:Date.now(),status:"open"})}catch{}return{success:!0,message:`Successfully opened ${t.leverage}x ${t.isLong?"Long":"Short"} ${t.symbol} (autonomous)`,txHash:h.txHash,explorerUrl:h.explorerUrl}}async function Fre(e,t){let n=await q();if(!n?.wallet)return{success:!1,message:"Wallet not configured",error:"Wallet not configured"};let r=t.collateralToken||"MON",a=Fn.find(g=>g.pair===`${t.symbol}/USD`||g.pair===t.symbol);if(!a)return{success:!1,message:"Unsupported pair",error:`Pair not supported: ${t.symbol}`};if(a.isHighLeverage&&!Qo(t.leverage))return{success:!1,message:"Invalid leverage for Zero-Fee pair",error:`${a.pair} ONLY supports ${bo.join(", ")}x leverage.`};let s;try{s=await O2(t.symbol,t.isLong,t.marginAmount,t.leverage,t.triggerPrice,r)}catch(g){return{success:!1,message:"Quote failed",error:g instanceof Error?g.message:"Failed to get quote"}}if(!s.isTriggerValid)return{success:!1,message:"Invalid trigger price",error:s.triggerValidationMessage};if(!s.meetsMinimums)return{success:!1,message:"Position too small",error:s.warnings.join(" ")};let o=parseFloat(t.triggerPrice);if(t.takeProfit){let g=parseFloat(t.takeProfit),h=X6(t.leverage),w=t.isLong?(g-o)/o*100:(o-g)/o*100;if(w<=0){let v=t.isLong?"above":"below";return{success:!1,message:"Invalid TP",error:`For ${t.isLong?"Long":"Short"} limit, TP must be ${v} trigger price ($${o}).`}}if(w>h)return{success:!1,message:"TP exceeds max",error:`Max TP for ${t.leverage}x is ${h}%.`}}if(t.stopLoss){let g=parseFloat(t.stopLoss);if(t.isLong?g>=o:g<=o){let w=t.isLong?"below":"above";return{success:!1,message:"Invalid SL",error:`For ${t.isLong?"Long":"Short"} limit, SL must be ${w} trigger price ($${o}).`}}}let i=ye(t.triggerPrice,18),u=ye(t.marginAmount,Ca(r)),d=ye(s.positionSize,10),l;try{l=await H2({symbol:t.symbol,isLong:t.isLong,amountIn:u,leverage:t.leverage,qty:d,triggerPrice:i,collateralToken:r,stopLoss:t.stopLoss?ye(t.stopLoss,18):0n,takeProfit:t.takeProfit?ye(t.takeProfit,18):0n},n)}catch(g){return{success:!1,message:"Execution build failed",error:g instanceof Error?g.message:"Failed to build execution"}}let p=H7[r],y={outflows:[{token:p,amount:u}],inflows:[]},m;if(r==="MON")m=await ds(e,{target:l.to,value:l.value,callData:l.data},{action:"open",protocol:"leverup",details:{operation:"limitOrder",symbol:t.symbol,side:t.isLong?"LONG":"SHORT",leverage:String(t.leverage),triggerPrice:t.triggerPrice,margin:t.marginAmount,collateral:r}},{tokenFlows:y});else{let g=H7[r];m=await j2(e,g,l.to,u,{target:l.to,value:l.value,callData:l.data},{action:"open",protocol:"leverup",details:{operation:"limitOrder",symbol:t.symbol,side:t.isLong?"LONG":"SHORT",leverage:String(t.leverage),triggerPrice:t.triggerPrice,margin:t.marginAmount,collateral:r}},{tokenFlows:y})}if(!m.success)return{success:!1,message:"Autonomous limit order failed",error:m.error};try{await ka(e,{ts:Date.now(),type:"limit_order",pair:a.pair,side:t.isLong?"LONG":"SHORT",margin:t.marginAmount,leverage:String(t.leverage),text:`Placed ${t.leverage}x ${t.isLong?"Long":"Short"} limit on ${t.symbol} @ $${t.triggerPrice}`,txHash:m.txHash,protocol:"leverup"})}catch{}try{$7(e,{pair:a.pair,side:t.isLong?"LONG":"SHORT",margin:u.toString(),collateralToken:p,leverage:t.leverage,entryPrice:t.triggerPrice,stopLoss:t.stopLoss||"0",takeProfit:t.takeProfit||"0",openedAt:Date.now(),status:"pending_fill"})}catch{}return{success:!0,message:`Successfully placed ${t.leverage}x ${t.isLong?"Long":"Short"} limit order on ${t.symbol} @ $${t.triggerPrice} (autonomous)`,txHash:m.txHash,explorerUrl:m.explorerUrl}}Y();Te();mt();We();Ar();M0();import{existsSync as NFe,readFileSync as LFe}from"fs";import{homedir as BFe}from"os";import UFe from"path";function u$(){let e=UFe.join(BFe(),".pragma","delegations","root","delegation.json");if(!NFe(e))return null;try{let t=LFe(e,"utf-8");return JSON.parse(t).signedDelegation??null}catch{return null}}function HFe(e){let t=e.caveats.find(n=>n.enforcer.toLowerCase()===b2.toLowerCase());if(!t)return 2;try{let[n]=ca([{type:"tuple[]",components:[{name:"caveats",type:"tuple[]",components:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"},{name:"args",type:"bytes"}]}]}],t.terms);return n.length}catch{return 2}}function FFe(e,t){let n=e.callData.toLowerCase();if(n.startsWith(cp.toLowerCase()))return j6.APPROVE;if(HFe(t)>=4){if((e.callData==="0x"||e.callData==="0x00")&&e.value>0n)return j6.NATIVE_TRANSFER;if(n.startsWith(Rne.toLowerCase()))return j6.ERC20_TRANSFER}return j6.TRADING}async function zn(e,t){let n=u$();if(!n)return{success:!1,message:"No delegation found",error:"Root delegation not found at ~/.pragma/delegations/root/delegation.json. Please run the delegation flow first (request_delegation \u2192 approve \u2192 retrieve_delegation)."};let r=structuredClone(n),a=FFe(e,n);$2(r,a);let s=await ht();if(!s)return{success:!1,message:"Session key not found",error:"File-based session key not found. Run setup_wallet first."};let o=t.network.chainId,i=await we(t),u=Ee(o,i),d=Qe(o),l=on(s),p=Tt({account:l,chain:u,transport:Ze(i,t)}),y=_e({chain:u,transport:Ze(i,t)});try{let m=await dn(p,y,Ue.delegationManager,[{permissionContext:[r],executions:[Pt({target:e.target,value:e.value,callData:e.callData})],mode:nn.SingleDefault}]);return(await Xt(y,m)).status==="reverted"?{success:!1,message:"Transaction reverted on-chain",txHash:m,explorerUrl:`${d.blockExplorer}/tx/${m}`,error:"Transaction reverted on-chain"}:{success:!0,message:"Transaction successful",txHash:m,explorerUrl:`${d.blockExplorer}/tx/${m}`}}catch(m){return{success:!1,message:"Transaction failed",error:m instanceof Error?m.message:"Unknown error"}}}function zFe(e){let t=e.toLowerCase();return Object.values(up).some(n=>n.toLowerCase()===t)}async function Vi(e,t,n,r,a){if(!zFe(t))return{success:!1,message:"Spender not whitelisted",error:`Spender ${t} is not whitelisted for headless approvals.`};let s=a.wallet.smartAccountAddress,o=a.network.chainId,i=await we(a),u=Ee(o,i),d=_e({chain:u,transport:Ze(i,a)}),l=!1;try{l=await d.readContract({address:e,abi:Xe,functionName:"allowance",args:[s,t]})>=n}catch{}if(!l){let p=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),y=X({abi:Xe,functionName:"approve",args:[t,p]}),m=await zn({target:e,value:0n,callData:y},a);if(!m.success)return{success:!1,message:"Approval failed",error:`ERC20 approval failed: ${m.error}`};await new Promise(g=>setTimeout(g,1e3))}return await zn(r,a)}t0();Te();mt();var d$=500,zre=5e3,jFe=C.object({quoteIds:C.array(C.string()).min(1).describe("List of Quote IDs to execute. Pass multiple IDs for parallel batch execution."),slippageBps:C.number().optional().describe("Max slippage in basis points. NOTE: Slippage is already baked into the quote - set slippage at quote time via get_swap_quote instead."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function jre(e){e.tool("execute_swap","Execute one or more swaps. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). Handles approvals automatically. Supports parallel batch execution.",jFe.shape,async t=>{let n=await qFe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function qFe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",results:[],summary:{total:0,successful:0,failed:0},error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId){let d=e.slippageBps??d$;return await Ure(e.agentId,e.quoteIds,d)}if(_t()){let d=[];for(let p of e.quoteIds){let y=await G6(p);if(!y){d.push({quoteId:p,success:!1,error:"Quote not found or expired. Get a fresh quote."});continue}if(ac(y)){d.push({quoteId:p,success:!1,error:"Quote expired. Get a fresh quote."});continue}let m=V5(p);if(!m){d.push({quoteId:p,success:!1,error:"Execution data missing. Get a fresh quote."});continue}let g=y.fromToken.address.toLowerCase()===B0.toLowerCase(),h;g?h=await zn({target:m.router,value:m.value,callData:m.calldata},t):h=await Vi(y.fromToken.address,m.router,y.amountInWei,{target:m.router,value:m.value,callData:m.calldata},t),d.push({quoteId:p,success:h.success,txHash:h.txHash,explorerUrl:h.explorerUrl,error:h.error,swap:{fromToken:y.fromToken.symbol,toToken:y.toToken.symbol,amountIn:`${y.amountIn} ${y.fromToken.symbol}`,amountOut:`${y.expectedOutput} ${y.toToken.symbol}`}})}let l=d.filter(p=>p.success).length;return{success:l>0,message:`Executed ${l}/${e.quoteIds.length} swaps`,results:d,summary:{total:e.quoteIds.length,successful:l,failed:e.quoteIds.length-l}}}for(let d of e.quoteIds){let l=await G6(d);if(!l)return{success:!1,message:"Quote validation failed",results:[],summary:{total:0,successful:0,failed:0},error:`Quote ${d} not found or expired. Please get a fresh quote.`};if(ac(l))return{success:!1,message:"Quote expired",results:[],summary:{total:0,successful:0,failed:0},error:`Quote ${d} has expired. Please get a fresh quote.`}}let n=e.slippageBps??d$;n>zre&&(n=zre),n<0&&(n=d$);let r=await N0e(e.quoteIds,n),s=Qe(t.network.chainId).blockExplorer||"https://monadvision.com",o=r.results.map(d=>({quoteId:d.quoteId,success:d.success,txHash:d.txHash,explorerUrl:d.txHash?`${s}/tx/${d.txHash}`:void 0,error:d.error,swap:d.quote?{fromToken:d.quote.fromToken.symbol,toToken:d.quote.toToken.symbol,amountIn:`${d.quote.amountIn} ${d.quote.fromToken.symbol}`,amountOut:`${d.quote.expectedOutput} ${d.quote.toToken.symbol}`}:void 0})),i=o.filter(d=>d.success).length,u=o.filter(d=>!d.success).length;return{success:i>0,message:`Executed ${i}/${e.quoteIds.length} swaps`,results:o,summary:{total:e.quoteIds.length,successful:i,failed:u}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return{success:!1,message:"Batch execution failed",results:[],summary:{total:0,successful:0,failed:0},error:n}}}Y();Y();M0();Te();mt();We();Ar();function GFe(e){return e.toUpperCase().trim()==="MON"||e.toLowerCase()===B0.toLowerCase()}async function qre(e){let t=await q();if(!t?.wallet)throw new Error("Wallet not configured. Please run setup_wallet first.");let n=t.wallet.smartAccountAddress,r=t.wallet.sessionKeyAddress,a=t.network.chainId,s=GFe(e.token),o,i,u;if(s)o="MON",i=18,u=B0;else{let D=await is(e.token,a);if(!D)throw new Error(`Token not found: ${e.token}. Please provide a valid symbol or address.`);D.kind==="native"?(o="MON",i=18,u=B0):(o=D.symbol,i=D.decimals,u=D.address)}let d=ye(e.amount,i);if(d<=0n)throw new Error("Amount must be greater than 0");let l=await we(t),p=Ee(a,l),y=_e({chain:p,transport:Ze(l,t)});if(s||u===B0){let D=await y.getBalance({address:n});if(D<d){let G=Ge(D);throw new Error(`Insufficient MON balance. Have: ${G} MON, Need: ${e.amount} MON`)}}else{let D=await y.readContract({address:u,abi:Xe,functionName:"balanceOf",args:[n]});if(D<d){let G=le(D,i);throw new Error(`Insufficient ${o} balance. Have: ${G}, Need: ${e.amount}`)}}let m=await ht();if(!m)throw new Error("Session key not found. Please run setup_wallet first.");let g=await y.getBalance({address:r}),h=lo("transfer");if(g<h)throw new Error(`Session key balance too low: ${G0(g)} (minimum for transfer: ${G0(h)}). Please call fund_session_key first with operationType: "transfer".`);let w=await Tn(y,n),v;if(s||u===B0)v={delegation:k7({recipient:e.to,amount:d,delegator:n,sessionKey:r,nonce:w,chainId:a}).delegation,execution:{target:e.to,value:d,callData:"0x"},kind:"transfer"};else{let D=E7({tokenAddress:u,recipient:e.to,amount:d,delegator:n,sessionKey:r,nonce:w,chainId:a}),G=X({abi:Xe,functionName:"transfer",args:[e.to,d]});v={delegation:D.delegation,execution:{target:u,value:0n,callData:G},kind:"transfer"}}let T=t.wallet.keyId;if(!T)throw new Error("Key ID not found in config. Please run setup_wallet first.");let A=`${e.to.slice(0,8)}...${e.to.slice(-6)}`,_=`Transfer ${e.amount} ${o} to ${A}`,E=await _n(v.delegation,a,T,_);v.delegation.signature=E;let O=on(m),$=Tt({account:O,chain:p,transport:Ze(l,t)}),B=Pt({target:v.execution.target,value:v.execution.value,callData:v.execution.callData}),V=await dn($,y,Ue.delegationManager,[{permissionContext:[v.delegation],executions:[B],mode:nn.SingleDefault}]);return await Xt(y,V),{txHash:V,status:"success",token:{symbol:o,address:u,isNative:s||u===B0},recipient:e.to,amount:e.amount,amountWei:d}}t0();Te();mt();var VFe=C.object({token:C.string().describe("Token to transfer: 'MON' for native, or symbol like 'USDC', 'WMON', or contract address (0x...)"),to:C.string().describe("Recipient address (0x...)"),amount:C.string().describe("Amount to transfer in human-readable format (e.g., '1.5' for 1.5 tokens)"),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Gre(e){e.tool("transfer","Transfer tokens to another address. Supports both native MON and ERC20 tokens. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). Always verify the recipient address with the user before executing.",VFe.shape,async t=>{let n=await WFe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function WFe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId){if(!e.to||!Se(e.to))return{success:!1,message:"Invalid recipient address",error:"Please provide a valid recipient address (0x...)"};let u=await Ore(e.agentId,e.token,xe(e.to),e.amount);return{success:u.success,message:u.message,transaction:u.txHash?{hash:u.txHash,explorerUrl:u.explorerUrl,status:"success"}:void 0,transfer:u.transfer?{token:u.transfer.token,tokenAddress:u.transfer.isNative?"native":u.transfer.token,isNative:u.transfer.isNative,recipient:u.transfer.recipient,amount:u.transfer.amount}:void 0,error:u.error}}if(_t()){if(!e.to||!Se(e.to))return{success:!1,message:"Invalid recipient address",error:"Please provide a valid recipient address (0x...)"};let u=xe(e.to),d=t.network.chainId,l=e.token.toUpperCase()==="MON"||e.token.toLowerCase()===B0.toLowerCase(),p,y,m,g;if(l){let v=ye(e.amount,18);p=u,y=v,m="0x",g="MON"}else{let v=await is(e.token,d);if(!v)return{success:!1,message:"Token not found",error:`Token not found: ${e.token}`};let T=ye(e.amount,v.decimals);p=v.address,y=0n,m=X({abi:Xe,functionName:"transfer",args:[u,T]}),g=v.symbol}let h=await zn({target:p,value:y,callData:m},t),w=Qe(d);return{success:h.success,message:h.success?`Transferred ${e.amount} ${g} to ${u}`:h.message,transaction:h.txHash?{hash:h.txHash,explorerUrl:h.explorerUrl||`${w.blockExplorer}/tx/${h.txHash}`,status:"success"}:void 0,transfer:h.success?{token:g,tokenAddress:l?"native":p,isNative:l,recipient:u,amount:e.amount}:void 0,error:h.error}}if(!e.to||!Se(e.to))return{success:!1,message:"Invalid recipient address",error:"Please provide a valid recipient address (0x...)"};let n=xe(e.to),r=parseFloat(e.amount);if(isNaN(r)||r<=0)return{success:!1,message:"Invalid amount",error:"Please provide a valid amount greater than 0"};let a=await qre({token:e.token,to:n,amount:e.amount}),s=Qe(t.network.chainId),o=s.blockExplorer?`${s.blockExplorer}/tx/${a.txHash}`:`https://monadvision.com/tx/${a.txHash}`,i=a.token.isNative?"native MON":a.token.symbol;return{success:!0,message:`Transferred ${e.amount} ${i} to ${n}`,transaction:{hash:a.txHash,explorerUrl:o,status:a.status},transfer:{token:a.token.symbol,tokenAddress:a.token.address,isNative:a.token.isNative,recipient:n,amount:e.amount}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Touch ID")||n.includes("authentication")?{success:!1,message:"Authentication required",error:"Touch ID authentication was cancelled or failed. Please try again."}:n.includes("insufficient")||n.includes("balance")?{success:!1,message:"Insufficient balance",error:n}:n.includes("nonce")?{success:!1,message:"Nonce error",error:"A delegation was already used. Please try again."}:n.includes("reverted")?{success:!1,message:"Transaction reverted",error:`The transfer transaction was reverted: ${n}`}:{success:!1,message:"Transfer failed",error:n}}}Y();M0();Te();mt();We();Ar();var Vre=[{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256"}],outputs:[],stateMutability:"nonpayable"}];async function Wre(e){let t=await q();if(!t?.wallet)throw new Error("Wallet not configured. Please run setup_wallet first.");let n=t.wallet.smartAccountAddress,r=t.wallet.sessionKeyAddress,a=t.network.chainId,o=Qe(a).tokens.wmon;if(!o)throw new Error(`WMON address not configured for chain ${a}`);let i=ye(e.amount,18);if(i<=0n)throw new Error("Amount must be greater than 0");let u=await we(t),d=Ee(a,u),l=_e({chain:d,transport:Ze(u,t)}),p=await l.getBalance({address:n});if(p<i){let D=le(p,18);throw new Error(`Insufficient MON balance. Have: ${D} MON, Need: ${e.amount} MON`)}let y=await ht();if(!y)throw new Error("Session key not found. Please run setup_wallet first.");let m=await l.getBalance({address:r}),g=lo("wrap");if(m<g)throw new Error(`Session key balance too low: ${G0(m)} (minimum for wrap: ${G0(g)}). Please call fund_session_key first with operationType: "wrap".`);let h=await Tn(l,n),w=S0e({wmonAddress:o,amount:i,delegator:n,sessionKey:r,nonce:h,chainId:a}),v=X({abi:Vre,functionName:"deposit"}),T={delegation:w.delegation,execution:{target:o,value:i,callData:v},kind:"wrap"},A=t.wallet.keyId;if(!A)throw new Error("Key ID not found in config. Please run setup_wallet first.");let _=`Wrap ${e.amount} MON \u2192 WMON`,E=await _n(T.delegation,a,A,_);T.delegation.signature=E;let O=on(y),$=Tt({account:O,chain:d,transport:Ze(u,t)}),B=Pt({target:T.execution.target,value:T.execution.value,callData:T.execution.callData}),V=await dn($,l,Ue.delegationManager,[{permissionContext:[T.delegation],executions:[B],mode:nn.SingleDefault}]);return await Xt(l,V),{txHash:V,status:"success",amount:e.amount,amountWei:i,direction:"wrap"}}async function Zre(e){let t=await q();if(!t?.wallet)throw new Error("Wallet not configured. Please run setup_wallet first.");let n=t.wallet.smartAccountAddress,r=t.wallet.sessionKeyAddress,a=t.network.chainId,o=Qe(a).tokens.wmon;if(!o)throw new Error(`WMON address not configured for chain ${a}`);let i=ye(e.amount,18);if(i<=0n)throw new Error("Amount must be greater than 0");let u=await we(t),d=Ee(a,u),l=_e({chain:d,transport:Ze(u,t)}),p=await l.readContract({address:o,abi:Xe,functionName:"balanceOf",args:[n]});if(p<i){let D=le(p,18);throw new Error(`Insufficient WMON balance. Have: ${D} WMON, Need: ${e.amount} WMON`)}let y=await ht();if(!y)throw new Error("Session key not found. Please run setup_wallet first.");let m=await l.getBalance({address:r}),g=lo("unwrap");if(m<g)throw new Error(`Session key balance too low: ${G0(m)} (minimum for unwrap: ${G0(g)}). Please call fund_session_key first with operationType: "unwrap".`);let h=await Tn(l,n),w=A0e({wmonAddress:o,delegator:n,sessionKey:r,nonce:h,chainId:a}),v=X({abi:Vre,functionName:"withdraw",args:[i]}),T={delegation:w.delegation,execution:{target:o,value:0n,callData:v},kind:"unwrap"},A=t.wallet.keyId;if(!A)throw new Error("Key ID not found in config. Please run setup_wallet first.");let _=`Unwrap ${e.amount} WMON \u2192 MON`,E=await _n(T.delegation,a,A,_);T.delegation.signature=E;let O=on(y),$=Tt({account:O,chain:d,transport:Ze(u,t)}),B=Pt({target:T.execution.target,value:T.execution.value,callData:T.execution.callData}),V=await dn($,l,Ue.delegationManager,[{permissionContext:[T.delegation],executions:[B],mode:nn.SingleDefault}]);return await Xt(l,V),{txHash:V,status:"success",amount:e.amount,amountWei:i,direction:"unwrap"}}t0();Te();mt();Y();var ZFe=C.object({amount:C.string().describe("Amount of MON to wrap in human-readable format (e.g., '10' for 10 MON)"),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")}),KFe=C.object({amount:C.string().describe("Amount of WMON to unwrap in human-readable format (e.g., '10' for 10 WMON)"),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Kre(e){e.tool("wrap","Wrap MON to WMON. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). WMON is useful for DeFi operations that require ERC20 tokens.",ZFe.shape,async t=>{let n=await XFe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}function Xre(e){e.tool("unwrap","Unwrap WMON back to MON. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). Converts wrapped MON back to native MON.",KFe.shape,async t=>{let n=await JFe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function XFe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId){let o=await Lre(e.agentId,e.amount),i=Qe(t.network.chainId);return{success:o.success,message:o.message,transaction:o.txHash?{hash:o.txHash,explorerUrl:o.explorerUrl||`${i.blockExplorer}/tx/${o.txHash}`,status:"success"}:void 0,wrap:o.wrap?{direction:o.wrap.direction,amount:o.wrap.amount,from:"MON",to:"WMON"}:void 0,error:o.error}}if(_t()){let o=pa(e.amount),i=X({abi:[{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"}],functionName:"deposit"}),u=await zn({target:Qr,value:o,callData:i},t),d=Qe(t.network.chainId);return{success:u.success,message:u.success?`Wrapped ${e.amount} MON \u2192 WMON`:u.message,transaction:u.txHash?{hash:u.txHash,explorerUrl:u.explorerUrl||`${d.blockExplorer}/tx/${u.txHash}`,status:"success"}:void 0,wrap:u.success?{direction:"wrap",amount:e.amount,from:"MON",to:"WMON"}:void 0,error:u.error}}let n=parseFloat(e.amount);if(isNaN(n)||n<=0)return{success:!1,message:"Invalid amount",error:"Please provide a valid amount greater than 0"};let r=await Wre({amount:e.amount}),a=Qe(t.network.chainId),s=a.blockExplorer?`${a.blockExplorer}/tx/${r.txHash}`:`https://monadvision.com/tx/${r.txHash}`;return{success:!0,message:`Wrapped ${e.amount} MON \u2192 WMON`,transaction:{hash:r.txHash,explorerUrl:s,status:r.status},wrap:{direction:"wrap",amount:e.amount,from:"MON",to:"WMON"}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Touch ID")||n.includes("authentication")?{success:!1,message:"Authentication required",error:"Touch ID authentication was cancelled or failed. Please try again."}:n.includes("insufficient")||n.includes("balance")?{success:!1,message:"Insufficient balance",error:n}:n.includes("nonce")?{success:!1,message:"Nonce error",error:"A delegation was already used. Please try again."}:n.includes("reverted")?{success:!1,message:"Transaction reverted",error:`The wrap transaction was reverted: ${n}`}:{success:!1,message:"Wrap failed",error:n}}}async function JFe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId){let o=await Bre(e.agentId,e.amount),i=Qe(t.network.chainId);return{success:o.success,message:o.message,transaction:o.txHash?{hash:o.txHash,explorerUrl:o.explorerUrl||`${i.blockExplorer}/tx/${o.txHash}`,status:"success"}:void 0,wrap:o.wrap?{direction:o.wrap.direction,amount:o.wrap.amount,from:"WMON",to:"MON"}:void 0,error:o.error}}if(_t()){let o=pa(e.amount),i=X({abi:[{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256"}],outputs:[],stateMutability:"nonpayable"}],functionName:"withdraw",args:[o]}),u=await zn({target:Qr,value:0n,callData:i},t),d=Qe(t.network.chainId);return{success:u.success,message:u.success?`Unwrapped ${e.amount} WMON \u2192 MON`:u.message,transaction:u.txHash?{hash:u.txHash,explorerUrl:u.explorerUrl||`${d.blockExplorer}/tx/${u.txHash}`,status:"success"}:void 0,wrap:u.success?{direction:"unwrap",amount:e.amount,from:"WMON",to:"MON"}:void 0,error:u.error}}let n=parseFloat(e.amount);if(isNaN(n)||n<=0)return{success:!1,message:"Invalid amount",error:"Please provide a valid amount greater than 0"};let r=await Zre({amount:e.amount}),a=Qe(t.network.chainId),s=a.blockExplorer?`${a.blockExplorer}/tx/${r.txHash}`:`https://monadvision.com/tx/${r.txHash}`;return{success:!0,message:`Unwrapped ${e.amount} WMON \u2192 MON`,transaction:{hash:r.txHash,explorerUrl:s,status:r.status},wrap:{direction:"unwrap",amount:e.amount,from:"WMON",to:"MON"}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Touch ID")||n.includes("authentication")?{success:!1,message:"Authentication required",error:"Touch ID authentication was cancelled or failed. Please try again."}:n.includes("insufficient")||n.includes("balance")?{success:!1,message:"Insufficient balance",error:n}:n.includes("nonce")?{success:!1,message:"Nonce error",error:"A delegation was already used. Please try again."}:n.includes("reverted")?{success:!1,message:"Transaction reverted",error:`The unwrap transaction was reverted: ${n}`}:{success:!1,message:"Unwrap failed",error:n}}}Y();Te();mt();We();w8();var QFe=C.object({operationType:C.enum(["swap","transfer","wrap","unwrap"]).optional().describe("Type of operation to check balance for. Each operation has different gas costs: swap=0.14 MON, transfer/wrap/unwrap=0.04 MON"),estimatedOperations:C.number().optional().describe("Number of operations planned. Combined with operationType for accurate calculation. Examples: 1 swap = 0.16 MON needed, 3 swaps = 0.44 MON needed"),includeUsdc:C.boolean().optional().describe("Also check USDC balance for x402 payments. Auto-enabled when x402 mode is detected. Set to true to always include USDC info.")});function Jre(e){e.tool("check_session_key_balance","Check if session key has enough MON for gas and USDC for x402 payments. Pass operationType and estimatedOperations for accurate calculation. Returns current balance, required amount, and whether funding is needed. USDC balance is auto-checked in x402 mode.",QFe.shape,async t=>{let n=await YFe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function YFe(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=t.wallet?.sessionKeyAddress;if(!n)return{success:!1,message:"Session key not found",error:"Session key address is not configured"};let r=await we(t),a=Ee(t.network.chainId,r),s=_e({chain:a,transport:gt(r,Ot(t))}),o=await T2(n,s,e.operationType,e.estimatedOperations),i;if((e.includeUsdc===!0||e.includeUsdc!==!1&&t.mode==="x402")&&RZ(t.network.chainId))try{let p=await PZ(n,s,t.network.chainId),y=p<kZ,m=p<IZ;i={balance:p.toString(),balanceFormatted:dC(p),needsFunding:y,lowBalanceWarning:m,recommendedAmount:y?dC(CZ):"0 USDC"}}catch(p){console.warn("Failed to check USDC balance:",p)}let d=e.operationType&&e.estimatedOperations?`${e.estimatedOperations} ${e.operationType} operation(s)`:e.estimatedOperations?`${e.estimatedOperations} operation(s)`:"general operations",l;return o.needsFunding?l=`Session key needs MON funding for ${d}`:l=`Session key has sufficient MON for ${d}`,i?.needsFunding?l+=`. USDC balance low (${i.balanceFormatted}) - fund with token="USDC"`:i?.lowBalanceWarning&&(l+=`. USDC balance warning: ${i.balanceFormatted}`),o.needsFunding?{success:!0,message:l,balance:{address:n,current:`${o.balanceFormatted} MON`,currentWei:o.balance.toString(),required:`${o.requiredBalanceFormatted} MON`,requiredWei:o.requiredBalance.toString()},funding:{needsFunding:!0,recommendedAmount:G0(o.recommendedFundingAmount),recommendedAmountWei:o.recommendedFundingAmount.toString(),fundingMethod:o.fundingMethod},usdc:i}:{success:!0,message:l,balance:{address:n,current:`${o.balanceFormatted} MON`,currentWei:o.balance.toString(),required:`${o.requiredBalanceFormatted} MON`,requiredWei:o.requiredBalance.toString()},funding:{needsFunding:!1,recommendedAmount:"0 MON",recommendedAmountWei:"0",fundingMethod:o.fundingMethod},usdc:i}}catch(t){return{success:!1,message:"Failed to check session key balance",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();Y();We();Ar();m0();M0();Te();w8();var eze=[{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],outputs:[],stateMutability:"payable"}],l$=500000n,p$=400000n,m$=100000n;async function tze(e){return xt(async()=>{let t=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"pimlico_getUserOperationGasPrice",params:[],id:1})});if(!t.ok)throw new Error(`Gas price request failed: ${t.status}`);let n=await t.json();if(n.error)throw new Error(`Gas price error: ${n.error.message}`);let r=n.result?.fast??n.result?.standard;if(!r)throw new Error("No gas price data returned");return{maxFeePerGas:BigInt(r.maxFeePerGas),maxPriorityFeePerGas:BigInt(r.maxPriorityFeePerGas)}},{operationName:"bundler-gas-price"})}function f$(e){if(!(!e||e==="0x"))try{let t=BigInt(e);return t>0n?t:void 0}catch{return}}async function nze(e,t,n){return xt(async()=>{let r=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_estimateUserOperationGas",params:[t,n],id:1})});if(!r.ok)throw new Error(`Gas estimation failed: ${r.status}`);let a=await r.json();if(a.error)throw new Error(`Gas estimation error: ${a.error.message}`);let s=a.result??{};return{callGasLimit:f$(s.callGasLimit),verificationGasLimit:f$(s.verificationGasLimit),preVerificationGas:f$(s.preVerificationGas)}},{operationName:"bundler-estimate-gas"})}function rze(e,t){e.callGasLimit=t.callGasLimit&&t.callGasLimit>m$?t.callGasLimit:m$,e.verificationGasLimit=t.verificationGasLimit&&t.verificationGasLimit>l$?t.verificationGasLimit:l$,e.preVerificationGas=t.preVerificationGas&&t.preVerificationGas>p$?t.preVerificationGas:p$}async function aze(e,t,n){let r=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendUserOperation",params:[t,n],id:1})}),a=await r.json();if(!r.ok){let s=a.error?.message||`HTTP ${r.status}`;throw new Error(`Send UserOp failed: ${s}`)}if(a.error)throw new Error(`UserOp error: ${a.error.message}`);if(!a.result)throw new Error("No userOpHash returned");return a.result}async function sze(e,t,n=6e4){let r=Date.now();for(;Date.now()-r<n;){let a=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_getUserOperationReceipt",params:[t],id:1})});if(a.ok){let s=await a.json();if(s.error)continue;if(s.result?.receipt?.transactionHash)return{transactionHash:s.result.receipt.transactionHash}}await new Promise(s=>setTimeout(s,2e3))}throw new Error(`Timeout waiting for UserOp ${t}`)}async function Qre(e){let{handle:t,sessionKeyAddress:n,publicClient:r,config:a,fundingAmount:s=op}=e,o=await r.getBalance({address:n}),i=t.chain.id,u=await Tn(r,t.address),d=k7({recipient:n,amount:s,delegator:t.address,sessionKey:n,nonce:u,chainId:i}),l=`Fund session key: ${Ge(s)} MON (delegation)`,p=await _n(d.delegation,i,t.keyId,l);d.delegation.signature=p;let y=Pt({target:n,value:s,callData:"0x"}),m=await ht();if(!m)throw new Error("Session key not found");let g=on(m),h=await we(a),w=Tt({account:g,chain:t.chain,transport:Ze(h,a)}),v=await dn(w,r,Ue.delegationManager,[{permissionContext:[d.delegation],executions:[y],mode:nn.SingleDefault}]);await Xt(r,v),await new Promise(A=>setTimeout(A,2e3));let T=await r.getBalance({address:n});return{userOpHash:"0x",transactionHash:v,newBalance:T,fundedAmount:T-o}}async function Yre(e){let{handle:t,sessionKeyAddress:n,publicClient:r,config:a,fundingAmount:s=0n}=e,o=t.chain.id,i=A5[o];if(!i)throw new Error(`USDC not configured for chain ${o}`);let u=await Tn(r,t.address),d=E7({tokenAddress:i,recipient:n,amount:s,delegator:t.address,sessionKey:n,nonce:u,chainId:o}),l=`Fund session key: ${le(s,x8)} USDC (delegation)`,p=await _n(d.delegation,o,t.keyId,l);d.delegation.signature=p;let y=Pt({target:i,value:0n,callData:X({abi:Xe,functionName:"transfer",args:[n,s]})}),m=await ht();if(!m)throw new Error("Session key not found");let g=on(m),h=await we(a),w=Tt({account:g,chain:t.chain,transport:Ze(h,a)}),v=await dn(w,r,Ue.delegationManager,[{permissionContext:[d.delegation],executions:[y],mode:nn.SingleDefault}]);return await Xt(r,v),{userOpHash:"0x",transactionHash:v,newBalance:0n,fundedAmount:s}}async function eae(e){let{handle:t,sessionKeyAddress:n,publicClient:r,bundlerUrl:a,fundingAmount:s=op,customExecution:o}=e;if(!a)throw new Error("Bundler URL required for UserOp path");let i=await r.getBalance({address:n}),d=X({abi:eze,functionName:"execute",args:[o??{target:n,value:s,callData:"0x"}]}),l=await t.smartAccount.getNonce?.()??0n,p=await tze(a),y={sender:t.address,nonce:l,callData:d,callGasLimit:m$,verificationGasLimit:l$,preVerificationGas:p$,maxFeePerGas:p.maxFeePerGas,maxPriorityFeePerGas:p.maxPriorityFeePerGas,signature:"0x"},m=t.smartAccount.entryPoint.address;try{let A=Jo({...y,signature:"0x"}),_=await nze(a,A,m);rze(y,_)}catch(A){console.warn("Failed to estimate gas, using defaults:",A)}let g=await t.smartAccount.signUserOperation(y);y.signature=g;let h=Jo({...y,signature:g}),w=await aze(a,h,m),v=await sze(a,w);await new Promise(A=>setTimeout(A,2e3));let T=await r.getBalance({address:n});return{userOpHash:w,transactionHash:v.transactionHash,newBalance:T,fundedAmount:T-i}}t0();We();w8();var oze=C.object({operationType:C.enum(["swap","transfer","wrap","unwrap"]).optional().describe("Type of operation to fund for. IMPORTANT: Always specify this for accurate gas calculation! Each operation has different gas costs: swap=0.14 MON, transfer/wrap/unwrap=0.04 MON"),estimatedOperations:C.number().optional().describe("Number of operations planned. Combined with operationType for accurate calculation. Examples: 1 swap = 0.16 MON needed, 3 swaps = 0.44 MON needed"),token:C.enum(["MON","USDC"]).optional().describe("Token to fund session key with. MON for gas (default), USDC for x402 payments. USDC funding requires specifying amount."),amount:C.string().optional().describe("Amount to fund (e.g., '10' for 10 MON or 10 USDC). If not specified for MON, uses intelligent calculation based on operations.")});function tae(e){e.tool("fund_session_key","Fund session key with MON (for gas) or USDC (for x402 payments) from smart account. Supports UserOp (when session key has < 0.02 MON) and Delegation methods. Pass operationType for MON, token='USDC' with amount for x402. On macOS: requires Touch ID. On headless/OpenClaw: uses root delegation automatically.",oze.shape,async t=>{let n=await ize(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function ize(e){try{let t=await q();if(!t?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=t.wallet.sessionKeyAddress,r=t.network.chainId;if(_t())return cze(e,t,n,r);let a=await we(t),s=Ee(r,a),o=_e({chain:s,transport:gt(a,Ot(t))});if(e.token==="USDC"){if(!e.amount)return{success:!1,message:"Amount required for USDC funding",error:"Please specify the amount of USDC to fund (e.g., amount: '1.0')"};let g=ye(e.amount,6),h=`Fund session key with ${e.amount} USDC (delegation)`,w=await j5(t,{touchIdMessage:h}),v=await Yre({handle:w,sessionKeyAddress:n,publicClient:o,config:t,fundingAmount:g});return{success:!0,message:`Session key funded with ${e.amount} USDC via delegation`,funding:{token:"USDC",method:"delegation",fundedAmount:`${e.amount} USDC`,fundedAmountWei:g.toString(),newBalance:"unknown",newBalanceWei:"0",txHash:v.transactionHash||"0x"}}}let i=await T2(n,o,e.operationType,e.estimatedOperations),u=e.amount&&e.amount.trim()!=="";if(!u&&!i.needsFunding)return{success:!0,message:"Session key already has sufficient balance",funding:{token:"MON",method:i.fundingMethod,fundedAmount:"0 MON",fundedAmountWei:"0",newBalance:i.balanceFormatted,newBalanceWei:i.balance.toString(),txHash:"0x"}};let d=u?ye(e.amount,18):i.recommendedFundingAmount,l=i.fundingMethod,p=`Fund session key: ${Ge(d)} MON (${l})`,y=await j5(t,{touchIdMessage:p}),m;return l==="delegation"?m=await Qre({handle:y,sessionKeyAddress:n,publicClient:o,config:t,fundingAmount:d}):m=await eae({handle:y,sessionKeyAddress:n,publicClient:o,config:t,bundlerUrl:await Ol(t),fundingAmount:d}),{success:!0,message:`Session key funded with ${Ge(m.fundedAmount)} MON via ${l}`,funding:{token:"MON",method:l,fundedAmount:`${Ge(m.fundedAmount)} MON`,fundedAmountWei:m.fundedAmount.toString(),newBalance:`${Ge(m.newBalance)} MON`,newBalanceWei:m.newBalance.toString(),txHash:m.transactionHash||m.userOpHash}}}catch(t){return{success:!1,message:"Session key funding failed",error:t instanceof Error?t.message:"Unknown error"}}}async function cze(e,t,n,r){try{let a=Qe(r),s=await we(t),o=Ee(r,s),i=_e({chain:o,transport:gt(s,Ot(t))});if(e.token==="USDC"){if(!e.amount)return{success:!1,message:"Amount required for USDC funding",error:"Please specify the amount of USDC to fund (e.g., amount: '1.0')"};let m=A5[r];if(!m)return{success:!1,message:"USDC not configured",error:`USDC not found for chain ${r}`};let g=ye(e.amount,x8),h=X({abi:[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],functionName:"transfer",args:[n,g]}),w=await zn({target:m,value:0n,callData:h},t);return w.success?{success:!0,message:`Session key funded with ${e.amount} USDC via delegation (headless)`,funding:{token:"USDC",method:"delegation",fundedAmount:`${e.amount} USDC`,fundedAmountWei:g.toString(),newBalance:"unknown",newBalanceWei:"0",txHash:w.txHash||"0x"}}:{success:!1,message:"USDC funding failed",error:w.error}}let u=await T2(n,i,e.operationType,e.estimatedOperations),d=e.amount&&e.amount.trim()!=="";if(!d&&!u.needsFunding)return{success:!0,message:"Session key already has sufficient balance",funding:{token:"MON",method:"delegation",fundedAmount:"0 MON",fundedAmountWei:"0",newBalance:u.balanceFormatted,newBalanceWei:u.balance.toString(),txHash:"0x"}};let l=d?ye(e.amount,18):u.recommendedFundingAmount,p=await zn({target:n,value:l,callData:"0x"},t);if(!p.success)return{success:!1,message:"MON funding failed",error:p.error};await new Promise(m=>setTimeout(m,2e3));let y=await i.getBalance({address:n});return{success:!0,message:`Session key funded with ${Ge(l)} MON via delegation (headless)`,funding:{token:"MON",method:"delegation",fundedAmount:`${Ge(l)} MON`,fundedAmountWei:l.toString(),newBalance:`${Ge(y)} MON`,newBalanceWei:y.toString(),txHash:p.txHash||"0x"}}}catch(a){return{success:!1,message:"Session key funding failed (headless)",error:a instanceof Error?a.message:"Unknown error"}}}Te();var uze=C.object({includeApi:C.boolean().optional().describe("Include tokens from Data API in addition to static list (default: true)")});function nae(e){e.tool("list_verified_tokens","List all verified/trusted tokens available for trading. Use to discover tokens or answer 'what tokens can I trade?'. Returns 23+ tokens from static verified list plus any additional from Data API.",uze.shape,async t=>{let n=await dze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function dze(e){let t=e.includeApi!==!1,n=["static-verified-list"],r=q5.length,a=0,s=new Map;for(let i of q5)s.set(i.address.toLowerCase(),{symbol:i.symbol,name:i.name,address:i.address,decimals:i.decimals,categories:i.categories});if(t)try{let i=await q();if(i?.network?.chainId){await w7(i.network.chainId);for(let u of Yne())s.has(u.address.toLowerCase())||(s.set(u.address.toLowerCase(),{symbol:u.symbol,name:u.name,address:u.address,decimals:u.decimals,categories:u.categories}),a++);a>0&&n.push("data-api")}}catch{}let o=Array.from(s.values());return o.sort((i,u)=>i.symbol==="MON"?-1:u.symbol==="MON"?1:i.symbol==="WMON"?-1:u.symbol==="WMON"?1:i.symbol.localeCompare(u.symbol)),{success:!0,message:`Found ${o.length} verified tokens (${r} static + ${a} from API)`,tokens:o,sources:n,counts:{total:o.length,staticList:r,fromApi:a}}}Te();var fze=C.object({mode:C.enum(["byok","x402"]).describe("Mode to switch to. 'byok' (Bring Your Own Keys) = free, you provide API keys. 'x402' = pay per API call with USDC, no keys needed.")});function rae(e){e.tool("set_mode","Switch between BYOK mode (free, provide your own API keys) and x402 mode (pay per API call with USDC). In x402 mode, all API calls go through the x402 proxy and are paid with USDC from your session key.",fze.shape,async t=>{let n=await lze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function lze(e){try{let t=await q();if(!t)return{success:!1,message:"Config not found",error:"Please run setup_wallet first to create your pragma wallet"};let n=e.mode;if(t.mode===n)return{success:!0,message:`Already in ${n} mode`,mode:n};t.mode=n,await Ml(t);let r=n==="x402"?["Ensure your session key has USDC for API payments","Check your session key balance","Fund your session key with USDC if needed"]:["Configure your API providers using /pragma:providers","Required: RPC endpoint URL","Required: Bundler for transactions","Optional: Quote and data providers for trading"];return{success:!0,message:`Switched to ${n} mode`,mode:n,nextSteps:r}}catch(t){return{success:!1,message:"Failed to switch mode",error:t instanceof Error?t.message:"Unknown error"}}}Te();mt();var pze=C.object({});function aae(e){e.tool("get_account_info","Get pragma wallet and account configuration. Returns smart account address, session key address, network info, and current mode (BYOK vs x402). Use to verify wallet setup or show user their account details.",pze.shape,async()=>{let t=await mze();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}async function mze(){try{let e=await q();if(!e)return{success:!1,message:"Wallet not initialized",status:{walletConfigured:!1,providersConfigured:!1},error:"No pragma configuration found. Run setup_wallet to create your wallet."};let t=Pe(e),n=Qe(e.network.chainId),r=e.mode==="byok"?!!(e.providers&&((e.providers.quote?.length??0)>0||(e.providers.data?.length??0)>0)):!0;return t?{success:!0,message:`Pragma wallet on ${n.displayName} (${e.mode} mode)`,account:{smartAccountAddress:e.wallet.smartAccountAddress,sessionKeyAddress:e.wallet.sessionKeyAddress,keyId:e.wallet.keyId},network:{chainId:e.network.chainId,chainName:n.displayName,nativeCurrency:n.nativeCurrency.symbol,blockExplorer:n.blockExplorer},mode:e.mode,providers:e.mode==="byok"?e.providers:void 0,status:{walletConfigured:!0,providersConfigured:e.mode==="x402"||r}}:{success:!0,message:"Wallet partially configured - missing wallet addresses",network:{chainId:e.network.chainId,chainName:n.displayName,nativeCurrency:n.nativeCurrency.symbol,blockExplorer:n.blockExplorer},mode:e.mode,providers:e.mode==="byok"?e.providers:void 0,status:{walletConfigured:!1,providersConfigured:r}}}catch(e){let t=e instanceof Error?e.message:"Unknown error";return{success:!1,message:"Failed to load account info",status:{walletConfigured:!1,providersConfigured:!1},error:t}}}Te();mt();var bze=C.object({token:C.string().describe("Token symbol (e.g., 'MON', 'USDC', 'WMON') or contract address (e.g., '0x123...'). Use this to look up token details before trading or to verify token information.")});function sae(e){e.tool("get_token_info","Get detailed information about a token by symbol or address. Returns symbol, name, decimals, contract address, USD price, and verification status. Use to look up token details or verify a token before trading.",bze.shape,async t=>{let n=await yze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function yze(e){try{let t=await q();if(!t)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to configure pragma."};let n=t.network.chainId,r=Qe(n),a=e.token.trim(),s=!!(fp(a)||a.startsWith("0x")&&v7(a)),o=await is(e.token,n);if(!o)return{success:!1,message:"Token not found",network:{chainId:n,chainName:r.displayName},error:`Could not find token '${e.token}'. It may not exist on ${r.displayName} or the symbol/address is incorrect.`};let i;try{i=await w2(o.address,n)}catch{}return{success:!0,message:`${o.symbol} (${o.name})`,token:{symbol:o.symbol,name:o.name,address:o.address,decimals:o.decimals,kind:o.kind,verified:s,usdPrice:i?`$${i.toFixed(6)}`:void 0,categories:o.categories?.length?o.categories:void 0,logoURI:o.logoURI},network:{chainId:n,chainName:r.displayName}}}catch(t){return{success:!1,message:"Failed to fetch token info",error:t instanceof Error?t.message:"Unknown error"}}}Y();T6();Te();mt();We();Ar();M0();m0();var gze=50000n,hze=80000n,xze=2n,wze=C.object({token:C.string().optional().describe("Token to withdraw. Defaults to 'MON' for native token. Use token symbol (e.g., 'USDC', 'WMON') or contract address."),amount:C.string().describe("Amount to withdraw. Use 'all' for maximum possible amount, or specify a decimal amount like '0.5'. For MON, some is reserved for gas."),recipient:C.string().optional().describe("Recipient address for the withdrawal. If not specified, withdraws to user's smart account. Use when user wants to send to an external address.")});function oae(e){e.tool("withdraw_session_key","Withdraw MON or ERC20 tokens from session key to smart account or external address. Use 'all' for maximum amount. Defaults to MON if no token specified. Session key funds are used for gas - withdraw to reclaim unused funds.",wze.shape,async t=>{let n=await vze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function vze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=t.network.chainId,r=Qe(n),a=await ht();if(!a)return{success:!1,message:"Session key not found",error:"No session key found in Keychain. Run setup_wallet to create one."};let s=await we(t);if(!s)return{success:!1,message:"RPC not configured",error:"Please configure RPC provider"};let o=Ee(n,s),i=_e({chain:o,transport:Ze(s,t)}),u=e.token||"MON",d=await is(u,n);if(!d)return{success:!1,message:"Token not found",error:`Could not find token '${u}'. Check the symbol or address.`};let l=d.address.toLowerCase()===B0.toLowerCase(),p;l?p=await i.getBalance({address:a.address}):p=await i.readContract({address:d.address,abi:Xe,functionName:"balanceOf",args:[a.address]});let y=l?Ge(p):le(p,d.decimals);if(p===0n)return{success:!1,message:"No balance to withdraw",sessionKey:{address:a.address,previousBalance:`0 ${d.symbol}`,newBalance:`0 ${d.symbol}`},error:`Session key has no ${d.symbol} balance. Nothing to withdraw.`};let m=e.recipient?xe(e.recipient):xe(t.wallet.smartAccountAddress),w=await xt(async()=>i.getGasPrice(),{operationName:"getGasPrice"})*(l?gze:hze)*xze,v=l?p:await i.getBalance({address:a.address});if(v<w)return{success:!1,message:"Insufficient MON for gas",sessionKey:{address:a.address,previousBalance:`${y} ${d.symbol}`,newBalance:`${y} ${d.symbol}`},error:`Session key has ${Ge(v)} MON but needs ${Ge(w)} MON for gas.`};let T;if(e.amount.toLowerCase()==="all")if(l){if(p<=w)return{success:!1,message:"Insufficient balance for gas",sessionKey:{address:a.address,previousBalance:`${y} ${d.symbol}`,newBalance:`${y} ${d.symbol}`},error:`Balance (${y} MON) is less than gas cost (${Ge(w)} MON). Nothing to withdraw.`};T=p-w}else T=p;else{if(T=l?pa(e.amount):ye(e.amount,d.decimals),T<=0n)return{success:!1,message:"Invalid amount",error:"Withdrawal amount must be greater than 0"};if(T>p)return{success:!1,message:"Insufficient balance",sessionKey:{address:a.address,previousBalance:`${y} ${d.symbol}`,newBalance:`${y} ${d.symbol}`},error:`Requested ${e.amount} ${d.symbol} but only have ${y} ${d.symbol}`};if(l&&p-T<w)return{success:!1,message:"Insufficient balance for gas after withdrawal",sessionKey:{address:a.address,previousBalance:`${y} ${d.symbol}`,newBalance:`${y} ${d.symbol}`},error:`Not enough MON left for gas (${Ge(w)} MON needed). Try withdrawing less or use 'all'.`}}let A=ma(a.privateKey),_=Tt({account:A,chain:o,transport:Ze(s,t)}),E;if(l?E=await _.sendTransaction({to:m,value:T}):E=await _.writeContract({address:d.address,abi:Xe,functionName:"transfer",args:[m,T]}),(await Xt(i,E)).status!=="success")return{success:!1,message:"Transaction failed",error:`Withdrawal transaction failed. Hash: ${E}`};let $;l?$=await i.getBalance({address:a.address}):$=await i.readContract({address:d.address,abi:Xe,functionName:"balanceOf",args:[a.address]});let B=l?Ge($):le($,d.decimals),V=l?Ge(T):le(T,d.decimals),D=`${r.blockExplorer}/tx/${E}`;return{success:!0,message:m.toLowerCase()===t.wallet.smartAccountAddress.toLowerCase()?`Withdrew ${V} ${d.symbol} to your smart account`:`Withdrew ${V} ${d.symbol} to ${m}`,withdrawal:{token:d.symbol,amount:`${V} ${d.symbol}`,recipient:m,txHash:E,explorerUrl:D},sessionKey:{address:a.address,previousBalance:`${y} ${d.symbol}`,newBalance:`${B} ${d.symbol}`}}}catch(t){return{success:!1,message:"Withdrawal failed",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();We();var Tze=C.object({blockIdentifier:C.union([C.string(),C.number()]).optional().describe("Block number (e.g., 12345), block hash (e.g., '0x...'), or 'latest'/'pending'. If not provided, returns the latest block."),includeTransactions:C.boolean().optional().describe("Include full transaction objects. Default: false (only hashes).")});function iae(e){e.tool("get_block","Get block information by number, hash, or latest. Returns block details including timestamp, gas usage, and transaction count. Works in both BYOK and x402 modes.",Tze.shape,async t=>{let n=await _ze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}function Sze(e){let t=new Date(Number(e)*1e3),n=Intl.DateTimeFormat().resolvedOptions().timeZone;return{formatted:t.toLocaleString("en-US",{timeZone:n,year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),timezone:n}}function Aze(e){return e.startsWith("0x")&&e.length===66}async function _ze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=await we(t),r=t.network.chainId,a=t.network.name||"Monad",s=Ee(r,n),o=_e({chain:s,transport:gt(n,Ot(t))}),i=e.includeTransactions??!1,u,d=e.blockIdentifier;if(d===void 0||d==="latest")u=await o.getBlock({includeTransactions:i});else if(d==="pending")u=await o.getBlock({blockTag:"pending",includeTransactions:i});else if(typeof d=="number")u=await o.getBlock({blockNumber:BigInt(d),includeTransactions:i});else if(typeof d=="string")if(Aze(d))u=await o.getBlock({blockHash:d,includeTransactions:i});else{let w=parseInt(d,10);if(isNaN(w))return{success:!1,message:"Invalid block identifier",error:`Could not parse '${d}' as block number or hash. Use a number, '0x...' hash, 'latest', or 'pending'.`};u=await o.getBlock({blockNumber:BigInt(w),includeTransactions:i})}if(!u)return{success:!1,message:"Block not found",error:`Could not find block with identifier: ${d??"latest"}`};let{formatted:l,timezone:p}=Sze(u.timestamp),y=u.transactions.length,m=u.number?.toString()??"pending",g=u.hash??"pending",h=u.transactions.map(w=>typeof w=="string"?w:w.hash);return{success:!0,message:`Block #${m} (${y} txs) at ${l}`,block:{number:m,hash:g,timestamp:u.timestamp.toString(),timestampFormatted:l,timezone:p,parentHash:u.parentHash,gasUsed:u.gasUsed.toString(),gasLimit:u.gasLimit.toString(),baseFeePerGas:u.baseFeePerGas?.toString(),transactionCount:y,transactions:h,miner:u.miner,nonce:u.nonce??void 0,difficulty:u.difficulty?.toString(),extraData:u.extraData},network:{chainId:r,chainName:a}}}catch(t){return{success:!1,message:"Failed to get block",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();We();var Eze=C.object({}),b$={simpleTransfer:21000n,swap:250000n,stake:150000n};function cae(e){e.tool("get_gas_price","Get current gas price in wei, Gwei, and MON with estimated costs for common operations. Works in both BYOK and x402 modes.",Eze.shape,async()=>{let t=await kze();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}function q2(e,t=6){let n=le(e,18);return`${parseFloat(n).toFixed(t)} MON`}async function kze(){try{let e=await q();if(!e||!Pe(e))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let t=await we(e),n=e.network.chainId,r=e.network.name||"Monad",a=Ee(n,t),o=await _e({chain:a,transport:gt(t,Ot(e))}).getGasPrice(),i=o*b$.simpleTransfer,u=o*b$.swap,d=o*b$.stake,l=S0(o);return{success:!0,message:`Current gas price: ${l} Gwei (~${q2(u)} per swap)`,gas:{gasPrice:o.toString(),gasPriceGwei:`${l} Gwei`,gasPriceMon:q2(o,12),estimatedCosts:{simpleTransfer:q2(i),swap:q2(u),stake:q2(d)}},network:{chainId:n,chainName:r}}}catch(e){return{success:!1,message:"Failed to get gas price",error:e instanceof Error?e.message:"Unknown error"}}}Te();We();var Ize=C.object({txHash:C.string().describe("Transaction hash to explain. Must be a valid 66-character hex string (0x + 64 hex chars). Example: '0x1234...abcd'. Use this to get detailed explanation of any on-chain transaction."),userAddress:C.string().optional().describe("Optional user address for context. Helps determine if tokens were sent or received. If not provided, uses the from address of the transaction.")});function uae(e){e.tool("explain_transaction",`Decode and explain any transaction in detail. Returns transaction type, token movements, gas info, and for Pragma transactions: delegation details and security analysis. x402 mode only.

PRESENTATION GUIDE - TWO SECTIONS:

## Section 1: Technical Details (FIRST)
Present all technical data in structured format:
1. Header: Status emoji (\u2713/\u2717) + summary + [View on MonadVision](explorerUrl)
2. Basic Info table: Block, Timestamp, Status, From, To
3. Token Movements table: Direction (in/out), token, amount, USD value
4. Gas table: Cost in MON and USD, gas price
5. For Pragma txs (isPragma=true):
   - Delegation Chain table: Delegator (Smart Account), Delegate (Session Key)
   - Security Analysis table: time-bounded, replay-protected, usage-limited, etc.
   - Caveats list with enforcer names and decoded parameters

## Section 2: Human Explanation (AFTER technical details)
Add a "---" separator, then provide plain English explanation:

### What Happened
One paragraph explaining the transaction in simple terms. Examples:
- Swap: "You traded your stablecoins (AUSD, USDT0, earnAUSD) for MON through the 0x exchange. Your session key executed this on your behalf using a time-limited delegation."
- Stake: "You deposited MON into aPriori's liquid staking vault. In return, you received aprMON tokens which represent your staked position and accrue rewards over time."
- Transfer: "You sent X tokens to address Y. This was a direct transfer from your smart account."

### Security (for Pragma txs only)
Explain what the caveats mean in plain terms:
- "Your session key could only execute this once (LimitedCallsEnforcer)"
- "The delegation expired 5 minutes after creation (TimestampEnforcer)"
- "Only specific contracts could be called (AllowedTargetsEnforcer)"

### Net Result
Summarize the outcome:
- What the user gained/received
- What the user spent (including gas)
- Any notable observations (e.g., "Gas cost was higher than swap value")`,Ize.shape,async t=>{let n=await Cze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Cze(e){try{if(!/^0x[a-fA-F0-9]{64}$/.test(e.txHash))return{success:!1,message:"Invalid transaction hash",error:"Transaction hash must be 66 characters (0x + 64 hex chars). Example: 0x1234...abcd"};let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(!await Ct())return{success:!1,message:"x402 mode required",error:"explain_transaction requires x402 mode. Run set_mode with mode='x402' first. This tool uses server infrastructure for ABI resolution and transaction decoding."};let r=t.network.chainId,a=`${gn()}/${r}/transaction`,s={txHash:e.txHash,...e.userAddress&&{userAddress:e.userAddress}},o=await dt(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!o.ok){if(o.status===404)return{success:!1,message:"Transaction not found",error:`Transaction ${e.txHash} not found on chain ${r}. It may be pending or on a different network.`};let l=await o.text();return{success:!1,message:`API error (${o.status})`,error:l||`HTTP ${o.status}`}}let i=await o.json();if(!i.success||!i.transaction)return{success:!1,message:"Failed to explain transaction",error:i.error||"Unknown API error"};let u=i.transaction;return{success:!0,message:`${u.status==="success"?"\u2713":"\u2717"} ${u.summary}`,transaction:u}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Payment rejected")?{success:!1,message:"Payment failed",error:"x402 payment was rejected. Check your session key USDC balance with check_session_key_balance."}:{success:!1,message:"Failed to explain transaction",error:n}}}Te();We();var Pze=C.object({address:C.string().describe("Wallet address to fetch activity for. Can be a smart account or EOA. Example: '0x601aD0E29E9D9fCC9c9dBd81e46EEA5D9f399fa0'. If not provided, uses the user's smart account address from config.").optional(),timeRange:C.string().optional().describe("Time range for activity history. Examples: '24 hours', '7 days', '30 days'. Default: '30 days'. Maximum: depends on HyperSync indexer coverage."),limit:C.number().optional().describe("Maximum number of activities to return. Default: no limit (returns all). Only set this if you want to limit results for a specific reason.")});function dae(e){e.tool("get_onchain_activity",`Fetch on-chain transaction history for any address. Returns swaps, transfers, stakes, NFT trades, and more with token movements and USD values. x402 mode only.

PRESENTATION GUIDE: Present activities as a markdown table with these columns:
| Date | Type | Details | Tx Hash | Gas |
- Order: Show most recent transactions FIRST (reverse chronological order)
- Date: Format timestamp as "Jan 16 04:29" (short month + day + time)
- Type: Use typeDescription (e.g., "Token Swap", "MON Transfer"). Add \u26A1 prefix for Pragma transactions (isPragma=true)
- Details - ALWAYS format as "X  \u2192  Y" showing what was sent and what was received/where:
  - For swaps: Use tokensIn (sent) and tokensOut (received) arrays
    - Single swap: "1 MON  \u2192  0.5 USDC"
    - Multi-token swap: "0.4 MON  \u2192  0.002 USDC + 0.002 USDT0 + 0.002 AUSD" (join tokensOut with " + ")
  - For MON transfers: Use valueFormatted and executionTarget.address
    - "0.5 MON  \u2192  0xcb9e...c4f8"
  - For ERC20 transfers: Use tokensIn array with the "to" field for recipient
    - "0.062 USDC  \u2192  0x1234...5678" (tokensIn[0].amountFormatted  \u2192  tokensIn[0].to truncated)
  - For approvals: Show tokens being approved
    - "0.022 USDC + 0.022 USDT0 approved"
- Tx Hash: ALWAYS show the FULL 66-character transaction hash (never truncate). User needs to copy it.
- Gas: Use gasFeeFormatted (e.g., "0.04 MON")

The explorerUrl field is available if user wants to view on MonadVision.`,Pze.shape,async t=>{let n=await Rze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Rze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(!await Ct())return{success:!1,message:"x402 mode required",error:"get_onchain_activity requires x402 mode. Run set_mode with mode='x402' first. This tool uses HyperSync indexer infrastructure for fast historical queries."};let r=e.address||t.wallet?.smartAccountAddress;if(!r)return{success:!1,message:"No address provided",error:"Please provide an address to fetch activity for, or set up your wallet first."};if(!/^0x[a-fA-F0-9]{40}$/.test(r))return{success:!1,message:"Invalid address",error:"Address must be 42 characters (0x + 40 hex chars). Example: 0x601aD0E29E9D9fCC9c9dBd81e46EEA5D9f399fa0"};let a=t.network.chainId,s=`${gn()}/${a}/activity`,o=e.timeRange||"30 days",u=await dt(s,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({address:r,timeRange:o})});if(!u.ok){if(u.status===400)return{success:!1,message:"Invalid request",error:(await u.json().catch(()=>({}))).error||`HTTP ${u.status}`};let $=await u.text();return{success:!1,message:`API error (${u.status})`,error:$||`HTTP ${u.status}`}}let d=await u.json();if(!d.success)return{success:!1,message:"Failed to fetch activity",error:d.error||"Unknown API error"};let l=d.activities||[],p="https://monadvision.com/tx",y=l.map($=>({...$,explorerUrl:`${p}/${$.txHash}`})),m=e.limit?y.slice(0,e.limit):y,g=d.totalCount||l.length,h=d.address?.type||"unknown",w=d.address?.name,v=`${r.slice(0,6)}...${r.slice(-4)}`,T=w||v,A=d.blockRange?.timeRange||o,_=g===1?"transaction":"transactions",E=e.limit&&g>e.limit?`. Showing first ${e.limit}.`:"";return{success:!0,message:`Found ${g} ${_} for ${T} (${h}) in last ${A}${E}`,address:d.address,activities:m,totalCount:g,displayedCount:m.length,blockRange:d.blockRange}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Payment rejected")?{success:!1,message:"Payment failed",error:"x402 payment was rejected. Check your session key USDC balance with check_session_key_balance."}:{success:!1,message:"Failed to fetch activity",error:n}}}Te();We();var $ze=C.object({address:C.string().describe("Contract address to analyze (0x...). Returns ABI, source code, proxy detection, and interface detection. Use when user asks 'what does this contract do?' or before interacting with unknown contracts.")});function fae(e){e.tool("explain_contract",`Analyze a smart contract and return comprehensive information including ABI, source code, proxy detection, and interface detection. x402 mode only.

PRESENTATION GUIDE:

## Contract: [Name]
**Address:** address | [View on MonadVision](explorerUrl)
**Verified:** \u2713/\u2717
**Compiler:** version (if available)

---

### Detected Interfaces
List interfaces from the interfaces array (e.g., ERC-20, ERC-721, ERC-1155, ERC-4626).
Only show interfaces where supported=true.

---

### Proxy Status
- **Is Proxy:** Yes/No (from isProxy field)
- If proxy, show implementation address and name

---

### Key Functions (extract from ABI)

Categorize ABI functions by stateMutability:

**Read (view/pure):**
List functions with stateMutability "view" or "pure"
Format: \`functionName(inputTypes) \u2192 outputType\`

**Write (nonpayable/payable):**
List functions with stateMutability "nonpayable" or "payable"
Format: \`functionName(inputTypes)\`

**Events:**
List items with type "event"
Format: EventName(param1, param2, ...)

---

### Security Notes
- \u26A0\uFE0F Upgradeable proxy - if isProxy is true
- \u2713 Verified source code - if verified is true
- \u26A0\uFE0F Unverified - if verified is false`,$ze.shape,async t=>{let n=await Dze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Dze(e){try{if(!/^0x[a-fA-F0-9]{40}$/.test(e.address))return{success:!1,message:"Invalid address",error:"Address must be 42 characters (0x + 40 hex chars). Example: 0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701"};let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(!await Ct())return{success:!1,message:"x402 mode required",error:"explain_contract requires x402 mode. Run set_mode with mode='x402' first. This tool uses server infrastructure for contract analysis and ABI resolution."};let r=t.network.chainId,a=`${gn()}/${r}/contract/${e.address}`,s=await dt(a,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok){if(s.status===404)return{success:!1,message:"Contract not found",error:`Contract ${e.address} not found or not verified on chain ${r}.`};let p=await s.text();return{success:!1,message:`API error (${s.status})`,error:p||`HTTP ${s.status}`}}let o=await s.json();if(!o.success||!o.contract)return{success:!1,message:"Failed to analyze contract",error:o.error||"Unknown API error"};let i=o.contract,u={address:i.address||e.address,name:i.name||"Unknown Contract",verified:i.verified??!1,abi:i.abi,sourceCode:i.sourceCode,compiler:i.compiler,isProxy:i.isProxy??!1,implementation:i.implementation,interfaces:i.interfaces||[],explorerUrl:i.explorerUrl,updatedAt:i.analyzedAt},d=u.isProxy?` (Proxy \u2192 ${u.implementation?.name||"Unknown Implementation"})`:"";return{success:!0,message:`${u.verified?"\u2713":"\u26A0\uFE0F Unverified"} Contract analyzed: ${u.name}${d}`,contract:u}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Payment rejected")?{success:!1,message:"Payment failed",error:"x402 payment was rejected. Check your session key USDC balance with check_session_key_balance."}:{success:!1,message:"Failed to analyze contract",error:n}}}Y();Te();var Mze=C.object({token:C.string().describe("Token address to check graduation status. Must be a 0x address. Use this to determine whether to use nad.fun tools or regular swap tools.")});function lae(e){e.tool("nadfun_status","Check if a token has graduated from nad.fun bonding curve. Returns graduation status, progress percentage, and trading venue. CRITICAL: Always call this before nadfun_buy/nadfun_sell to verify the token is still on the bonding curve. If graduated, use regular swap tools instead.",Mze.shape,async t=>{let n=await Oze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Oze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n;try{n=xe(e.token)}catch{return{success:!1,message:"Invalid token address",error:"Token must be a valid 0x address"}}let r=t.network.chainId,a=await ji(n,r),s;a.isGraduated?s="Token has graduated to DEX. Use regular swap tools (get_swap_quote + execute_swap).":a.isLocked?s="Token is locked during graduation. Wait for graduation to complete before trading.":s="Token is on the bonding curve. Use nad.fun tools (nadfun_quote, nadfun_buy, nadfun_sell).";let o=a.tokenSymbol||"Token",i;return a.isGraduated?i=`${o} has graduated from nad.fun and now trades on DEX`:a.isLocked?i=`${o} is currently locked (graduation in progress)`:i=`${o} is on nad.fun bonding curve at ${a.progressPercent} progress`,{success:!0,message:i,status:{token:a.token,tokenSymbol:a.tokenSymbol,tokenName:a.tokenName,isGraduated:a.isGraduated,isLocked:a.isLocked,progress:a.progress,progressPercent:a.progressPercent,availableTokens:a.availableTokens,requiredMon:a.requiredMon,tradingVenue:a.tradingVenue},recommendation:s}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("not supported on chain")?{success:!1,message:"nad.fun not available",error:n}:{success:!1,message:"Failed to check token status",error:n}}}Y();Te();var Nze=C.object({token:C.string().describe("Token address on nad.fun bonding curve. Must be a 0x address."),amount:C.string().describe("Amount to trade. Normal mode: input amount (MON for buy, tokens for sell). Exact output mode: desired output amount (tokens for buy, MON for sell). Examples: '1.5' for 1.5 units, '500' for 500 units."),isBuy:C.boolean().describe("true = buy tokens with MON, false = sell tokens for MON"),slippageBps:C.number().optional().describe(`Slippage tolerance in basis points. Default: ${ic} (5%). Max: ${V6} (50%).`),exactOutput:C.boolean().optional().describe("If true, 'amount' is the desired OUTPUT (e.g., 'buy me 500 tokens'). Calculates required input. Default: false (amount is the input).")});function pae(e){e.tool("nadfun_quote","Get a price quote for buying or selling tokens on nad.fun bonding curve. Returns expected output, minimum output (after slippage), and current graduation progress. Quote is valid for 5 minutes. Use the quoteId with nadfun_buy or nadfun_sell to execute.",Nze.shape,async t=>{let n=await Lze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Lze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n;try{n=xe(e.token)}catch{return{success:!1,message:"Invalid token address",error:"Token must be a valid 0x address"}}let r,a=e.exactOutput??!1;try{r=ye(e.amount,18)}catch{return{success:!1,message:"Invalid amount",error:"Amount must be a valid number (e.g., '1.5', '1000')"}}if(r<=0n)return{success:!1,message:"Invalid amount",error:"Amount must be greater than 0"};let s=t.network.chainId,o=t.wallet.smartAccountAddress,i=e.slippageBps??ic,{quote:u,warning:d}=await ure({token:n,amount:r,isBuy:e.isBuy,slippageBps:i,chainId:s,sender:o,exactOutput:a}),l=dre(u),p=l>60?`${Math.floor(l/60)}m ${l%60}s`:`${l}s`,y=e.isBuy?"Buy":"Sell",m=e.isBuy?`${u.amountIn} MON`:`${u.amountIn} tokens`,g=e.isBuy?`${u.expectedOutput} tokens`:`${u.expectedOutput} MON`;return{success:!0,message:`${y} quote: ${m} \u2192 ${g} (min: ${u.minOutput})`,quote:{quoteId:u.quoteId,token:u.token,tokenSymbol:u.tokenSymbol,direction:u.direction,amountIn:u.amountIn,expectedOutput:u.expectedOutput,minOutput:u.minOutput,slippageBps:u.slippageBps,progress:u.progress.toString(),progressPercent:u.progressPercent,expiresIn:p},warning:d}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("graduated")?{success:!1,message:"Token has graduated",error:n}:n.includes("locked")?{success:!1,message:"Token is locked",error:n}:n.includes("not supported on chain")?{success:!1,message:"nad.fun not available",error:n}:{success:!1,message:"Failed to get quote",error:n}}}Te();Y();M0();Te();mt();We();Ar();async function mae(e){let t=await q();if(!t?.wallet)return{success:!1,error:"Wallet not configured. Please run setup_wallet first."};let n=po(e);if(!n)return{success:!1,error:"Quote not found. Please get a fresh quote with nadfun_quote."};if(mo(n))return Gi(e),{success:!1,error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(n.direction!=="BUY")return{success:!1,error:"This quote is for selling, not buying. Use nadfun_sell instead."};let r=qi(e);if(!r)return{success:!1,error:"Execution data missing. Please get a fresh quote."};let a=t.wallet.smartAccountAddress,s=t.wallet.sessionKeyAddress,o=t.network.chainId,i=Qe(o),u=await we(t),d=Ee(o,u),l=_e({chain:d,transport:Ze(u,t)}),p=await ht();if(!p)return{success:!1,error:"Session key not found. Please run setup_wallet first."};let y=await l.getBalance({address:s}),m=lo("swap");if(y<m)return{success:!1,error:`Session key balance too low. Have: ${G0(y)}, Need ~${G0(m)}. Please fund session key first.`};let g=await Tn(l,a),h=_0e({router:r.router,delegator:a,sessionKey:s,nonce:g,chainId:o,calldata:r.calldata,value:r.value}),w=`Buy ${n.expectedOutput} tokens with ${n.amountIn} MON on nad.fun`,v=await _n(h.delegation,o,t.wallet.keyId,w);h.delegation.signature=v;let T=on(p),A=Tt({account:T,chain:d,transport:Ze(u,t)});try{let _=await dn(A,l,Ue.delegationManager,[{permissionContext:[h.delegation],executions:[Pt({target:r.router,value:r.value,callData:r.calldata})],mode:nn.SingleDefault}]);return(await Xt(l,_)).status==="reverted"?{success:!1,txHash:_,error:"Transaction reverted on-chain"}:(Gi(e),{success:!0,txHash:_,explorerUrl:`${i.blockExplorer}/tx/${_}`,tokensTraded:n.expectedOutput,monAmount:n.amountIn})}catch(_){return{success:!1,error:`Transaction failed: ${_ instanceof Error?_.message:"Unknown error"}`}}}async function bae(e){let t=await q();if(!t?.wallet)return{success:!1,error:"Wallet not configured. Please run setup_wallet first."};let n=po(e);if(!n)return{success:!1,error:"Quote not found. Please get a fresh quote with nadfun_quote."};if(mo(n))return Gi(e),{success:!1,error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(n.direction!=="SELL")return{success:!1,error:"This quote is for buying, not selling. Use nadfun_buy instead."};let r=qi(e);if(!r)return{success:!1,error:"Execution data missing. Please get a fresh quote."};let a=t.wallet.smartAccountAddress,s=t.wallet.sessionKeyAddress,o=t.network.chainId,i=Qe(o),u=await we(t),d=Ee(o,u),l=_e({chain:d,transport:Ze(u,t)}),p=await ht();if(!p)return{success:!1,error:"Session key not found. Please run setup_wallet first."};let y=await l.getBalance({address:s}),m=lo("swap");if(y<m)return{success:!1,error:`Session key balance too low. Have: ${G0(y)}, Need ~${G0(m)}. Please fund session key first.`};let g=await Tn(l,a),h=[],w=await l.readContract({address:n.token,abi:Xe,functionName:"allowance",args:[a,r.router]});if(w<n.amountInWei){if(w>0n){let O=cs({tokenAddress:n.token,spender:r.router,amount:0n,delegator:a,sessionKey:s,nonce:g,chainId:o});h.push({delegation:O.delegation,execution:{target:n.token,value:0n,callData:X({abi:Xe,functionName:"approve",args:[r.router,0n]})},kind:"approve"})}let E=cs({tokenAddress:n.token,spender:r.router,amount:n.amountInWei,delegator:a,sessionKey:s,nonce:g,chainId:o});h.push({delegation:E.delegation,execution:{target:n.token,value:0n,callData:X({abi:Xe,functionName:"approve",args:[r.router,n.amountInWei]})},kind:"approve"})}let v=E0e({router:r.router,delegator:a,sessionKey:s,nonce:g,chainId:o,calldata:r.calldata});h.push({delegation:v.delegation,execution:{target:r.router,value:0n,callData:r.calldata},kind:"nadfun_sell"});for(let E of h){let O=E.kind==="approve"?`Approve ${n.amountIn} tokens for nad.fun`:`Sell ${n.amountIn} tokens for ${n.expectedOutput} MON on nad.fun`,$=await _n(E.delegation,o,t.wallet.keyId,O);E.delegation.signature=$}let T=on(p),A=Tt({account:T,chain:d,transport:Ze(u,t)}),_=h.map(E=>({permissionContext:[E.delegation],executions:[Pt({target:E.execution.target,value:E.execution.value,callData:E.execution.callData})],mode:nn.SingleDefault}));try{let E=await dn(A,l,Ue.delegationManager,_);return(await Xt(l,E)).status==="reverted"?{success:!1,txHash:E,error:"Transaction reverted on-chain"}:(Gi(e),{success:!0,txHash:E,explorerUrl:`${i.blockExplorer}/tx/${E}`,tokensTraded:n.amountIn,monAmount:n.expectedOutput})}catch(E){return{success:!1,error:`Transaction failed: ${E instanceof Error?E.message:"Unknown error"}`}}}t0();var Bze=C.object({quoteId:C.string().describe("Quote ID from nadfun_quote for a BUY operation. The quote must not be expired and must be a BUY direction quote."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function yae(e){e.tool("nadfun_buy","Execute a buy on nad.fun bonding curve using a quote. If agentId provided: uses autonomous mode (no Touch ID, pre-signed delegation). If no agentId: uses assistant mode (requires Touch ID confirmation). The quote must be obtained from nadfun_quote with isBuy=true.",Bze.shape,async t=>{let n=await Uze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Uze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId)return await Cre(e.agentId,e.quoteId);if(_t()){let s=po(e.quoteId);if(!s)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};if(mo(s))return{success:!1,message:"Quote expired",error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(s.direction!=="BUY")return{success:!1,message:"Wrong quote type",error:"This quote is for selling, not buying. Use nadfun_sell instead."};let o=qi(e.quoteId);if(!o)return{success:!1,message:"Execution data missing",error:"Execution data missing. Please get a fresh quote."};let i=await zn({target:o.router,value:o.value,callData:o.calldata},t);return i.success?{success:!0,message:`Successfully bought ${s.expectedOutput} ${s.tokenSymbol} for ${s.amountIn} MON`,transaction:{hash:i.txHash,explorerUrl:i.explorerUrl},trade:{tokenSymbol:s.tokenSymbol,monSpent:s.amountIn,tokensReceived:s.expectedOutput,progress:s.progressPercent}}:{success:!1,message:"Buy failed",error:i.error}}let n=po(e.quoteId);if(!n)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};let r=await mae(e.quoteId);if(!r.success)return{success:!1,message:"Buy failed",error:r.error};let a=n.progressPercent;try{a=(await ji(n.token,t.network.chainId)).progressPercent}catch{}return{success:!0,message:`Successfully bought ${r.tokensTraded} ${n.tokenSymbol} for ${r.monAmount} MON`,transaction:{hash:r.txHash,explorerUrl:r.explorerUrl},trade:{tokenSymbol:n.tokenSymbol,monSpent:r.monAmount,tokensReceived:r.tokensTraded,progress:a}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Session key balance")?{success:!1,message:"Insufficient gas",error:n}:n.includes("Touch ID")||n.includes("passkey")?{success:!1,message:"Authentication failed",error:"Touch ID authentication was cancelled or failed. Please try again."}:{success:!1,message:"Buy failed",error:n}}}Te();t0();var Hze=C.object({quoteId:C.string().describe("Quote ID from nadfun_quote for a SELL operation. The quote must not be expired and must be a SELL direction quote."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). Note: Sell requires token approval. First sell should use assistant mode to set approval.")});function gae(e){e.tool("nadfun_sell","Execute a sell on nad.fun bonding curve using a quote. If agentId provided: uses autonomous mode (no Touch ID, pre-signed delegation). If no agentId: uses assistant mode (requires Touch ID, handles approval). The quote must be obtained from nadfun_quote with isBuy=false.",Hze.shape,async t=>{let n=await Fze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Fze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};if(e.agentId)return await Pre(e.agentId,e.quoteId);if(_t()){let s=po(e.quoteId);if(!s)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};if(mo(s))return{success:!1,message:"Quote expired",error:"Quote has expired. Please get a fresh quote with nadfun_quote."};if(s.direction!=="SELL")return{success:!1,message:"Wrong quote type",error:"This quote is for buying, not selling. Use nadfun_buy instead."};let o=qi(e.quoteId);if(!o)return{success:!1,message:"Execution data missing",error:"Execution data missing. Please get a fresh quote."};let i=await Vi(s.token,o.router,s.amountInWei,{target:o.router,value:o.value,callData:o.calldata},t);return i.success?{success:!0,message:`Successfully sold ${s.amountIn} ${s.tokenSymbol} for ${s.expectedOutput} MON`,transaction:{hash:i.txHash,explorerUrl:i.explorerUrl},trade:{tokenSymbol:s.tokenSymbol,tokensSold:s.amountIn,monReceived:s.expectedOutput,progress:s.progressPercent}}:{success:!1,message:"Sell failed",error:i.error}}let n=po(e.quoteId);if(!n)return{success:!1,message:"Quote not found",error:"Quote not found or expired. Please get a fresh quote with nadfun_quote."};let r=await bae(e.quoteId);if(!r.success)return{success:!1,message:"Sell failed",error:r.error};let a=n.progressPercent;try{a=(await ji(n.token,t.network.chainId)).progressPercent}catch{}return{success:!0,message:`Successfully sold ${r.tokensTraded} ${n.tokenSymbol} for ${r.monAmount} MON`,transaction:{hash:r.txHash,explorerUrl:r.explorerUrl},trade:{tokenSymbol:n.tokenSymbol,tokensSold:r.tokensTraded,monReceived:r.monAmount,progress:a}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Session key balance")?{success:!1,message:"Insufficient gas",error:n}:n.includes("Touch ID")||n.includes("passkey")?{success:!1,message:"Authentication failed",error:"Touch ID authentication was cancelled or failed. Please try again."}:{success:!1,message:"Sell failed",error:n}}}Te();m0();import{readFile as zze,stat as jze}from"fs/promises";import{extname as qze}from"path";var y$="https://api.nad.fun";async function Q5(e,t){let n=new URL(e,y$);t&&Object.entries(t).forEach(([a,s])=>{s!==void 0&&n.searchParams.set(a,String(s))});let r=await O0(async()=>{let a=await fetch(n.toString(),{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`nad.fun API error (${a.status}): ${a.statusText}`);return a.json()},{operationName:`nadfun-api-${e}`,maxRetries:2,baseDelayMs:500});if(!r.success)throw new Error(r.error?.message||"nad.fun API request failed");return r.data}async function hae(e,t){let n=new URL(e,y$),r=await O0(async()=>{let a=await fetch(n.toString(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!a.ok){let s=await a.text().catch(()=>a.statusText);throw new Error(`nad.fun API error (${a.status}): ${s}`)}return a.json()},{operationName:`nadfun-post-${e}`,maxRetries:2,baseDelayMs:500});if(!r.success)throw new Error(r.error?.message||"nad.fun API POST request failed");return r.data}function Gze(e){return{".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".webp":"image/webp",".svg":"image/svg+xml"}[e.toLowerCase()]||"application/octet-stream"}function Vze(e){return[".png",".jpg",".jpeg",".webp"].includes(e.toLowerCase())}async function xae(e){let t=qze(e);if(!Vze(t))throw new Error(`Invalid image format '${t}'. Supported: PNG, JPEG, WebP`);let n=await jze(e).catch(()=>null);if(!n)throw new Error(`Image file not found: ${e}`);let r=5*1024*1024;if(n.size>r){let d=(n.size/1024/1024).toFixed(2);throw new Error(`Image exceeds 5MB limit (current: ${d}MB)`)}let a=await zze(e),s=Gze(t),o=new URL("/metadata/image",y$),i=await O0(async()=>{let d=await fetch(o.toString(),{method:"POST",headers:{"Content-Type":s,Accept:"application/json"},body:a});if(!d.ok){let l=await d.text().catch(()=>d.statusText);throw new Error(`Image upload failed (${d.status}): ${l}`)}return d.json()},{operationName:"nadfun-image-upload",maxRetries:2,baseDelayMs:1e3});if(!i.success)throw new Error(i.error?.message||"Image upload failed");let u=i.data;if(u.is_nsfw)throw new Error("Image was flagged as NSFW and rejected by nad.fun");return u.image_uri}async function wae(e){let t={image_uri:e.imageUri,name:e.name,symbol:e.symbol};return e.description&&(t.description=e.description),e.twitter&&(t.twitter=e.twitter),e.telegram&&(t.telegram=e.telegram),e.website&&(t.website=e.website),(await hae("/metadata/metadata",t)).metadata_uri}async function vae(e,t,n,r){return await hae("/token/salt",{creator:e,name:t,symbol:n,metadata_uri:r})}function F7(e){if(!e)return"0.00%";let t=parseFloat(e);return isNaN(t)?"0.00%":t>=0?`+${t.toFixed(2)}%`:`${t.toFixed(2)}%`}function Q6(e){if(!e)return"0.00";let t=parseFloat(e);return isNaN(t)?"0.00":t<1e-4?t.toExponential(2):t<.01?t.toFixed(6):t<1?t.toFixed(4):t.toFixed(2)}function Tae(e){if(!e)return"0";let t=parseFloat(e);return isNaN(t)?"0":t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t<1e-4?t.toExponential(2):t<1?t.toFixed(6):t.toFixed(2)}function Sae(e){return e===void 0?"0.00%":`${(e/100).toFixed(2)}%`}var Wze=C.object({sortBy:C.enum(["market_cap","new","active","hackathon"]).optional().describe("How to sort: 'market_cap' (default), 'new' (newest), 'active' (most traded), 'hackathon' (Moltiverse hackathon submissions)"),limit:C.number().optional().describe("Max tokens to return (default: 10, max: 50)"),page:C.number().optional().describe("Page number for pagination (default: 1)"),excludeGraduated:C.boolean().optional().describe("If true, only show tokens still on bonding curve (default: false)")});function Aae(e){e.tool("nadfun_discover","Find trending/new tokens on nad.fun bonding curve. Sort by market cap, newest, or most active. Optionally filter to only tokens still on the bonding curve. Works in both BYOK and x402 modes (uses public nad.fun API).",Wze.shape,async t=>{let n=await Xze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}var Zze={market_cap:"/order/market_cap",new:"/order/creation_time",active:"/order/latest_trade",hackathon:"/order/hackathon"};function Kze(e){let t={address:e.token_info.token_id,symbol:e.token_info.symbol,name:e.token_info.name,imageUri:e.token_info.image_uri||void 0,isGraduated:e.token_info.is_graduated,marketType:e.market_info.market_type,priceUsd:Q6(e.market_info.price_usd),priceChange:F7(e.percent),holderCount:e.market_info.holder_count||0,volume:e.market_info.volume||void 0,createdAt:String(e.token_info.created_at)},n=e.token_info.hackathon_info;return n&&(t.hackathon={teamName:n.team?.name,projectName:n.project?.name,projectDescription:n.project?.description,members:n.team?.members?.map(r=>({twitter:r.twitter||void 0,github:r.github?.url||void 0,githubStars:r.github?.star_count,githubRepos:r.github?.repo_count}))}),t}async function Xze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=e.sortBy||"market_cap",r=Zze[n],a=Math.max(e.page||1,1),s=Math.min(Math.max(e.limit||10,1),50),o=await Q5(r,{page:a,limit:s});if(!o.tokens||o.tokens.length===0)return{success:!0,message:`No tokens found sorted by ${n}`,tokens:[],totalCount:0,page:a};let i=o.tokens.map(Kze);e.excludeGraduated&&(i=i.filter(d=>!d.isGraduated));let u={market_cap:"market cap",new:"creation time (newest first)",active:"recent activity",hackathon:"Moltiverse hackathon"};return{success:!0,message:`Found ${i.length} tokens sorted by ${u[n]}${e.excludeGraduated?" (bonding curve only)":""}`,tokens:i,totalCount:o.total_count,page:a}}catch(t){return{success:!1,message:"Failed to discover tokens",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();var Jze=C.object({token:C.string().describe("Token address (0x...) to get info for")});function _ae(e){e.tool("nadfun_token_info","Get detailed information about a specific nad.fun token. Returns metadata (name, description, socials), market data (price, volume, holders), and graduation progress if still on bonding curve. Works in both BYOK and x402 modes (uses public nad.fun API).",Jze.shape,async t=>{let n=await Yze(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}function Qze(e,t,n){return e?"Token has graduated to DEX. Use regular swap tools (get_swap_quote + execute_swap).":t?"Token is locked during graduation. Wait for graduation to complete before trading.":n>=9e3?"Token is near graduation (>90% progress). Large trades may trigger graduation. Use nadfun_quote and nadfun_buy/nadfun_sell.":"Token is on bonding curve. Use nadfun_quote and nadfun_buy/nadfun_sell for trading."}async function Yze(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n;try{n=xe(e.token)}catch{return{success:!1,message:"Invalid token address",error:"Token must be a valid 0x address"}}let[r,a,s]=await Promise.all([Q5(`/token/${n}`),ji(n,t.network.chainId),Q5("/order/latest_trade",{limit:100}).catch(()=>null)]),o=r.token_info;if(!o||!o.token_id)return{success:!1,message:"Token not found",error:`Token ${n} not found on nad.fun. It may not be a nad.fun token.`};let i=s?.tokens?.find(g=>g.token_info.token_id.toLowerCase()===n.toLowerCase()),u,d;typeof o.creator=="object"&&o.creator!==null?(u=o.creator.account_id,d=o.creator.nickname):typeof o.creator=="string"&&(u=o.creator);let l={address:n,symbol:o.symbol,name:o.name,description:o.description||void 0,imageUri:o.image_uri||void 0,isGraduated:a.isGraduated,createdAt:String(o.created_at),creator:u?{address:u,name:d!==u?d:void 0}:void 0,socials:o.twitter||o.telegram||o.website?{twitter:o.twitter||void 0,telegram:o.telegram||void 0,website:o.website||void 0}:void 0,marketType:a.isGraduated?"DEX":"CURVE",priceUsd:i?Q6(i.market_info.price_usd):"N/A",priceNative:i?Q6(i.market_info.price_native):"N/A",totalSupply:i?.market_info.total_supply||void 0,reserveNative:i?.market_info.reserve_native||void 0,reserveToken:i?.market_info.reserve_token||void 0,volume:i?.market_info.volume||void 0,athPrice:i?.market_info.ath_price?Q6(i.market_info.ath_price):void 0,holderCount:i?.market_info.holder_count||0,progress:a.isGraduated?void 0:a.progress,progressPercent:a.isGraduated?void 0:Sae(a.progress)},p=i?.percent?F7(i.percent):void 0,y=Qze(a.isGraduated,a.isLocked,a.progress),m=`${o.symbol} - ${o.name}`;return a.isGraduated?m+=" (graduated)":m+=` (${l.progressPercent} to graduation)`,p&&(m+=` | ${p}`),{success:!0,message:m,token:l,recommendation:y}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("nothing to see here")?{success:!1,message:"Token not found on nad.fun",error:`Token ${e.token} is not a nad.fun token or doesn't exist.`}:{success:!1,message:"Failed to fetch token info",error:n}}}Y();Te();var eje=C.object({address:C.string().optional().describe("Wallet address to check (default: your smart account)"),positionType:C.enum(["all","open","closed"]).optional().describe("Filter by position type (default: 'all')"),limit:C.number().optional().describe("Max positions to return (default: 20)")});function Eae(e){e.tool("nadfun_positions","Get nad.fun token holdings with PnL analysis. Shows tokens bought on nad.fun, average buy price, current price, and profit/loss. Defaults to your smart account if no address provided. Works in both BYOK and x402 modes (uses public nad.fun API).",eje.shape,async t=>{let n=await tje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function tje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n;if(e.address)try{n=xe(e.address)}catch{return{success:!1,message:"Invalid address",error:"Address must be a valid 0x address"}}else n=t.wallet.smartAccountAddress;let r=Math.min(e.limit||20,100),a=await Q5(`/profile/hold-token/${n}`,{tableType:"hold-tokens-table",page:1,limit:r});if(!a.tokens||a.tokens.length===0)return{success:!0,message:"No nad.fun holdings found",address:n,positions:[],summary:{totalPositions:0,totalValue:"$0.00",totalPnl:"$0.00",profitableCount:0}};let s=a.tokens.map(u=>{let d=u.token_info,l=u.balance_info,p=u.market_info,y=BigInt(l.balance),m=le(y,18),g=parseFloat(l.token_price)||0,w=parseFloat(m)*g;return{token:{address:d.token_id,symbol:d.symbol,name:d.name,imageUri:d.image_uri||void 0},holdings:Tae(m),avgBuyPrice:"N/A",currentPrice:Q6(l.token_price),marketValue:`$${w.toFixed(2)}`,pnl:{usd:"N/A",percent:"N/A",isProfit:!1},marketType:p.market_type||"CURVE"}}),o=s;e.positionType==="open"?o=s.filter(u=>u.marketType==="CURVE"):e.positionType==="closed"&&(o=s.filter(u=>u.marketType==="DEX"));let i=o.reduce((u,d)=>{let l=parseFloat(d.marketValue.replace(/[$,]/g,""))||0;return u+l},0);return{success:!0,message:`Found ${o.length} nad.fun position${o.length!==1?"s":""}`,address:n,positions:o,summary:{totalPositions:o.length,totalValue:`$${i.toFixed(2)}`,totalPnl:"N/A (historical data not available)",profitableCount:0}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("nothing to see here")?{success:!0,message:"No nad.fun holdings found",positions:[],summary:{totalPositions:0,totalValue:"$0.00",totalPnl:"$0.00",profitableCount:0}}:{success:!1,message:"Failed to fetch positions",error:n}}}Te();mt();import{stat as Pae}from"fs/promises";import*as Rae from"node:path";Y();M0();Te();mt();We();Ar();var g$=new Map;function nje(){return`create-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function rje(e){return g$.get(e)}function aje(e){return Date.now()>e.expiresAt}function kae(e){g$.delete(e)}var sje=[{type:"event",name:"Create",inputs:[{type:"address",name:"owner",indexed:!0},{type:"address",name:"curve",indexed:!0},{type:"address",name:"token",indexed:!0},{type:"string",name:"tokenURI"},{type:"string",name:"name"},{type:"string",name:"symbol"},{type:"uint256",name:"virtualNative"},{type:"uint256",name:"virtualToken"}]}];async function Iae(e,t){let n=await q();if(!n?.wallet)throw new Error("Wallet not configured. Please run setup_wallet first.");let r=n.network.chainId,a=await xae(e.imagePath),s=await wae({name:e.name,symbol:e.symbol,imageUri:a,description:e.description,twitter:e.twitter,telegram:e.telegram,website:e.website}),{salt:o,address:i}=await vae(t,e.name,e.symbol,s),u=0n;if(e.initialBuyMon){let m=ye(e.initialBuyMon,18),g=await cre(m,r),h=e.slippageBps??ic;u=g*BigInt(1e4-h)/10000n}let d=X({abi:ere,functionName:"create",args:[{name:e.name,symbol:e.symbol,tokenURI:s,amountOut:u,salt:o,actionId:1}]}),l=nje(),p=Date.now()+300*1e3,y={quoteId:l,name:e.name,symbol:e.symbol,imageUri:a,metadataUri:s,salt:o,predictedTokenAddress:i,initialBuyMon:e.initialBuyMon,expiresAt:p,chainId:r,_calldata:d};return g$.set(l,y),y}async function Cae(e){let t=await q();if(!t?.wallet)return{success:!1,error:"Wallet not configured. Please run setup_wallet first."};let n=rje(e);if(!n)return{success:!1,error:"Quote not found. Please prepare a fresh quote."};if(aje(n))return kae(e),{success:!1,error:"Quote has expired. Please prepare a fresh quote."};let r=t.wallet.smartAccountAddress,a=t.wallet.sessionKeyAddress,s=t.network.chainId,o=Qe(s),i=W6(s),u=await we(t),d=Ee(s,u),l=_e({chain:d,transport:Ze(u,t)}),p=await ht();if(!p)return{success:!1,error:"Session key not found. Please run setup_wallet first."};let y=n.initialBuyMon?ye(n.initialBuyMon,18):0n,m=tre+y,g=await l.getBalance({address:r});if(g<m){let $=le(m,18),B=le(g,18),V=n.initialBuyMon?`10 MON deploy fee + ${n.initialBuyMon} MON initial buy`:"10 MON deploy fee";return{success:!1,error:`Smart Account balance too low. Have: ${B} MON, Need: ${$} MON (${V}). Transfer MON to your Smart Account (${r}) first.`}}let h=await l.getBalance({address:a}),w=lo("transfer");if(h<w)return{success:!1,error:`Session key needs gas. Have: ${G0(h)}, Need: ~0.05 MON for gas. Fund session key (${a}) first.`};let v;try{v=await Tn(l,r)}catch($){return{success:!1,error:`Failed to fetch nonce: ${$ instanceof Error?$.message:String($)}`}}let T=k0e({router:i.router,delegator:r,sessionKey:a,nonce:v,chainId:s,calldata:n._calldata,value:m}),A=n.initialBuyMon?`Create token ${n.symbol} + buy ${n.initialBuyMon} MON`:`Create token ${n.symbol} on nad.fun`,_=await _n(T.delegation,s,t.wallet.keyId,A);T.delegation.signature=_;let E=on(p),O=Tt({account:E,chain:d,transport:Ze(u,t)});try{let $=await dn(O,l,Ue.delegationManager,[{permissionContext:[T.delegation],executions:[Pt({target:i.router,value:m,callData:n._calldata})],mode:nn.SingleDefault}]),B=await Xt(l,$);if(B.status==="reverted")return{success:!1,txHash:$,error:"Transaction reverted on-chain. Token name/symbol may already exist."};let V;try{let G=zo({abi:sje,logs:B.logs,eventName:"Create"});G.length>0&&(V=G[0].args.token)}catch{V=n.predictedTokenAddress}kae(e);let D=`Token ${n.symbol} created successfully!`;return n.initialBuyMon&&(D+=` Initial buy of ${n.initialBuyMon} MON included.`),{success:!0,txHash:$,explorerUrl:`${o.blockExplorer}/tx/${$}`,tokenAddress:V||n.predictedTokenAddress,tokenName:n.name,tokenSymbol:n.symbol,message:D,initialBuyMon:n.initialBuyMon}}catch($){return{success:!1,error:`Token creation failed: ${$ instanceof Error?$.message:"Unknown error"}`}}}var oje=C.object({name:C.string().min(1).max(32).describe("Token name (1-32 chars). Example: 'Moon Cat'. This is the full display name shown to users."),symbol:C.string().min(1).max(10).regex(/^[A-Za-z0-9]+$/).describe("Token symbol/ticker (1-10 alphanumeric). Example: 'MCAT'. Typically 3-5 uppercase letters."),imagePath:C.string().describe("Path to token image file (PNG, JPEG, WebP). Max 5MB. Example: './logo.png' or '/path/to/image.jpg'. CRITICAL: File must exist and be readable."),description:C.string().max(500).optional().describe("Token description (max 500 chars). Optional. Shown on nad.fun token page."),twitter:C.string().optional().describe("Twitter/X URL. Must contain 'x.com'. Optional. Example: 'https://x.com/mytoken'"),telegram:C.string().optional().describe("Telegram URL. Must contain 't.me'. Optional. Example: 'https://t.me/mytokengroup'"),website:C.string().optional().describe("Website URL. Must be https. Optional. Example: 'https://mytoken.xyz'"),initialBuyMon:C.string().optional().describe("MON amount to buy tokens with after creation. Optional. Creator becomes first token holder. Example: '1' for 1 MON. If provided, a separate nadfun_buy will be executed after creation."),slippageBps:C.number().min(0).max(V6).optional().describe(`Slippage tolerance in basis points for the initial buy. Default: ${ic} (5%). Max: ${V6} (50%).`)});function $ae(e){e.tool("nadfun_create","Create a new token on nad.fun bonding curve. Uploads image/metadata, mines vanity address (7777 suffix), and deploys token. Requires Touch ID confirmation. Check session key balance first to ensure sufficient gas (~0.05 MON).",oje.shape,async t=>{let n=await uje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function ije(e){try{return await Pae(e),!0}catch{return!1}}async function cje(e){return(await Pae(e)).size}async function uje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to create your pragma wallet"};let n=[".png",".jpg",".jpeg",".webp"],r=Rae.extname(e.imagePath).toLowerCase();if(!n.includes(r))return{success:!1,message:"Invalid image format",error:`Image must be PNG, JPEG, or WebP (got: ${r||"no extension"})`};if(!await ije(e.imagePath))return{success:!1,message:"Image file not found",error:`File not found: ${e.imagePath}`};let s=await cje(e.imagePath),o=5*1024*1024;if(s>o)return{success:!1,message:"Image too large",error:`Image exceeds 5MB limit (current: ${(s/1024/1024).toFixed(2)}MB)`};if(e.twitter&&!e.twitter.includes("x.com"))return{success:!1,message:"Invalid Twitter URL",error:"Twitter URL must contain 'x.com'. Example: 'https://x.com/mytoken'"};if(e.telegram&&!e.telegram.includes("t.me"))return{success:!1,message:"Invalid Telegram URL",error:"Telegram URL must contain 't.me'. Example: 'https://t.me/mytokengroup'"};if(e.website&&!e.website.startsWith("https://"))return{success:!1,message:"Invalid website URL",error:"Website URL must start with 'https://'. Example: 'https://mytoken.xyz'"};let i=t.wallet.smartAccountAddress,u=Qe(t.network.chainId),d=await Iae({name:e.name,symbol:e.symbol,imagePath:e.imagePath,description:e.description,twitter:e.twitter,telegram:e.telegram,website:e.website,initialBuyMon:e.initialBuyMon,slippageBps:e.slippageBps},i),l=await Cae(d.quoteId);if(!l.success)return{success:!1,message:"Token creation failed",error:l.error||"Unknown error during token creation"};let p={success:!0,message:l.message||`Successfully created token ${e.symbol}`,token:{address:l.tokenAddress,name:e.name,symbol:e.symbol,explorerUrl:`${u.blockExplorer}/token/${l.tokenAddress}`},transaction:{hash:l.txHash,explorerUrl:l.explorerUrl}};return l.initialBuyMon&&(p.initialBuy={monSpent:l.initialBuyMon}),p}catch(t){let n=t instanceof Error?t.message:"Unknown error";return n.includes("Smart Account balance")?{success:!1,message:"Insufficient funds",error:n}:n.includes("Session key needs gas")?{success:!1,message:"Session key needs gas",error:n}:n.includes("Touch ID")||n.includes("passkey")?{success:!1,message:"Authentication failed",error:"Touch ID authentication was cancelled or failed. Please try again."}:n.includes("NSFW")?{success:!1,message:"Image rejected",error:n}:n.includes("nad.fun API")?{success:!1,message:"nad.fun API error",error:n}:{success:!1,message:"Token creation failed",error:n}}}var dje=C.object({});function Dae(e){e.tool("leverup_list_pairs","List all supported trading pairs on LeverUp including Stocks and Forex.",dje.shape,async()=>{let t=fje();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}function fje(){let e=Fn.map(t=>({symbol:t.pair,category:t.category,isHighLeverage:!!t.isHighLeverage,pairBase:t.pairBase}));return{success:!0,message:`Found ${e.length} supported trading pairs.`,data:{pairs:e}}}Y();Te();mt();We();var lje=C.object({address:C.string().optional().describe("Optional address to check positions for. Defaults to your smart account."),agentId:C.string().optional().describe("Optional sub-agent ID. When provided, reconciles tracked positions to detect keeper-triggered closes (TP/SL/liquidation) and record settlement inflows.")}),pje=15,Mae=2000n;function Oae(e){e.tool("leverup_list_positions","List all your active LeverUp perpetual positions with PnL and liquidation analysis.",lje.shape,async t=>{let n=await mje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function mje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured. Run setup_wallet first."};let n=e.address||t.wallet?.smartAccountAddress,r;if(e.agentId){let d=zi(e.agentId);d.length>0&&(r=[...new Set(d.map(l=>l.pair))])}let a=await J5(n,r),s=a.map(d=>({tradeHash:d.position.positionHash,pair:d.position.pair,side:d.position.isLong?"LONG":"SHORT",size:le(d.position.qty,10),margin:le(d.position.margin,18),entryPrice:`$${le(d.position.entryPrice,18)}`,stopLoss:d.position.stopLoss>0n?`$${Number(le(d.position.stopLoss,18)).toFixed(2)}`:"Not set",takeProfit:d.position.takeProfit>0n?`$${Number(le(d.position.takeProfit,18)).toFixed(2)}`:"Not set",unrealizedPnL:d.analysis.unrealizedPnL,pnlPercentage:d.analysis.pnlPercentage,liqPrice:`$${d.analysis.liqPrice}`,healthFactor:d.analysis.healthFactor,distanceToLiq:d.analysis.distanceToLiq})),o;if(e.agentId)try{o=await yje(e.agentId,n,s,t)}catch{}let i={positions:s,...o?{reconciliation:o}:{}};if(a.length===0)return{success:!0,message:"No active LeverUp positions found.",data:i};let u=s.map(d=>`${d.pair} ${d.side}: ${d.unrealizedPnL} (${d.pnlPercentage})`).join(", ");return{success:!0,message:`You have ${a.length} active positions. Summary: ${u}`,data:i}}catch(t){return{success:!1,message:`Failed to fetch LeverUp positions: ${t instanceof Error?t.message:"Unknown error"}`}}}function bje(e,t){return e>t?e-t:t-e}async function yje(e,t,n,r){let a=zi(e);if(a.length===0)return{trackedCount:0,linkedCount:0,settledCount:0,pendingSettlementCount:0};let s=new Set(n.map(E=>E.tradeHash)),o=0,i=0;for(let E=0;E<a.length;E++){let O=a[E];if(O.tradeHash)continue;let $=BigInt(O.margin),B=n.find(V=>{if(V.pair!==O.pair||V.side!==O.side)return!1;let D=ye(V.margin,18);return bje(D,$)*100n<=$*5n});B&&(zR(e,E,B.tradeHash),O.tradeHash=B.tradeHash,O.status==="pending_fill"&&(D7(e,B.tradeHash,"open"),O.status="open"),o++)}let u=await we(r),d=r.network?.chainId??143,l=Ee(d,u),y=await _e({chain:l,transport:Ze(u,r)}).getBlockNumber(),m=Number(y),g=a.filter(E=>E.tradeHash&&!s.has(E.tradeHash));for(let E of g)(E.status==="open"||E.status==="pending_fill")&&(D7(e,E.tradeHash,"pending_settlement",m),E.status="pending_settlement",E.detectedGoneAt=m);let h=g.filter(E=>E.status==="pending_settlement"&&E.detectedGoneAt!=null&&m-E.detectedGoneAt>=pje);if(h.length>0){let E=Math.min(...h.map(V=>V.detectedGoneAt)),O=BigInt(E)>Mae?BigInt(E)-Mae:0n,$=await kre(O,y,t);$.length>0&&await K5(e,{outflows:[],inflows:$});let B=$.length>0?$.map(V=>le(V.amount,18)).join(", "):"0";for(let V of h){let D=gje($.length>0,h.length>1,B,V);await ka(e,{ts:Date.now(),type:"trade_close",tradeHash:V.tradeHash,pair:V.pair,side:V.side,pnl:D,text:`Keeper close: ${V.pair} ${V.side} \u2014 inflows: ${D}`,protocol:"leverup"}),I2(e,V.tradeHash),i++}}let w=g.length-h.length,v=7200*1e3,T=Date.now();function A(E){return E.status==="pending_fill"&&!E.tradeHash&&T-E.openedAt>v}let _=a.filter(E=>!A(E));return _.length<a.length&&X5(e,_),{trackedCount:a.length,linkedCount:o,settledCount:i,pendingSettlementCount:w}}function gje(e,t,n,r){if(e)return t?`batch total: ${n}`:n;let a=r.stopLoss&&r.stopLoss!=="0",s=r.takeProfit&&r.takeProfit!=="0";return a||s?"0 (TP/SL was set \u2014 possible query miss or liquidation)":"0 (liquidation or expired)"}var hje=C.object({symbol:C.string().describe("The asset symbol to trade (e.g. BTC, ETH, MON, AAPL, EUR). NOTE: 500BTC and 500ETH are Zero-Fee pairs that ONLY support 500x, 750x, or 1001x leverage."),isLong:C.boolean().describe("True for Long, False for Short."),marginAmount:C.string().describe("The amount of collateral to use (e.g. '10' for 10 MON). Recommended minimum: $10 USD."),leverage:C.number().min(1).max(1001).describe("Leverage multiplier. Normal pairs: 1-100x with 0.045% fees. Zero-Fee pairs (500BTC/500ETH): ONLY 500, 750, or 1001 (no fees if PnL < 0, profit sharing if profitable). HARD LIMIT: Position size (margin \xD7 leverage) must be at least $200 USD."),collateralToken:C.enum(["MON","USDC","LVUSD","LVMON"]).default("MON").optional().describe("Collateral token: MON (native), USDC, LVUSD (vault USD), or LVMON (vault MON). Default: MON.")});function Nae(e){e.tool("leverup_get_quote","Calculate position size, liquidation price, and fees for a potential LeverUp trade.",hje.shape,async t=>{let n=await xje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function xje(e){try{let t=await J6(e.symbol,e.isLong,e.marginAmount,e.leverage,e.collateralToken),n=e.isLong?"Long":"Short",r=Number(t.positionSize).toFixed(6),a=`Quote for ${e.leverage}x ${n} on ${e.symbol}: Size ${r} units, Liq Price $${t.liqPrice}. Distance to Liquidation: ${t.distanceToLiq}.`;return t.isHighLeveragePair&&(a+=" [Zero-Fee Pair: No fees if PnL < 0]"),t.canAddMargin||(a+=" [Cannot add/remove margin at this leverage]"),a+=` Max TP: ${t.maxTpPercent}% profit.`,t.meetsMinimums||(a+=`

\u26A0\uFE0F WARNING: `+t.warnings.join(". ")),{success:!0,message:a,data:t}}catch(t){return{success:!1,message:`Failed to get LeverUp quote: ${t instanceof Error?t.message:"Unknown error"}`}}}Te();t0();M0();mt();We();Ar();Y();var wje=C.object({symbol:C.string().describe("Asset to trade (e.g. BTC, ETH, MON). NOTE: 500BTC and 500ETH are Zero-Fee pairs that ONLY support 500x, 750x, or 1001x leverage."),isLong:C.boolean().describe("true for Long, false for Short"),marginAmount:C.string().describe("Amount of collateral (e.g. '10' for 10 MON). Recommended minimum: $10 USD."),leverage:C.number().min(1).max(1001).describe("Leverage multiplier. Normal pairs: 1-100x. Zero-Fee pairs (500BTC/500ETH): ONLY 500, 750, or 1001. HARD LIMIT: Position size (margin \xD7 leverage) must be at least $200 USD."),collateralToken:C.enum(["MON","USDC","LVUSD","LVMON"]).default("MON").optional().describe("Collateral token: MON (native), USDC, LVUSD (vault USD), or LVMON (vault MON). Default: MON."),slippageBps:C.number().min(0).max(5e3).default(100).optional().describe("Slippage in basis points (default: 100 = 1%)"),stopLoss:C.string().optional().describe("Stop Loss price in USD (e.g. '85000' for $85,000). Set to automatically close position at this price to limit losses. Cannot be cancelled once set, but can be edited."),takeProfit:C.string().optional().describe("Take Profit price in USD (e.g. '100000' for $100,000). Set to automatically close position at this price to secure profits. Max TP: 500% for leverage <50x, 300% for leverage \u226550x. Cannot be cancelled once set, but can be edited."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation. Note: For ERC20 collateral, approval must be set via assistant mode first.")});function Lae(e){e.tool("leverup_open_trade","Open a market perpetual position on LeverUp. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID).",wje.shape,async t=>{try{let n=await q();if(!n||!Pe(n))throw new Error("Wallet not configured.");if(t.agentId){let j=await Hre(t.agentId,{symbol:t.symbol,isLong:t.isLong,marginAmount:t.marginAmount,leverage:t.leverage,collateralToken:t.collateralToken||"MON",slippageBps:t.slippageBps,stopLoss:t.stopLoss,takeProfit:t.takeProfit});return{content:[{type:"text",text:JSON.stringify(j,null,2)}]}}if(_t()){let j=await J6(t.symbol,t.isLong,t.marginAmount,t.leverage,t.collateralToken||"MON"),Z=Fn.find(fn=>fn.pair===`${t.symbol}/USD`||fn.pair===t.symbol);if(Z?.isHighLeverage&&!Qo(t.leverage))throw new Error(`${Z.pair} is a Zero-Fee pair that ONLY supports ${bo.join(", ")}x leverage.`);let de=BigInt(t.slippageBps??100),ne=ye(j.entryPrice,18),be=t.isLong?ne*(10000n+de)/10000n:ne*(10000n-de)/10000n,ze=t.collateralToken??"MON",pt=ye(t.marginAmount,Ca(ze)),rn=ye(j.positionSize,10),zt=await N2({symbol:t.symbol,isLong:t.isLong,amountIn:pt,leverage:t.leverage,qty:rn,price:be,collateralToken:t.collateralToken||"MON",stopLoss:t.stopLoss?ye(t.stopLoss,18):0n,takeProfit:t.takeProfit?ye(t.takeProfit,18):0n},n),ct;return ze==="MON"?ct=await zn({target:zt.to,value:zt.value,callData:zt.data},n):ct=await Vi(zt.tokenIn,zt.to,zt.amountIn,{target:zt.to,value:zt.value,callData:zt.data},n),{content:[{type:"text",text:JSON.stringify({success:ct.success,message:ct.success?`Successfully opened ${t.leverage}x ${t.isLong?"Long":"Short"} on ${t.symbol}`:ct.message,txHash:ct.txHash,explorerUrl:ct.explorerUrl,error:ct.error},null,2)}]}}let r=n.wallet.smartAccountAddress,a=n.wallet.sessionKeyAddress,s=n.network.chainId,o=await we(n),i=await J6(t.symbol,t.isLong,t.marginAmount,t.leverage,t.collateralToken||"MON"),u=Fn.find(j=>j.pair===`${t.symbol}/USD`||j.pair===t.symbol);if(u?.isHighLeverage&&!Qo(t.leverage))throw new Error(`${u.pair} is a Zero-Fee pair that ONLY supports ${bo.join(", ")}x leverage. Requested: ${t.leverage}x. Use a standard pair (BTC, ETH) for lower leverage.`);let d=parseFloat(i.entryPrice);if(t.takeProfit){let j=parseFloat(t.takeProfit),Z=X6(t.leverage),de=t.isLong?(j-d)/d*100:(d-j)/d*100;if(de<=0){let ne=t.isLong?"above":"below";throw new Error(`Invalid Take Profit price. For a ${t.isLong?"Long":"Short"} position, TP must be ${ne} entry price ($${d}).`)}if(de>Z)throw new Error(`Take Profit exceeds maximum allowed. For ${t.leverage}x leverage, max TP is ${Z}% profit. Requested TP would be ~${de.toFixed(1)}% profit.`)}if(t.stopLoss){let j=parseFloat(t.stopLoss);if(t.isLong?j>=d:j<=d){let de=t.isLong?"below":"above";throw new Error(`Invalid Stop Loss for ${t.isLong?"Long":"Short"} position. SL price ($${j}) must be ${de} entry price ($${d}).`)}}let l=BigInt(t.slippageBps??100),p=ye(i.entryPrice,18),y=t.isLong?p*(10000n+l)/10000n:p*(10000n-l)/10000n,m=t.collateralToken??"MON",g=ye(t.marginAmount,Ca(m)),h=ye(i.positionSize,10),w=await N2({symbol:t.symbol,isLong:t.isLong,amountIn:g,leverage:t.leverage,qty:h,price:y,collateralToken:t.collateralToken||"MON",stopLoss:t.stopLoss?ye(t.stopLoss,18):0n,takeProfit:t.takeProfit?ye(t.takeProfit,18):0n},n),v=Ee(s,o),T=_e({chain:v,transport:Ze(o,n)}),A=Ca(m);if(m==="MON"){let j=await T.getBalance({address:r});if(j<w.value){let Z=le(w.amountIn,A),de=le(w.amountIn-g,A),ne=le(w.value,A);throw new Error(`Insufficient native MON balance. Required: ${ne} MON (${t.marginAmount} margin + ${de} trading fee + Pyth fee). Available: ${le(j,A)} MON.`)}}else{let j=m==="USDC"?V0:m==="LVUSD"?g0:h0,Z=await T.readContract({address:j,abi:Xe,functionName:"balanceOf",args:[r]});if(Z<w.amountIn){let de=le(w.amountIn,A),ne=le(Z,A),be=le(w.amountIn-g,A);throw new Error(`Insufficient ${m} balance. Required: ${de} ${m} (${t.marginAmount} margin + ${be} fee), Available: ${ne} ${m}.`)}}let _=await Tn(T,r),E=[];if(m!=="MON"){let j=w.tokenIn,Z=await T.readContract({address:j,abi:Xe,functionName:"allowance",args:[r,w.to]});if(Z<w.amountIn){if(Z>0n){let ne=cs({tokenAddress:j,spender:w.to,amount:0n,delegator:r,sessionKey:a,nonce:_,chainId:s});E.push({delegation:ne.delegation,execution:{target:j,value:0n,callData:X({abi:Xe,functionName:"approve",args:[w.to,0n]})},kind:"approve"})}let de=cs({tokenAddress:j,spender:w.to,amount:w.amountIn,delegator:r,sessionKey:a,nonce:_,chainId:s});E.push({delegation:de.delegation,execution:{target:j,value:0n,callData:X({abi:Xe,functionName:"approve",args:[w.to,w.amountIn]})},kind:"approve"})}}let O=I0e({diamond:w.to,delegator:r,sessionKey:a,nonce:_,chainId:s,calldata:w.data,value:w.value});E.push({delegation:O.delegation,execution:{target:w.to,value:w.value,callData:w.data},kind:"leverup_open"});for(let j of E){let Z;j.kind==="approve"?Z=`Approve ${m} for LeverUp`:Z=`LeverUp: ${t.leverage}x ${t.isLong?"Long":"Short"} ${t.symbol}`;let de=await _n(j.delegation,s,n.wallet.keyId,Z);j.delegation.signature=de}let $=await ht(),B=on($),V=Tt({account:B,chain:v,transport:Ze(o,n)}),D=E.filter(j=>j.kind==="approve");if(D.length>0){let j=D.map(ne=>({permissionContext:[ne.delegation],executions:[Pt({target:ne.execution.target,value:ne.execution.value,callData:ne.execution.callData})],mode:nn.SingleDefault})),Z=await dn(V,T,Ue.delegationManager,j);if((await Xt(T,Z)).status!=="success")return{content:[{type:"text",text:JSON.stringify({success:!1,message:"Failed to approve token. Transaction reverted."},null,2)}]}}let G=E.find(j=>j.kind==="leverup_open");if(!G)return{content:[{type:"text",text:JSON.stringify({success:!1,message:"Internal error: trade delegation not found."},null,2)}]};let N=[{permissionContext:[G.delegation],executions:[Pt({target:G.execution.target,value:G.execution.value,callData:G.execution.callData})],mode:nn.SingleDefault}],W=await dn(V,T,Ue.delegationManager,N),me=await Xt(T,W);return{content:[{type:"text",text:JSON.stringify({success:me.status==="success",message:me.status==="success"?`Successfully opened ${t.leverage}x ${t.isLong?"Long":"Short"} on ${t.symbol}`:"Transaction reverted on-chain",txHash:W,explorerUrl:`https://monadvision.com/tx/${W}`},null,2)}]}}catch(n){return{content:[{type:"text",text:JSON.stringify({success:!1,message:n instanceof Error?n.message:"Unknown error"},null,2)}]}}})}Te();t0();M0();mt();We();Ar();Y();var vje=C.object({tradeHash:C.string().regex(/^0x[a-fA-F0-9]{64}$/).describe("The unique identifier of the position to close."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Bae(e){e.tool("leverup_close_trade","Close an existing LeverUp perpetual position. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID).",vje.shape,async t=>{try{let n=await q();if(!n||!Pe(n))throw new Error("Wallet not configured.");if(t.agentId){let A=await Rre(t.agentId,t.tradeHash);return{content:[{type:"text",text:JSON.stringify(A,null,2)}]}}if(_t()){let A=await L2(t.tradeHash),_=await zn({target:A.to,value:A.value,callData:A.data},n);return{content:[{type:"text",text:JSON.stringify({success:_.success,message:_.success?`Successfully closed position ${t.tradeHash}`:_.message,txHash:_.txHash,explorerUrl:_.explorerUrl,error:_.error},null,2)}]}}let r=n.wallet.smartAccountAddress,a=n.wallet.sessionKeyAddress,s=n.network.chainId,o=await we(n),i=await L2(t.tradeHash),u=Ee(s,o),d=_e({chain:u,transport:Ze(o,n)}),l=await Tn(d,r),p=C0e({diamond:i.to,delegator:r,sessionKey:a,nonce:l,chainId:s,calldata:i.data}),y=`Close LeverUp Position: ${t.tradeHash.slice(0,10)}...`,m=await _n(p.delegation,s,n.wallet.keyId,y);p.delegation.signature=m;let g=await ht(),h=on(g),w=Tt({account:h,chain:u,transport:Ze(o,n)}),v=await dn(w,d,Ue.delegationManager,[{permissionContext:[p.delegation],executions:[Pt({target:i.to,value:i.value,callData:i.data})],mode:nn.SingleDefault}]),T=await Xt(d,v);return{content:[{type:"text",text:JSON.stringify({success:T.status==="success",message:T.status==="success"?`Successfully closed position ${t.tradeHash}`:"Transaction reverted on-chain",txHash:v,explorerUrl:`https://monadvision.com/tx/${v}`},null,2)}]}}catch(n){return{content:[{type:"text",text:JSON.stringify({success:!1,message:n instanceof Error?n.message:"Unknown error"},null,2)}]}}})}Te();t0();M0();mt();We();Ar();Y();m0();var Tje=C.object({tradeHash:C.string().regex(/^0x[a-fA-F0-9]{64}$/).describe("The unique identifier of the position."),amount:C.string().describe("Amount of collateral to add (e.g. '5' for 5 MON)."),collateralToken:C.enum(["MON","USDC","LVUSD","LVMON"]).default("MON").describe("Collateral token matching the position's collateral. IMPORTANT: Positions opened with 500x, 750x, or 1001x leverage (Zero-Fee mode) CANNOT add margin - this operation will fail for those positions."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Uae(e){switch(e){case"USDC":return V0;case"LVUSD":return g0;case"LVMON":return h0;default:return Qr}}function Hae(e){e.tool("leverup_update_margin","Add collateral to an existing LeverUp position. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). NOTE: Only ADDING margin is supported. This does NOT work for Zero-Fee positions (500x/750x/1001x leverage).",Tje.shape,async t=>{try{let n=await q();if(!n||!Pe(n))throw new Error("Wallet not configured.");if(t.agentId){let $=await Mre(t.agentId,t.tradeHash,t.amount,t.collateralToken||"MON");return{content:[{type:"text",text:JSON.stringify($,null,2)}]}}if(_t()){let $=t.collateralToken||"MON",B=Uae($),V=$==="MON",D=ye(t.amount,Ca($)),G=B2(t.tradeHash,B,D,V),N;return V?N=await zn({target:G.to,value:G.value,callData:G.data},n):N=await Vi(B,Kn,D,{target:G.to,value:G.value,callData:G.data},n),{content:[{type:"text",text:JSON.stringify({success:N.success,message:N.success?`Successfully added ${t.amount} ${$} margin`:N.message,txHash:N.txHash,explorerUrl:N.explorerUrl,error:N.error},null,2)}]}}let r=n.wallet.smartAccountAddress,a=n.wallet.sessionKeyAddress,s=n.network.chainId,o=await we(n),i=t.collateralToken||"MON",u=Uae(i),d=i==="MON",l=ye(t.amount,Ca(i)),p=B2(t.tradeHash,u,l,d),y=Ee(s,o),m=_e({chain:y,transport:Ze(o,n)}),g=[],h=await xt(()=>Tn(m,r),{operationName:"get-delegation-nonce"});if(!d&&await xt(async()=>m.readContract({address:u,abi:Xe,functionName:"allowance",args:[r,Kn]}),{operationName:"check-allowance"})<l){let B=cs({tokenAddress:u,spender:Kn,amount:l,delegator:r,sessionKey:a,nonce:h,chainId:s});g.push({delegation:B.delegation,execution:{target:u,value:0n,callData:X({abi:Xe,functionName:"approve",args:[Kn,l]})}})}let w=P0e({diamond:p.to,delegator:r,sessionKey:a,nonce:h,chainId:s,calldata:p.data,value:p.value});g.push({delegation:w.delegation,execution:{target:p.to,value:p.value,callData:p.data}});let v=`Add ${t.amount} ${i} Margin to ${t.tradeHash.slice(0,10)}...`;for(let $ of g){let B=await _n($.delegation,s,n.wallet.keyId,v);$.delegation.signature=B}let T=await ht(),A=on(T),_=Tt({account:A,chain:y,transport:Ze(o,n)}),E=await dn(_,m,Ue.delegationManager,g.map($=>({permissionContext:[$.delegation],executions:[Pt($.execution)],mode:nn.SingleDefault}))),O=await Xt(m,E);return{content:[{type:"text",text:JSON.stringify({success:O.status==="success",message:O.status==="success"?`Successfully added ${t.amount} ${i} margin`:"Transaction reverted on-chain",txHash:E,explorerUrl:`https://monadvision.com/tx/${E}`},null,2)}]}}catch(n){let r=n instanceof Error?n.message:"Unknown error";return{content:[{type:"text",text:JSON.stringify({success:!1,message:"Failed to add margin",error:r},null,2)}]}}})}Te();t0();M0();mt();We();Ar();Y();m0();var Sje=C.object({tradeHash:C.string().regex(/^0x[a-fA-F0-9]{64}$/).describe("The unique identifier of the position."),takeProfit:C.string().optional().describe("New take profit price in USD (e.g. '110000' for $110,000). Set to '0' or omit to disable TP."),stopLoss:C.string().optional().describe("New stop loss price in USD (e.g. '95000' for $95,000). Set to '0' or omit to disable SL."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Fae(e){e.tool("leverup_update_tpsl","Update take profit and/or stop loss on an existing LeverUp position. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). Set a price to '0' to disable that trigger. At least one of takeProfit or stopLoss must be provided.",Sje.shape,async t=>{try{let n=await q();if(!n||!Pe(n))throw new Error("Wallet not configured.");if(t.takeProfit===void 0&&t.stopLoss===void 0)throw new Error("At least one of takeProfit or stopLoss must be provided.");if(t.stopLoss&&t.stopLoss!=="0"){let B=n.wallet.smartAccountAddress,D=(await J5(B)).find(G=>G.position.positionHash===t.tradeHash);if(D){let G=Number(le(D.position.entryPrice,18)),N=Number(t.stopLoss),W=D.position.isLong,me=W&&N>=G,j=!W&&N<=G;if(me){let Z=(G*.99).toFixed(2);throw new Error(`Invalid SL for LONG: SL ($${N}) must be below entry ($${G.toFixed(2)}). LeverUp requires SL in loss direction. Suggested: $${Z}`)}if(j){let Z=(G*1.01).toFixed(2);throw new Error(`Invalid SL for SHORT: SL ($${N}) must be above entry ($${G.toFixed(2)}). LeverUp requires SL in loss direction. Suggested: $${Z}`)}}}if(t.agentId){let B=await $re(t.agentId,t.tradeHash,t.takeProfit,t.stopLoss);return{content:[{type:"text",text:JSON.stringify(B,null,2)}]}}if(_t()){let B=t.takeProfit?ye(t.takeProfit,18):0n,V=t.stopLoss?ye(t.stopLoss,18):0n,D=U2(t.tradeHash,B,V),G=await zn({target:D.to,value:D.value,callData:D.data},n),N=[];return t.takeProfit&&N.push(t.takeProfit==="0"?"TP disabled":`TP=$${t.takeProfit}`),t.stopLoss&&N.push(t.stopLoss==="0"?"SL disabled":`SL=$${t.stopLoss}`),{content:[{type:"text",text:JSON.stringify({success:G.success,message:G.success?`Successfully updated ${N.join(", ")}`:G.message,txHash:G.txHash,explorerUrl:G.explorerUrl,error:G.error},null,2)}]}}let r=n.wallet.smartAccountAddress,a=n.wallet.sessionKeyAddress,s=n.network.chainId,o=await we(n),i=t.takeProfit?ye(t.takeProfit,18):0n,u=t.stopLoss?ye(t.stopLoss,18):0n,d=U2(t.tradeHash,i,u),l=Ee(s,o),p=_e({chain:l,transport:Ze(o,n)}),y=await xt(()=>Tn(p,r),{operationName:"get-delegation-nonce"}),m=D0e({diamond:d.to,delegator:r,sessionKey:a,nonce:y,chainId:s,calldata:d.data}),g=t.takeProfit?`TP=$${t.takeProfit}`:"",h=t.stopLoss?`SL=$${t.stopLoss}`:"",w=`Update ${[g,h].filter(Boolean).join(", ")} on ${t.tradeHash.slice(0,10)}...`,v=await _n(m.delegation,s,n.wallet.keyId,w);m.delegation.signature=v;let T=await ht(),A=on(T),_=Tt({account:A,chain:l,transport:Ze(o,n)}),E=await dn(_,p,Ue.delegationManager,[{permissionContext:[m.delegation],executions:[Pt({target:d.to,value:d.value,callData:d.data})],mode:nn.SingleDefault}]),O=await Xt(p,E),$=[];return t.takeProfit&&$.push(t.takeProfit==="0"?"TP disabled":`TP=$${t.takeProfit}`),t.stopLoss&&$.push(t.stopLoss==="0"?"SL disabled":`SL=$${t.stopLoss}`),{content:[{type:"text",text:JSON.stringify({success:O.status==="success",message:O.status==="success"?`Successfully updated ${$.join(", ")}`:"Transaction reverted on-chain",txHash:E,explorerUrl:`https://monadvision.com/tx/${E}`},null,2)}]}}catch(n){let r=n instanceof Error?n.message:"Unknown error";return{content:[{type:"text",text:JSON.stringify({success:!1,message:"Failed to update TP/SL",error:r},null,2)}]}}})}Y();var h$="https://benchmarks.pyth.network/v1/shims/tradingview",gp={BTC:"Crypto.BTC/USD",ETH:"Crypto.ETH/USD",MON:"Crypto.MON/USD",SOL:"Crypto.SOL/USD",XRP:"Crypto.XRP/USD",DOGE:"Crypto.DOGE/USD",ADA:"Crypto.ADA/USD",AVAX:"Crypto.AVAX/USD",DOT:"Crypto.DOT/USD",LINK:"Crypto.LINK/USD",ATOM:"Crypto.ATOM/USD",NEAR:"Crypto.NEAR/USD",APT:"Crypto.APT/USD",SUI:"Crypto.SUI/USD",ARB:"Crypto.ARB/USD",OP:"Crypto.OP/USD",QQQ:"Equity.US.QQQ/USD",SPY:"Equity.US.SPY/USD",DIA:"Equity.US.DIA/USD",IWM:"Equity.US.IWM/USD",AAPL:"Equity.US.AAPL/USD",AMZN:"Equity.US.AMZN/USD",TSLA:"Equity.US.TSLA/USD",NVDA:"Equity.US.NVDA/USD",META:"Equity.US.META/USD",MSFT:"Equity.US.MSFT/USD",GOOG:"Equity.US.GOOG/USD",GOOGL:"Equity.US.GOOGL/USD",AMD:"Equity.US.AMD/USD",NFLX:"Equity.US.NFLX/USD",EUR:"FX.EUR/USD",GBP:"FX.GBP/USD",JPY:"FX.USD/JPY",CHF:"FX.USD/CHF",AUD:"FX.AUD/USD",CAD:"FX.USD/CAD","EUR/USD":"FX.EUR/USD","GBP/USD":"FX.GBP/USD","USD/JPY":"FX.USD/JPY","USD/CHF":"FX.USD/CHF","AUD/USD":"FX.AUD/USD","USD/CAD":"FX.USD/CAD",XAU:"Metal.XAU/USD",XAG:"Metal.XAG/USD",GOLD:"Metal.XAU/USD",SILVER:"Metal.XAG/USD"};var x$={1:"1 minute",5:"5 minutes",15:"15 minutes",30:"30 minutes",60:"1 hour",240:"4 hours",D:"Daily","1W":"Weekly","1M":"Monthly"},w$={1:60,5:300,15:900,30:1800,60:3600,240:14400,D:86400,"1W":604800,"1M":2592e3};m0();function G2(e,t=!1){let n;return e>=1e3?n=e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):e>=1?n=e.toFixed(2):n=e.toFixed(6),t?`$${n}`:n}function zae(e){let t=e.toUpperCase().trim();if(gp[t])return gp[t];if(t.startsWith("CRYPTO.")||t.startsWith("EQUITY.")||t.startsWith("FX.")||t.startsWith("METAL."))return t;let n=t.match(/^([A-Z0-9]+)\/USD$/);if(n){let r=n[1];return gp[r]?gp[r]:`Crypto.${r}/USD`}return`Crypto.${t}/USD`}function jae(e){let t=e.match(/(?:Crypto\.|Equity\.US\.|FX\.|Metal\.)?([A-Z0-9]+)(?:\/USD)?$/i);return t?t[1].toUpperCase():e}async function v$(e,t="60",n=100){let r=zae(e),a=jae(r),s=Math.floor(Date.now()/1e3),o=w$[t],i=s-n*o,u=new URL(`${h$}/history`);u.searchParams.set("symbol",r),u.searchParams.set("resolution",t),u.searchParams.set("from",String(i)),u.searchParams.set("to",String(s));let d=await xt(async()=>{let v=await fetch(u.toString(),{headers:{Accept:"application/json"}});if(!v.ok)throw new Error(`Pyth API error (${v.status}): ${v.statusText}`);return await v.json()},{operationName:`pyth-chart-${e}`,maxRetries:2});if(d.s==="error")throw new Error(d.errmsg||"Pyth Benchmark API error");if(d.s==="no_data"||!d.t||d.t.length===0)throw new Error(`No chart data available for ${e}. The symbol may not be supported or market may be closed.`);let l=d.t.map((v,T)=>({timestamp:v,datetime:new Date(v*1e3).toISOString(),open:d.o[T],high:d.h[T],low:d.l[T],close:d.c[T],volume:d.v?.[T]??0})),p=l[l.length-1].close,y=l[0].open,m=p-y,g=(m/y*100).toFixed(2),h=Math.max(...l.map(v=>v.high)),w=Math.min(...l.map(v=>v.low));return{symbol:a,pythSymbol:r,resolution:t,resolutionLabel:x$[t],candles:l,latestPrice:p,priceChange:m,priceChangePercent:`${m>=0?"+":""}${g}%`,periodHigh:h,periodLow:w}}var Aje=C.object({symbol:C.string().optional().describe("Asset symbol to get market stats for (e.g., 'BTC', 'ETH', 'MON', 'AAPL'). If omitted, returns stats for all supported LeverUp pairs. Use this to check current prices before opening positions.")});function qae(e){e.tool("leverup_get_market_stats","Get current market prices and stats for LeverUp trading pairs. Returns real-time Pyth oracle prices for all supported markets (crypto, stocks, forex, commodities). For holding fees, funding rates, and open interest, use leverup_get_funding_rates.",Aje.shape,async t=>{let n=await _je(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function _je(e){try{let t=Fn;if(e.symbol){let o=e.symbol.toUpperCase().trim();if(t=Fn.filter(i=>i.pair.toUpperCase().startsWith(o)||i.pair.toUpperCase()===`${o}/USD`||i.pair.toUpperCase().includes(o)),t.length===0)return{success:!1,message:`No LeverUp market found for '${e.symbol}'`,error:`Symbol '${e.symbol}' is not supported on LeverUp. Use leverup_list_pairs to see all available markets.`}}let n=t.map(o=>o.pythId),r=await K6(n),a=t.map(o=>{let i=r.parsed?.find(p=>`0x${p.id}`===o.pythId),u="N/A",d="N/A",l="N/A";if(i){let p=BigInt(i.price.price)*10n**BigInt(18+i.price.expo),y=Number(le(p,18));u=G2(y,!0);let m=BigInt(i.price.conf)*10n**BigInt(18+i.price.expo),g=Number(le(m,18));d=`\xB1$${g<1?g.toFixed(4):g.toFixed(2)}`,l=new Date(i.price.publish_time*1e3).toISOString()}return{symbol:o.pair,category:o.category,currentPrice:u,priceConfidence:d,publishTime:l,isHighLeveragePair:o.isHighLeverage??!1,pairBase:o.pairBase}}),s=[...new Set(a.map(o=>o.category))];return{success:!0,message:`Market stats for ${a.length} LeverUp pair${a.length>1?"s":""}`,data:{markets:a,supportedCategories:s,note:"For holding fees, funding rates, and open interest (long/short OI), use leverup_get_funding_rates."}}}catch(t){return{success:!1,message:"Failed to fetch market stats",error:t instanceof Error?t.message:"Unknown error"}}}var Eje=C.object({symbol:C.string().optional().describe("Asset symbol to get funding rates for (e.g., 'BTC', 'ETH', 'MON'). If omitted, returns funding rates for all supported LeverUp pairs. High-leverage pairs (500BTC, 500ETH) are excluded as they use zero-fee model.")});function Gae(e){e.tool("leverup_get_funding_rates","Get funding rates, holding fees, and open interest for LeverUp perpetual pairs. Returns: (1) Holding fee rates \u2014 flat per-second carry cost by direction. (2) Real-time funding rate \u2014 directional fee based on OI imbalance (dominant side pays). (3) Open interest \u2014 long/short quantities and OI ratio for squeeze detection. Use this to assess carry costs, directional crowding, and squeeze risk before opening positions.",Eje.shape,async t=>{let n=await kje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function kje(e){try{let t=await Sre(e.symbol);if(t.length===0)return{success:!1,message:e.symbol?`No funding data found for '${e.symbol}'`:"No funding data available",error:e.symbol?`Symbol '${e.symbol}' is not supported on LeverUp. Use leverup_list_pairs to see available markets.`:"Could not fetch funding data from any pair."};let n=t.map(({symbol:r,category:a,holdingFeeRate8h:s,holdingFeeRate1h:o,fundingDirection:i,pairBase:u,marketInfo:d})=>{let l={symbol:r,category:a,holdingFeeRate8h:s,holdingFeeRate1h:o,fundingDirection:i,pairBase:u};return d&&(l.openInterest={longQty:d.longQty,shortQty:d.shortQty,oiRatio:d.oiRatio,dominantSide:d.dominantSide},l.realTimeFundingRate={rate8h:d.currentFundingRate8h,rate1h:d.currentFundingRate1h,direction:d.fundingRateDirection}),l});return{success:!0,message:`Funding rates and open interest for ${n.length} LeverUp pair${n.length>1?"s":""}`,data:{fundingRates:n,model:"LeverUp charges TWO separate fees: (1) Holding fee \u2014 flat per-second cost, varies by asset and direction. (2) Funding fee \u2014 directional, scales with OI imbalance (dominant side pays minority). The realTimeFundingRate shows the current per-second funding rate. Negative = shorts pay longs. openInterest shows long/short quantities (in asset units) and OI ratio for squeeze detection.",note:"High-leverage pairs (500BTC/500ETH) use zero-fee model and are excluded. All data read directly from on-chain Diamond Proxy contract."}}}catch(t){return{success:!1,message:"Failed to fetch funding rates",error:t instanceof Error?t.message:"Unknown error"}}}Te();t0();M0();mt();We();Ar();Y();var Ije=C.object({symbol:C.string().describe("Asset to trade (e.g. BTC, ETH, MON). NOTE: 500BTC and 500ETH are Zero-Fee pairs that ONLY support 500x, 750x, or 1001x leverage."),isLong:C.boolean().describe("true for Long (order triggers when price drops below trigger price), false for Short (order triggers when price rises above trigger price)"),marginAmount:C.string().describe("Amount of collateral (e.g. '10' for 10 MON). Recommended minimum: $10 USD."),leverage:C.number().min(1).max(1001).describe("Leverage multiplier. Normal pairs: 1-100x. Zero-Fee pairs (500BTC/500ETH): ONLY 500, 750, or 1001. HARD LIMIT: Position size (margin \xD7 leverage) must be at least $200 USD."),triggerPrice:C.string().describe("Price at which the order will trigger and fill. For LONG orders: must be BELOW current market price (buy the dip). For SHORT orders: must be ABOVE current market price (sell the top)."),collateralToken:C.enum(["MON","USDC","LVUSD","LVMON"]).default("MON").optional().describe("Collateral token: MON (native), USDC, LVUSD (vault USD), or LVMON (vault MON). Default: MON."),stopLoss:C.string().optional().describe("Stop Loss price in USD. Set to automatically close position at this price to limit losses. For Long orders, must be below the trigger price. For Short orders, must be above the trigger price."),takeProfit:C.string().optional().describe("Take Profit price in USD. Set to automatically close position at this price to secure profits. For Long orders, must be above the trigger price. For Short orders, must be below the trigger price. Max TP: 500% for leverage <50x, 300% for leverage \u226550x."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation. Note: For ERC20 collateral, approval must be set via assistant mode first.")});function Vae(e){e.tool("leverup_open_limit_order","Place a limit order on LeverUp that will trigger when the market reaches your specified price. For Long orders, the trigger price must be BELOW current market (buy the dip). For Short orders, the trigger price must be ABOVE current market (sell the top). If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID).",Ije.shape,async t=>{let n=await Cje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Cje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured. Run setup_wallet first."};if(e.agentId){let N=await Fre(e.agentId,{symbol:e.symbol,isLong:e.isLong,marginAmount:e.marginAmount,leverage:e.leverage,triggerPrice:e.triggerPrice,collateralToken:e.collateralToken||"MON",stopLoss:e.stopLoss,takeProfit:e.takeProfit});return{success:N.success,message:N.message,data:N.success?{quote:{symbol:e.symbol,side:e.isLong?"LONG":"SHORT",leverage:e.leverage,triggerPrice:`$${e.triggerPrice}`,currentPrice:"N/A (autonomous)",marginAmount:e.marginAmount,positionSize:"N/A (autonomous)",stopLoss:e.stopLoss?`$${e.stopLoss}`:void 0,takeProfit:e.takeProfit?`$${e.takeProfit}`:void 0},txHash:N.txHash,explorerUrl:N.explorerUrl}:void 0,error:N.error}}if(_t()){let N=e.collateralToken??"MON",W=await O2(e.symbol,e.isLong,e.marginAmount,e.leverage,e.triggerPrice,N);if(!W.isTriggerValid)return{success:!1,message:W.triggerValidationMessage,error:"Invalid trigger price"};if(!W.meetsMinimums)return{success:!1,message:W.warnings.join(" "),error:"Quote validation failed"};let me=Fn.find(ze=>ze.pair===`${e.symbol}/USD`||ze.pair===e.symbol);if(me?.isHighLeverage&&!Qo(e.leverage))return{success:!1,message:`${me.pair} is a Zero-Fee pair that ONLY supports ${bo.join(", ")}x leverage.`,error:"Invalid leverage for Zero-Fee pair"};let j=ye(e.triggerPrice,18),Z=ye(e.marginAmount,Ca(N)),de=ye(W.positionSize,10),ne=await H2({symbol:e.symbol,isLong:e.isLong,amountIn:Z,leverage:e.leverage,qty:de,triggerPrice:j,collateralToken:N,stopLoss:e.stopLoss?ye(e.stopLoss,18):0n,takeProfit:e.takeProfit?ye(e.takeProfit,18):0n},t),be;return N==="MON"?be=await zn({target:ne.to,value:ne.value,callData:ne.data},t):be=await Vi(ne.tokenIn,ne.to,ne.amountIn,{target:ne.to,value:ne.value,callData:ne.data},t),be.success?{success:!0,message:`Successfully placed ${e.leverage}x ${e.isLong?"Long":"Short"} limit order on ${e.symbol} at $${e.triggerPrice}`,data:{quote:{symbol:W.symbol,side:e.isLong?"LONG":"SHORT",leverage:e.leverage,triggerPrice:`$${e.triggerPrice}`,currentPrice:`$${W.currentPrice}`,marginAmount:W.marginAmount,positionSize:`$${W.positionValueUsd}`,stopLoss:e.stopLoss?`$${e.stopLoss}`:void 0,takeProfit:e.takeProfit?`$${e.takeProfit}`:void 0},txHash:be.txHash,explorerUrl:be.explorerUrl}}:{success:!1,message:be.message,error:be.error}}let n=t.wallet.smartAccountAddress,r=t.wallet.sessionKeyAddress,a=t.network.chainId,s=await we(t),o=e.collateralToken??"MON",i=await O2(e.symbol,e.isLong,e.marginAmount,e.leverage,e.triggerPrice,o);if(!i.isTriggerValid)return{success:!1,message:i.triggerValidationMessage,error:"Invalid trigger price for order direction"};if(!i.meetsMinimums)return{success:!1,message:i.warnings.join(" "),error:"Quote validation failed"};let u=Fn.find(N=>N.pair===`${e.symbol}/USD`||N.pair===e.symbol);if(u?.isHighLeverage&&!Qo(e.leverage))return{success:!1,message:`${u.pair} is a Zero-Fee pair that ONLY supports ${bo.join(", ")}x leverage. Requested: ${e.leverage}x. Use a standard pair (BTC, ETH) for lower leverage.`,error:"Invalid leverage for Zero-Fee pair"};let d=parseFloat(e.triggerPrice);if(e.takeProfit){let N=parseFloat(e.takeProfit),W=X6(e.leverage),me=e.isLong?(N-d)/d*100:(d-N)/d*100;if(me<=0){let j=e.isLong?"above":"below";return{success:!1,message:`Invalid Take Profit price. For a ${e.isLong?"Long":"Short"} limit order, TP must be ${j} trigger price ($${d}).`,error:"Invalid TP direction"}}if(me>W)return{success:!1,message:`Take Profit exceeds maximum allowed. For ${e.leverage}x leverage, max TP is ${W}% profit from trigger price. Requested TP would be ~${me.toFixed(1)}% profit.`,error:"TP exceeds maximum"}}if(e.stopLoss){let N=parseFloat(e.stopLoss);if(e.isLong?N>=d:N<=d){let me=e.isLong?"below":"above";return{success:!1,message:`Invalid Stop Loss for ${e.isLong?"Long":"Short"} limit order. SL price ($${N}) must be ${me} trigger price ($${d}).`,error:"Invalid SL direction"}}}let l=ye(e.triggerPrice,18),p=ye(e.marginAmount,Ca(o)),y=ye(i.positionSize,10),m=await H2({symbol:e.symbol,isLong:e.isLong,amountIn:p,leverage:e.leverage,qty:y,triggerPrice:l,collateralToken:o,stopLoss:e.stopLoss?ye(e.stopLoss,18):0n,takeProfit:e.takeProfit?ye(e.takeProfit,18):0n},t),g=Ee(a,s),h=_e({chain:g,transport:Ze(s,t)}),w=Ca(o);if(o==="MON"){let N=await h.getBalance({address:n});if(N<m.value){let W=le(m.amountIn,w),me=le(m.amountIn-p,w);return{success:!1,message:`Insufficient native MON balance. Required: ${le(m.value,w)} MON (${e.marginAmount} margin + ${me} trading fee + Pyth fee). Available: ${le(N,w)} MON.`,error:"Insufficient balance"}}}else{let N=o==="USDC"?V0:o==="LVUSD"?g0:h0,W=await h.readContract({address:N,abi:Xe,functionName:"balanceOf",args:[n]});if(W<m.amountIn){let me=le(m.amountIn,w),j=le(W,w),Z=le(m.amountIn-p,w);return{success:!1,message:`Insufficient ${o} balance. Required: ${me} ${o} (${e.marginAmount} margin + ${Z} fee), Available: ${j} ${o}.`,error:"Insufficient balance"}}}let v=await Tn(h,n),T=[];if(o!=="MON"){let N=m.tokenIn,W=await h.readContract({address:N,abi:Xe,functionName:"allowance",args:[n,m.to]});if(W<m.amountIn){if(W>0n){let j=cs({tokenAddress:N,spender:m.to,amount:0n,delegator:n,sessionKey:r,nonce:v,chainId:a});T.push({delegation:j.delegation,execution:{target:N,value:0n,callData:X({abi:Xe,functionName:"approve",args:[m.to,0n]})},kind:"approve"})}let me=cs({tokenAddress:N,spender:m.to,amount:m.amountIn,delegator:n,sessionKey:r,nonce:v,chainId:a});T.push({delegation:me.delegation,execution:{target:N,value:0n,callData:X({abi:Xe,functionName:"approve",args:[m.to,m.amountIn]})},kind:"approve"})}}let A=R0e({diamond:m.to,delegator:n,sessionKey:r,nonce:v,chainId:a,calldata:m.data,value:m.value});T.push({delegation:A.delegation,execution:{target:m.to,value:m.value,callData:m.data},kind:"leverup_limit_order"});for(let N of T){let W;N.kind==="approve"?W=`Approve ${o} for LeverUp`:W=`LeverUp Limit: ${e.leverage}x ${e.isLong?"Long":"Short"} ${e.symbol} @ $${e.triggerPrice}`;let me=await _n(N.delegation,a,t.wallet.keyId,W);N.delegation.signature=me}let _=await ht(),E=on(_),O=Tt({account:E,chain:g,transport:Ze(s,t)}),$=T.filter(N=>N.kind==="approve");if($.length>0){let N=$.map(j=>({permissionContext:[j.delegation],executions:[Pt({target:j.execution.target,value:j.execution.value,callData:j.execution.callData})],mode:nn.SingleDefault})),W=await dn(O,h,Ue.delegationManager,N);if((await Xt(h,W)).status!=="success")return{success:!1,message:"Failed to approve token. Transaction reverted.",error:"Approve transaction failed"}}let B=T.find(N=>N.kind==="leverup_limit_order");if(!B)return{success:!1,message:"Internal error: trade delegation not found.",error:"Missing trade delegation"};let V=[{permissionContext:[B.delegation],executions:[Pt({target:B.execution.target,value:B.execution.value,callData:B.execution.callData})],mode:nn.SingleDefault}],D=await dn(O,h,Ue.delegationManager,V);return(await Xt(h,D)).status==="success"?{success:!0,message:`Successfully placed ${e.leverage}x ${e.isLong?"Long":"Short"} limit order on ${e.symbol} at $${e.triggerPrice}. Order will trigger when market ${e.isLong?"drops to":"rises to"} your price.`,data:{quote:{symbol:i.symbol,side:e.isLong?"LONG":"SHORT",leverage:e.leverage,triggerPrice:`$${e.triggerPrice}`,currentPrice:`$${i.currentPrice}`,marginAmount:i.marginAmount,positionSize:`$${i.positionValueUsd}`,stopLoss:e.stopLoss?`$${e.stopLoss}`:void 0,takeProfit:e.takeProfit?`$${e.takeProfit}`:void 0},txHash:D,explorerUrl:`https://monadvision.com/tx/${D}`}}:{success:!1,message:"Transaction reverted on-chain. Check your collateral balance and try again.",error:"Transaction reverted"}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return{success:!1,message:`Failed to place limit order: ${n}`,error:n}}}Te();Y();var Pje=C.object({address:C.string().optional().describe("Optional address to check limit orders for. Defaults to your smart account.")});function Wae(e){e.tool("leverup_list_limit_orders","List all your pending LeverUp limit orders. These are orders that haven't been filled yet and will trigger when the market reaches the specified price. For filled positions, use leverup_list_positions instead.",Pje.shape,async t=>{let n=await Rje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Rje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured. Run setup_wallet first."};let n=e.address||t.wallet?.smartAccountAddress,r=await vre(n);if(r.length===0)return{success:!0,message:"No pending limit orders found.",data:{orders:[],note:"Limit orders trigger when the market price reaches your specified trigger price. Long orders trigger when price drops BELOW the trigger price. Short orders trigger when price rises ABOVE the trigger price."}};let a=r.map(o=>({orderHash:o.orderHash,pair:o.pair,side:o.isLong?"LONG":"SHORT",triggerPrice:`$${Number(le(o.limitPrice,18)).toFixed(2)}`,size:le(o.qty,10),margin:`${le(o.amountIn,18)} (collateral)`,stopLoss:o.stopLoss>0n?`$${Number(le(o.stopLoss,18)).toFixed(2)}`:"Not set",takeProfit:o.takeProfit>0n?`$${Number(le(o.takeProfit,18)).toFixed(2)}`:"Not set",createdAt:new Date(o.timestamp*1e3).toISOString()})),s=a.map(o=>`${o.pair} ${o.side} @ ${o.triggerPrice}`).join(", ");return{success:!0,message:`You have ${r.length} pending limit order${r.length>1?"s":""}. Summary: ${s}`,data:{orders:a,note:"To cancel an order, use leverup_cancel_limit_order with the orderHash. Orders will automatically fill when the market reaches your trigger price."}}}catch(t){return{success:!1,message:`Failed to fetch limit orders: ${t instanceof Error?t.message:"Unknown error"}`}}}Te();t0();M0();mt();We();Ar();Y();var $je=C.object({orderHashes:C.array(C.string().regex(/^0x[a-fA-F0-9]{64}$/)).min(1).describe("Array of limit order hashes to cancel. Use leverup_list_limit_orders to get the orderHashes of your pending orders."),agentId:C.string().optional().describe("Sub-agent ID for autonomous execution (no Touch ID). If omitted, uses assistant mode with Touch ID confirmation.")});function Zae(e){e.tool("leverup_cancel_limit_order","Cancel one or more pending LeverUp limit orders. If agentId provided: uses autonomous mode (no Touch ID). If no agentId: uses assistant mode (requires Touch ID). Use leverup_list_limit_orders first to see your pending orders and their orderHashes.",$je.shape,async t=>{let n=await Dje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Dje(e){try{let t=await q();if(!t||!Pe(t))return{success:!1,message:"Wallet not configured. Run setup_wallet first."};if(e.agentId){let A=await Dre(e.agentId,e.orderHashes);return{success:A.success,message:A.message,data:A.txHash?{cancelledOrders:e.orderHashes,txHash:A.txHash,explorerUrl:A.explorerUrl}:void 0,error:A.error}}if(_t()){let A=e.orderHashes,_=A.length===1?F2(A[0]):z2(A),E=await zn({target:_.to,value:_.value,callData:_.data},t);return{success:E.success,message:E.success?A.length===1?`Successfully cancelled limit order ${A[0]}`:`Successfully cancelled ${A.length} limit orders`:E.message,data:E.txHash?{cancelledOrders:A,txHash:E.txHash,explorerUrl:E.explorerUrl}:void 0,error:E.error}}let n=t.wallet.smartAccountAddress,r=t.wallet.sessionKeyAddress,a=t.network.chainId,s=await we(t),o=e.orderHashes,i=o.length===1?F2(o[0]):z2(o),u=Ee(a,s),d=_e({chain:u,transport:Ze(s,t)}),l=await Tn(d,n),p=$0e({diamond:i.to,delegator:n,sessionKey:r,nonce:l,chainId:a,calldata:i.data}),y=o.length===1?`Cancel limit order: ${o[0].slice(0,10)}...`:`Cancel ${o.length} limit orders`,m=await _n(p.delegation,a,t.wallet.keyId,y);p.delegation.signature=m;let g=await ht(),h=on(g),w=Tt({account:h,chain:u,transport:Ze(s,t)}),v=await dn(w,d,Ue.delegationManager,[{permissionContext:[p.delegation],executions:[Pt({target:i.to,value:i.value,callData:i.data})],mode:nn.SingleDefault}]);return(await Xt(d,v)).status==="success"?{success:!0,message:o.length===1?`Successfully cancelled limit order ${o[0]}`:`Successfully cancelled ${o.length} limit orders`,data:{cancelledOrders:o,txHash:v,explorerUrl:`https://monadvision.com/tx/${v}`}}:{success:!1,message:"Transaction reverted on-chain. The order may have already been filled or cancelled.",error:"Transaction reverted"}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return{success:!1,message:`Failed to cancel limit order: ${n}`,error:n}}}var Mje=C.object({symbol:C.string().describe("Asset symbol to get chart data for. Examples: 'BTC', 'ETH', 'MON', 'SOL', 'AAPL', 'NVDA', 'TSLA', 'GOLD', 'EUR'. Also accepts pair format like 'BTC/USD'. CRITICAL: Use this to analyze price trends BEFORE making trading decisions."),resolution:C.enum(["1","5","15","30","60","240","D","1W","1M"]).optional().describe("Candlestick timeframe: '1' (1min), '5', '15', '30', '60' (1hr), '240' (4hr), 'D' (daily), '1W' (weekly), '1M' (monthly). Default: '60' (1 hour)."),bars:C.number().min(1).max(500).optional().describe("Number of candles to return (1-500). Default: 100. More bars = longer history but larger response.")});function Kae(e){e.tool("market_get_chart","Get OHLCV candlestick chart data for any asset (crypto, stocks, forex, commodities). Returns price history with open/high/low/close/volume for technical analysis. Data from Pyth Network - same oracle source used for LeverUp price feeds.",Mje.shape,async t=>{let n=await Oje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Oje(e){try{let t=e.resolution||"60",n=e.bars||100,r=await v$(e.symbol,t,n),a=G2(r.latestPrice);return{success:!0,message:`${r.symbol} ${r.resolutionLabel} chart: $${a} (${r.priceChangePercent})`,data:{symbol:r.symbol,pythSymbol:r.pythSymbol,resolution:r.resolution,resolutionLabel:r.resolutionLabel,latestPrice:r.latestPrice,priceChange:r.priceChangePercent,periodHigh:r.periodHigh,periodLow:r.periodLow,candleCount:r.candles.length,candles:r.candles}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return{success:!1,message:`Failed to get chart data for ${e.symbol}`,error:n}}}We();Te();var Nje=C.object({base:C.string().optional().describe("Base currency code for exchange rates. Default: 'USD'. Examples: 'USD', 'EUR', 'GBP', 'JPY'. Rates show how much of each currency equals 1 unit of base.")});function Xae(e){e.tool("market_get_fx_reference","Get current ECB exchange rates for major currencies. Use to understand FX market conditions and currency valuations. Returns rates relative to base currency (default USD).",Nje.shape,async t=>{let n=await Lje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Lje(e){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=e.base?.toUpperCase()||"USD",s=`${gn()}/${r}/market/fx-ref?base=${a}`,o=await dt(s,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`API error (${o.status}): ${o.statusText}`);let i=await o.json();if(!i.success)throw new Error(i.error||"API returned unsuccessful response");let u=Object.keys(i.data?.rates||{}).length;return{success:!0,message:`${a} exchange rates (${u} currencies) as of ${i.data?.date}`,data:i.data}}catch(n){return{success:!1,message:"Failed to get exchange rates",error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var Bje=C.object({});function Jae(e){e.tool("market_get_currency_strength","Get currency strength matrix for major currencies (USD, EUR, GBP, JPY, etc.). Returns strength scores (0-100), 7-day momentum, and trend signals. Use to identify strong/weak currencies for FX trading decisions.",Bje.shape,async()=>{let t=await Uje();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}async function Uje(){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let n=(await q())?.network?.chainId||143,r=`${gn()}/${n}/market/strength`,a=await dt(r,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`API error (${a.status}): ${a.statusText}`);let s=await a.json();if(!s.success)throw new Error(s.error||"API returned unsuccessful response");return{success:!0,message:`Currency strength (${s.data?.currencies?.length||0} currencies): Strongest=${s.data?.strongest}, Weakest=${s.data?.weakest}`,data:s.data}}catch(t){return{success:!1,message:"Failed to get currency strength",error:t instanceof Error?t.message:"Unknown error"}}}We();Te();var Hje=C.object({});function Qae(e){e.tool("market_get_economic_events","Get upcoming high-impact economic events (FOMC, NFP, CPI, GDP, etc.). Returns events from Forex Factory with impact ratings. Use to prepare for market-moving announcements.",Hje.shape,async()=>{let t=await Fje();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}async function Fje(){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let n=(await q())?.network?.chainId||143,r=`${gn()}/${n}/market/events`,a=await dt(r,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`API error (${a.status}): ${a.statusText}`);let s=await a.json();if(!s.success)throw new Error(s.error||"API returned unsuccessful response");let o=s.events||[];return{success:!0,message:`${o.length} upcoming high-impact economic events`,data:{events:o,count:o.length}}}catch(t){return{success:!1,message:"Failed to get economic events",error:t instanceof Error?t.message:"Unknown error"}}}We();Te();var zje=C.object({});function Yae(e){e.tool("market_get_weekly_calendar","Get this week's economic calendar grouped by day. Returns high-impact events organized Monday-Friday. Use to plan trading around scheduled releases.",zje.shape,async()=>{let t=await jje();return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}})}async function jje(){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let n=(await q())?.network?.chainId||143,r=`${gn()}/${n}/market/calendar`,a=await dt(r,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`API error (${a.status}): ${a.statusText}`);let s=await a.json();if(!s.success)throw new Error(s.error||"API returned unsuccessful response");return{success:!0,message:`Weekly calendar (${s.data?.weekStart} to ${s.data?.weekEnd}): ${s.data?.totalEvents} events`,data:s.data}}catch(t){return{success:!1,message:"Failed to get weekly calendar",error:t instanceof Error?t.message:"Unknown error"}}}We();Te();var qje=C.object({limit:C.number().min(1).max(50).optional().describe("Maximum number of news items to return (1-50). Default: 50.")});function ese(e){e.tool("market_get_critical_news","Get critical and high-impact market news from the last 7 days. Uses 5-layer red detection for critical news identification. Includes central bank decisions, inflation data, and major market events.",qje.shape,async t=>{let n=await Gje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Gje(e){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=e.limit||50,s=`${gn()}/${r}/market/news?limit=${a}`,o=await dt(s,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`API error (${o.status}): ${o.statusText}`);let i=await o.json();if(!i.success)throw new Error(i.error||"API returned unsuccessful response");let u=i.events||[],d=u.filter(p=>p.isCritical).length,l=u.filter(p=>p.isHighImpact).length;return{success:!0,message:`${u.length} news items (${d} critical, ${l} high-impact)`,data:{events:u,count:u.length}}}catch(n){return{success:!1,message:"Failed to get critical news",error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var Vje=C.object({query:C.string().describe("Search keyword to find in news headlines. Examples: 'fed', 'inflation', 'bitcoin', 'trump'."),days:C.number().min(1).max(7).optional().describe("Time window for search (1-7 days). Default: 7."),limit:C.number().min(1).max(50).optional().describe("Maximum number of results (1-50). Default: 20.")});function tse(e){e.tool("market_search_news","Search news headlines by keyword over the last 7 days. Use to find specific topics like 'fed', 'inflation', 'bitcoin', etc. Returns matching news items sorted by recency.",Vje.shape,async t=>{let n=await Wje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Wje(e){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,{query:a}=e,s=e.days||7,o=e.limit||20,i=`${gn()}/${r}/market/search?q=${encodeURIComponent(a)}&days=${s}&limit=${o}`,u=await dt(i,{method:"GET",headers:{Accept:"application/json"}});if(!u.ok)throw new Error(`API error (${u.status}): ${u.statusText}`);let d=await u.json();if(!d.success)throw new Error(d.error||"API returned unsuccessful response");let l=d.events||[];return{success:!0,message:`Found ${l.length} news items matching "${a}" (last ${s} days)`,data:{query:a,days:s,events:l,count:l.length}}}catch(n){return{success:!1,message:`Failed to search news for "${e.query}"`,error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var Zje=C.object({bank:C.string().optional().describe("Filter by central bank code. Options: 'FED', 'ECB', 'BOE', 'BOC', 'RBA', 'BOJ', 'SNB', 'RBNZ'. Leave empty for all banks."),limit:C.number().min(1).max(50).optional().describe("Maximum number of speeches to return (1-50). Default: 20.")});function nse(e){e.tool("market_get_cb_speeches","Get recent central bank speeches and policy announcements. Filter by bank (FED, ECB, BOE, etc.) or get all. Includes speaker names and content classification.",Zje.shape,async t=>{let n=await Kje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Kje(e){if(!await Ct())return{success:!1,message:"Market intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=e.bank?.toUpperCase(),s=e.limit||20,o=a?`&bank=${a}`:"",i=`${gn()}/${r}/market/speeches?limit=${s}${o}`,u=await dt(i,{method:"GET",headers:{Accept:"application/json"}});if(!u.ok)throw new Error(`API error (${u.status}): ${u.statusText}`);let d=await u.json();if(!d.success)throw new Error(d.error||"API returned unsuccessful response");let l=d.speeches||[],p=l.filter(y=>y.isCritical).length;return{success:!0,message:`${l.length} speeches from ${a||"all banks"} (${p} critical)`,data:{bank:d.bank||"all",speeches:l,count:l.length}}}catch(n){return{success:!1,message:"Failed to get central bank speeches",error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var Xje=C.object({query:C.string().describe("Search query for recent tweets. Supports X search operators: 'lang:en', '-is:retweet', 'has:links', etc. Examples: 'monad', 'monad lang:en -is:retweet', '@pragma_xyz'."),max_results:C.number().min(10).max(100).optional().describe("Number of tweets to return (10-100). Default: 10. Cost scales linearly at $0.007/tweet."),sort_order:C.enum(["recency","relevancy"]).optional().describe("Sort order: 'recency' (default, newest first) or 'relevancy' (most relevant first).")});function rse(e){e.tool("x_search","Search recent tweets on X/Twitter. Returns tweets with author info and engagement metrics. Supports X search operators. Cost: $0.007 per tweet returned (variable pricing).",Xje.shape,async t=>{let n=await Jje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Jje(e){if(!await Ct())return{success:!1,message:"Social intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,{query:a}=e,s=e.max_results||10,o=e.sort_order||"recency",i=`${gn()}/${r}/x/search?q=${encodeURIComponent(a)}&max_results=${s}&sort_order=${o}`,u=await dt(i,{method:"GET",headers:{Accept:"application/json"}});if(!u.ok)throw new Error(`API error (${u.status}): ${u.statusText}`);let d=await u.json();if(!d.success)throw new Error(d.error||"API returned unsuccessful response");let l=d.tweets||[];return{success:!0,message:`Found ${l.length} tweets matching "${a}"`,data:{query:d.query||a,count:d.count||l.length,tweets:l,meta:d.meta||null}}}catch(n){return{success:!1,message:`Failed to search tweets for "${e.query}"`,error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var Qje=C.object({tweet_id:C.string().describe("The numeric tweet ID to look up. Example: '1893024529028493352'. Found in tweet URLs: x.com/user/status/{tweet_id}.")});function ase(e){e.tool("x_get_tweet","Look up a specific tweet by ID. Returns full tweet text, author info, and engagement metrics (likes, retweets, replies, quotes, bookmarks, impressions). Cost: $0.007 per call.",Qje.shape,async t=>{let n=await Yje(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Yje(e){if(!await Ct())return{success:!1,message:"Social intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=`${gn()}/${r}/x/tweet/${e.tweet_id}`,s=await dt(a,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`API error (${s.status}): ${s.statusText}`);let o=await s.json();if(!o.success)throw new Error(o.error||"API returned unsuccessful response");if(!o.tweet)throw new Error("Tweet not found");return{success:!0,message:`Tweet by ${o.tweet.author?.username?`@${o.tweet.author.username}`:"unknown"}`,data:{tweet:o.tweet}}}catch(n){return{success:!1,message:`Failed to look up tweet "${e.tweet_id}"`,error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var eqe=C.object({username:C.string().describe("X/Twitter username to look up (without @). Example: '0xelpabl0', 'vaborsh'.")});function sse(e){e.tool("x_get_user","Look up an X/Twitter user profile by username. Returns bio, follower count, tweet count, account age, and verification status. Cost: $0.014 per call.",eqe.shape,async t=>{let n=await tqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function tqe(e){if(!await Ct())return{success:!1,message:"Social intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=`${gn()}/${r}/x/user/${encodeURIComponent(e.username)}`,s=await dt(a,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`API error (${s.status}): ${s.statusText}`);let o=await s.json();if(!o.success)throw new Error(o.error||"API returned unsuccessful response");if(!o.user)throw new Error("User not found");return{success:!0,message:`@${o.user.username}: ${o.user.metrics?.followers?.toLocaleString()||0} followers`,data:{user:o.user}}}catch(n){return{success:!1,message:`Failed to look up user "${e.username}"`,error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var nqe=C.object({tweet_id:C.string().describe("The numeric tweet ID to get replies for. Example: '1893024529028493352'. Found in tweet URLs: x.com/user/status/{tweet_id}."),max_results:C.number().min(10).max(100).optional().describe("Number of replies to return (10-100). Default: 10. Cost scales linearly at $0.007/reply.")});function ose(e){e.tool("x_get_replies","Get replies to a specific tweet. Returns conversation participants sorted by recency with author info and engagement metrics. Cost: $0.007 per reply returned (variable pricing).",nqe.shape,async t=>{let n=await rqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function rqe(e){if(!await Ct())return{success:!1,message:"Social intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=e.max_results||10,s=`${gn()}/${r}/x/tweet/${e.tweet_id}/replies?max_results=${a}`,o=await dt(s,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`API error (${o.status}): ${o.statusText}`);let i=await o.json();if(!i.success)throw new Error(i.error||"API returned unsuccessful response");let u=i.replies||[];return{success:!0,message:`Found ${u.length} replies to tweet ${e.tweet_id}`,data:{tweetId:e.tweet_id,count:i.count||u.length,replies:u,meta:i.meta||null}}}catch(n){return{success:!1,message:`Failed to get replies for tweet "${e.tweet_id}"`,error:n instanceof Error?n.message:"Unknown error"}}}We();Te();var aqe=C.object({username:C.string().describe("X/Twitter username to get tweets from (without @). Example: '0xelpabl0', 'naddotfun'."),max_results:C.number().min(10).max(100).optional().describe("Number of tweets to return (10-100). Default: 10. Cost scales linearly at $0.007/tweet."),exclude:C.enum(["replies","retweets"]).optional().describe("Exclude tweet type: 'replies' or 'retweets'. Omit to include all.")});function ise(e){e.tool("x_get_user_tweets","Get a user's recent tweets by username. Returns their timeline with engagement metrics. Can exclude replies or retweets. Cost: $0.007 per tweet returned (variable pricing).",aqe.shape,async t=>{let n=await sqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function sqe(e){if(!await Ct())return{success:!1,message:"Social intelligence requires x402 mode",error:"Please run set_mode with mode 'x402' first"};try{let r=(await q())?.network?.chainId||143,a=e.max_results||10,s=`${gn()}/${r}/x/user/${encodeURIComponent(e.username)}/tweets?max_results=${a}`;e.exclude&&(s+=`&exclude=${e.exclude}`);let o=await dt(s,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`API error (${o.status}): ${o.statusText}`);let i=await o.json();if(!i.success)throw new Error(i.error||"API returned unsuccessful response");let u=i.tweets||[];return{success:!0,message:`Found ${u.length} tweets from @${e.username}`,data:{username:i.username||e.username,count:i.count||u.length,tweets:u,meta:i.meta||null}}}catch(n){return{success:!1,message:`Failed to get tweets from "@${e.username}"`,error:n instanceof Error?n.message:"Unknown error"}}}Y();Te();M0();Y();import{existsSync as T$,readFileSync as cqe,writeFileSync as uqe,unlinkSync as dqe,mkdirSync as fqe}from"node:fs";import{homedir as lqe}from"node:os";import*as S$ from"node:path";mt();m0();function cc(e){let t=-e.getTimezoneOffset(),n=t>=0?"+":"-",r=a=>String(Math.floor(Math.abs(a))).padStart(2,"0");return`${e.getFullYear()}-${r(e.getMonth()+1)}-${r(e.getDate())}T${r(e.getHours())}:${r(e.getMinutes())}:${r(e.getSeconds())}${n}${r(t/60)}:${r(t%60)}`}function Pa(e){let t=Date.now(),n=e-t;if(n<=0)return"Expired";let r=Math.floor(n/(1440*60*1e3)),a=Math.floor(n%(1440*60*1e3)/(3600*1e3));return r>0?`${r}d ${a}h`:a>0?`${a}h`:`${Math.floor(n%(3600*1e3)/(60*1e3))}m`}Y();var oqe="0x0000000000000000000000000000000000000000000000000000000000000000",cse=1440*60,z7={openMarketTrade:"0xca004414",closeTrade:"0x5177fd3b",addMargin:"0xe1379570",updateTpSl:"0x2f745df6",openLimitOrder:"0xf37afc20",cancelLimitOrder:"0x4584eff6",batchCancelLimitOrders:"0x54688625"},j7={buy:"0x6df9e92b",sell:"0x5de3085d",create:"0xba12cd8d"},V2={deposit:"0xd0e30db0",withdraw:"0x2e1a7d4d"},W2={execute:"0x1fff991f",exec:"0x2213bc0b"},Z2={transfer:"0xa9059cbb"};function use(e){switch(e){case"kairos":return[...Object.values(z7),...Object.values(V2),...Object.values(W2),...Object.values(Z2)];case"thymos":return[...Object.values(j7),...Object.values(V2),...Object.values(W2),...Object.values(Z2)];case"pragma":return[...Object.values(z7),...Object.values(j7),...Object.values(V2),...Object.values(W2),...Object.values(Z2)]}}function iqe(e,t,n){let s=[{type:"timestamp",afterThreshold:0,beforeThreshold:Math.floor(Date.now()/1e3)+e*cse},{type:"limitedCalls",limit:t}];return n!==void 0&&s.push({type:"nonce",nonce:ge(n)}),s}function dse(e){let{parentDelegation:t,subAgentAddress:n,mainAgentAddress:r,allowedTargets:a,allowedSelectors:s,expiryDays:o,valueLtePerTx:i,maxCalls:u,chainId:d,nonce:l}=e,p=E0(),m=Math.floor(Date.now()/1e3)+o*cse,g=iqe(o,u,l),h=s&&s.length>0?s:[],v=L0({environment:p,scope:{type:"functionCall",targets:a,selectors:h},from:r,to:n,caveats:g,salt:oqe}),T={...t,salt:typeof t.salt=="bigint"?t.salt:BigInt(t.salt)};v.authority=ec(T);let A=[ip.toLowerCase(),z5.toLowerCase(),z6.toLowerCase()];v.caveats=v.caveats.filter(O=>!A.includes(O.enforcer.toLowerCase()));let _=N7(a,h);v.caveats.unshift(_),v.caveats.push({enforcer:z6,terms:Zt([{type:"uint256"}],[i]),args:"0x"});let E=k0(v,d);return{delegation:v,typedData:E,expiresAt:m,approximateBudget:i*BigInt(u)}}function fse(e){let t=[];return(e.expiryDays<1||e.expiryDays>30)&&t.push("expiryDays must be between 1 and 30"),e.maxCalls<1&&t.push("maxCalls must be at least 1"),e.valueLtePerTx<0n&&t.push("valueLtePerTx must be non-negative"),e.allowedTargets.length===0&&t.push("allowedTargets must have at least one address"),{valid:t.length===0,errors:t}}var pqe="0x0000000000000000000000000000000000000000000000000000000000000000",lse=1440*60,mqe="root-delegation.json";function bqe(){let e=S$.join(lqe(),".pragma");return T$(e)||fqe(e,{recursive:!0}),e}function A$(){return S$.join(bqe(),mqe)}function yqe(e){let t=[],n=S6[e];return t.push(Qr),t.push(Kn),n?.aggregators?.router&&t.push(n.aggregators.router),e===143&&t.push(bp[143].router),t.push(V0),t.push(g0),t.push(h0),t}function gqe(){return[...Object.values(z7),...Object.values(j7),...Object.values(V2),...Object.values(W2),...Object.values(Z2)]}function hqe(e,t){return[{type:"timestamp",afterThreshold:0,beforeThreshold:Math.floor(Date.now()/1e3)+e*lse},{type:"limitedCalls",limit:t}]}function xqe(e){let{delegator:t,sessionKey:n,expiryDays:r,valueLtePerTx:a,maxCalls:s,chainId:o}=e,i=E0(),d=Math.floor(Date.now()/1e3)+r*lse,l=yqe(o),p=gqe(),y=hqe(r,s),g=L0({environment:i,scope:{type:"functionCall",targets:l,selectors:p},from:t,to:n,caveats:y,salt:pqe}),h=[ip.toLowerCase(),z5.toLowerCase(),z6.toLowerCase()];g.caveats=g.caveats.filter(T=>!h.includes(T.enforcer.toLowerCase()));let w=N7(l,p);g.caveats.unshift(w),g.caveats.push({enforcer:z6,terms:Zt([{type:"uint256"}],[a]),args:"0x"});let v=k0(g,o);return{delegation:g,typedData:v,expiresAt:d,approximateBudget:a*BigInt(s),allowedTargets:l}}async function pse(e){let{delegator:t,sessionKey:n,expiryDays:r,valueLtePerTx:a,maxCalls:s,chainId:o,keyId:i,touchIdMessage:u,budgetMon:d,budgetUsd:l,maxValuePerTx:p}=e,y=xqe({delegator:t,sessionKey:n,expiryDays:r,valueLtePerTx:a,maxCalls:s,chainId:o}),m=await _n(y.delegation,o,i,u??"Enable autonomous trading mode"),g={...y.delegation,signature:m},h={...y.delegation,salt:BigInt(y.delegation.salt)},v={delegationHash:ec(h),delegation:g,allowedTargets:y.allowedTargets,sessionKey:n,delegator:t,chainId:o,createdAt:Date.now(),expiresAt:y.expiresAt*1e3,valueLtePerTx:a.toString(),maxCalls:s,approximateBudget:y.approximateBudget.toString(),budgetMon:d??Ge(a*BigInt(s)),budgetUsd:l??"0",maxValuePerTx:p??Ge(a)},T=A$();return uqe(T,JSON.stringify(v,null,2)),v}function K2(){let e=A$();if(!T$(e))return null;try{let t=cqe(e,"utf-8");return JSON.parse(t)}catch{return null}}function hp(){let e=K2();if(!e)return{exists:!1,valid:!1};let t=Date.now()<e.expiresAt,n=t?Pa(e.expiresAt):"expired";return{exists:!0,valid:t,expiresAt:e.expiresAt,expiresIn:n,budgetMon:e.budgetMon??Ge(BigInt(e.approximateBudget)),budgetUsd:e.budgetUsd??"0",maxValuePerTx:e.maxValuePerTx??Ge(BigInt(e.valueLtePerTx)),maxCalls:e.maxCalls,sessionKey:e.sessionKey,delegator:e.delegator}}async function mse(){let e=0,t=0,n=await sc();for(let a of n){if(a.walletId)try{await Ia(a.walletId),t++}catch{}try{await mp(a.id),e++}catch{}}let r=A$();return T$(r)&&dqe(r),{subAgentsCleanedUp:e,walletsReleased:t}}function bse(e){let t=[];return(e.expiryDays<1||e.expiryDays>30)&&t.push("expiryDays must be between 1 and 30"),e.maxCalls<1&&t.push("maxCalls must be at least 1"),e.valueLtePerTx<0n&&t.push("valueLtePerTx cannot be negative"),{valid:t.length===0,errors:t}}var wqe=C.object({expiryDays:C.number().min(1).max(30).default(7).describe("How many days until delegation expires. Default: 7"),budgetMon:C.number().min(0).default(50).describe("Total MON budget authorized for all agents. Sub-agent allocations must fit within this ceiling. 0 = no native MON spending allowed. Default: 50"),budgetUsd:C.number().min(0).default(0).describe("Total USD-group budget (USDC + LVUSD) authorized for all agents. 0 = no USD spending limit. Default: 0"),maxValuePerTx:C.number().min(0).default(10).describe("Maximum native MON per single transaction. On-chain enforced via ValueLteEnforcer. 0 = block ALL native MON transactions including Pyth oracle fees (prevents LeverUp even with ERC20 collateral). Set > 0 if any agent will use LeverUp or native MON. Default: 10"),maxCalls:C.number().min(1).default(100).describe("Maximum delegation calls (trades + approvals combined). Each trade may need 1-2 calls (approve + execute). Default: 100"),force:C.boolean().default(!1).describe("Force creation even if a valid root delegation exists")});function yse(e){e.tool("create_root_delegation","Create a persistent root delegation for autonomous trading mode. This requires Touch ID ONCE to authorize the Main Agent (Claude's session key) to execute trades on your behalf. After this, sub-agents can be created without requiring additional Touch ID. The delegation is time-bound and call-count limited. Use this before creating sub-agents with create_sub_agent.",wqe.shape,async t=>{let n=await vqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function vqe(e){try{let t=await q();if(!t?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let n=await ht();if(!n)return{success:!1,message:"Session key not found",error:"Please run setup_wallet to create a session key"};if(!e.force){let d=hp();if(d.exists&&d.valid)return{success:!1,message:"A valid root delegation already exists",existingDelegation:{expiresAt:d.expiresAt?new Date(d.expiresAt).toISOString():"unknown",expiresIn:d.expiresIn||"unknown",budgetMon:(d.budgetMon??"unknown")+" MON",budgetUsd:(d.budgetUsd??"0")+" USD",maxCalls:d.maxCalls??0},error:"Use force: true to replace the existing delegation, or wait for it to expire"}}let r=t.network.chainId,a=pa(e.maxValuePerTx.toString()),s=bse({expiryDays:e.expiryDays,valueLtePerTx:a,maxCalls:e.maxCalls});if(!s.valid)return{success:!1,message:"Invalid delegation parameters",error:s.errors.join(", ")};let o=await pse({delegator:t.wallet.smartAccountAddress,sessionKey:n.address,expiryDays:e.expiryDays,valueLtePerTx:a,maxCalls:e.maxCalls,chainId:r,keyId:t.wallet.keyId,touchIdMessage:`Authorize autonomous trading: ${e.budgetMon} MON + ${e.budgetUsd} USD, max ${e.maxValuePerTx} MON/tx, ${e.maxCalls} calls, ${e.expiryDays} days`,budgetMon:e.budgetMon.toString(),budgetUsd:e.budgetUsd.toString(),maxValuePerTx:e.maxValuePerTx.toString()}),i=new Date(o.expiresAt),u=Pa(o.expiresAt);return{success:!0,message:"Root delegation created successfully. You can now create sub-agents without Touch ID.",rootDelegation:{delegationHash:o.delegationHash,sessionKey:o.sessionKey,delegator:o.delegator,budgetMon:e.budgetMon+" MON",budgetUsd:e.budgetUsd+" USD",maxValuePerTx:e.maxValuePerTx+" MON/tx",maxCalls:o.maxCalls,expiresAt:i.toISOString(),expiresIn:u,allowedTargets:o.allowedTargets}}}catch(t){let n=t instanceof Error?t.message:"Unknown error";return/cancell?ed|user denied/i.test(n)?{success:!1,message:"Touch ID cancelled",error:"User cancelled Touch ID authentication"}:{success:!1,message:"Failed to create root delegation",error:n}}}Y();Te();mt();M0();We();import{randomUUID as Sqe}from"node:crypto";m0();import{spawn as Tqe}from"node:child_process";var Wi=null;function gse(){if(Wi!==null){if(Wi.exitCode===null&&!Wi.killed)return;Wi=null}try{let e=Tqe("caffeinate",["-i","-s","-w",`${process.pid}`],{stdio:"ignore"});e.on("exit",()=>{Wi=null}),e.on("error",()=>{Wi=null}),Wi=e}catch{}}function q7(){if(Wi!==null){try{Wi.kill("SIGTERM")}catch{}Wi=null}}function Aqe(){let e=u$();if(!e)return null;try{let t={...e,salt:typeof e.salt=="bigint"?e.salt:BigInt(e.salt)},n=ec(t),r=_qe(e.caveats),a=Eqe(e.caveats),s=kqe(e.caveats);return{delegationHash:n,delegation:e,allowedTargets:[],sessionKey:e.delegate,delegator:e.delegator,chainId:143,createdAt:Date.now(),expiresAt:r*1e3,valueLtePerTx:a.toString(),maxCalls:s,approximateBudget:(a*BigInt(s)).toString(),budgetMon:Ge(a*BigInt(s)),budgetUsd:"0",maxValuePerTx:Ge(a)}}catch{return null}}function _qe(e){let t=e.find(a=>a.enforcer.toLowerCase()===Ue.enforcers.timestamp.toLowerCase());if(!t?.terms||t.terms==="0x")return 0;let n=t.terms,r=s9(`0x${n.slice(34)}`,"bigint");return Number(r)}function Eqe(e){let t=e.find(r=>r.enforcer.toLowerCase()===z6.toLowerCase());if(!t?.terms||t.terms==="0x")return 0n;let[n]=ca([{type:"uint256"}],t.terms);return n}function kqe(e){let t=e.find(r=>r.enforcer.toLowerCase()===Ue.enforcers.limitedCalls.toLowerCase());if(!t?.terms||t.terms==="0x")return 0;let[n]=ca([{type:"uint256"}],t.terms);return Number(n)}var Iqe=C.object({agentType:C.enum(["kairos","thymos","pragma"]).describe("Type of sub-agent to create. kairos: Strategic/macro trader for perps (patient, calculated). thymos: Momentum trader for memecoins (fast, conviction-based). pragma: General-purpose agent for any task."),budgetMon:C.number().min(0).describe("MON trading capital for this sub-agent. Must fit within root budgetMon. kairos/pragma require >= 1 (LeverUp's 1 wei Pyth fee needs ValueLteEnforcer > 0). For ERC20 strategies, 1 MON is a safety floor, not actual spend. thymos can use 0."),budgetUsd:C.number().min(0).optional().describe("USD group budget covering USDC + LVUSD (soft limit, agent self-tracks). Default: 0"),allowedGroups:C.array(C.enum(["MON","USD"])).optional().describe("Token groups this agent is allowed to spend. MON group: native MON, WMON, LVMON. USD group: USDC, LVUSD. Tokens acquired during trading are always sellable. Omit for unrestricted access."),allowedTokens:C.array(C.string()).optional().describe("Specific tokens this agent is allowed to spend (by symbol). More specific than allowedGroups \u2014 when set, takes priority. Examples: ['LVUSD'], ['USDC', 'LVUSD'], ['WMON']. Tokens acquired during trading are always sellable. Omit for no per-token restriction."),expiryDays:C.number().min(1).max(30).default(7).describe("How many days until delegation expires. Default: 7"),maxCalls:C.number().min(1).default(20).describe("Maximum delegation calls (trades + approvals). Each trade may need 1-2 calls (approve + execute). Default: 20"),maxValuePerTx:C.number().min(0).optional().describe("Maximum native MON per single transaction. On-chain enforced via ValueLteEnforcer. If not specified, defaults to full budgetMon (each tx can spend up to the entire budget; total budget is enforced separately via LimitedCallsEnforcer). Set this lower to limit per-trade risk."),fundAmount:C.number().min(0).default(1).describe("Initial gas funding in MON. Set to 0 to skip funding. Default: 1 MON"),taskId:C.string().optional().describe("Optional Claude Code Task ID for tracking"),loopType:C.enum(["none","condition","continuous","interval"]).default("none").describe("Loop behavior. none=one-shot (agent runs once and stops), condition=until condition met (e.g., 'BTC >= 95000'), continuous=until budget/expiry exhausted, interval=periodic checks at fixed intervals"),loopCondition:C.string().optional().describe("For condition type: human-readable condition (e.g., 'BTC price >= 95000')"),loopIntervalMinutes:C.number().min(1).max(1440).optional().describe("For interval type: minutes between checks (e.g., 2 for every 2 minutes)"),mission:C.string().optional().describe("Natural language task re-injected as the agent's next prompt when the SubagentStop hook blocks exit. Must be actionable and self-contained. Example: 'Monitor BTC/USD. Buy when price hits $95,000. Budget: 10 MON.'"),maxIterations:C.number().min(0).max(1e4).default(0).describe("Safety valve: max loop iterations before forcing exit. 0 = unlimited. Default: 0")});function Cqe(e,t,n){switch(e){case"kairos":{let r=[Kn,Qr];return t&&r.push(t),r.push(V0,g0,h0),r}case"thymos":{let r=[];return n&&r.push(n),r.push(Qr),t&&r.push(t),r.push(V0,g0,h0),r}case"pragma":{let r=[Kn,Qr];return t&&r.push(t),n&&r.push(n),r.push(V0,g0,h0),r}}}function hse(e){e.tool("create_sub_agent","Create a new autonomous sub-agent with its own wallet and delegation. Sub-agents can execute trades within their budget constraints without requiring Touch ID. The delegation is signed by the session key and inherits from the user's root delegation. Use this for autonomous trading or monitoring tasks.",Iqe.shape,async t=>{let n=await Pqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Pqe(e){try{let t=await q();if(!t?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let n=await ht();if(!n)return{success:!1,message:"Session key not found",error:"Please run setup_wallet to create a session key"};let r=t.network.chainId,a=K2()??Aqe();if(!a)return{success:!1,message:"No root delegation found",error:"No delegation found. Use the delegation flow (request \u2192 approve \u2192 retrieve) to create one."};if(Date.now()>a.expiresAt)return{success:!1,message:"Root delegation has expired",error:"Delegation has expired. Please create a new one via the delegation flow."};if(a.sessionKey.toLowerCase()!==n.address.toLowerCase())return{success:!1,message:"Session key mismatch",error:"Delegation was created with a different session key. Please create a new delegation."};let s=Sqe(),o=e.taskId||`subagent-${s}`,i=await QR(o);if(!await oc(i.id))return await Ia(i.id),{success:!1,message:"Wallet key not found in Keychain",error:`Wallet ${i.id} exists in pool but private key missing from Keychain. This can happen if Keychain was reset or pragma-signer was rebuilt. Try running setup_wallet to repair, or delete ~/.pragma/wallet-pool.json and retry.`};try{let d=pa(e.budgetMon.toString()),l=e.maxValuePerTx!==void 0?pa(e.maxValuePerTx.toString()):d;if(a.budgetMon!==void 0){let ct=parseFloat(a.budgetMon),fn=await BR(),Pn=parseFloat(Ge(fn));if(Pn+e.budgetMon>ct)return await Ia(i.id),{success:!1,message:"Exceeds root MON budget",error:`Root authorized ${ct} MON. Already allocated: ${Pn} MON. Requested: ${e.budgetMon} MON. Total ${Pn+e.budgetMon} exceeds ${ct}.`}}if(a.budgetUsd!==void 0&&e.budgetUsd&&e.budgetUsd>0){let ct=parseFloat(a.budgetUsd);if(ct>0){let fn=await UR(),Pn=parseFloat(fn.toString())/1e6;if(Pn+e.budgetUsd>ct)return await Ia(i.id),{success:!1,message:"Exceeds root USD budget",error:`Root authorized ${ct} USD. Already allocated: ${Pn} USD. Requested: ${e.budgetUsd} USD.`}}}if((e.agentType==="kairos"||e.agentType==="pragma")&&e.budgetMon<1)return await Ia(i.id),{success:!1,message:"Insufficient MON budget for LeverUp agent",error:`${e.agentType} agents require budgetMon >= 1. LeverUp's Pyth oracle fee (1 wei) is sent as execution.value \u2014 budgetMon: 0 sets ValueLteEnforcer to 0, blocking it. For ERC20 strategies this is a safety floor, not actual spend. Use budgetMon >= 1 or thymos agent type.`};if(a.maxValuePerTx!==void 0){let ct=pa(a.maxValuePerTx);if(l>ct)return await Ia(i.id),{success:!1,message:"Sub-agent per-tx value exceeds root limit",error:`Sub-agent valueLtePerTx (${Ge(l)} MON) exceeds root maxValuePerTx (${a.maxValuePerTx} MON).`}}let m=S6[r]?.aggregators?.router,g=r===143?bp[143].router:void 0,h=Cqe(e.agentType,m,g),w=use(e.agentType),v=fse({subAgentAddress:i.address,mainAgentAddress:n.address,allowedTargets:h,allowedSelectors:w,expiryDays:e.expiryDays,valueLtePerTx:l,maxCalls:e.maxCalls,chainId:r});if(!v.valid)return await Ia(i.id),{success:!1,message:"Invalid delegation parameters",error:v.errors.join(", ")};let T=dse({subAgentAddress:i.address,mainAgentAddress:n.address,parentDelegation:a.delegation,allowedTargets:h,allowedSelectors:w,expiryDays:e.expiryDays,valueLtePerTx:l,maxCalls:e.maxCalls,chainId:r}),A=on(n),_=await A.signTypedData({domain:T.typedData.domain,types:T.typedData.types,primaryType:"Delegation",message:T.typedData.message}),E=e.budgetUsd&&e.budgetUsd>0?{[V0.toLowerCase()]:BigInt(Math.floor(e.budgetUsd*1e6))}:void 0,O=e.budgetUsd&&e.budgetUsd>0?{USD:BigInt(Math.floor(e.budgetUsd*1e6))}:void 0,$;if(e.allowedTokens&&e.allowedTokens.length>0){let ct=[],fn=[];for(let Pn of e.allowedTokens){let W0=Pn.toUpperCase(),Zi=E2[W0];if(Zi){ct.push(Zi);continue}let Yr=fp(Pn);if(Yr){ct.push(Yr.address);continue}fn.push(Pn)}if(fn.length>0){let Pn=Object.keys(E2).join(", ");return await Ia(i.id),{success:!1,message:`Unknown token symbols in allowedTokens: [${fn.join(", ")}]. Core tokens: ${Pn}`}}$=ct}await $R({id:s,walletId:i.id,walletAddress:i.address,agentType:e.agentType,taskId:o,budget:{monAllocated:d,tokenLimits:E,groupBudgets:O,allowedGroups:e.allowedGroups,allowedTokens:$},maxCalls:e.maxCalls,expiresAt:T.expiresAt*1e3});let B={...T.delegation,signature:_},V={...T.delegation,salt:BigInt(T.delegation.salt)},G={delegationHash:ec(V),signedDelegation:B,parentDelegationHash:a.delegationHash,rootDelegation:a.delegation,createdAt:Date.now(),expiresAt:T.expiresAt*1e3};if(await OR(s,G),e.loopType&&e.loopType!=="none"){let ct=e.mission||`Continue your ${e.agentType} agent task. `+(e.loopCondition?`Condition: ${e.loopCondition}. `:"")+"Check get_sub_agent_state for current state.";switch(e.loopType){case"continuous":t$(s,ct,e.maxIterations??0);break;case"condition":n$(s,e.loopCondition||"condition not specified",ct,e.maxIterations??0);break;case"interval":r$(s,e.loopIntervalMinutes||5,ct,e.maxIterations??0);break}}gse();let N=await we(t),W=Ee(r,N),me=_e({chain:W,transport:gt(N,Ot(t))}),j=await O0(async()=>me.getBalance({address:i.address}),{operationName:"check-wallet-balance"}),Z=j.success?j.data??0n:0n,de,ne=0n,be="none";if(e.fundAmount>0){let ct=pa(e.fundAmount.toString());if(Z>=ct)be="skipped";else{let fn=ct-Z,Pn=Tt({account:A,chain:W,transport:gt(N,Ot(t))}),W0=await O0(async()=>me.getBalance({address:n.address}),{operationName:"check-session-key-balance"});(W0.success?W0.data??0n:0n)>=fn&&(de=await Pn.sendTransaction({to:i.address,value:fn}),await me.waitForTransactionReceipt({hash:de}),ne=fn,be=Z>0n?"partial":"full")}}let ze=Z+ne,pt=T.expiresAt*1e3,rn=new Date(pt),zt=Pa(pt);return{success:!0,message:`Created ${e.agentType} sub-agent with ${e.budgetMon} MON budget`,subAgent:{id:s,walletAddress:i.address,walletBalance:Ge(ze)+" MON",agentType:e.agentType,budget:{mon:e.budgetMon+" MON",usd:(e.budgetUsd||0)+" USD",perTransaction:Ge(l)+" MON/tx",allowedGroups:e.allowedGroups||"unrestricted",allowedTokens:e.allowedTokens||"none (using allowedGroups)"},maxCalls:e.maxCalls,expiresAt:rn.toISOString(),expiresIn:zt,funding:{requested:e.fundAmount+" MON",existingBalance:Ge(Z)+" MON",transferred:Ge(ne)+" MON",decision:be},fundingTx:de,loop:e.loopType!=="none"?{type:e.loopType,active:!0,mission:e.mission,condition:e.loopCondition,intervalMinutes:e.loopIntervalMinutes,maxIterations:e.maxIterations??0}:void 0,keychainNote:"If macOS prompted for Keychain access, select 'Always Allow' to prevent interruptions during autonomous trading."}}}catch(d){try{await Ia(i.id)}catch{}throw d}}catch(t){return{success:!1,message:"Failed to create sub-agent",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();M0();We();m0();var Rqe=C.object({subAgentId:C.string().describe("The sub-agent ID (UUID) to fund"),amountMon:C.number().min(.001).default(1).describe("Amount of MON to transfer for gas. Default: 1 MON")});function xse(e){e.tool("fund_sub_agent","Transfer MON from session key to a sub-agent wallet for gas. Use to top up a sub-agent that needs more gas for transactions. Requires an active session key with sufficient balance.",Rqe.shape,async t=>{let n=await $qe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function $qe(e){try{let t=await q();if(!t?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let n=await ht();if(!n)return{success:!1,message:"Session key not found",error:"Please run setup_wallet to create a session key"};let r=await c0(e.subAgentId);if(!r)return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.subAgentId}`};let a=await oc(r.walletId);if(!a)return{success:!1,message:"Sub-agent wallet not found",error:`Wallet ${r.walletId} not found in pool or Keychain`};let s=t.network.chainId,o=await we(t),i=Ee(s,o),u=_e({chain:i,transport:gt(o,Ot(t))}),d=on(n),l=Tt({account:d,chain:i,transport:gt(o,Ot(t))}),p=await xt(async()=>u.getBalance({address:n.address}),{operationName:"check-session-key-balance"}),y=pa(e.amountMon.toString());if(p<y)return{success:!1,message:"Insufficient session key balance",error:`Session key has ${Ge(p)} MON, need ${e.amountMon} MON`};let m=await xt(async()=>u.getBalance({address:a.address}),{operationName:"check-subagent-balance"}),g=await l.sendTransaction({to:a.address,value:y});await u.waitForTransactionReceipt({hash:g});let h=await xt(async()=>u.getBalance({address:a.address}),{operationName:"check-new-balance"});return{success:!0,message:`Funded sub-agent with ${e.amountMon} MON`,funding:{subAgentId:e.subAgentId,walletAddress:a.address,amountFunded:e.amountMon+" MON",previousBalance:Ge(m)+" MON",newBalance:Ge(h)+" MON",txHash:g}}}catch(t){return{success:!1,message:"Failed to fund sub-agent",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();var Dqe=C.object({status:C.enum(["all","pending","running","paused","completed","failed","revoked"]).optional().describe("Filter by status. Default: 'all'. Options: all, running, paused, completed, failed, revoked")});function wse(e){e.tool("list_sub_agents","List all sub-agents with their status, budget remaining, and trade counts. Use to monitor autonomous trading agents. Filter by status to see only running, completed, or failed agents.",Dqe.shape,async t=>{let n=await Oqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}function Mqe(e){let t=BigInt(e.budget.monAllocated),n=BigInt(e.budget.monSpent),r=e.budget.tokenSpent?Object.keys(e.budget.tokenSpent).length:0;return{id:e.id,agentType:e.agentType,status:e.status,taskAgentId:e.taskAgentId,walletAddress:e.walletAddress,budget:{monRemaining:Ge(t-n)+" MON",tokensTracked:r},trades:{executed:e.trades.executed,max:e.trades.maxAllowed},expiresIn:Pa(e.expiresAt),createdAt:cc(new Date(e.createdAt))}}async function Oqe(e){try{if(!(await q())?.wallet)return{success:!1,message:"Wallet not configured",subAgents:[],summary:{total:0,pending:0,running:0,paused:0,completed:0,failed:0,revoked:0},error:"Please run setup_wallet first"};let n=await sc(),r=n;e.status&&e.status!=="all"&&(r=n.filter(i=>i.status===e.status));let a=r.map(Mqe),s={total:n.length,pending:0,running:0,paused:0,completed:0,failed:0,revoked:0};for(let i of n)i.status in s&&s[i.status]++;let o;if(n.length===0)o="No sub-agents found";else if(e.status&&e.status!=="all")o=`Found ${r.length} ${e.status} sub-agent(s)`;else{let i=[];s.pending>0&&i.push(`${s.pending} pending`),s.running>0&&i.push(`${s.running} running`),s.completed>0&&i.push(`${s.completed} completed`),s.failed>0&&i.push(`${s.failed} failed`),s.revoked>0&&i.push(`${s.revoked} revoked`),o=`Found ${n.length} sub-agent(s): ${i.join(", ")}`}return{success:!0,message:o,subAgents:a,summary:s}}catch(t){return{success:!1,message:"Failed to list sub-agents",subAgents:[],summary:{total:0,pending:0,running:0,paused:0,completed:0,failed:0,revoked:0},error:t instanceof Error?t.message:"Unknown error"}}}Y();T6();Te();mt();We();m0();var Nqe=C.object({subAgentId:C.string().describe("The sub-agent ID (UUID) to revoke"),sweepBalance:C.boolean().default(!1).describe("Sweep remaining gas balance back to session key. Default: false (gas stays in wallet for reuse by future agents)")});function vse(e){e.tool("revoke_sub_agent","Revoke a sub-agent's delegation, optionally sweep its balance back to session key, and return its wallet to the pool for reuse. Use this to stop an autonomous agent and reclaim its resources. For on-chain invalidation, use revoke_root_delegation with revocationMode: 'onchain' which cascades to ALL sub-delegations via NonceEnforcer nonce increment.",Nqe.shape,async t=>{let n=await Lqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Lqe(e){try{let t=await q();if(!t?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let n=await c0(e.subAgentId);if(!n)return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.subAgentId}`};let r=n.status;if(n.status==="revoked")return{success:!1,message:"Sub-agent already revoked",error:"This sub-agent has already been revoked"};let a=await oc(n.walletId);if(!a){try{await Ia(n.walletId)}catch{}return await mp(e.subAgentId),{success:!0,message:"Sub-agent cleaned up (wallet not found in Keychain)",revocation:{subAgentId:e.subAgentId,previousStatus:r,balanceSwept:"0 MON",walletReturnedToPool:!0}}}let s=t.network.chainId,o=await we(t),i=Ee(s,o),u=_e({chain:i,transport:gt(o,Ot(t))}),d=0n,l;if(e.sweepBalance&&a.privateKey){let p=await O0(async()=>u.getBalance({address:a.address}),{operationName:"check-subagent-balance"}),y=p.success?p.data??0n:0n;if(y>0n){let m=await O0(async()=>u.getGasPrice(),{operationName:"get-gas-price"}),h=(m.success?m.data??0n:0n)*21000n;if(y>h){let w=ma(a.privateKey),v=Tt({account:w,chain:i,transport:gt(o,Ot(t))}),T=y-h;try{l=await v.sendTransaction({to:t.wallet.sessionKeyAddress,value:T}),await u.waitForTransactionReceipt({hash:l}),d=T}catch(A){console.error("Failed to sweep balance:",A)}}}}await Ia(n.walletId),await mp(e.subAgentId);try{(await sc()).some(m=>m.status==="running"||m.status==="pending"||m.status==="paused")||q7()}catch{}return{success:!0,message:`Revoked and cleaned up sub-agent ${n.agentType}.`,revocation:{subAgentId:e.subAgentId,previousStatus:r,balanceSwept:Ge(d)+" MON",sweepTxHash:l,walletReturnedToPool:!0}}}catch(t){return{success:!1,message:"Failed to revoke sub-agent",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();We();m0();var Bqe=C.object({subAgentId:C.string().describe("The sub-agent ID (UUID) to get state for"),taskAgentId:C.string().optional().describe("Optional: Claude Code Task agent ID to store for resume capability. Pass this after spawning a Task to enable resume after gas top-up."),teammateName:C.string().optional().describe("Optional: Teammate name for TeammateIdle hook lookup. Pass the 'name' parameter from Task spawn (e.g., 'kairos-abc123')."),includeTrades:C.boolean().optional().describe("Include recent trade history. Default: true"),tradeLimit:C.number().min(1).max(100).optional().describe("Max number of trades to include. Default: 10")});function Tse(e){e.tool("get_sub_agent_state","Get detailed state for a specific sub-agent including budget, trades, errors, and loop config. Can store taskAgentId for resume and teammateName for TeammateIdle hook lookup. Use report_agent_status to update agent status.",Bqe.shape,async t=>{let n=await Uqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Uqe(e){try{let h=function(N){return g[N]||{symbol:N.slice(0,10),decimals:18}},E=function(N,W,me,j){let Z=C7(_,N),de=Z>0n?Z:0n,ne=W-de,be=-Z,ze=W>0n?Number(de*10000n/W)/100:0,pt=zt=>`${le(zt,me)} ${j}`,rn=zt=>`${zt>=0n?"+":"-"}${pt(zt>=0n?zt:-zt)}`;return{group:N,budget:pt(W),budgetConsumed:pt(de),remaining:pt(ne),pnl:rn(be),trackedPositions:A,utilization:`${ze.toFixed(1)}%`}};var t=h,n=E;let r=await q();if(!r?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let a=await c0(e.subAgentId);if(!a)return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.subAgentId}`};let s=!1;if((e.taskAgentId||e.teammateName)&&(await Fi(e.subAgentId,{...e.taskAgentId&&{taskAgentId:e.taskAgentId},...e.teammateName&&{teammateName:e.teammateName}}),s=!0,a=await c0(e.subAgentId),!a))return{success:!1,message:"Failed to reload state after update",error:"State was updated but could not be reloaded"};let o=await we(r),i=Ee(r.network.chainId,o),u=_e({chain:i,transport:gt(o,Ot(r))}),d=await O0(async()=>u.getBalance({address:a.walletAddress}),{operationName:"check-wallet-balance"}),l=d.success?d.data??0n:0n,p=BigInt(a.budget.monAllocated),y=BigInt(a.budget.monSpent),m=await LR(e.subAgentId),g={[Hn.toLowerCase()]:{symbol:"MON",decimals:18},[I7.toLowerCase()]:{symbol:"USDC",decimals:6},"0x754704bc059f8c67012fed69bc8a327a5aafb603":{symbol:"USDC",decimals:6},"0x0f0bdebf0f83cd1ee3974779bcb7315f9808c714":{symbol:"USDT",decimals:6},"0xe0590015a873bf326bd645c3e1266d4db41c4e6b":{symbol:"WMON",decimals:18},"0x3bd359c1119da7da1d913d1c4d2b7c461115433a":{symbol:"WMON",decimals:18},"0xfd44b35139ae53fff7d8f2a9869c503d987f00d1":{symbol:"LVUSD",decimals:18},"0x91b81bfbe3a747230f0529aa28d8b2bc898e6d56":{symbol:"LVMON",decimals:18}},w=m?Object.entries(m).map(([N,{spent:W,limit:me}])=>{let{symbol:j,decimals:Z}=h(N),de=ne=>`${le(ne,Z)} ${j}`;return{address:N,symbol:j,spent:de(W),limit:me!==null?de(me):null,remaining:me!==null?de(me-W):null}}):[],v=await FR(e.subAgentId),T=v?Object.entries(v).filter(([,N])=>N.out>0n||N.in>0n).map(([N,W])=>{let{symbol:me,decimals:j}=h(N),Z=de=>`${le(de<0n?-de:de,j)} ${me}`;return{address:N,symbol:me,out:Z(W.out),in:Z(W.in),net:`${W.net>=0n?"+":"-"}${Z(W.net>=0n?W.net:-W.net)}`,group:W.group}}):void 0,A=0;try{A=zi(e.subAgentId).length}catch{}let _=a,O=[],$=a.budget.groupBudgets?.MON?BigInt(a.budget.groupBudgets.MON):p;if(O.push(E("MON",$,18,"MON")),a.budget.groupBudgets?.USD){let N=BigInt(a.budget.groupBudgets.USD);O.push(E("USD",N,6,"USD"))}let B=R2(e.subAgentId),V;if(e.includeTrades!==!1){let N=await MR(e.subAgentId),W=e.tradeLimit||10;V=N.slice(-W).reverse().map(me=>({timestamp:cc(new Date(me.timestamp)),action:me.action,protocol:me.protocol,txHash:me.txHash,success:me.success}))}let D=Date.now(),G=a.expiresAt<D;return{success:!0,message:s?`Sub-agent ${a.agentType} updated and retrieved`:`Sub-agent ${a.agentType} (${a.status})`,updated:s,state:{id:a.id,agentType:a.agentType,status:a.status,walletAddress:a.walletAddress,walletBalance:Ge(l)+" MON",taskId:a.taskId,taskAgentId:a.taskAgentId,budget:{monAllocated:Ge(p)+" MON",monSpent:Ge(y)+" MON",monRemaining:Ge(p-y)+" MON",tokenSpending:w,tokenFlows:T,groupBudgets:O.length>0?O:void 0},trades:{executed:a.trades.executed,maxAllowed:a.trades.maxAllowed,remaining:a.trades.maxAllowed-a.trades.executed},timing:{createdAt:cc(new Date(a.createdAt)),lastActivityAt:cc(new Date(a.lastActivityAt)),expiresAt:cc(new Date(a.expiresAt)),expiresIn:Pa(a.expiresAt),isExpired:G},errors:a.errors.slice(-10).map(N=>({timestamp:cc(new Date(N.timestamp)),message:N.message,recoverable:N.recoverable})),loop:B?{type:B.type,active:B.active,mission:B.mission,condition:B.condition,intervalMinutes:B.intervalMinutes,currentIteration:B.currentIteration??0,maxIterations:B.maxIterations??0}:void 0,recentTrades:V}}}catch(r){return{success:!1,message:"Failed to get sub-agent state",error:r instanceof Error?r.message:"Unknown error"}}}Te();var Hqe=C.object({agentId:C.string().describe("The sub-agent ID (UUID) reporting its status"),status:C.enum(["running","paused","completed","failed"]).describe("The new status: 'running' = actively working, 'paused' = temporarily stopped (e.g., low gas), can resume, 'completed' = user's goal was achieved, 'failed' = user's goal was NOT achieved (expired, error, budget depleted, etc.)"),reason:C.string().optional().describe("Optional reason for the status. Examples: 'Task achieved - opened BTC long at $95,200', 'Low gas - 0.05 MON remaining', 'Delegation expired - target not reached', 'Max trades reached (10/10) - target not achieved'")});function Sse(e){e.tool("report_agent_status","Report sub-agent status. Sub-agents MUST call this to report their status: when task is completed/failed, when pausing (low gas), or when resuming. This is the unified method for all status updates.",Hqe.shape,async t=>{let n=await Fqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function Fqe(e){try{if(!(await q())?.wallet)return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"};let n=await c0(e.agentId);if(!n)return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.agentId}`};let r=n.status;if(n.status==="revoked")return{success:!1,message:"Cannot update revoked agent",error:"This sub-agent has been revoked and cannot be updated"};if(await Fi(e.agentId,{status:e.status}),e.reason)try{ka(e.agentId,{ts:Date.now(),type:e.status==="running"?"reasoning":"status",text:`[${e.status}] ${e.reason}`})}catch{}if(e.status==="completed"||e.status==="failed")try{e$(e.agentId)}catch{}return{success:!0,message:`Status updated: ${r} \u2192 ${e.status}`,previousStatus:r,newStatus:e.status,reason:e.reason}}catch(t){return{success:!1,message:"Failed to report status",error:t instanceof Error?t.message:"Unknown error"}}}Y();Te();mt();We();m0();var zqe=[{type:"function",name:"callCounts",stateMutability:"view",inputs:[{name:"delegationManager",type:"address"},{name:"delegationHash",type:"bytes32"}],outputs:[{name:"count",type:"uint256"}]}],jqe=C.object({agentId:C.string().optional().describe("Optional sub-agent ID to check. If omitted, checks root delegation status.")});function Ase(e){e.tool("check_delegation_status","Check the validity of root delegation or a sub-agent's delegation. Includes on-chain call count verification. Use without agentId to check root delegation status. Use with agentId to check a specific sub-agent's delegation. Returns expiry info, validity, and remaining calls (on-chain).",jqe.shape,async t=>{let n=await qqe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function qqe(e){try{let t=await q();return t?.wallet?e.agentId?Vqe(e.agentId,t):Gqe(t):{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first"}}catch(t){return{success:!1,message:"Failed to check delegation status",error:t instanceof Error?t.message:"Unknown error"}}}async function _se(e,t,n){if(!e)return null;try{let r=e.network.chainId,a=await we(e),s=Ee(r,a),o=E0(),i=_e({chain:s,transport:gt(a,Ot(e))}),u=await O0(async()=>i.readContract({address:o.caveatEnforcers.LimitedCallsEnforcer,abi:zqe,functionName:"callCounts",args:[o.DelegationManager,t]}),{operationName:"callCounts"});if(!u.success||u.data===void 0)return null;let d=u.data,l=Number(d),p=Math.max(0,n-l);return{used:l,limit:n,remaining:p,exhausted:p===0}}catch(r){return console.error("Failed to fetch on-chain call count:",r),null}}async function Gqe(e){let t=hp();if(!t.exists)return{success:!0,message:"No root delegation found",delegation:{type:"root",exists:!1,valid:!1,expired:!1}};let n=!t.valid,r=K2(),a=null;r&&t.maxCalls&&(a=await _se(e,r.delegationHash,t.maxCalls));let s=a?.exhausted??!1,o=t.valid&&!s,i;return n?i="Root delegation has expired":s?i="Root delegation call limit exhausted":a?i=`Root delegation valid: ${a.remaining}/${a.limit} calls remaining, expires in ${t.expiresIn}`:i=`Root delegation valid for ${t.expiresIn}`,{success:!0,message:i,delegation:{type:"root",exists:!0,valid:o,expired:n,expiresAt:t.expiresAt?new Date(t.expiresAt).toISOString():void 0,expiresIn:t.expiresIn,callCount:a??void 0,maxCalls:t.maxCalls,budgetMon:t.budgetMon,budgetUsd:t.budgetUsd,maxValuePerTx:t.maxValuePerTx}}}async function Vqe(e,t){let n=await c0(e);if(!n)return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e}`};let r=await pp(e);if(!r)return{success:!0,message:"Sub-agent exists but delegation not found",delegation:{type:"sub-agent",exists:!1,valid:!1,expired:!1,agentId:e,agentType:n.agentType,agentStatus:n.status}};let s=Date.now()>r.expiresAt,o=null,i=n.trades.maxAllowed;r.delegationHash&&(o=await _se(t,r.delegationHash,i));let u=o?.exhausted??!1,d=!s&&!u&&n.status!=="revoked"&&n.status!=="failed",l;return s?l="Sub-agent delegation has expired":u?l="Sub-agent call limit exhausted":o?l=`Sub-agent delegation valid: ${o.remaining}/${o.limit} calls remaining, expires in ${Pa(r.expiresAt)}`:l=`Sub-agent delegation valid for ${Pa(r.expiresAt)}`,{success:!0,message:l,delegation:{type:"sub-agent",exists:!0,valid:d,expired:s,expiresAt:new Date(r.expiresAt).toISOString(),expiresIn:s?"expired":Pa(r.expiresAt),callCount:o??void 0,agentId:e,agentType:n.agentType,agentStatus:n.status,tradesExecuted:n.trades.executed,tradesMax:n.trades.maxAllowed}}}Y();We();m0();M0();Te();var Wqe=[{type:"function",name:"incrementNonce",stateMutability:"nonpayable",inputs:[{name:"delegationManager",type:"address"}],outputs:[]}];var Zqe=[{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],outputs:[],stateMutability:"payable"}],Ese=500000n,kse=400000n,Ise=100000n;async function Kqe(e){return xt(async()=>{let t=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"pimlico_getUserOperationGasPrice",params:[],id:1})});if(!t.ok)throw new Error(`Gas price request failed: ${t.status}`);let n=await t.json();if(n.error)throw new Error(`Gas price error: ${n.error.message}`);let r=n.result?.fast??n.result?.standard;if(!r)throw new Error("No gas price data returned");return{maxFeePerGas:BigInt(r.maxFeePerGas),maxPriorityFeePerGas:BigInt(r.maxPriorityFeePerGas)}},{operationName:"revocation-gas-price"})}function _$(e){if(!e||e==="0x")return;let t=BigInt(e);return t>0n?t:void 0}async function Xqe(e,t,n){return xt(async()=>{let r=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_estimateUserOperationGas",params:[t,n],id:1})});if(!r.ok)throw new Error(`Gas estimation failed: ${r.status}`);let a=await r.json();if(a.error)throw new Error(`Gas estimation error: ${a.error.message}`);let s=a.result??{};return{callGasLimit:_$(s.callGasLimit),verificationGasLimit:_$(s.verificationGasLimit),preVerificationGas:_$(s.preVerificationGas)}},{operationName:"revocation-estimate-gas"})}function E$(e,t){return e!==void 0&&e>t?e:t}function Jqe(e,t){e.callGasLimit=E$(t.callGasLimit,Ise),e.verificationGasLimit=E$(t.verificationGasLimit,Ese),e.preVerificationGas=E$(t.preVerificationGas,kse)}async function Qqe(e,t,n){let r=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendUserOperation",params:[t,n],id:1})}),a=await r.json();if(!r.ok){let s=a.error?.message||`HTTP ${r.status}`;throw new Error(`Send UserOp failed: ${s}`)}if(a.error)throw new Error(`UserOp error: ${a.error.message}`);if(!a.result)throw new Error("No userOpHash returned");return a.result}async function Yqe(e,t,n=6e4){let r=Date.now();for(;Date.now()-r<n;){let a=await dt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_getUserOperationReceipt",params:[t],id:1})});if(a.ok){let s=await a.json();if(s.error){await new Promise(o=>setTimeout(o,2e3));continue}if(s.result?.receipt?.transactionHash)return{transactionHash:s.result.receipt.transactionHash}}await new Promise(s=>setTimeout(s,2e3))}throw new Error(`Timeout waiting for UserOp ${t}`)}async function Cse(e,t,n){let r=await Tn(t,e.address),a=X({abi:Wqe,functionName:"incrementNonce",args:[xe(Ue.delegationManager)]}),s=X({abi:Zqe,functionName:"execute",args:[{target:Ue.enforcers.nonce,value:0n,callData:a}]}),o=await Ol(n),i=await e.smartAccount.getNonce?.()??0n,u=await Kqe(o),d={sender:e.address,nonce:i,callData:s,callGasLimit:Ise,verificationGasLimit:Ese,preVerificationGas:kse,maxFeePerGas:u.maxFeePerGas,maxPriorityFeePerGas:u.maxPriorityFeePerGas,signature:"0x"},l=e.smartAccount.entryPoint.address;try{let w=Jo({...d,signature:"0x"}),v=await Xqe(o,w,l);Jqe(d,v)}catch(w){console.warn("Failed to estimate gas for nonce increment, using defaults:",w)}let p=await e.smartAccount.signUserOperation(d);d.signature=p;let y=Jo({...d,signature:p}),m=await Qqe(o,y,l),g=await Yqe(o,m);await new Promise(w=>setTimeout(w,2e3));let h=await Tn(t,e.address);return{userOpHash:m,transactionHash:g.transactionHash,previousNonce:r,newNonce:h}}Te();mt();Y();We();var eGe=C.object({confirm:C.boolean().describe("Must be true to confirm revocation. This is a destructive action that revokes ALL autonomous permissions, archives ALL sub-agent states, and releases ALL wallets."),revocationMode:C.enum(["local","onchain"]).default("local").describe("Revocation mode. 'local' (default): deletes local delegation files only. 'onchain': increments NonceEnforcer nonce via UserOp (Touch ID required), which invalidates ALL delegations on-chain, then performs local cleanup. Use 'onchain' if you suspect session key compromise or want immediate on-chain invalidation.")});function Pse(e){e.tool("revoke_root_delegation","Revoke the root delegation entirely, cascading cleanup to ALL sub-agents. Archives all sub-agent states, releases all wallets to pool, and deletes root-delegation.json. After this, no autonomous trading is possible until a new root delegation is created. Requires confirm: true as a safety measure. Set revocationMode to 'onchain' to also invalidate all delegations on-chain via NonceEnforcer (requires Touch ID, recommended if session key may be compromised).",eGe.shape,async t=>{let n=await tGe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function tGe(e){try{if(!e.confirm)return{success:!1,message:"Confirmation required",error:"Set confirm: true to proceed. This will revoke ALL autonomous permissions and archive ALL sub-agent states."};if(!hp().exists)return{success:!1,message:"No root delegation found",error:"There is no root delegation to revoke."};let n;if(e.revocationMode==="onchain"){let o=await q();if(!o||!Pe(o))return{success:!1,message:"Wallet not configured",error:"Please run setup_wallet first to use on-chain revocation."};let i=await j5(o,{touchIdMessage:"Revoke ALL delegations (nuclear revoke)"}),u=await we(o),d=Ee(o.network.chainId,u),l=_e({chain:d,transport:gt(u,Ot(o))});try{let p=await Cse(i,l,o);n={userOpHash:p.userOpHash,transactionHash:p.transactionHash,previousNonce:p.previousNonce.toString(),newNonce:p.newNonce.toString()}}catch(p){let y=p instanceof Error?p.message:"Unknown error";return/cancell?ed|user denied/i.test(y)?{success:!1,message:"Touch ID cancelled",error:"On-chain revocation requires Touch ID confirmation. Please try again."}:{success:!1,message:"On-chain revocation failed",error:`Failed to increment nonce on-chain: ${y}. Local delegation files were NOT removed.`}}}let r=await mse();q7();let a=e.revocationMode==="onchain"?"on-chain + local":"local",s=n?` Nonce incremented from ${n.previousNonce} to ${n.newNonce} (all old delegations invalidated on-chain).`:"";return{success:!0,message:`Root delegation revoked (${a}). ${r.subAgentsCleanedUp} sub-agent(s) archived, ${r.walletsReleased} wallet(s) released.`+s,revocation:{subAgentsCleanedUp:r.subAgentsCleanedUp,walletsReleased:r.walletsReleased},onChainRevocation:n}}catch(t){return{success:!1,message:"Failed to revoke root delegation",error:t instanceof Error?t.message:"Unknown error"}}}var nGe=C.object({filter:C.enum(["all","idle","active"]).default("all").describe("Filter wallets by status. idle = available for new agents, active = currently assigned to an agent, all = show everything. Default: all")});function Rse(e){e.tool("list_wallet_pool","List all wallets in the sub-agent wallet pool. Shows wallet addresses, status (idle/active), and which agent they are assigned to.",nGe.shape,async t=>{let n=rGe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}function rGe(e){try{let t=e.filter==="all"?void 0:e.filter,n=M7(t),r=e.filter==="all"?n:M7(),a=r.filter(i=>i.status==="idle").length,s=r.filter(i=>i.status==="active").length,o=n.map(i=>({id:i.id,address:i.address,status:i.status,assignedTo:i.assignedTo,lastUsedAt:new Date(i.lastUsedAt).toISOString()}));return n.length===0?{success:!0,message:e.filter==="all"?"Wallet pool is empty. A wallet will be created when you create a sub-agent.":`No ${e.filter} wallets in pool.`,data:{wallets:[],summary:{total:r.length,idle:a,active:s}}}:{success:!0,message:`${n.length} wallet${n.length>1?"s":""} in pool (${a} idle, ${s} active)`,data:{wallets:o,summary:{total:r.length,idle:a,active:s}}}}catch(t){return{success:!1,message:"Failed to list wallet pool",error:t instanceof Error?t.message:"Unknown error"}}}var aGe=C.object({agentId:C.string().describe("The sub-agent ID (UUID) to get journal entries for"),offset:C.number().min(0).optional().describe("Number of entries to skip from the start. Default: 0 (most recent first)"),limit:C.number().min(1).max(200).optional().describe("Max number of entries to return. Default: 50, max: 200"),tag:C.string().optional().describe("Filter entries by tag. Only returns entries with matching tag. Common tags: baseline, watchlist, trade_plan, position_health, scan_result, post_trade")});function $se(e){e.tool("get_agent_log","Get paginated journal log for a sub-agent. Shows trade events, reasoning, status changes, and errors. Use offset/limit for pagination. Entries are ordered newest first.",aGe.shape,async t=>{let n=await sGe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function sGe(e){try{if(!k2(e.agentId))return{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.agentId}`};let t=e.offset??0,n=e.limit??50,r=e.tag?{tag:e.tag}:void 0,{entries:a,total:s}=jR(e.agentId,t,n,r);if(a.length===0&&s===0)return{success:!0,message:"No journal entries found for this agent.",data:{entries:[],metadata:{total:0,showing:0,offset:t}}};let o=a.reverse().map(i=>{let u=new Date(i.ts).toLocaleString(),d=[];i.pair&&d.push(i.pair),i.side&&d.push(i.side),i.margin&&d.push(`margin:${i.margin}`),i.leverage&&d.push(`${i.leverage}x`),i.pnl&&d.push(`pnl:${i.pnl}`),i.txHash&&d.push(`tx:${i.txHash.slice(0,10)}...`);let l=i.text||d.join(" | ")||i.type;return{timestamp:u,type:i.type,summary:l}});return{success:!0,message:`Showing ${a.length} of ${s} journal entries`,data:{entries:o,metadata:{total:s,showing:a.length,offset:t}}}}catch(t){return{success:!1,message:"Failed to load agent journal",error:t instanceof Error?t.message:"Unknown error"}}}var oGe=C.object({agentId:C.string().describe("The sub-agent ID (UUID) writing the memo"),text:C.string().describe("The memo content. Use structured format for readability. Examples: macro baselines, watchlists with trigger levels, kill switch results, bear case arguments, position health snapshots."),tag:C.string().optional().describe("Category tag for retrieval via get_agent_log(tag: ...). Recommended tags: 'baseline' (Phase 1 macro snapshot), 'watchlist' (Phase 2 pair watchlist with trigger levels), 'trade_plan' (Phase 3 kill switch + bear case + trade params), 'position_health' (Phase 5 monitoring snapshot), 'scan_result' (Phase 5 opportunity scan output), 'post_trade' (Phase 6/7 session summary).")});function Dse(e){e.tool("write_agent_memo","Write a memo to the agent's journal. Use this to persist structured state (macro baselines, watchlists, trade reasoning, position health checks) that survives context compaction. Read back with get_agent_log(tag: '...'). Zero cost \u2014 no delegation calls consumed.",oGe.shape,async t=>{let n=await iGe(t);return{content:[{type:"text",text:JSON.stringify(n,null,2)}]}})}async function iGe(e){try{let t=await c0(e.agentId);return t?t.status==="revoked"?{success:!1,message:"Cannot write memo to revoked agent",error:"This sub-agent has been revoked and cannot accept new memos"}:(ka(e.agentId,{ts:Date.now(),type:"memo",text:e.text,tag:e.tag}),{success:!0,message:e.tag?`Memo saved with tag: ${e.tag}`:"Memo saved",tag:e.tag}):{success:!1,message:"Sub-agent not found",error:`No sub-agent found with ID: ${e.agentId}`}}catch(t){return{success:!1,message:"Failed to write memo",error:t instanceof Error?t.message:"Unknown error"}}}function Mse(e){nF(e),HZ(e),Kne(e),rae(e),d0e(e),f0e(e),nae(e),sae(e),aae(e),Jre(e),tae(e),oae(e),w0e(e),jre(e),Gre(e),Kre(e),Xre(e),iae(e),cae(e),uae(e),dae(e),fae(e),lae(e),pae(e),yae(e),gae(e),Aae(e),_ae(e),Eae(e),$ae(e),Dae(e),Oae(e),Nae(e),Lae(e),Bae(e),Hae(e),Fae(e),qae(e),Gae(e),Vae(e),Wae(e),Zae(e),Kae(e),Xae(e),Jae(e),Qae(e),Yae(e),ese(e),tse(e),nse(e),rse(e),ase(e),sse(e),ose(e),ise(e),yse(e),hse(e),xse(e),wse(e),vse(e),Tse(e),Sse(e),Ase(e),Pse(e),Rse(e),$se(e),Dse(e)}import{homedir as cGe}from"os";var Ose=cGe().startsWith("/sessions/"),Nse=new I3({name:"pragma",version:"0.1.0"});Ose?console.error("[pragma] Cowork detected \u2014 skipping tool registration (DXT handles MCP tools)"):Mse(Nse);async function uGe(){let e=new P3;await Nse.connect(e),console.error(`pragma MCP server running on stdio${Ose?" (Cowork mode \u2014 no tools)":""}`)}uGe().catch(e=>{console.error("Fatal error:",e),process.exit(1)});
/*! Bundled license information:

@noble/hashes/esm/utils.js:
@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@scure/base/lib/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
